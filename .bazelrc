build --workspace_status_command="python3 ./tools/workspace_status.py"
build --repository_cache=~/.gerritcodereview/bazel-cache/repository
build --action_env=PATH
build --disk_cache=~/.gerritcodereview/bazel-cache/cas

# Builds using remotejdk_11, executes using remotejdk_11 or local_jdk
build --java_language_version=11
build --java_runtime_version=remotejdk_11
build --tool_java_language_version=11
build --tool_java_runtime_version=remotejdk_11

# Builds using remotejdk_17, executes using remotejdk_17 or local_jdk
build:java17 --java_language_version=17
build:java17 --java_runtime_version=remotejdk_17
build:java17 --tool_java_language_version=17
build:java17 --tool_java_runtime_version=remotejdk_17

# Builds and executes on RBE using remotejdk_11
build:remote --java_language_version=11
build:remote --java_runtime_version=remotejdk_11
build:remote --tool_java_language_version=11
build:remote --tool_java_runtime_version=remotejdk_11

# Builds and executes on RBE using remotejdk_17
build:remote17 --java_language_version=17
build:remote17 --java_runtime_version=remotejdk_17
build:remote17 --tool_java_language_version=17
build:remote17 --tool_java_runtime_version=remotejdk_17

# Enable strict_action_env flag to. For more information on this feature see
# https://groups.google.com/forum/#!topic/bazel-discuss/_VmRfMyyHBk.
# This will be the new default behavior at some point (and the flag was flipped
# shortly in 0.21.0 - https://github.com/bazelbuild/bazel/issues/7026). Remove
# this flag here once flipped in Bazel again.
build --incompatible_strict_action_env

build --announce_rc

test --build_tests_only
test --test_output=errors
test --java_toolchain=//tools:error_prone_warnings_toolchain_java11

import %workspace%/tools/remote-bazelrc

build:remote-buildbuddy --tool_java_language_version=11
build:remote-buildbuddy --java_language_version=11
build:remote-buildbuddy --remote_executor=grpcs://remote.buildbuddy.io
build:remote-buildbuddy --host_platform=@buildbuddy_toolchain//:platform
build:remote-buildbuddy --platforms=@buildbuddy_toolchain//:platform
build:remote-buildbuddy --extra_execution_platforms=@buildbuddy_toolchain//:platform
build:remote-buildbuddy --crosstool_top=@buildbuddy_toolchain//:toolchain
build:remote-buildbuddy --extra_toolchains=@buildbuddy_toolchain//:cc_toolchain
build:remote-buildbuddy --javabase=@buildbuddy_toolchain//:javabase_jdk11
build:remote-buildbuddy --host_javabase=@buildbuddy_toolchain//:javabase_jdk11
build:remote-buildbuddy --java_toolchain=@buildbuddy_toolchain//:toolchain_jdk11
build:remote-buildbuddy --host_java_toolchain=@buildbuddy_toolchain//:toolchain_jdk11
build:remote-buildbuddy --define=EXECUTOR=remote
build:remote-buildbuddy --bes_results_url=https://app.buildbuddy.io/invocation/
build:remote-buildbuddy --bes_backend=grpcs://remote.buildbuddy.io
build:remote-buildbuddy --remote_cache=grpcs://remote.buildbuddy.io
build:remote-buildbuddy --remote_timeout=3600
build:remote-buildbuddy --remote_upload_local_results
build:remote-buildbuddy --remote_download_minimal
build:remote-buildbuddy --jobs=5
build:remote-buildbuddy --verbose_failures

# bazel build gerrit --config=remote-buildbuddy --remote_header=x-buildbuddy-api-key=XXXXXXXX --cpu=k8 --host_cpu=k8
