build --workspace_status_command="python ./tools/workspace_status.py" --strategy=Closure=worker
build --repository_cache=~/.gerritcodereview/bazel-cache/repository
build --action_env=PATH
build --disk_cache=~/.gerritcodereview/bazel-cache/cas
build --java_toolchain //tools:error_prone_warnings_toolchain

# Enable strict_action_env flag to. For more information on this feature see
# https://groups.google.com/forum/#!topic/bazel-discuss/_VmRfMyyHBk.
# This will be the new default behavior at some point (and the flag was flipped
# shortly in 0.21.0 - https://github.com/bazelbuild/bazel/issues/7026). Remove
# this flag here once flipped in Bazel again.
build --incompatible_strict_action_env

test --build_tests_only
test --test_output=errors

import %workspace%/tools/remote-bazelrc

build --javacopt="-XepDisableWarningsInGeneratedCode -Xep:AmbiguousMethodReference:ERROR -Xep:AssignmentToMock:ERROR -Xep:AutoValueFinalMethods:ERROR -Xep:AutoValueImmutableFields:ERROR -Xep:BadAnnotationImplementation:ERROR -Xep:BadComparable:ERROR -Xep:BoxedPrimitiveConstructor:ERROR -Xep:CompareToZero:ERROR -Xep:CannotMockFinalClass:ERROR -Xep:ClassCanBeStatic:ERROR -Xep:ClassNewInstance:ERROR -Xep:DateFormatConstant:ERROR -Xep:DeduplicateConstants:ERROR -Xep:DefaultCharset:ERROR -Xep:DiscardedPostfixExpression:ERROR -Xep:DoubleCheckedLocking:ERROR -Xep:DuplicateMapKeys:ERROR -Xep:ElementsCountedInLoop:ERROR -Xep:EscapedEntity:ERROR -Xep:EqualsHashCode:ERROR -Xep:EqualsIncompatibleType:ERROR -Xep:ExpectedExceptionChecker:ERROR -Xep:Finally:ERROR -Xep:FloatingPointLiteralPrecision:ERROR -Xep:FormatStringAnnotation:ERROR -Xep:FragmentInjection:ERROR -Xep:FragmentNotInstantiable:ERROR -Xep:FunctionalInterfaceClash:ERROR -Xep:FutureReturnValueIgnored:ERROR -Xep:GetClassOnEnum:ERROR -Xep:ImmutableAnnotationChecker:OFF -Xep:ImmutableEnumChecker:ERROR -Xep:IncompatibleModifiers:ERROR -Xep:InheritDoc:ERROR -Xep:InjectOnConstructorOfAbstractClass:ERROR -Xep:InputStreamSlowMultibyteRead:ERROR -Xep:InterfaceWithOnlyStatics:ERROR -Xep:IterableAndIterator:ERROR -Xep:InvalidBlockTag:ERROR -Xep:InvalidInlineTag:ERROR -Xep:JUnit3FloatingPointComparisonWithoutDelta:ERROR -Xep:JUnitAmbiguousTestClass:ERROR -Xep:LiteralClassName:ERROR -Xep:MissingCasesInEnumSwitch:ERROR -Xep:MissingFail:ERROR -Xep:MissingOverride:ERROR -Xep:MissingSummary:ERROR -Xep:MixedDescriptors:ERROR -Xep:MixedMutabilityReturnType:ERROR -Xep:MockitoInternalUsage:ERROR -Xep:MutableConstantField:ERROR -Xep:NarrowingCompoundAssignment:ERROR -Xep:NonAtomicVolatileUpdate:ERROR -Xep:NonOverridingEquals:ERROR -Xep:NullableConstructor:ERROR -Xep:NullablePrimitive:ERROR -Xep:NullableVoid:ERROR -Xep:ObjectToString:ERROR -Xep:OperatorPrecedence:ERROR -Xep:OptionalMapToOptional:ERROR -Xep:OutlineNone:ERROR -Xep:OverridesGuiceInjectableMethod:ERROR -Xep:PreconditionsCheckNotNullRepeated:ERROR -Xep:PreconditionsInvalidPlaceholder:ERROR -Xep:ProtoFieldPreconditionsCheckNotNull:ERROR -Xep:ProtocolBufferOrdinal:ERROR -Xep:RedundantOverride:ERROR -Xep:ReferenceEquality:ERROR -Xep:RequiredModifiers:ERROR -Xep:ShortCircuitBoolean:ERROR -Xep:SimpleDateFormatConstant:ERROR -Xep:StaticGuardedByInstance:ERROR -Xep:StringEquality:ERROR -Xep:SynchronizeOnNonFinalField:ERROR -Xep:TreeToString:ERROR -Xep:TruthConstantAsserts:ERROR -Xep:TypeEquals:ERROR -Xep:TypeParameterShadowing:ERROR -Xep:TypeParameterUnusedInFormals:ERROR -Xep:URLEqualsHashCode:ERROR -Xep:UnescapedEntity:ERROR -Xep:UnsynchronizedOverridesSynchronized:ERROR -Xep:UnusedException:ERROR -Xep:UnusedMethod:ERROR -Xep:UnusedNestedClass:ERROR -Xep:UnusedVariable:WARN -Xep:WaitNotInLoop:ERROR -Xep:WildcardImport:WARN"
