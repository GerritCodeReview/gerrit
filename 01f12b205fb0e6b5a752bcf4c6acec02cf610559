{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "056b165f_a70a5f47",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-02-01T16:50:13Z",
      "side": 1,
      "message": "I\u0027m confused. Where does this get interpreted? STandaloneSiteTest tries to shell out this program. Wouldn\u0027t that fail (--compression-level is not a git-archive option.)",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed526af7_a45825a4",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-02-01T17:39:18Z",
      "side": 1,
      "message": "Yes, indeed:\n\n  $ git version\n  2.29.2\n \n  $ git archive --compression-level\u003d1 \n  error: unknown option `compression-level\u003d1\u0027",
      "parentUuid": "056b165f_a70a5f47",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d878c84f_b37ced30",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-02-01T19:04:36Z",
      "side": 1,
      "message": "it also doesn\u0027t support the -f flag, something else is going on here. I suppose this somehow gets routed to the JGit command, but it would be good to document how this works.",
      "parentUuid": "ed526af7_a45825a4",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b81769ef_12055341",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-02-01T19:58:24Z",
      "side": 1,
      "message": "Yeah, this command is executed:\n\n  git archive \\\n  -f\u003dtar.xz \\\n  --prefix\u003d0cee55f664d8a18fc8227f3d0dfa53f9443f4973/ \\\n  --remote\u003dssh://admin@localhost:45147/upload-archive-project-test \\\n  0cee55f664d8a18fc8227f3d0dfa53f9443f4973 \\\n  a.txt\n\nThe magic part is here --remote option:\n\n  --remote\u003d\u003crepo\u003e\n  Instead of making a tar archive from the local repository, retrieve a tar archive from a remote repository.\n\nSo that the options are actually processed by Gerrit server: git-upload-archive(1):\n\n  git upload-archive \u003cdirectory\u003e\n\nDESCRIPTION\n       Invoked by git archive --remote and sends a generated archive to the other end over the Git protocol.\n\n       This command is usually not invoked directly by the end user. The UI for the protocol is on the git archive side, and the program pair is meant to be\n       used to get an archive from a remote repository.",
      "parentUuid": "d878c84f_b37ced30",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05459567_6478da76",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-02-02T08:45:06Z",
      "side": 1,
      "message": "Yes, compression-level is not a standard git archive option. The option gets interpreted by the Gerrit server (UploadArchive.java) which parses and passes the option to the JGit archive command.\n\nHandling the new option was done here: https://gerrit-review.googlesource.com/c/gerrit/+/294390/2.",
      "parentUuid": "b81769ef_12055341",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d2aab2f_59076557",
        "filename": "javatests/com/google/gerrit/integration/git/UploadArchiveIT.java",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-02-02T13:26:56Z",
      "side": 1,
      "message": "can you add a comment in l.171 that briefly touches on this?",
      "parentUuid": "05459567_6478da76",
      "range": {
        "startLine": 172,
        "startChar": 34,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "01f12b205fb0e6b5a752bcf4c6acec02cf610559",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}