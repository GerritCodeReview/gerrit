{
  "comments": [
    {
      "key": {
        "uuid": "a80949df_5a7e359f",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1011624
      },
      "writtenOn": "2016-05-02T16:22:54Z",
      "side": 0,
      "message": "Shouldn\u0027t we keep this test as well?",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c8f83dfd_1b5b1b46",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-05-02T17:18:42Z",
      "side": 0,
      "message": "Sure, we should add back this test when we have a proper fix for that problem, one that doesn\u0027t break pushing of related changes. But for now this test is failing and we can\u0027t keep failing tests around as it messes up our CI votings.",
      "parentUuid": "a80949df_5a7e359f",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8fd01ea_bcc66124",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-05-02T17:21:11Z",
      "side": 0,
      "message": "I see your point, but I added this test back and it still passed for me. Maybe it was not strictly related to the original commit? Or else some other intervening commit fixed it?",
      "parentUuid": "c8f83dfd_1b5b1b46",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "880c85ef_19232bf7",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-05-02T17:38:58Z",
      "side": 0,
      "message": "Worse, testCreateNewChangeForAllNotInTarget also passes if I just add it on top of master:\n\nhttps://gerrit-review.googlesource.com/77120\n\nSo I don\u0027t think we have an accurate reproduction of the problem here.",
      "parentUuid": "e8fd01ea_bcc66124",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "880c85ef_591da3ac",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-05-02T17:43:24Z",
      "side": 0,
      "message": "My mistake, I was running the wrong buck target. Let me poke around some more.",
      "parentUuid": "880c85ef_19232bf7",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a325f944_f3c47002",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-06-27T17:29:23Z",
      "side": 0,
      "message": "I think that this test became broken after this change [1] in JGit, lines 269-286. This creates an anonymous subclass of BatchRefUpdate and when running Gerrit\u0027s tests the code always enters the if-branch which doesn\u0027t update the progress monitor. Since the progress monitor is not updated the \"refs: 1\" is missing from the output and the assertion in the line 516 fails.\n\nWhen running normal (not from tests) Gerrit daemon this JGit code is not used and the issue doesn\u0027t exist.\n\nAs an experiment, adding:\n\n  setPerformsAtomicTransactions(false);\n\nto the InMemoryRepository.Repo constructor actually makes this test green.\n\nWill try to push a change tomorrow which brings this test back.\n\n[1] https://git.eclipse.org/r/#/c/61841/2/org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/dfs/InMemoryRepository.java",
      "parentUuid": "c8f83dfd_1b5b1b46",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a02ecf8e_4b73e5d0",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 1
      },
      "lineNbr": 496,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-06-28T13:59:06Z",
      "side": 0,
      "message": "What I wrote above is not true for master branch. My observation was based on using JGit stable-4.4 with Gerrit stable-2.12.\n\nIn master, this feature is really broken and will likely require more effort to fix than I initially expected.",
      "parentUuid": "a325f944_f3c47002",
      "revId": "03a508b6236f099de7fff157d71462fd6c12ec6b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}