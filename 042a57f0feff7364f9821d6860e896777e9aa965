{
  "comments": [
    {
      "key": {
        "uuid": "45f9f423_14a2aa35",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T10:36:26Z",
      "side": 1,
      "message": "Sorry for not being clearer in my last comment, but what I meant it the you only return an instance of GrRestApiHooks here, similar to what other public methods do:\nchangeMetadata()\nadmin()\nsettings()\nproject()\ntheme()\nchangeActions()\nchangeReply()\nannotationApi()",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53489a8d_1b351479",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T17:26:58Z",
      "side": 1,
      "message": "Done. Although I opted to have a single one rather than re-creating a class every time.",
      "parentUuid": "45f9f423_14a2aa35",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "376301d6_3037a64a",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T21:22:31Z",
      "side": 1,
      "message": "I have spent a lot of time figuring out the different concepts of how these plugin APIs work: https://docs.google.com/document/d/1VNK7MQy6BYQWWfeYD9mPrYEoExRaOWM10aymXUXJgsg/edit?usp\u003dsharing\n\nAnd my primary concern is that the plugin APIs each have different designs. Therefore I put consistency and symmetry before everything else. All these 9 methods return a new API instance:\n\n  Plugin.prototype.annotationApi \u003d function() {\n    return new GrAnnotationActionsInterface(this);\n  };\n\n  Plugin.prototype.changeActions \u003d function() {\n    return new GrChangeActionsInterface(this,\n      Plugin._sharedAPIElement.getElement(\n          Plugin._sharedAPIElement.Element.CHANGE_ACTIONS));\n  };\n\n  Plugin.prototype.changeReply \u003d function() {\n    return new GrChangeReplyInterface(this,\n      Plugin._sharedAPIElement.getElement(\n          Plugin._sharedAPIElement.Element.REPLY_DIALOG));\n  };\n\n  Plugin.prototype.changeView \u003d function() {\n    return new GrChangeViewApi(this);\n  };\n\n  Plugin.prototype.theme \u003d function() {\n    return new GrThemeApi(this);\n  };\n\n  Plugin.prototype.project \u003d function() {\n    return new GrRepoApi(this);\n  };\n\n  Plugin.prototype.changeMetadata \u003d function() {\n    return new GrChangeMetadataApi(this);\n  };\n\n  Plugin.prototype.admin \u003d function() {\n    return new GrAdminApi(this);\n  };\n\n  Plugin.prototype.settings \u003d function() {\n    return new GrSettingsApi(this);\n  };\n\nPlease make the new API consistent with these.",
      "parentUuid": "53489a8d_1b351479",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5f9ed66b_a62475e6",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T23:02:55Z",
      "side": 1,
      "message": "I don\u0027t know how Gerrit.pluginParams would work if each call to .restApiHooks created a new instance. Unless we change GrRestApiHooks to register in some other global space, which is possible. Thoughts?",
      "parentUuid": "376301d6_3037a64a",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39f7981f_d72ce198",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-15T08:33:37Z",
      "side": 1,
      "message": "GrRestApiHooks will need a static variable, either keeping track of all instances of itself or just keeping track of all addParameterFunctions. That is fine.",
      "parentUuid": "5f9ed66b_a62475e6",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b35d43f6_1cf24f0b",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 246,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-15T18:57:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "39f7981f_d72ce198",
      "range": {
        "startLine": 234,
        "startChar": 2,
        "endLine": 246,
        "endChar": 4
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e5889d7e_2ba7f30b",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T10:36:26Z",
      "side": 1,
      "message": "Move this functionality to GrJsApiInterface and use getDiffLayers() as a blueprint: GrRestApiHooks is instantiated per plugin and calls plugin.on(\u0027rest-api-call\u0027, this) in the constructor (needs a new EventType in GrJsApiInterface). GrRestApiInterface calls addRestApiParams() in GrJsApiInterface instead of Gerrit.pluginParams().",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa0d02a9_21d18b4b",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T17:26:58Z",
      "side": 1,
      "message": "Unfortunately this results in a cyclical dependency. GrJsApiInterface depends on GrRestApiInterface, so I cannot have GrRestApiInterface rely on GrJsApiInterface.",
      "parentUuid": "e5889d7e_2ba7f30b",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c7de687_45b81628",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T21:22:31Z",
      "side": 1,
      "message": "Understand. But then let\u0027s move the pluginParams function to GrRestApiHooks?\n\nAnd maybe add a comment that this is supposed to be called by the app, not the plugins.",
      "parentUuid": "aa0d02a9_21d18b4b",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b08d94c_840b591e",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T23:02:55Z",
      "side": 1,
      "message": "I changed the pluginParams function to _pluginParams to signal it\u0027s not a public function. However without another global const, it needs to remain the same scope as _plugins. Thoughts?",
      "parentUuid": "7c7de687_45b81628",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "016c3af9_4076ea33",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-15T08:33:37Z",
      "side": 1,
      "message": "If you move this code to GrRestApiHooks, then yes, it will need a static variable keeping track of the API instances or the addParameterFunctions. That is fine. And pluginParams() will also stay a static method.\n\nI just don\u0027t see the point of putting GrPublicJsApi in between GrRestApiInterface and GrRestApiHooks. I think the former should just call the latter directly instead of going through this indirection layer.",
      "parentUuid": "6b08d94c_840b591e",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6673c4b8_0f4e0e42",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-public-js-api.js",
        "patchSetId": 12
      },
      "lineNbr": 571,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-15T18:57:40Z",
      "side": 1,
      "message": "Done. Although I had to keep Gerrit._pluginPararams. I could not figure out how to get the template test to pass without going through the Gerrit global. It would continually state \"GrRestApiHooks is not defined\" although I would be importing it in the html import file.",
      "parentUuid": "016c3af9_4076ea33",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbd20a33_8615aba6",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 25,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T10:36:26Z",
      "side": 1,
      "message": "Can you document the signature of the mutationFunction and what the function actually does? Maybe just copy and paste from pg-plugin-dev.txt.",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b7bf01c_027a5348",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 25,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T17:26:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cbd20a33_8615aba6",
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc262e60_9f5115df",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 27,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T10:36:26Z",
      "side": 1,
      "message": "Maybe rename mutationFunction to addParameterFunction, because parameters are not mutated. You are just adding another parameter with the fixed name of the plugin.",
      "range": {
        "startLine": 27,
        "startChar": 61,
        "endLine": 27,
        "endChar": 77
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba2ba94e_56173e62",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 27,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-03-14T10:36:26Z",
      "side": 1,
      "message": "It would be nice to rename the methods to be clearer about what they do, e.g. addParameterHook. I could image that we want to extend this API later to also allow modifying response or some such.",
      "range": {
        "startLine": 27,
        "startChar": 27,
        "endLine": 27,
        "endChar": 35
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b70d5c5_364d1c18",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 27,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T17:26:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ba2ba94e_56173e62",
      "range": {
        "startLine": 27,
        "startChar": 27,
        "endLine": 27,
        "endChar": 35
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9848485_047ffb1d",
        "filename": "polygerrit-ui/app/elements/shared/gr-js-api-interface/gr-rest-api-hooks.js",
        "patchSetId": 12
      },
      "lineNbr": 27,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2019-03-14T17:26:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bc262e60_9f5115df",
      "range": {
        "startLine": 27,
        "startChar": 61,
        "endLine": 27,
        "endChar": 77
      },
      "revId": "042a57f0feff7364f9821d6860e896777e9aa965",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}