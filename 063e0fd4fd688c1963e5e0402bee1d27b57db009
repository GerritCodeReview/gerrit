{
  "comments": [
    {
      "key": {
        "uuid": "12d15a3f_757a6893",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-01-31T01:12:00Z",
      "side": 1,
      "message": "Heh. We used to use @Parameterized until we switched from Maven to Buck. The Buck guys told me to stop using it because it wasn\u0027t supported in Buck and it wasn\u0027t reliable.\n\nhttps://github.com/facebook/buck/issues/12",
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2cda6a7_d4d13c44",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-31T01:27:21Z",
      "side": 1,
      "message": "Well it\u0027s supported in Buck now :)\n\nI read the linked blog post and their argument doesn\u0027t really apply to our case. They are referring to increasing (possibly combinatoric) complexity as interfaces grow features (i.e. parameters). Obviously the total space of potential Configs is enormous, but I would be surprised if we ever have more than 2-3 actual configs in this class.",
      "parentUuid": "12d15a3f_757a6893",
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ca6290_d3a27491",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-01T00:10:44Z",
      "side": 1,
      "message": "That breaks one important feature in Eclipse: single method cannot be run using right mous click\n\n  \"Run As Junit test\"\n\nOnly the whole class can be executed with dozen of tests and that\u0027s annoying. If i uncomment line 42 then NPE happens:\n\n  java.lang.NullPointerException\n\tat com.google.gerrit.acceptance.GerritServer.mergeTestConfig(GerritServer.java:128)\n\tat com.google.gerrit.acceptance.GerritServer.start(GerritServer.java:70)\n\tat com.google.gerrit.acceptance.AbstractDaemonTest.startServer(AbstractDaemonTest.java:116)\n\tat com.google.gerrit.acceptance.AbstractDaemonTest.beforeTest(AbstractDaemonTest.java:108)\n\tat com.google.gerrit.acceptance.AbstractDaemonTest.access$1(AbstractDaemonTest.java:107)\n\tat com.google.gerrit.acceptance.AbstractDaemonTest$1$1.evaluate(AbstractDaemonTest.java:84)\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12d15a3f_75b268e2",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-01T00:15:36Z",
      "side": 1,
      "message": "I\u0027ll look into this. As a workaround for now, you can start the whole test to populate the JUnit tab with a list of methods, then immediately cancel it, then choose one of the methods, right click -\u003e Run.",
      "parentUuid": "d2ca6290_d3a27491",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ca6290_d3af1461",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-02T10:05:35Z",
      "side": 1,
      "message": "No, as workround for now: [1].\n\n https://gerrit-review.googlesource.com/#/c/54239",
      "parentUuid": "12d15a3f_75b268e2",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2cda6a7_74794854",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-03T18:15:31Z",
      "side": 1,
      "message": "I understand that being able to run a single test method is important. No disagreement there.\n\nI think it\u0027s overstating it a bit to say that running a single test method is broken by this change. Running a single test method with Run As-\u003eJUnit Test on a single method is broken. But I respectfully disagree that right-clicking on a test method is \"[t]he most important feature for Gerrit developers.\" What we need to preserve is the ability to run a single test method, which is still possible here.\n\nNow, the issue Eclipse has is with the method name. It assumes that a method named foo results in a test named \"foo\", whereas now it results in a method named \"foo[default]\" (plus one for each additional config).\n\nIt would not be hard to fix this by writing a custom TestRunner like @Parameterized but produces \"foo\" instead of \"foo[default]\". Would that be sufficient? Note in particular Run As-\u003eJUnit Test would only work for the default config; there is no one-click way to just run all permutations of a single method.",
      "parentUuid": "d2ca6290_d3af1461",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ca6290_1398ec18",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-03T18:33:12Z",
      "side": 1,
      "message": "\u003e  What we need to preserve is the ability to run a single test method, which is still possible here.\n\nHow that?\n\n\u003e It would not be hard to fix this by writing a custom\n\u003e TestRunner like @Parameterized but produces \"foo\" instead of  \n\u003e \"foo[default]\". Would that be sufficient?\n\nIt sounds like too much efforts for me. Note, all that multiple config stuff is more or less temporary. Once we moved to NotesDB we don\u0027t need that. So may be it would be suficiently to make the switch between broken single method invocation to working by uncommenting one line. And switching between different configurations another one, a l√°\n\n//@RunWith(Parameterized.class)\npublic abstract class AbstractDaemonTest {\n[...]\n  protected GerritServer startServer(Config cfg, boolean memory) {\n  if (cfg \u003d\u003d null) {\n    cfg \u003d new NamedConfig(\"NotesDB\");\n    // cfg \u003d new NamedConfig(\"default\");\n  }",
      "parentUuid": "f2cda6a7_74794854",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2cda6a7_54764c64",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-03T18:39:03Z",
      "side": 1,
      "message": "\u003e How that?\n\nFrom my previous comment: \"you can start the whole test to populate the JUnit tab with a list of methods, then immediately cancel it, then choose one of the methods, right click -\u003e Run.\"",
      "parentUuid": "d2ca6290_1398ec18",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2ca6290_f38330a9",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-03T18:50:40Z",
      "side": 1,
      "message": "OK, now i understand what you meant, it works. Another way is to put @Ignore on all other methods or uncomment them.  You may have another opinion, i prefer right mouse click on method and am going to use the workaround i suggested.\n\nWhat i still not understand however why to introduce that multiple config thing that breaks things if we don\u0027t have multiple configs? Why not to break it when we really need that? And not even 5 min. earlier?",
      "parentUuid": "f2cda6a7_54764c64",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12d15a3f_75bf0892",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-03T18:57:44Z",
      "side": 1,
      "message": "There will be a period of time (~months) when we have multiple configs because both gwtorm and notedb will be supported at head. During this period it is important that the acceptance tests pass with all supported configurations, so I figured it\u0027s worth my time to get the parameterized acceptance tests wired up.\n\nOk, so maybe I could have delayed merging this till I fixed all the outstanding bugs in reading PatchSetApprovals from the notedb (was hoping this week), but I was still going to do it eventually either way :)",
      "parentUuid": "d2ca6290_f38330a9",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "063e0fd4fd688c1963e5e0402bee1d27b57db009",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}