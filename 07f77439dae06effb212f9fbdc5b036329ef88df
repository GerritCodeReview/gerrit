{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6e6a49ae_bb116672",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2023-02-23T15:50:28Z",
      "side": 1,
      "message": "it was behaving as documented as far as I can see, so this is a new feature.\n\ncan you explain why you\u0027re doing this?I imagine it\u0027s related to a use case you discussed with the android folks",
      "range": {
        "startLine": 7,
        "startChar": 12,
        "endLine": 7,
        "endChar": 17
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49619334_b9b03315",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2023-02-23T15:50:28Z",
      "side": 1,
      "message": "needs doc update.",
      "range": {
        "startLine": 9,
        "startChar": 2,
        "endLine": 9,
        "endChar": 3
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a34e733_129f78a6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2023-02-23T16:41:19Z",
      "side": 1,
      "message": "that sounds strange to me.\n\nI think what we want (and that was my understanding when discussing with Android) was that when no `base` is provided, it keeps the same base that the previous patch set had, instead if rebasing.\n\nso creates a commit whose parent \u003d\u003d parent of previous patchset and whose tree is tree of parent + patch applied.\n\nthis also seems to be how your code works, it\u0027s just the commit message and doc string that suggests something else :-)\n\nSuggestion for commit message:\n\n```\nApplyPatch: Do not rebase change when applying a patch\n\nWhen applying a patch to an existing change, apply it to the latest patchsets\u0027s parent when `base` is not explicitly specified in the request. In absence of this, applying a patch on an existing change would always rebase the change, which is unexpected and inconsistent with other Gerrit features (e.g. publishing a change edit would also not rebase the change).\n```",
      "range": {
        "startLine": 9,
        "startChar": 28,
        "endLine": 10,
        "endChar": 69
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d55eb84_00bd81e5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2023-02-23T17:37:40Z",
      "side": 1,
      "message": "\u003e apply it to the latest patchsets\u0027s parent\n\nThis is not completely accurate. In case the previous patchset had some content, the result patch should include this content as well. \nI\u0027m not sure how to clarify this nuance.\n\nSee `ps1.txt` handling in `applyPatchWithNoExplicitBase_doNoIgnoreLatestPatch` test as an example.",
      "parentUuid": "6a34e733_129f78a6",
      "range": {
        "startLine": 9,
        "startChar": 28,
        "endLine": 10,
        "endChar": 69
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39194c54_d62f76e2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2023-02-23T18:02:22Z",
      "side": 1,
      "message": "\u003e This is not completely accurate. In case the previous patchset had some content, the result patch should include this content as well.\n\nI don\u0027t think it should do that. I thought we are only fixing the \"accidental rebase\" that currently happens when you apply a patch on an existing change.\n\n@hanwen@google.com, what behavior would you expect when applying a patch to an existing change (apply to latest PS OR apply to parent of latest PS OR apply to tip of target branch)?",
      "parentUuid": "1d55eb84_00bd81e5",
      "range": {
        "startLine": 9,
        "startChar": 28,
        "endLine": 10,
        "endChar": 69
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e41c49b_4495f4a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2023-02-23T17:37:40Z",
      "side": 1,
      "message": "Replying on a single thread since clarifying this point is a prerequisite for the others.",
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42cb7023_31788d30",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ApplyPatchIT.java",
        "patchSetId": 2
      },
      "lineNbr": 406,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2023-02-23T17:26:49Z",
      "side": 1,
      "message": "I couldn\u0027t tell how this is used? Same in next test.",
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28af89bd_367d3ad6",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ApplyPatchIT.java",
        "patchSetId": 2
      },
      "lineNbr": 433,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2023-02-23T16:41:19Z",
      "side": 1,
      "message": "nit: this assertation is correct but slightly confusing.\n\nusing result.revisions.get(1).commit.parents.get(0) would be easier to understand (i.e. ps1 and ps2 have the same parent, applying a patch did not change that parent)",
      "range": {
        "startLine": 433,
        "startChar": 20,
        "endLine": 433,
        "endChar": 44
      },
      "revId": "07f77439dae06effb212f9fbdc5b036329ef88df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}