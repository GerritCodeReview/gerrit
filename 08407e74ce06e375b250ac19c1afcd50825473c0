{
  "comments": [
    {
      "key": {
        "uuid": "65e029b0_6f3fb1e3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Be nice if upstream Buck can find a way to allow us to not have to modify a tracked file on \"other platform\".",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 35
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72a1d25d_fc24c9de",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-03T07:05:07Z",
      "side": 1,
      "message": "Filed issue upstream: [1].\n\n* [1] https://github.com/facebook/buck/issues/266",
      "parentUuid": "65e029b0_6f3fb1e3",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 35
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13650596_6862c30d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1012155
      },
      "writtenOn": "2015-07-02T14:42:49Z",
      "side": 1,
      "message": "Buck meanwhile [1] changed the config setting for the\npython interpreter. It is now at\n\n  [python]\n      interpreter \u003d [...]\n\n\u003e Be nice if upstream Buck can find a way to allow us to not\n\u003e have to modify a tracked file on \"other platform\".\n\nSince users need to do preparation steps anyways, one\ncould ask them to use `.buckconfig.local` instead of\n`.buckconfig`.\nThe setting gets picked up from there too, and the tree would\nnot get dirty.\n\n\n\n[1] https://github.com/facebook/buck/commit/c54bd42a1b67350a4540999c5a2f3db835b59ba1#diff-8f1584359ddb86afcf929abd7ef5edd5L63",
      "parentUuid": "72a1d25d_fc24c9de",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 35
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13650596_286ccbfc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-07-02T14:57:44Z",
      "side": 1,
      "message": "Thanks for pointing this out. Another option is to still rely on python on the PATH (that also works on other platform). In any event, this can\u0027t be used here, as it\u0027s system dependent.",
      "parentUuid": "13650596_6862c30d",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 21,
        "endChar": 35
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_0f34e502",
        "filename": "BUCK",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "This isn\u0027t your fault, but it makes me sad we have to duplicate so much in each genrule.\n\nWe could use \u0026\u0026 on *NIX platforms to separate commands instead of ;. And then the major difference is $OUT vs. %OUT%. Which could be handled inside Buck with a simple search and replace.\n\nOk then there is `ln -s` vs. `cp`. That could be a $(LN_S) or some magic variable that is defined per-platform and replaced by Buck before execution.\n\nOr maybe that is too much hand waving.\n\nMaybe we could polyfill genrule() with our own override that does that sort of thing if cmd_exe is missing?\n\n  _buck_genrule \u003d genrule\n\n  def genrule(...):\n    if cmd_exe is None:\n      cmd_exe \u003d cmd.replace(\u0027$OUT\u0027, \u0027%OUT%\u0027)\n\nIts possible to break it with a bad genrule that isn\u0027t cross platform, but so is the current cmd/cmd_exe system. You can write a working rule on *NIX and think you have a working update on \"other platform\", but without a test build running on other platform you can\u0027t be sure it works.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 31,
        "endChar": 25
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "85527d4f_387f8945",
        "filename": "BUCK",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-03T07:05:07Z",
      "side": 1,
      "message": "Filed issue upstream: [1].\n\n* [1] https://github.com/facebook/buck/issues/267",
      "parentUuid": "65e029b0_0f34e502",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 31,
        "endChar": 25
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45c5e522_2e2207d2",
        "filename": "gerrit-gwtui/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "I think this is unrelated to the \"other platform\" support and is probably a straight out bug fix to the BUCK file that can be applied as-is to master.",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "85527d4f_58d7ddc3",
        "filename": "gerrit-gwtui/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-06T20:06:37Z",
      "side": 1,
      "message": "Yes. You\u0027ve fixed already resource set duplication in gwt_module() itself. It wasn\u0027t working because of glob() bug [1]. This was an attempt to fix it here, but this was failing on all other gwt_module() invocations as well. Upstream Buck fixed glob() issues, so that this is not needed any more and can be removed.\n\n* [1] https://github.com/facebook/buck/issues/248",
      "parentUuid": "45c5e522_2e2207d2",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45c5e522_ce06e348",
        "filename": "gerrit-war/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Huh. I had trouble in older versions of Buck getting it to correctly package the file unless I did cd src/main/webapp. cd $SRCDIR gave me the wrong results in the ZIP file. IIRC the files in the ZIP were prefixed with src/main/webapp which we do not want in the resulting ZIP.\n\nAre you sure these are producing the same files on the different platforms?",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 39,
        "endChar": 45
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72a1d25d_fc9049c8",
        "filename": "gerrit-war/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-06T20:06:37Z",
      "side": 1,
      "message": "Looks like this is a bug in Buck on other platform. It took me some time to understand what going on: [1]. But the command deviation from the correct *NIX command hasn\u0027t fixed the bug either, because the directory structure is flattened, and this is not what we want to achieve here.\n\n* [1] https://github.com/facebook/buck/issues/270",
      "parentUuid": "45c5e522_ce06e348",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 39,
        "endChar": 45
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45c5e522_ee039f35",
        "filename": "gerrit-war/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Same issue as above.",
      "range": {
        "startLine": 48,
        "startChar": 0,
        "endLine": 49,
        "endChar": 60
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45c5e522_8e10db78",
        "filename": "gerrit-war/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Doesn\u0027t \"other platform\" accept /? Its cleaner to write in these sorts of strings.",
      "range": {
        "startLine": 79,
        "startChar": 11,
        "endLine": 79,
        "endChar": 38
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72a1d25d_9c8d85af",
        "filename": "gerrit-war/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-06T20:06:37Z",
      "side": 1,
      "message": "So, the standard behavior of Buck on other platform is to spawn `cmd.exe`. As explained in the commit message this patch heavily relies on the Cygwin emulation layer to be on the PATH. However, some commands are eclipsed from the cmd.exe, e.g mkdir. So /usr/bin/mkdir.exe from Cygwin doesn\u0027t have any issue to deal with \u0027/\u0027 path separator and with `-p` argument:\n\n  C:\\Users\\david\\projects\\buck_test\u003eC:/cygwin64/bin/mkdir.exe -p foo/bar/baz\n  C:\\Users\\david\\projects\\buck_test\u003els -all foo\\bar\\baz\n  total 0\n  drwxr-xr-x 1 david None 0 Mar  6 19:57 .\n  drwxr-xr-x 1 david None 0 Mar  6 19:57 ..\n\nBut mkdir doesn\u0027t work:\n\n  C:\\Users\\david\\projects\\buck_test\u003emkdir ./b\n  Syntax error.",
      "parentUuid": "45c5e522_8e10db78",
      "range": {
        "startLine": 79,
        "startChar": 11,
        "endLine": 79,
        "endChar": 38
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_2f39a9fb",
        "filename": "lib/codemirror/closure.defs",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "%SRCS%?",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_cf2d7dba",
        "filename": "tools/BUCK",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Its worth documenting in the commit message that the automatic buck build from the debug server doesn\u0027t work.",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_8f2775d6",
        "filename": "tools/download_file.py",
        "patchSetId": 1
      },
      "lineNbr": 184,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Move this just before the shutil.copyfile()? Its a useful documentation hint about why we have to do copyfile.",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_ef2ac19f",
        "filename": "tools/download_file.py",
        "patchSetId": 1
      },
      "lineNbr": 185,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "Drop this line?",
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65e029b0_af24b9d1",
        "filename": "tools/git.defs",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-03-02T23:56:57Z",
      "side": 1,
      "message": "subprocess.Popen for git describe doesn\u0027t work on other platform?",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72a1d25d_bc8ac192",
        "filename": "tools/git.defs",
        "patchSetId": 1
      },
      "lineNbr": 20,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-03-06T20:06:37Z",
      "side": 1,
      "message": "I don\u0027t use the other platform, and not really sure, what is the best way to install (MSYS) git there. What i did is only installed Cygwin 64 bit with git. For some reasons it doesn\u0027t work when invoked form cmd.exe. But this can only be issue in setup on the machine that i have access to. So i could remove this fix and maintain (local) in tree patch of this command.",
      "parentUuid": "65e029b0_af24b9d1",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 20,
        "endChar": 16
      },
      "revId": "08407e74ce06e375b250ac19c1afcd50825473c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}