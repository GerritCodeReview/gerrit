{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2591f478_8f54649b",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-26T15:57:19Z",
      "side": 1,
      "message": "Maybe make this an optional method parameter with `false` being the default.",
      "range": {
        "startLine": 57,
        "startChar": 11,
        "endLine": 57,
        "endChar": 16
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6b73d609_6f05e18f",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-29T17:58:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2591f478_8f54649b",
      "range": {
        "startLine": 57,
        "startChar": 11,
        "endLine": 57,
        "endChar": 16
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e04524c8_b33c6908",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-26T15:57:19Z",
      "side": 1,
      "message": "It would be nice to also set name and email here. Maybe \n\n  name: `Kermit-${id}`\n  email: `kermit-${id}@gerrit.com`",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6fd346b_73cbe6bc",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-26T15:57:19Z",
      "side": 1,
      "message": "Can you make 5 a method parameter `id`?",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 18
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e753c710_baa0ba6a",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-27T08:04:54Z",
      "side": 1,
      "message": "The idea is to have functions for creating objects with required properties only (maybe even _account_id should be removed here, because it is options). If a test depends on name/email an object can be created with name and email:\nconst account \u003d {\n  ...createAccount(),\n  name: \u0027some name\u0027,\n  email: \u0027email@gerrit.com\u0027,\n}\n\nIf name and email are set in createAccount, there is no simple way to remove them from the returned account (if a test want to check that the code works without name and email).",
      "parentUuid": "e04524c8_b33c6908",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "799a0ef9_f72df7af",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-27T08:04:54Z",
      "side": 1,
      "message": "I thought about it and I am unsure what is better.\nWith a parameter \u0027id\u0027 we will have 2 different ways to assign properties:\nconst account \u003d {\n  ...createAccount(5),\n  status: \u0027out of office\u0027\n}\n\nIt is unclear how to differentiate between these 2 options (i.e. how to decide what should be passed as a parameter and what shouldn\u0027t). For createAccount this doesn\u0027t look like a problem, but for createChange it is not so easy. ChangeInfo has several ids(id/change_id/_number) and all ids looks equally important for tests, but adding all 3 ids as parameters doesn\u0027t look good idea (many tests changes only one of ids).\n\nI.e. I am afraid that at the end we will have create... functions with multiple parameters and we will have code like this in test:\nconst change \u003d {\n   ...createChange(\u0027abc\u0027, \u0027def\u0027, 5),\n   subject: \u0027Test change\u0027\n   branch: \u0027some-branch\u0027\n}\n(compare to:\nconst change \u003d {\n   ...createChange(),\n   id: \u0027abc\u0027 as ChangeInfoId,\n   change_id: \u0027def\u0027 as ChangeId,\n   _number: 5 as NumericChangeId,\n  subject: \u0027Test change\u0027,\n  branch: \u0027some-branch\u0027\n}\n)\n\nMaybe I am over complicate it and we will not have any problems with it.\nWDYT?",
      "parentUuid": "f6fd346b_73cbe6bc",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 18
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0033ba6_0b13c0d5",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-27T09:45:43Z",
      "side": 1,
      "message": "What is the benefit of creating objects with required properties only?\n\nWhat most tests want is a \"normal\" object, not a minimal/bare object.\n\nWe will probably need slightly adapted create methods for different needs, see also other comment. So maybe we should come up with a naming pattern such as:\n\n  createChange() for normal object\n  createChangeBare() for object with required props only\n\nWDYT?",
      "parentUuid": "e753c710_baa0ba6a",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a914843_7b0d2245",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-27T09:45:43Z",
      "side": 1,
      "message": "I understand your concerns and I share them. Generally it is great to stick to a consistent pattern such as\n\n  const change \u003d {\n    ...createChange(),\n    id: \u0027abc\u0027 as ChangeInfoId,\n    _number: 5 as NumericChangeId,\n  }\n\nHowever I would allow exceptions to that rule, if it lets us write lots of shorter tests. I would like to avoid hundreds of tests with\n\n  const account \u003d {\n    ...createAccount(),\n    _account_id: 5,\n  };\n\ninstead of just `const account \u003d createAccount(5);`. That would waste a lot of lines.\n\nIf you would like to not break the pattern, then I would suggest to create a separate method `createAccountWithId()`.\n\nOTOH I guess you can also write your proposal on one line:\n\n  const account \u003d {...createAccount(), _account_id: 5};\n\nMaybe we should allow `createAccountSomething(param)` methods for the use case where `param` affects multiple properties of the object, for example when `id in `createAccountWithId(id)` also affects the name and the email address, or when `createChangeMerged()` does not just change the status to `MERGED`, but also sets a submitted timestamp.\n\nWDYT?",
      "parentUuid": "799a0ef9_f72df7af",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 18
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d57adaa1_c1057b50",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-29T17:58:23Z",
      "side": 1,
      "message": "What I\u0027ve seen in already converted tests (including change-view_test.ts): usually tests creates a minimal object and set 1-2 properties. \ncreateAccountSomething + passing parameters into some methods (as you suggested in other comments) solves 90% cases (at least in the files what i\u0027ve seen).\nMaybe we can submit the and then improve tests gradually, based on real use-cases?",
      "parentUuid": "a0033ba6_0b13c0d5",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84a413ae_5787f117",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-29T17:58:23Z",
      "side": 1,
      "message": "I like the idea with createAccountSomething... and I added several methods (createAccountWithId/createAccountWithEmail/createAccountWithIdNameAndEmail).",
      "parentUuid": "7a914843_7b0d2245",
      "range": {
        "startLine": 91,
        "startChar": 17,
        "endLine": 91,
        "endChar": 18
      },
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cdb808f_762418a1",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-10-26T15:57:19Z",
      "side": 1,
      "message": "That is unusual to be set.",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df3e5a60_90cc6634",
        "filename": "polygerrit-ui/app/test/test-data-generators.ts",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-10-29T17:58:23Z",
      "side": 1,
      "message": "You are right. It was marked as required in ChangeInfo. Fixed.",
      "parentUuid": "6cdb808f_762418a1",
      "revId": "095189c90514d10bab52b585a9cb956f254e3417",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}