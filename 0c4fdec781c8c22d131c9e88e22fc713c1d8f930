{
  "comments": [
    {
      "key": {
        "uuid": "d065072b_a8da232f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 82,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-11T22:02:23Z",
      "side": 1,
      "message": "I we had hashtags but they are all deleted this set can be empty but not null. So the check should be for an empty set as well.",
      "range": {
        "startLine": 82,
        "startChar": 7,
        "endLine": 82,
        "endChar": 32
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9058ef70_fa3509c6",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 82,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:00:35Z",
      "side": 1,
      "message": "Do you mean:\n\n- Initial change with no tags: notes.getHashtags() returns null\n- Add some tags: it returns a set containing the tags\n- Remove all the tags: it returns an empty set (i.e. not null)?\n\n?",
      "parentUuid": "d065072b_a8da232f",
      "range": {
        "startLine": 82,
        "startChar": 7,
        "endLine": 82,
        "endChar": 32
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9058ef70_3a414125",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 82,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:22:35Z",
      "side": 1,
      "message": "OK, I stepped through the code and now I see it.",
      "parentUuid": "9058ef70_fa3509c6",
      "range": {
        "startLine": 82,
        "startChar": 7,
        "endLine": 82,
        "endChar": 32
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9058ef70_1a46fd3c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 86,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:22:35Z",
      "side": 1,
      "message": "This needs to be updated like on the Put to remove empty strings and trim.",
      "range": {
        "startLine": 86,
        "startChar": 9,
        "endLine": 86,
        "endChar": 52
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d065072b_880da710",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 87,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-11T22:02:23Z",
      "side": 1,
      "message": "I like where you\u0027re going with this, but if the removeAll operation isn\u0027t considerably more expensive than the retainAll operation (which is not likely since statistically the most common operation would be to only remove one hashtag at the time) this just makes it harder to read the code.",
      "range": {
        "startLine": 87,
        "startChar": 6,
        "endLine": 87,
        "endChar": 42
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9058ef70_9a284d70",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 87,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:00:35Z",
      "side": 1,
      "message": "Even if the common case is to remove one by one (i.e. from the UI) the REST API still supports to remove in bulk, so we have to implement it like this.\n\nIf we special-case the single tag removal it requires adding more code which, IMHO, would make it even harder to read.",
      "parentUuid": "d065072b_880da710",
      "range": {
        "startLine": 87,
        "startChar": 6,
        "endLine": 87,
        "endChar": 42
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d065072b_a8b503d0",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/DeleteHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 87,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-12T07:41:00Z",
      "side": 1,
      "message": "No, that\u0027s not what I meant, but I see now that if you need to do it for the check below. My bad!",
      "parentUuid": "9058ef70_9a284d70",
      "range": {
        "startLine": 87,
        "startChar": 6,
        "endLine": 87,
        "endChar": 42
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d065072b_a80343df",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PutHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-11T22:02:23Z",
      "side": 1,
      "message": "Why not just skip the updatedHashtags all together and use existingHashtags all the way with a finale like:\nupdate.setHashtags(existingHashtags.addAll(toAdd));\nAFAIC that would be easier to understand.",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "705d3b5f_1918cb4b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PutHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:00:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d065072b_a80343df",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "705d3b5f_790d870d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PutHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-12T05:22:35Z",
      "side": 1,
      "message": "Now I remember why it was done like this.  existingHashtags is an ImmutableSet,  so if we try to add to it we get UnsupportedOperationException.",
      "parentUuid": "705d3b5f_1918cb4b",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30dae333_62c3f81b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PutHashtags.java",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-12T07:41:00Z",
      "side": 1,
      "message": "Something like:\nSet\u003cString\u003e existingHashtags \u003d new HashSet\u003cString\u003e(notes.getHashtags);\nwould be cleaner.\nThe same goes for DeleteHastags",
      "parentUuid": "705d3b5f_790d870d",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "0c4fdec781c8c22d131c9e88e22fc713c1d8f930",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}