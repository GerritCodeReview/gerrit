{
  "comments": [
    {
      "key": {
        "uuid": "d802aa8c_e6b35e3a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 12
      },
      "lineNbr": 74,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2015-07-15T04:55:28Z",
      "side": 1,
      "message": "Today we learned this is causing significant CPU load on our bigger repositories.\n\nThe web UI calls /detail with a If-None-Match header, polling to see if the change has been updated. The server has to compute the ETag via this getETag() call.\n\nOn a big repository that is very active the canRebase method is actually a bottleneck. We observe quite a few thread traces busy inside of the rebase logic, checking the change against current head.\n\nAs a workaround we have disabled the browser polling, but that only sheds some load. Automated tools are still free to ping away and wait for ETag generation. :(",
      "revId": "0d99067b8ddae3554c1e067d5a9cc2fc6d8c8629",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}