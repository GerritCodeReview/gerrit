{
  "comments": [
    {
      "key": {
        "uuid": "23b1d257_11cb0c9f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2015-04-08T10:58:54Z",
      "side": 1,
      "message": "I think this is the wrong canRebase(). This canRebase() on ChangeControl checks only if the user has the permissions to do a rebase, but we want to know whether the change is based on the HEAD of the destination branch. This needs to be done in the same way as in the Rebase class [1] where we decide if the \u0027Rebase\u0027 button should be shown.\n\n[1] https://gerrit-review.googlesource.com/#/c/66543/6/gerrit-server/src/main/java/com/google/gerrit/server/change/Rebase.java",
      "revId": "1236db4c9a91e02ec9cd3557c786754e59e12a95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43aec6fa_72f1b8e2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-04-09T01:21:46Z",
      "side": 1,
      "message": "Yes, this is wrong...\n\nIn the Rebase class it checks using `rebaseChange.get().canRebase(resource)`.  RebaseChange is injected in Rebase with Provider\u003cRebaseChange\u003e and I can\u0027t find a way to get that into the RevisionResource.",
      "parentUuid": "23b1d257_11cb0c9f",
      "revId": "1236db4c9a91e02ec9cd3557c786754e59e12a95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23b1d257_312570d7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1018043
      },
      "writtenOn": "2015-04-09T15:04:49Z",
      "side": 1,
      "message": "I\u0027m playing with the idea to turn RebaseChange.canRebase into a utility function (public static). The only thing I could not figure out yet is how to get a ReviewDb instance, which I can pass to it. \n\nThe ChangeControl.*Factories have one (ReviewDb) but I\u0027m not sure whether I would be breaking any architectural rules if I\u0027d pass that instance down to ChangeControl ?",
      "parentUuid": "43aec6fa_72f1b8e2",
      "revId": "1236db4c9a91e02ec9cd3557c786754e59e12a95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23b1d257_711ff88a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 6
      },
      "lineNbr": 70,
      "author": {
        "id": 1018043
      },
      "writtenOn": "2015-04-09T16:06:50Z",
      "side": 1,
      "message": "NVM, I injected RebaseChange into a couple of places and it seems to work now. \n\nYou still have to hit F5 to re-render the change, which I think is a (minor) bug considering that the network traffic shows that the change details has been refreshed in the background (every 30s).",
      "parentUuid": "23b1d257_312570d7",
      "revId": "1236db4c9a91e02ec9cd3557c786754e59e12a95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}