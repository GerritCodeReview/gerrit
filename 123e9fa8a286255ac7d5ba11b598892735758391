{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6224bdb7_71fe4433",
        "filename": "java/com/google/gerrit/server/patch/DiffNotAvailableException.java",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Please add javadoc since this is a public class.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8fd8c8f7_6dd61b6d",
        "filename": "java/com/google/gerrit/server/patch/DiffNotAvailableException.java",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6224bdb7_71fe4433",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f51f339a_d3a54cbc",
        "filename": "java/com/google/gerrit/server/patch/DiffUtil.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Please add javadoc.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "79020882_e2c1189a",
        "filename": "java/com/google/gerrit/server/patch/DiffUtil.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f51f339a_d3a54cbc",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de3da5d9_2c994f14",
        "filename": "java/com/google/gerrit/server/patch/DiffUtil.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "I feel this comment doesn\u0027t add much beyond the object\u0027s type.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3f6ed78e_6a2d5a9a",
        "filename": "java/com/google/gerrit/server/patch/DiffUtil.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "de3da5d9_2c994f14",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bbb3050_22710129",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "nit: stray *-s",
      "range": {
        "startLine": 30,
        "startChar": 50,
        "endLine": 30,
        "endChar": 51
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f3c07c8_263506c6",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3bbb3050_22710129",
      "range": {
        "startLine": 30,
        "startChar": 50,
        "endLine": 30,
        "endChar": 51
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89fd64af_1703d3c9",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Can you mention in the API docs when this is thrown?",
      "range": {
        "startLine": 41,
        "startChar": 66,
        "endLine": 41,
        "endChar": 98
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e933f4e2_efb426e5",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89fd64af_1703d3c9",
      "range": {
        "startLine": 41,
        "startChar": 66,
        "endLine": 41,
        "endChar": 98
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ae79219_ad06c0a6",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Can we share this implementation? (Maybe extract an interface for Key.weight().)",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "883693e9_03831845",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I\u0027m not sure I understand. Did you mean have an interface like Weighable.\n\npublic interface Weighable {\n  int weight();\n}\n\nthen have the Key and ModifiedFile implement this interface?",
      "parentUuid": "4ae79219_ad06c0a6",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "622fe495_476055ac",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-20T07:35:32Z",
      "side": 1,
      "message": "Yes.",
      "parentUuid": "883693e9_03831845",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf49a24b_90186991",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-20T12:25:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "622fe495_476055ac",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f481bdf2_4da5c748",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-21T13:18:22Z",
      "side": 1,
      "message": "I had thought you could now unify the (Git)?ModifiedFilesWeigher classes, but hadn\u0027t realized that the PersistentCacheBinding API needs a weigher that implements the exact types. Sorry, I think my idea of deduplicating this code doesn\u0027t work. We could add an additional class just to extract the summing up of the weights, but that seems overkill.",
      "parentUuid": "bf49a24b_90186991",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84ded67e_392e0436",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-23T09:34:15Z",
      "side": 1,
      "message": "Yeah I think it\u0027s an overkill. However I liked your original idea of having a weighable anyway. That makes entities that are need to implement a weight more visible.",
      "parentUuid": "f481bdf2_4da5c748",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c3f231d_880ee819",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-23T12:56:52Z",
      "side": 1,
      "message": "I think we have different ideas about using interfaces. IIUC you\u0027re adding the interface to document right at the top of the class declaration the fact that this class implements the weight() method, and to extract the javadoc for that method. I\u0027m not sure that this adds readability, especially as the interface isn\u0027t actually used in the weigher. IMHO that runs contrary to expectations.\n\nI found this discussion: https://softwareengineering.stackexchange.com/questions/359208/java-interface-for-comments-only-good-practice",
      "parentUuid": "84ded67e_392e0436",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e6bfb0c_6cb30353",
        "filename": "java/com/google/gerrit/server/patch/diff/ModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-23T14:33:13Z",
      "side": 1,
      "message": "I still believed that the Weighable interface is good. It\u0027s not just for documentation, but it defines a behaviour that some entities can implement.\n\nI removed that class as per your recommendation.",
      "parentUuid": "8c3f231d_880ee819",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "012f8b71_54a55f1d",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Maybe add a link to the ModifiedFilesCache?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2b0bf0c_bd4d6443",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "012f8b71_54a55f1d",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7417bb42_f95d7f69",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Can you explain in the comment why the indirection through this interface is needed?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ed4f3c6_cc81a3b9",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "In all other caches we have an interface and an implementation. \n\nAlice also recommended this to me in https://gerrit-review.googlesource.com/c/gerrit/+/280296/comment/a2fa6cd9_0b358afd/.",
      "parentUuid": "7417bb42_f95d7f69",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6387ad5a_a67b3157",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-20T07:35:32Z",
      "side": 1,
      "message": "Yes, I saw that comment :-) But why is an interface better than no interface? ISTM it\u0027s just another indirection and complexity, and it\u0027s not clear what the benefit is. Maybe it should be removed for the other caches? Or else there\u0027s a non-obvious reason for having it, in which case that should be mentioned in the docs.",
      "parentUuid": "6ed4f3c6_cc81a3b9",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "686bfb61_9ac51b4d",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-20T12:25:54Z",
      "side": 1,
      "message": "Yes I agree. I had it implemented this way at first, since the interface is kind of small. But I think it\u0027s still good to have a compact interface offering a clean API for clients. I also preferred to have this cache implemented in the same way as other caches.\n\nI also saw we do a NotImplemented implementation in some cases, probably we may need to have this flexibility.\n\nWe can think of removing this indirection (probably for some other caches) in a later change.",
      "parentUuid": "6387ad5a_a67b3157",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b14346f3_f198a18c",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2020-10-21T13:54:54Z",
      "side": 1,
      "message": "\u003e interface better than no interface? ISTM it\u0027s just another indirection and complexity, and it\u0027s not clear what the benefit is. Maybe it should be removed for the other caches? \n\nmaybe but if all othre caches have it, best to keep it here too, and address it separately?  Introducing interfaces with single implementation is overhead, but it\u0027s not unheard of. See eg. the new test APIs that Alice has been working on it. It does make things clearer for folks who read the source directly, because the interface is a succinct definition of how a class should be used.",
      "parentUuid": "686bfb61_9ac51b4d",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8054903_7c94c048",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-22T16:27:12Z",
      "side": 1,
      "message": "\u003e maybe but if all othre caches have it, best to keep it here too, and address it separately?\n\nIf there is no reason to have the interface I don\u0027t see a benefit from consistency, especially if we decide to clean it up later. So I think we should first decide if we want to keep it or not.\n\n\u003e  Introducing interfaces with single implementation is overhead, but it\u0027s not unheard of. See eg. the new test APIs that Alice has been working on it. It does make things clearer for folks who read the source directly, because the interface is a succinct definition of how a class should be used.\n\nDoesn\u0027t the public API of the class already do that? Also, \"it has been done before/elsewhere\" doesn\u0027t mean that\u0027s the best solution. In fact if it was done before and we still can\u0027t point to an advantage, isn\u0027t that all the more reason to revert to simplicity? :-)\n\nI\u0027m not even sure the interface makes the code more readable. E.g. ModifiedFilesCacheImpl wraps a GitModifiedFilesCacheImpl. Shouldn\u0027t it wrap the interface instead? Now additional thinking is necessary where it otherwise wouldn\u0027t. Also, if we later do discover a use case for an interface layer it seems straightforward to add.\n\nSorry for the rant, I don\u0027t want to block the change on this so if you want to proceed and deal with this later, SGTM. We should just keep track of it somewhere.",
      "parentUuid": "b14346f3_f198a18c",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ee34bf6_6dafafdc",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-23T09:34:15Z",
      "side": 1,
      "message": "\u003e ModifiedFilesCacheImpl wraps a GitModifiedFilesCacheImpl. Shouldn\u0027t it wrap the interface instead?\n\nThe ModifiedFilesCacheImpl wraps the interface (GitModifiedFilesCache) and not the implementation. However I\u0027m still using the GitModifiedFilesCacheImpl#Key, but I could extract this key in a separate class to remove this dependency. LMK if you want me to do that.\n\nI would prefer to defer this decision to a later change since it\u0027s not directly affecting the core logic of this change.",
      "parentUuid": "c8054903_7c94c048",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8ca6584_2b1c58da",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-23T12:56:52Z",
      "side": 1,
      "message": "\u003e \u003e ModifiedFilesCacheImpl wraps a GitModifiedFilesCacheImpl. Shouldn\u0027t it wrap the interface instead?\n\u003e \n\u003e The ModifiedFilesCacheImpl wraps the interface (GitModifiedFilesCache) and not the implementation. \n\nSorry, my mistake - the comment said *Impl but the code actually didn\u0027t use the impl.\n\n\u003e However I\u0027m still using the GitModifiedFilesCacheImpl#Key, but I could extract this key in a separate class to remove this dependency. LMK if you want me to do that.\n\nI think that depends on whether we later remove the interface layer or not. Right now it seems odd; in my mind an *Impl is something that callers, especially from other packages, shouldn\u0027t depend on. So given that this is to be shared between the two, I think yes, it should be extracted.\n\n\u003e I would prefer to defer this decision to a later change since it\u0027s not directly affecting the core logic of this change.\n\nSGTM",
      "parentUuid": "0ee34bf6_6dafafdc",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af31f93f_db73d9ae",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-23T14:33:13Z",
      "side": 1,
      "message": "Thanks for the feedback. To avoid merge conflicts (since I\u0027m implementing the key serializer in the next change), I extracted the key to a separate class in a new change (the change after the next).",
      "parentUuid": "a8ca6584_2b1c58da",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dea1c465_f922c774",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-23T14:34:15Z",
      "side": 1,
      "message": "Change https://gerrit-review.googlesource.com/c/gerrit/+/285609",
      "parentUuid": "af31f93f_db73d9ae",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d1cac05_5f7efec3",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2020-10-28T11:36:46Z",
      "side": 1,
      "message": "\u003e Sorry for the rant, I don\u0027t want to block the change on this so if you want to proceed and deal with this later, SGTM. We should just keep track of it somewhere.\n\nSGTM - this change series is complex enough already.",
      "parentUuid": "dea1c465_f922c774",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d27d7da_ba9951ec",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "I think common style is to not have bare @foo docs w/o the general description part. Personally I don\u0027t mind, but maybe we should still stick to that convention.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11e12938_1f9b2292",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5d27d7da_ba9951ec",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5401d642_a156667a",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Can you add @throws with info on when this is thrown?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d1fcd16_d2d4ea63",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCache.java",
        "patchSetId": 4
      },
      "lineNbr": 31,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5401d642_a156667a",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74d55fa8_1c91fd25",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "This already follows from \"implements GitModifiedFilesCache\". Maybe instead say whether this is the only implementation?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab7e58c3_3befcf9c",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 48,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "74d55fa8_1c91fd25",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59d5b102_acbee57b",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Comment how this value was calculated/estimated.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1cf9cc57_0ddeb2eb",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I\u0027m not very familiar how these numbers were set, but the open source documentation has some defaults and recommendations: https://gerrit-documentation.storage.googleapis.com/Documentation/3.0.0/config-gerrit.html#cache.name.diskLimit.\n\nThis is also the same value used in the current implementation of the diff cache.\n\n[1] https://gerrit.googlesource.com/gerrit/+/refs/heads/master/java/com/google/gerrit/server/patch/PatchListCacheImpl.java#52",
      "parentUuid": "59d5b102_acbee57b",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a152585a_cfb2195c",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-20T07:35:32Z",
      "side": 1,
      "message": "Can you add that link to the value? I think it helps readers understand where this value came from and why it is suitable.",
      "parentUuid": "1cf9cc57_0ddeb2eb",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5fabad90_c4b52c63",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-20T12:25:54Z",
      "side": 1,
      "message": "Sure. Done.",
      "parentUuid": "a152585a_cfb2195c",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31456144_e02e034e",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Why isn\u0027t this cache persisted on disk?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7654801b_790a8f45",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "It is.",
      "parentUuid": "31456144_e02e034e",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5a82bd1_31497f52",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-20T07:35:32Z",
      "side": 1,
      "message": "I didn\u0027t realize this uses a default of 128MB disk size. Could you add a comment that this uses the default? (It\u0027s probably better not to mention the value itself in case it ever changes.)",
      "parentUuid": "7654801b_790a8f45",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b72171b6_c94eefec",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 65,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-20T12:25:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c5a82bd1_31497f52",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb6c26c1_36b2f931",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "I guess there is no need to diff multiple sets of trees, right?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e23012bf_b7eb9dd1",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Yes, currently there is no use case for it, but that can be added later if we needed to.",
      "parentUuid": "cb6c26c1_36b2f931",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "721785d2_85b3b485",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "opt: inline?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48bcd402_223bf2e2",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "721785d2_85b3b485",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5395bf2_9cfa7abd",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "I think it warrants a comment why it\u0027s OK to use DiffFormatter here and discard its output. To the unenlightened reader this looks like massive computation overhead. Unfortunately the docs in DiffFormatter itself don\u0027t address this use case. I\u0027m guilty of the same sin in FileCountValidator. Now that we\u0027re adding another use case of DiffFormatter as a changed file detector, WDYT about taking the opportunity to add to its documentation the reasoning for this use case? This is non-obvious even to the trained eye, as evidenced by the discussion on b/151064182 :-)",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdf70b44_5f915dac",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Why is this problematic? I re-read the discussion for the FileCountValidator, and that seemed to replace using the PatchListCache with a direct DiffFormatter#scan [1] in the FileCountValidator for a faster computation. I don\u0027t see a contradiction.\n\nThe DiffFormatter is also used internally by the current diff cache implementation (in PatchListLoader), so I\u0027m just moving it to the new cache here.\n\nOn why we use a a DisabledOutputStream, I need to take a closer look on this, should I?\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/264179",
      "parentUuid": "f5395bf2_9cfa7abd",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2eda827a_40859c2f",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-20T07:35:32Z",
      "side": 1,
      "message": "When I read \"DiffFormatter\" I imagine that it scans two files, computes a diff and formats it for rendering in the frontend. All that output is then discarded into DisabledOutputStream.INSTANCE. That would be expensive and it\u0027s not what it\u0027s doing here (I hope :-). Instead it is used to just find changed files, which is much faster (I hope again, and actually know from FileCountValidator). So it\u0027s obviously OK to use, but if you don\u0027t happen to know that then the documentation here and in DiffFormatter itself doesn\u0027t explain it. It would never occur to me to use a class called Diff*Formatter* to just find changed files. That\u0027s why I think some more documentation would help here.",
      "parentUuid": "bdf70b44_5f915dac",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c5f4a33_93327735",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-20T12:25:54Z",
      "side": 1,
      "message": "Done. Added documentation.\n\nthe #scan method is documented:\n\n\u003e Determine the differences between two trees.\n\u003e No output is created, instead only the file paths that are different are\n\u003e returned. Callers may choose to format these paths themselves, or convert them\n\u003e into {@link org.eclipse.jgit.FileHeader}` instances with a complete edit list by\n\u003e calling {@link DiffEntry}.",
      "parentUuid": "2eda827a_40859c2f",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29c616df_b52330c3",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "If this value is just a proxy I think its doc should link to DiffFormatter.",
      "range": {
        "startLine": 111,
        "startChar": 48,
        "endLine": 111,
        "endChar": 63
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2efafe1a_07f5423f",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 111,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "29c616df_b52330c3",
      "range": {
        "startLine": 111,
        "startChar": 48,
        "endLine": 111,
        "endChar": 63
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0cb7a25_112e0e64",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "How about doing this via a static final map?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cdd42cff_d8c9cd57",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Thanks for the tip! Much better.\nDone.",
      "parentUuid": "a0cb7a25_112e0e64",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b53d7391_cce68cd5",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 150,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "opt: Personally I feel it helps readability when dependencies are declared first. How about moving this up somewhere before where it\u0027s used?",
      "range": {
        "startLine": 150,
        "startChar": 31,
        "endLine": 150,
        "endChar": 34
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1b2f1a10_a635e5b7",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 150,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I prefer to keep it at the end of the class, Some other caches have this at the end, e.g. the GroupIncludeCacheImpl.",
      "parentUuid": "b53d7391_cce68cd5",
      "range": {
        "startLine": 150,
        "startChar": 31,
        "endLine": 150,
        "endChar": 34
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41fad937_c8b2b38f",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "nit: What happens here is the computation of the diff, the evaluation is done by the human looking at the change, right?",
      "range": {
        "startLine": 156,
        "startChar": 7,
        "endLine": 156,
        "endChar": 16
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd5ea35b_b8189d2c",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "yes, replaced it with \"computed\".",
      "parentUuid": "41fad937_c8b2b38f",
      "range": {
        "startLine": 156,
        "startChar": 7,
        "endLine": 156,
        "endChar": 16
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8ab78bb_3fd2f930",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 167,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Why the quotes? That makes it sound like we\u0027re not talking about a real rename.",
      "range": {
        "startLine": 167,
        "startChar": 53,
        "endLine": 167,
        "endChar": 61
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b0f4a81_6c8e36ea",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 167,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done. Removed the quotes.",
      "parentUuid": "e8ab78bb_3fd2f930",
      "range": {
        "startLine": 167,
        "startChar": 53,
        "endLine": 167,
        "endChar": 61
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4b9dfb0_5a67af5b",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 168,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "How about saying \"This value is only available if {@link renameDetectionEnabled()} is true\"?",
      "range": {
        "startLine": 167,
        "startChar": 62,
        "endLine": 168,
        "endChar": 77
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8589405_8fe2a16e",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 168,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d4b9dfb0_5a67af5b",
      "range": {
        "startLine": 167,
        "startChar": 62,
        "endLine": 168,
        "endChar": 77
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e4b75fc_ed39602e",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Out of curiosity, how do we ensure that there aren\u0027t different thresholds in Gerrit resulting in contradicting classification?",
      "range": {
        "startLine": 170,
        "startChar": 24,
        "endLine": 170,
        "endChar": 35
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c3da411_efca1604",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I think we can\u0027t. The new design deliberately has this value explicitly so that callers are able to specify their version of rename detections. Although I\u0027m implementing a common wrapper interface on top of the diff caches in a follow up change that should be used by our current code paths, but that doesn\u0027t prevent other callers to directly use these caches since they are public.",
      "parentUuid": "9e4b75fc_ed39602e",
      "range": {
        "startLine": 170,
        "startChar": 24,
        "endLine": 170,
        "endChar": 35
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76291437_d05f4316",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "nit: renameDetection?",
      "range": {
        "startLine": 172,
        "startChar": 19,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b3d1b4e0_d3982ac3",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 172,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "76291437_d05f4316",
      "range": {
        "startLine": 172,
        "startChar": 19,
        "endLine": 172,
        "endChar": 35
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a61a1d92_90300022",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "KeySerializer to distinguish it from ValueSerializer below?",
      "range": {
        "startLine": 214,
        "startChar": 7,
        "endLine": 214,
        "endChar": 19
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11408dd5_aef286b1",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesCacheImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a61a1d92_90300022",
      "range": {
        "startLine": 214,
        "startChar": 7,
        "endLine": 214,
        "endChar": 19
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbd4eedf_7e466421",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "opt: return modifiedFiles.stream().mapToInt(ModifiedFile::weight).sum() + key.weight();",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21060f9a_0bdc4cdd",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/GitModifiedFilesWeigher.java",
        "patchSetId": 4
      },
      "lineNbr": 25,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dbd4eedf_7e466421",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e1c1034_c17c478b",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Please add javadoc for all public methods.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d79e5c3d_690ddc16",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Why is this optional?",
      "range": {
        "startLine": 30,
        "startChar": 18,
        "endLine": 30,
        "endChar": 26
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b324d5d7_14c62898",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I had a use case for that (where I wanted to set an empty Modified File) but now I removed it.\n\nI removed the Optional. Done.",
      "parentUuid": "d79e5c3d_690ddc16",
      "range": {
        "startLine": 30,
        "startChar": 18,
        "endLine": 30,
        "endChar": 26
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f33a98f3_47a127f7",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e1c1034_c17c478b",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62a3230c_aa3fa1d6",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "I think for simple getters the convention is to just put \"Returns the old name...\" and not use @return.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cebbbc14_1b1943a3",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62a3230c_aa3fa1d6",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e41aa14a_79095095",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "That sounds unreliable :-)",
      "range": {
        "startLine": 34,
        "startChar": 80,
        "endLine": 34,
        "endChar": 86
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7cc47538_0e569bc5",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e41aa14a_79095095",
      "range": {
        "startLine": 34,
        "startChar": 80,
        "endLine": 34,
        "endChar": 86
      },
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f00aaaf4_a65693e3",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "nit: comment that this represents the change type.",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66119785_d2379fb8",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f00aaaf4_a65693e3",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2e2e7bf_9fb056fa",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Maybe throw an exception here to be safe?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f37b6d7_15af55d0",
        "filename": "java/com/google/gerrit/server/patch/gitdiff/ModifiedFile.java",
        "patchSetId": 4
      },
      "lineNbr": 77,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I implemented this method in the next follow up change.\n\nI did added an exception throw statement as per your recommendation.\n\nDone.",
      "parentUuid": "d2e2e7bf_9fb056fa",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e820b248_426c93e2",
        "filename": "javatests/com/google/gerrit/acceptance/api/revision/RevisionDiffIT.java",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2020-10-19T13:16:00Z",
      "side": 1,
      "message": "Should this be implemented in this change?",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6da1e63e_95108b4c",
        "filename": "javatests/com/google/gerrit/acceptance/api/revision/RevisionDiffIT.java",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-10-19T17:30:00Z",
      "side": 1,
      "message": "I will implement it in a follow up change, as it\u0027s not directly related to something that should be tested by this change.",
      "parentUuid": "e820b248_426c93e2",
      "revId": "123e9fa8a286255ac7d5ba11b598892735758391",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}