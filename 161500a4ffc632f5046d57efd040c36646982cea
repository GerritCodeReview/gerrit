{
  "comments": [
    {
      "key": {
        "uuid": "d76c27f3_9ac82d46",
        "filename": "ReleaseNotes/Makefile",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-01-29T17:02:44Z",
      "side": 1,
      "message": "I really hate writing shell scripts inside a Makefile. If this can be written more elegantly, please propose an improvement.",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 29
      },
      "revId": "161500a4ffc632f5046d57efd040c36646982cea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b77173c9_7909a70c",
        "filename": "ReleaseNotes/Makefile",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1016342
      },
      "writtenOn": "2015-01-29T17:19:04Z",
      "side": 1,
      "message": "Why not simply use the git-diff-index test I proposed?\nThis double merge-base test is much more difficult to understand and I currently don\u0027t see any benefit for it.",
      "parentUuid": "d76c27f3_9ac82d46",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 29
      },
      "revId": "161500a4ffc632f5046d57efd040c36646982cea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d76c27f3_7a97592c",
        "filename": "ReleaseNotes/Makefile",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-01-29T18:00:27Z",
      "side": 1,
      "message": "I overlooked this part of your comment.... Sorry, this is why I neither commented on it nor tried to make use of it. What is actually the proposed diff-index command doing/checking? Can you propose here a working script?\n\nRegarding the merge bases. This is only a poorly readable check if one commit is a predecessor of the other:\n\n  merge-base(A,B) \u003d A means that A is predecessor of B\n\nHaving to write a negation variant of the check here also doesn\u0027t make the script more readable. What I wanted to write here is:\n\n  IF exists($t) AND ($c is-predecessor-of $t) AND ($t is-predecessor-of $h) THEN\n    version \u003d $v\n  ELSE\n    version \u003d $v + \"(from N)\"\n  END\n\nHowever, since $v already exists and we only need the ELSE branch I wrote the negation of the IF condition which made the whole command much less readable.\n\nStill, I am curios about your variant with the diff-index and if it works in all cases.",
      "parentUuid": "b77173c9_7909a70c",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 29
      },
      "revId": "161500a4ffc632f5046d57efd040c36646982cea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b77173c9_99f11ba0",
        "filename": "ReleaseNotes/Makefile",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-01-29T18:07:15Z",
      "side": 1,
      "message": "Now I tried the diff-index as you proposed:\n\n\t@v\u003d$$(echo $\u003c | sed \u0027s/^ReleaseNotes-//;s/.txt$$//;\u0027) \u0026\u0026 \\\n\t c\u003d$$(git rev-list -1 HEAD -- $\u003c) \u0026\u0026 \\\n\t n\u003d$$(git describe $$c) \u0026\u0026 \\\n\t if ! git diff-index --quiet v$$v -- $\u003c; then v\u003d\"$$v (from $$n)\"; fi \u0026\u0026 \\\n\t $(ASCIIDOC) --unsafe \\\n...\n\nThen checked out master and build ReleaseNotes-2.10.txt. The result contained version \"2.10 (from v2.10-rc2-2-gd75c1a0)\". However, I would like to see just \"2.10\" in that case.\n\nEither I applied your proposal wrongly or it doesn\u0027t cover this case.",
      "parentUuid": "d76c27f3_7a97592c",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 29
      },
      "revId": "161500a4ffc632f5046d57efd040c36646982cea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d76c27f3_1a8c1d1c",
        "filename": "ReleaseNotes/Makefile",
        "patchSetId": 4
      },
      "lineNbr": 44,
      "author": {
        "id": 1016342
      },
      "writtenOn": "2015-01-30T06:47:13Z",
      "side": 1,
      "message": "Are you sure that it actually was rebuild (there is no dependency on the Makefile)?\nFor me it worked (version \"2.10\" after checking out master/v2.10-1424-g2c707a6).\nWhen using git-diff-index, please also add a 2\u003e/dev/null to suppress the error message when a tag does not exist yet.",
      "parentUuid": "b77173c9_99f11ba0",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 29
      },
      "revId": "161500a4ffc632f5046d57efd040c36646982cea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}