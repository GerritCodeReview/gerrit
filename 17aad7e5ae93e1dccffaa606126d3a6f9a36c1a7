{
  "pushCert": "certificate version 0.1\npusher A0D0EF51 1518017582 +0100\nnonce AFD2Vu3l3Y0Uqy8bU3eSChLQZ0OsRiGBpl/5XBQGu2F84dCDT6x07jHqLcCsCwcAU/kdY5kaCdjQ\n\n0000000000000000000000000000000000000000 17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7 refs/for/master\n-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEjcOJ9ZBmQPrFqZA3UbX9l6DQ71EFAlp7HC4ACgkQUbX9l6DQ\n71FfkAf9FpNxnqiiO1TNBR48EwAkq6u6QtvxgncnXi0m2qNx5z+dDyTcN2G26pk0\nAnUnOnPWI3L56uSbvO0a1xHifPKN7qqT5Uw5uYihYZMAB/Znh2mNuGpKCX9DBxIA\nnJ5Hm+NXo58TS+1Sr/NAmete1C2XNLQsXX4ECz5GT4I5SkXHXa//kBhr9ndGpN+G\nwPv9KD3VnzsSrKSN8fg9Lw99ndGADG7vOZlxO8tA8GEY6HqqMZFkEMMxFRo6or9h\nq+djSj6XTbZpwZoH7M1Xdxn4MGp0lAkcy49tQDarOjv1KB8aEVik0O4jvyiaObQu\nfU6GGlHC7eqk+a4z4dQN69TbmEVSLw\u003d\u003d\n\u003d5Gbq\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "eb1574bb_2564d010",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2018-02-07T17:31:09Z",
      "side": 1,
      "message": "Do we expect this approach to work when multiple slaves share a common NFS backend?  It seems that only one slave would receive the push, so the other slaves would not get updated?",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b340052d_b91473e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-07T17:46:46Z",
      "side": 1,
      "message": "No, we would be glad to get some help from the community to make it work for such a setup. See also discussion at: https://gerrit-review.googlesource.com/c/gerrit/+/156850/2//COMMIT_MSG#12",
      "parentUuid": "eb1574bb_2564d010",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c90eab_3239570c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2018-02-07T17:52:45Z",
      "side": 1,
      "message": "I guess this would work if we had a multi-node index solution that gets updated whenever any slave receives a group push?   i.e. replicating the index updates the way some of the plugins do for masters, or using a slave site specific elastic search cluster?  Are any of these solutions available to work on slaves yet?\n\nI am also concerned that high end sites could not handle this sort of load via Gerrit.  git-daemon tends to be more efficient and need less memory.  I don\u0027t think our Gerrit slave jvms could handle the additional heap requirements that this is likely to introduce.  I am curious if other large Gerrit sites think their slaves could handle this?\n\nAnother approach would be to add a git-hook to the project containing groups that would call Gerrit either via ssh or REST and trigger this re-index on receiving a push to a group.  We use this approach for replication when we need multiple hops.  Combine this with a regular scheduled index for safety and it probably would be fairly reliable.  It isn\u0027t nearly as elegant pushing to Gerrit, but it might be more viable for most sites.",
      "parentUuid": "eb1574bb_2564d010",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bfd53fb_7caadb5d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-02-07T18:24:36Z",
      "side": 1,
      "message": "\u003e I guess this would work if we had a multi-node index solution that\n \u003e gets updated whenever any slave receives a group push?   i.e.\n \u003e replicating the index updates the way some of the plugins do for\n \u003e masters, or using a slave site specific elastic search cluster? \n \u003e Are any of these solutions available to work on slaves yet?\n\nNo\n\n \u003e I am also concerned that high end sites could not handle this sort\n \u003e of load via Gerrit.  git-daemon tends to be more efficient and need\n \u003e less memory.  I don\u0027t think our Gerrit slave jvms could handle the\n \u003e additional heap requirements that this is likely to introduce.  I\n \u003e am curious if other large Gerrit sites think their slaves could\n \u003e handle this?\n\nOn our side, we use Apache with git smart http on the slave to receive\nreplication. We need to test if Gerrit/JVM can handle the extra load\nbut I think it could in our case. We already managed/tune very large heap\nfor the master so doing it for the slave should not be an issue.",
      "parentUuid": "89c90eab_3239570c",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf362e7f_c3608055",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2018-02-07T19:24:32Z",
      "side": 1,
      "message": "Most of our slaves are not nearly as RAM heavy as our masters.  Our slaves might be off in some small site and have 1/2 to 1/8 the RAM of the master.  No matter how much RAM the slaves have, we tend to scale the SSH threads to the RAM.  Which threads will handle these incoming requests, the current existing SSH threads?  If so, I guess we could handle them without changing any configs, but it would mean that replication would be robbing the number of SSH threads available to people syncing from the slave.",
      "parentUuid": "0bfd53fb_7caadb5d",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b381361_cfa12814",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-08T17:28:40Z",
      "side": 1,
      "message": "Hugo, Martin, thanks for your input. It seems this solution doesn\u0027t work for everyone and for now we are giving up on it. Instead we are now going for a simpler solution: https://gerrit-review.googlesource.com/c/gerrit/+/158273",
      "parentUuid": "bf362e7f_c3608055",
      "revId": "17aad7e5ae93e1dccffaa606126d3a6f9a36c1a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}