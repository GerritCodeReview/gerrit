{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ab9bc290_bf454efd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-02-21T16:49:19Z",
      "side": 1,
      "message": "Instead of having a --no-limit option (unrestricted) which would allow anyone to skip the ACLs, why don\u0027t we just introduce an \"no-limit\" permission instead? For all of those who want to have the system users making operations on Gerrit without limits, that would be a viable option.\n\n@Edwin @Nasser @Martin what do you think?",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3361a32c_371ede02",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-02-21T19:16:17Z",
      "side": 1,
      "message": "well, that wouldn\u0027t help me, as my script is oriented towards regular gerrit users.",
      "parentUuid": "ab9bc290_bf454efd",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b6c144a_f9ef3a49",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-02-22T07:17:37Z",
      "side": 1,
      "message": "Yes, I think admins should be in control of whether unlimited queries are allowed or not.\n\nI don\u0027t mind much, wether unlimited queries are allowed by assigning the the highest possible query limit (as suggested in the commit message) or by a dedicated new permission, .",
      "parentUuid": "3361a32c_371ede02",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38c03ff8_1acc346c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-02-22T09:12:54Z",
      "side": 1,
      "message": "i don\u0027t, because i think it\u0027s a rather crude measure for the intended purpose - it only helps against very stupid attackers, while imposing significant disadvantages on actual users.\n\napproaching it from another angle: what is even the point of no-limit after your change? defeating other parameters from the same command really makes no sense.",
      "parentUuid": "9b6c144a_f9ef3a49",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ee6b020_40ce4d27",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2022-02-22T17:15:53Z",
      "side": 1,
      "message": "\u003e Instead of having a --no-limit option (unrestricted) which would allow anyone to skip the ACLs, why don\u0027t we just introduce an \"no-limit\" permission instead? For all of those who want to have the system users making operations on Gerrit without limits, that would be a viable option.\n\nGiven that making the ACLs enforce a query limit does not actually help prevent a DOS without some other internal change to the way that queries work, can you explain what problem you are trying to solve?",
      "parentUuid": "38c03ff8_1acc346c",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e31d29f6_c3f16adf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-02-22T19:02:00Z",
      "side": 1,
      "message": "I agree that the query mechanics need some refactoring to make it more robust and resilient to DoSes.\n\nsetting limits is one aspect to tackle, I agree with that isn’t the only one. Tacking the limit alone won’t solve the whole problem, but it would certainly be a step in the right direction.\n\nwould you come to the hackathon and help out with the other steps?",
      "parentUuid": "9b6c144a_f9ef3a49",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe25bfa3_f8de4977",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2022-02-22T19:59:11Z",
      "side": 1,
      "message": "\u003e I agree that the query mechanics need some refactoring to make it more robust and resilient to DoSes.\n\u003e \n\u003e setting limits is one aspect to tackle, I agree with that isn’t the only one. Tacking the limit alone won’t solve the whole problem, but it would certainly be a step in the right direction.\n\u003e \n\u003e would you come to the hackathon and help out with the other steps?\n\nThat sounds like a good plan.",
      "parentUuid": "e31d29f6_c3f16adf",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 19
      },
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17516002_99e1ef10",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-10-20T03:22:47Z",
      "side": 1,
      "message": "Just an update on this item #2. As of Change Ifb1f6f5411, no-limit queries respect the backend limit as the max size a single request to the index backend should have and will paginate with that size or smaller to get the full set of results.\n\n#1 still exists as an issue, but we\u0027re likely a lot closer to having some configuration that could address the concern.",
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "244f92df_da4632cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-10-20T06:32:54Z",
      "side": 1,
      "message": "Thanks for the update. Much appreciated!",
      "parentUuid": "17516002_99e1ef10",
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42f98609_8dceb1dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-02-21T12:33:28Z",
      "side": 1,
      "message": "as edwin pointed out to me, i actually ran into this issue, see https://crbug.com/gerrit/15708.\n\nmy use case is as pointed out by nasser: i have an automation script that actually wants all the results. the limit makes things unreasonably complicated.\n\nmy understanding from a frontend/user perspective is indeed that the \"limit\" is in fact only a default, to prevent _accidentally_ unreasonable queries.\n\nas was pointed out already, limiting the number of returned results isn\u0027t an effective way to prevent DoS, as even small continuation queries can cause vast load.\nan actual DoS protection needs to set cpu time limits, accumulated by account (where anonymous users are more or less lumped together), with exponential back-off. this of course requires worker threads that cooperate with interruption.\n\ni suppose the bug report might be a better place to continue the discussion.",
      "revId": "190ecc9c4f6987c3cc3ac5e8234aaef34597feba",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}