{
  "comments": [
    {
      "key": {
        "uuid": "3dd5942a_f63440c5",
        "filename": "gerrit-acceptance-framework/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 2
      },
      "lineNbr": 429,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-10T21:52:48Z",
      "side": 1,
      "message": "Usually we pass that as a List or collection in Gerrit.\n\nAt the callsite, you do ImmutableList.of(....)",
      "range": {
        "startLine": 429,
        "startChar": 39,
        "endLine": 429,
        "endChar": 58
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d0c08c0_e796c267",
        "filename": "gerrit-acceptance-framework/src/test/java/com/google/gerrit/acceptance/AbstractDaemonTest.java",
        "patchSetId": 2
      },
      "lineNbr": 429,
      "author": {
        "id": 1023465
      },
      "writtenOn": "2016-02-11T16:11:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3dd5942a_f63440c5",
      "range": {
        "startLine": 429,
        "startChar": 39,
        "endLine": 429,
        "endChar": 58
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dd5942a_d66024af",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 2
      },
      "lineNbr": 241,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-10T21:52:48Z",
      "side": 1,
      "message": "We don\u0027t use the mergeable result here, so get rid of it completely.\n(The `\u003d\u003dnull` check is just to make sure we fail in case of error. But we can do so in the ChangeSet.isMergeable as well)\n\nWhile doing so, please transfer the comment to ChangeSet.isMergeable.",
      "range": {
        "startLine": 232,
        "startChar": 0,
        "endLine": 241,
        "endChar": 9
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d0c08c0_27b5faf9",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 2
      },
      "lineNbr": 241,
      "author": {
        "id": 1023465
      },
      "writtenOn": "2016-02-11T16:11:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3dd5942a_d66024af",
      "range": {
        "startLine": 232,
        "startChar": 0,
        "endLine": 241,
        "endChar": 9
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dd5942a_f65b2000",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ChangeSet.java",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-10T21:52:48Z",
      "side": 1,
      "message": "I like this approach to have the ChangeSet be responsible for mergeability checking, (that should reduce the problemsForSubmitting in submit.java even more than by the lines I pointed out there.)\n\nHowever this is not complete yet, as a change set can consist of changes targeting multiple branches or even projects by having the changes combined via the submitWholeTopic feature\n(all changes of the same topic are submitted together, and by setting one topic across project boundaries, you get a set of changes submitted across projects)\n\n\nConsider if the commit graphs from the two test cases you have in SubmitResolvingMergeCommitIT to be submitted together within one change set. And order of them is random, so you cannot know if you\u0027ll be iterating through another unrelated commit to cause problems until you have done it.\n\nSo I\u0027d rather use an algorithm like this:\n\n    Paint all commits red\n    For each commit that is mergable or a merge commit:\n        Paint it (and its ancestors?) green\n    Check that no commit is still painted red.\n\nLooking at the algorithm proposed here, I think it would do the trick for one target branch/project, so another algorithm would be\n\n    For (targetbranch : changesByBranch().keySet())\n        Run the algorithm as below for changesByBranch().get(targetBranch)\n    If none of the targetbranches failed, we\u0027re good",
      "range": {
        "startLine": 128,
        "startChar": 2,
        "endLine": 128,
        "endChar": 65
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1dfe10bd_85bca2e2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ChangeSet.java",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1023465
      },
      "writtenOn": "2016-02-11T16:11:52Z",
      "side": 1,
      "message": "Thanks for the detailed suggestion!\n\nI think it\u0027s necessary to have some tests though. It would be greatly appreciated if you could provide some sample test cases like you did previously. I\u0027ll try to come up with some on my side in the meantime.\n\nI\u0027ll upload a patch set beforehand just so you can have a glance at the new solution and confirm whether or not it reflects what you had in mind.",
      "parentUuid": "3dd5942a_f65b2000",
      "range": {
        "startLine": 128,
        "startChar": 2,
        "endLine": 128,
        "endChar": 65
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fdfcdcc6_e40b5a76",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ChangeSet.java",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-11T19:38:35Z",
      "side": 1,
      "message": "We had this one before:\n\nA \u003c- B \u003c- C\n \\    \\\n  E \u003c- F \u003c- G\n\nwhere G clashes with C, and F resolves the clashes between E and B. Let\u0027s set a topic \"foo\" to G and K, whereas\n\nH \u003c- I\n \\    \\\n  J \u003c- K\n\nK is the last merge commit resolving all problems.\n\nNote: A-G are in project 1, whereas H-K are in project 2,\nthe only connection between those is the same topic.\n\nTo get that test, you\u0027d\n\n  assume().that(isSubmitWholeTopicEnabled()).isTrue();\n\nfirst like in AbstractSubmit.submitWholeTopic() and then setup the commits for different projects like in SubmitByMergeIfNecessary.submitChangesAcrossRepos().",
      "parentUuid": "1dfe10bd_85bca2e2",
      "range": {
        "startLine": 128,
        "startChar": 2,
        "endLine": 128,
        "endChar": 65
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1dfe10bd_45446a90",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ChangeSet.java",
        "patchSetId": 2
      },
      "lineNbr": 128,
      "author": {
        "id": 1023465
      },
      "writtenOn": "2016-02-11T20:17:48Z",
      "side": 1,
      "message": "Thank you! I\u0027ll finish this test before uploading a new patch set.",
      "parentUuid": "fdfcdcc6_e40b5a76",
      "range": {
        "startLine": 128,
        "startChar": 2,
        "endLine": 128,
        "endChar": 65
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dd5942a_1630dcc7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ChangeSet.java",
        "patchSetId": 2
      },
      "lineNbr": 149,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-10T21:52:48Z",
      "side": 1,
      "message": "I don\u0027t think we can short cut here.\n\nEdit: see above",
      "range": {
        "startLine": 147,
        "startChar": 0,
        "endLine": 149,
        "endChar": 7
      },
      "revId": "191663960b6116abdfb87ba44b20db8e07f5dd4f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}