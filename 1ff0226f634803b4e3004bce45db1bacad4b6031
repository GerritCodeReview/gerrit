{
  "comments": [
    {
      "key": {
        "uuid": "595ea0fe_d83b4db6",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/audit/GroupMemberAuditListener.java",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2014-07-28T08:11:01Z",
      "side": 1,
      "message": "Looking at all *Listener.java files in our source tree I see the following two cases:\n\n* a listener is just notified that an event happened but cannot do anything to prevent/block that event. In that case the listener doesn\u0027t throw any checked exception(s). Examples: GitReferenceUpdatedListener, HeadUpdatedListener, AuditListener, ...\n\n* a listener can block the event. In this case the listener throws a checked exception which is on the same level of abstraction as the listener interface. Examples: CommitValidationListener throws CommitValidationException, MergeValidationListener throws MergeValidationException, ...\n\nSince this listener is not intended to validate/block a group membership change(s) it belongs to the first category and shouldn\u0027t throw any exception.",
      "range": {
        "startLine": 30,
        "startChar": 51,
        "endLine": 30,
        "endChar": 62
      },
      "revId": "1ff0226f634803b4e3004bce45db1bacad4b6031",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7969a4a1_99be3bc0",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/audit/GroupMemberAuditListener.java",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1007114
      },
      "writtenOn": "2014-07-28T09:11:56Z",
      "side": 1,
      "message": "Before this change, issues during writes to the audit log tables would have caused an OrmException eventually resulting in an internal server error. \n\nThis raises the question wether the DbGroupMemberAuditListener now should handle OrmException (and e.g. log the issue). Or if it should rather wrap the OrmException into a RuntimeException. The first options would be change the behaviour. The second option would be compatible with the previous behaviour.\n\nAlso, one would have to discuss if the audit service shouldn\u0027t be made more robust with respect to exceptions thrown in listeners. If an exception thrown in a listener should not block the regular execution the audit listener should catch and handle java.lang.Exception, I think.",
      "parentUuid": "595ea0fe_d83b4db6",
      "range": {
        "startLine": 30,
        "startChar": 51,
        "endLine": 30,
        "endChar": 62
      },
      "revId": "1ff0226f634803b4e3004bce45db1bacad4b6031",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "595ea0fe_18ddc52c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/audit/GroupMemberAuditListener.java",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1007114
      },
      "writtenOn": "2014-07-28T11:07:26Z",
      "side": 1,
      "message": "After a discussion with Sa≈°a, we are proposing the following.\n\n - The listeners may not throw a checked exception but log the issue\n - The audit service defensively handles and logs any RuntimeException",
      "parentUuid": "7969a4a1_99be3bc0",
      "range": {
        "startLine": 30,
        "startChar": 51,
        "endLine": 30,
        "endChar": 62
      },
      "revId": "1ff0226f634803b4e3004bce45db1bacad4b6031",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7969a4a1_f9cd776c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/audit/GroupMemberAuditListener.java",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-07-28T11:47:10Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "595ea0fe_18ddc52c",
      "range": {
        "startLine": 30,
        "startChar": 51,
        "endLine": 30,
        "endChar": 62
      },
      "revId": "1ff0226f634803b4e3004bce45db1bacad4b6031",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}