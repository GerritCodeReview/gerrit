{
  "comments": [
    {
      "key": {
        "uuid": "b091cf63_ce2dc303",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-09-21T15:27:08Z",
      "side": 1,
      "message": "nit: inconsistent indentation",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 6
      },
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e57707bf_f4837803",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2016-09-26T14:45:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b091cf63_ce2dc303",
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "501413d4_d89ced5f",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-09-22T05:32:22Z",
      "side": 1,
      "message": "This needs to be absolute path in external dir. On Buck side it is:\n\n  cd /home/davido/projects/gerrit/buck-out/gen/lib/js/bower__srcs \u0026\u0026\n  OUT\u003d/home/davido/projects/gerrit/buck-out/gen/lib/js/bower/bower@1.7.9.npm_binary.tgz /bin/bash -e /home/davido/projects/gerrit/buck-out/tmp/genrule-2830518357215239695.sh\n\nAnd the invocation is:\n\n  /usr/bin/python2 /home/davido/projects/gerrit/buck-out/gen/tools/download_file.pex -o $OUT -u http://registry.npmjs.org/bower/-/bower-1.7.9.tgz -v b7296c2393e0d75edaa6ca39648132dd255812b0\n\nAfter s/name/artifact below, this failing with:\n\n  $ bazel fetch @bower//...\n  ERROR: failed [/usr/bin/python, /home/davido/projects/gerrit/tools/download_file.py, \"-o\", \"bower@1.7.9.npm_binary.tgz\",\n  \"-u\", \"http://registry.npmjs.org/bower/-/bower-1.7.9.tgz\"]\n\nbecause -o argument is not absolute dir path.",
      "range": {
        "startLine": 25,
        "startChar": 32,
        "endLine": 25,
        "endChar": 36
      },
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0246f48_5388c41f",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1025087
      },
      "writtenOn": "2016-09-22T01:01:31Z",
      "side": 1,
      "message": "they should resolve within the repository where the skylark file lives. If not that\u0027s a bug.",
      "range": {
        "startLine": 35,
        "startChar": 6,
        "endLine": 35,
        "endChar": 49
      },
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e57707bf_9490044b",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2016-09-26T14:45:33Z",
      "side": 1,
      "message": "ok.",
      "parentUuid": "b0246f48_5388c41f",
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0246f48_7385c006",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1025087
      },
      "writtenOn": "2016-09-22T01:01:31Z",
      "side": 1,
      "message": "I am even surprised this work, removing it should work just fine.",
      "range": {
        "startLine": 37,
        "startChar": 7,
        "endLine": 37,
        "endChar": 54
      },
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "501413d4_5888dd1f",
        "filename": "tools/bzl/js.bzl",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-09-22T05:32:22Z",
      "side": 1,
      "message": "It\u0027s used on line 3 of this script. So just removing it doesn\u0027t work either. The pending cl for maven_jar Skylark rule doesn\u0027t use it either, but uses artifact argument to set the paths for the downloaded artifact: [1]. So I guess there is no way to access name in Skylark repository_rule.\n\nThe workaround for now is to pass name twice as name and as custom attribute say artifact., So remove name from the attribue list and add \"artifact\" instead:\n\n  attrs\u003d {\n      \"attribute\": attr.string(default\u003d\"\", mandatory\u003dTrue),\n      [...]\n\nand the invocation is:\n\n  npm_binary(\n    name \u003d \u0027bower\u0027,\n    artifact \u003d \u0027bower\u0027,\n    version \u003d \u00271.7.9\u0027,\n    sha1 \u003d \u0027b7296c2393e0d75edaa6ca39648132dd255812b0\u0027,\n  )\n\n* [1] https://bazel-review.googlesource.com/#/c/5770/9/tools/build_defs/repo/maven_rules.bzl@101",
      "parentUuid": "b0246f48_7385c006",
      "range": {
        "startLine": 37,
        "startChar": 7,
        "endLine": 37,
        "endChar": 54
      },
      "revId": "226c34bf6fa3a3d2df98a282de5bb42ab3bb660c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}