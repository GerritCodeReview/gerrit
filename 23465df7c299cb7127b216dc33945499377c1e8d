{
  "comments": [
    {
      "key": {
        "uuid": "301ec818_f674803f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-22T22:21:22Z",
      "side": 1,
      "message": "In REST endpoints we refer to the latest patch set as \u0027current\u0027.  Maybe it should be the same here for consistency?",
      "range": {
        "startLine": 7,
        "startChar": 45,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "101b842a_956f046a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-22T22:21:22Z",
      "side": 1,
      "message": "nit: /",
      "range": {
        "startLine": 7,
        "startChar": 44,
        "endLine": 7,
        "endChar": 45
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_c00edeaa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "+1 let\u0027s be consistent and call that current.\nnit: remove \\",
      "parentUuid": "301ec818_f674803f",
      "range": {
        "startLine": 7,
        "startChar": 45,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50ec1c3c_bfb817ae",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/RefNames.java",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "changeCurrentPatchsetRef",
      "range": {
        "startLine": 101,
        "startChar": 23,
        "endLine": 101,
        "endChar": 38
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_602a72ee",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 198,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "make this a Map\u003cChange.Id, Integer\u003e",
      "range": {
        "startLine": 198,
        "startChar": 32,
        "endLine": 198,
        "endChar": 48
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_e01de2de",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 200,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "looks like you don\u0027t need the key, so you can just iterate over refs.values()",
      "range": {
        "startLine": 200,
        "startChar": 40,
        "endLine": 200,
        "endChar": 55
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_20206a0c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 204,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "optional: psId",
      "range": {
        "startLine": 204,
        "startChar": 18,
        "endLine": 204,
        "endChar": 28
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "301ec818_d6798437",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 207,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-22T22:21:22Z",
      "side": 1,
      "message": "nit: one-line if-blocks should also have braces",
      "range": {
        "startLine": 206,
        "startChar": 6,
        "endLine": 207,
        "endChar": 17
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_4023ee1a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 209,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "remove this and call patchSetId.get() inline when you need it",
      "range": {
        "startLine": 209,
        "startChar": 6,
        "endLine": 209,
        "endChar": 44
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "301ec818_367f181b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-22T22:21:22Z",
      "side": 1,
      "message": "What if the latest patch set is a draft that is not visible to the caller?",
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_c046de99",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T17:00:39Z",
      "side": 1,
      "message": "I\u0027ll kill draft patch sets on non-draft changes next week to come around this. wanted to do this for a long time :)",
      "parentUuid": "301ec818_367f181b",
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "301ec818_762d1004",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-24T05:43:53Z",
      "side": 1,
      "message": "Hmm. That sounds like quite a significant behavioural change of how drafts work.  I\u0027d rather not do that unless we\u0027re going to just get rid of drafts completely (ref. the discussion during the recent hackathon).",
      "parentUuid": "70e76057_c046de99",
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50ec1c3c_22351037",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-27T12:40:55Z",
      "side": 1,
      "message": "I tend to disagree :)\n\nI totally see why people want draft changes (when a change is not ready for review yet) or private changes (which a change should be reviewed in private; e.g. for security implications)\nBut I really see no use case where you would want to have a public change that has X patch sets but only X-Y of them are public.\nTo back my claim, if someone would want that, they can\u0027t prevent users from adding themselves as reviewers and suddenly seeing all the draft patch sets. Also, this leads to a lot of bug reports when patch sets in the middle of a change are drafts and users think: \"Oh, why is there a PS 1 and a PS3 but not PS2?\"\n\nFrom what I recall, the consensus on on our drafts discussion was that people agreed that draft patch sets on public changes are broken and could be removed; drafts could actually be split up into drafts (i.e. preparing for review) and private (i.e. a review done in private until it is merged).\nSome people argued that drafts should be removed completely, but I think the consensus was that this would break a lot of the workflows users have today. Please do correct me here if my memory is wrong.\n\nSo from what I see, we could do two things: Short term, we can prevent users from adding draft patch sets to public changes. Long term I guess with a larger discussion), we should split up draft changes into draft and private changes or rename drafts to private for a simpler fix (this would need more discussion for sure).\n\nBut I am happy to discuss this further. We can also take it to the mailing list to get more input.",
      "parentUuid": "301ec818_762d1004",
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "101b842a_f574783f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 218,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-11-22T22:21:22Z",
      "side": 1,
      "message": "nit: long line",
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70e76057_0019e6f2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 2
      },
      "lineNbr": 222,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-23T09:01:42Z",
      "side": 1,
      "message": "no need to return anything, Java is by reference, so this can be a void",
      "range": {
        "startLine": 222,
        "startChar": 4,
        "endLine": 222,
        "endChar": 16
      },
      "revId": "23465df7c299cb7127b216dc33945499377c1e8d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}