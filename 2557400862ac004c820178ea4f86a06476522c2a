{
  "comments": [
    {
      "key": {
        "uuid": "b50a4612_58a6fdcb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-22T21:14:10Z",
      "side": 1,
      "message": "Huh? What\u0027s a stale database instance?\n\nEach SchemaFactory.open() call opens a new connection to the database (or uses pooling if enabled). They don\u0027t have state associated with them other than the actual connection to the underlying database. Which is still one database.\n\nThe thing that happens with multiple background threads under load is that you might get unexpected orderings between writes happening in one background thread and reads happening in another.",
      "range": {
        "startLine": 13,
        "startChar": 15,
        "endLine": 13,
        "endChar": 45
      },
      "revId": "2557400862ac004c820178ea4f86a06476522c2a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b53fa6b4_d0c41c4c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-22T21:25:38Z",
      "side": 1,
      "message": "I\u0027m not quite sure how that may happen so may be my eplanation attempt is not the best one. But as I understand it, when you open a new connection after the last write to the database was commited it works. When the change is looked up in the connection that was opened before last write it\u0027s broken.",
      "parentUuid": "b50a4612_58a6fdcb",
      "range": {
        "startLine": 13,
        "startChar": 15,
        "endLine": 13,
        "endChar": 45
      },
      "revId": "2557400862ac004c820178ea4f86a06476522c2a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b50a4612_18a085aa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-22T21:58:17Z",
      "side": 1,
      "message": "Well, what you\u0027re describing indeed sounds like a \"stale\" instance. I am just skeptical that that\u0027s possible. If it is, it should be possible to reproduce in an isolated 100% of the time, but I couldn\u0027t do it:\n\nhttps://gerrit-review.googlesource.com/61050",
      "parentUuid": "b53fa6b4_d0c41c4c",
      "range": {
        "startLine": 13,
        "startChar": 15,
        "endLine": 13,
        "endChar": 45
      },
      "revId": "2557400862ac004c820178ea4f86a06476522c2a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b50a4612_389b4980",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/RebaseChange.java",
        "patchSetId": 1
      },
      "lineNbr": 98,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-22T21:58:17Z",
      "side": 1,
      "message": "change",
      "range": {
        "startLine": 98,
        "startChar": 12,
        "endLine": 98,
        "endChar": 17
      },
      "revId": "2557400862ac004c820178ea4f86a06476522c2a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}