{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5fc96df9_bfa23b46",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2021-10-26T11:11:29Z",
      "side": 1,
      "message": "I was wondering if - for the sake of simplicity and less configs - we should just consider the applicability expression as visible only to admins? So we don\u0027t add a config, but we implicitly assume the same as if this config was set to true?\n\nYoussef, Edwin, WDYT?",
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29ead9d2_128ff177",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-10-27T07:58:02Z",
      "side": 1,
      "message": "I prefer not hiding it. Interesting cases of applicability expressions:\n1) File paths match some regex (e.g. .*/api/.*)\n2) Commit message has some text\n\nOne example in gerrit-review is library-compliance. From a UI experience, I think it\u0027s nice (and important) that users know what made this requirement appear/apply.",
      "parentUuid": "5fc96df9_bfa23b46",
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "781e4b43_511d0cb9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-10-27T12:04:10Z",
      "side": 1,
      "message": "I\u0027m not sure that a config option on the submit requirements to control the visibility of the applicability expression is the right approach to solve this problem. What concerns me is that this option will be persisted in NoteDb. This means you basically cannot change the hidden option of an existing submit requirement, as all the persisted submit requirements in NoteDb will still have the old value (e.g. imagine you configure a submit requirement, then after some days you realise that the applicability condition should not be visible, but setting the hidden flag only hides it for new/open changes). Another problem is that you only have the choice between hiding and showing it for all users, but maybe you want to show it only for admins, or only for project owners, or only for Googlers etc.\nUnfortunately I don\u0027t have a solution for this to offer, but if this is not a super important feature, I would defer this and for now do what Patrick suggests. Always hide it, except for admins and project owners who anyway can see it by looking at the project.config in refs/meta/config.",
      "parentUuid": "29ead9d2_128ff177",
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dfbad08e_12046e4a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-10-27T13:51:15Z",
      "side": 1,
      "message": "Thanks for highlighting these potential problems. They all make sense.\n\nThen I reworked my change such that:\n1) I kept the \"hidden\" boolean on the API (in SubmitRequirementExpressionInfo)\n2) Always omit the applicability expressions, set hidden\u003dtrue.\n3) Keep submit requirements and storage intact.",
      "parentUuid": "781e4b43_511d0cb9",
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4590c6a0_2ee3de46",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2021-10-26T11:11:29Z",
      "side": 1,
      "message": "This should just be \u0027boolean\u0027.\n\nI guess you used an option to prevent the regression we saw for \u0027legacy\u0027? In that case it\u0027s better to set the default in the \u0027builder\u0027 method.",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 67,
        "endChar": 35
      },
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61b96b94_8d9fd1a9",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 70,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2021-10-26T11:11:29Z",
      "side": 1,
      "message": ".hideApplicabilityExpr(false)",
      "range": {
        "startLine": 70,
        "startChar": 52,
        "endLine": 70,
        "endChar": 53
      },
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdbab550_49e5844a",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2021-10-26T11:11:29Z",
      "side": 1,
      "message": "this can just be boolean.\n\nAutoValue and builders understand optionals and have special logic.",
      "range": {
        "startLine": 96,
        "startChar": 8,
        "endLine": 96,
        "endChar": 25
      },
      "revId": "25679f27604d04f44e848cd44cd04076bbf5c9c8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}