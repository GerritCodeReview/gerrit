{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2bf47479_3578b5c2",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl.ts",
        "patchSetId": 5
      },
      "lineNbr": 1810,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-24T22:17:36Z",
      "side": 1,
      "message": "I could have left the `[]` return value, but TypeScript was complaining that this was not compliant with the declared type (`AccountInfo[] | undefined`).\n\nI return in this case `undefined` because there are no suggested accounts and that\u0027s compatible with the declared returned type.\n\n@brohlfs@google.com would that work? Do you foresee any problems?",
      "range": {
        "startLine": 1810,
        "startChar": 44,
        "endLine": 1810,
        "endChar": 53
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "252c6e5c_e958f989",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl.ts",
        "patchSetId": 5
      },
      "lineNbr": 1810,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-27T10:08:22Z",
      "side": 1,
      "message": "You should return `[]` here, not `Promise.resolve([])`, because you are inside a promise.\n\nSince this is generally confusing, we are trying to avoid `then()` syntax as much as possible these days. We prefer `async/await` syntax. Maybe it is also easier for you here. Just do\n```\nlet canSeeParam \u003d \u0027\u0027;\nif (canSee) {\n  const project \u003d await this.getFromProjectLookup(canSee);\n  canSeeParam \u003d `cansee:${project}~${canSee}`;\n}\n```\nand then use the existing code without `then()`.",
      "parentUuid": "2bf47479_3578b5c2",
      "range": {
        "startLine": 1810,
        "startChar": 44,
        "endLine": 1810,
        "endChar": 53
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e8ead3c5_c645b47e",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl.ts",
        "patchSetId": 5
      },
      "lineNbr": 1810,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-27T11:56:59Z",
      "side": 1,
      "message": "\u003e You should return `[]` here, not `Promise.resolve([])`, because you are inside a promise.\n\u003e \n\u003e Since this is generally confusing, we are trying to avoid `then()` syntax as much as possible these days. We prefer `async/await` syntax. Maybe it is also easier for you here. Just do\n\u003e ```\n\u003e let canSeeParam \u003d \u0027\u0027;\n\u003e if (canSee) {\n\u003e   const project \u003d await this.getFromProjectLookup(canSee);\n\u003e   canSeeParam \u003d `cansee:${project}~${canSee}`;\n\u003e }\n\u003e ```\n\u003e and then use the existing code without `then()`.\n\nThanks for the directions, I\u0027ve amended the change and it looks a lot more readable and smaller in size. Good stuff üëç",
      "parentUuid": "252c6e5c_e958f989",
      "range": {
        "startLine": 1810,
        "startChar": 44,
        "endLine": 1810,
        "endChar": 53
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fcc46fa_ac47d0e6",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl_test.ts",
        "patchSetId": 5
      },
      "lineNbr": 374,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-24T22:17:36Z",
      "side": 1,
      "message": "I do not really understand how this could have worked before: the method returns a `Promise` so I believe the test should wait for its completion.\n\n@brohlfs@google.com I could leave it out of the change if you\u0027d like, as it may not be necessarily needed.",
      "range": {
        "startLine": 374,
        "startChar": 6,
        "endLine": 374,
        "endChar": 11
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5fc4a45_dbbbc935",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl_test.ts",
        "patchSetId": 5
      },
      "lineNbr": 374,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-27T10:08:22Z",
      "side": 1,
      "message": "No, leave it in. Looks good.",
      "parentUuid": "8fcc46fa_ac47d0e6",
      "range": {
        "startLine": 374,
        "startChar": 6,
        "endLine": 374,
        "endChar": 11
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af2ae789_abe326d4",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl_test.ts",
        "patchSetId": 5
      },
      "lineNbr": 1053,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-24T22:17:36Z",
      "side": 1,
      "message": "This change of assertion is needed because the method behaviour is slightly different now: if there are no accounts, there is no content, instead of an empty list.\n\nI\u0027ve tested it E2E and this doesn\u0027t create any UI issue.",
      "range": {
        "startLine": 1053,
        "startChar": 11,
        "endLine": 1053,
        "endChar": 22
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb2c21f0_d7336583",
        "filename": "polygerrit-ui/app/services/gr-rest-api/gr-rest-api-impl_test.ts",
        "patchSetId": 5
      },
      "lineNbr": 1053,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-27T10:08:22Z",
      "side": 1,
      "message": "I think we should keep the previous logic of returning [], see other comment. Then this change should not be required.",
      "parentUuid": "af2ae789_abe326d4",
      "range": {
        "startLine": 1053,
        "startChar": 11,
        "endLine": 1053,
        "endChar": 22
      },
      "revId": "259ec3eb8e785fdcdaecc0e011fa6be444adfe96",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}