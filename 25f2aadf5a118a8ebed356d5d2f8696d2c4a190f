{
  "comments": [
    {
      "key": {
        "uuid": "10c70467_15bfd406",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-11-18T22:52:03Z",
      "side": 1,
      "message": "I was kind of hoping we would get rid of the hidden blocks. Otherwise how do users discover what to filter on?",
      "range": {
        "startLine": 16,
        "startChar": 14,
        "endLine": 16,
        "endChar": 32
      },
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70a120aa_3095c88f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-18T23:00:33Z",
      "side": 1,
      "message": "Yes! Discoverability of this feature is a concern that has been raised elsewhere. Definitely a valid point.\n\nI propose, as an alternative, additions to the Gerrit documentation for what to expect in a footer and how to write a Gmail filter against it. This would also stand as an informal contract.\n\nWhat do you think?",
      "parentUuid": "10c70467_15bfd406",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90893441_69df65f7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-11-21T16:06:06Z",
      "side": 1,
      "message": "The problem with documenting it only in documentation (other than the fact that our documentation is in general not very discoverable) is that it makes it harder to interactively construct filters. You can\u0027t drill down into a particular email to see why it was/wasn\u0027t caught by a filter like you wanted. (I guess you can if you want to look at the HTML source, but that\u0027s not exactly fun to read what with the stripped whitespace and all.)\n\nFor example, the first version of my filter might say \"Gerrit-Reviewer: Dave Borowitz\", but then there was some email that I expected to match this filter, so I go back and open that email, and oh, it actually says \"Gerrit-CC: Dave Borowitz\", so that means I should OR that into my filter as well.\n\nLet me turn the question around: what is the downside of including the footers in the email? The only downside I can see is that it\u0027s visual noise; but is that not something we can address with appropriate styling? Or doesn\u0027t Gmail have a feature like where anything after \"\\n--\\n\" it treats  it as a signature that\u0027s collapsed by default?",
      "parentUuid": "70a120aa_3095c88f",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d091ec62_ab8869b2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-21T19:45:51Z",
      "side": 1,
      "message": "\u003e Let me turn the question around: what is the downside of including the footers in the email? The only downside I can see is that it\u0027s visual noise;\n\nYes, visual noise is the singular downside I see. Constructing filters will be an infrequent task for any user, whereas displaying footers in every message inflicts the visual noise every time -- including for users who have no interest in writing filters.\n\n\u003e but is that not something we can address with appropriate styling? Or doesn\u0027t Gmail have a feature like where anything after \"\\n--\\n\" it treats  it as a signature that\u0027s collapsed by default?\n\nStyling options are limited, so far as I see. For example, minimizing the footer by shrinking the text or making it gray just makes it harder to read. The \\n--\\n approach is quoted rather differently between Gmail and Inbox. More importantly, in both, it still suffers from the problem in the linked issue, but without the option of the mitigation in this change.\n\nWith that said, I\u0027m going to continue exploring styling options.\n\nAs I understand it (as related to me by Shawn) the footers were originally only included in the body because Gmail did-not / does-not support searching by arbitrary mail headers. By rights, in this regard, they belong among the headers (they are headers, essentially) and consequently only appear in the message source. Granted, Gmail makes even the headers easier to read than the whitespace-stripped HTML footers.\n\n\u003e The problem with documenting it only in documentation (other than the fact that our documentation is in general not very discoverable) is that it makes it harder to interactively construct filters.\n\nDiscoverability of docs sounds to me like an additional problem. SIDETRACK This gives me an idea: part of the existing footer contains a link to user settings ...\n\n  To unsubscribe, visit [settings].\n\nWe might add some helper text regarding footer to the user notifications settings UI, and change the message in the footer to something like ...\n\n  For help writing filters, or to unsubscribe, visit [settings].\n\n/SIDETRACK\n\n\u003e You can\u0027t drill down into a particular email to see why it was/wasn\u0027t caught by a filter like you wanted. (I guess you can if you want to look at the HTML source, but that\u0027s not exactly fun to read what with the stripped whitespace and all.)\n\nIf one does view the source of an email, the footers appearing in the plaintext part are no-less readable than the mail headers. Can certainly force Soy to preserve whitespace in the HTML footer as well.",
      "parentUuid": "90893441_69df65f7",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70a120aa_1021a465",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-21T20:10:17Z",
      "side": 1,
      "message": "That said, [1] re-introduces visible footers, which I\u0027ll accept if it gets voted in. ðŸ˜€\n\n* [1] https://gerrit-review.googlesource.com/c/91764/",
      "parentUuid": "d091ec62_ab8869b2",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c70467_753008b1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-11-21T20:43:33Z",
      "side": 1,
      "message": "\u003e Constructing filters will be an infrequent task for any user, whereas displaying footers in every message inflicts the visual noise every time -- including for users who have no interest in writing filters.\n\nGood point. You may have convinced me we should avoid the noise, provided we can mitigate the discoverability issue.\n\n\u003e As I understand it (as related to me by Shawn) the footers were originally only included in the body because Gmail did-not / does-not support searching by arbitrary mail headers. By rights,\n\nI see your point, but that decision was made like 7 years ago, and revisiting those design decisions every few years is not out of the question.\n\n\u003e Discoverability of docs sounds to me like an additional problem.\n\nYes, this is something we need to address independently of this change, obviously.\n\n\u003e  For help writing filters, or to unsubscribe, visit [settings].\n\n+1 to this idea, except we need the documentation on the settings page.\n\n\u003e Can certainly force Soy to preserve whitespace in the HTML footer as well.\n\nYes please.",
      "parentUuid": "d091ec62_ab8869b2",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70a120aa_5375f638",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-22T00:06:49Z",
      "side": 1,
      "message": "\u003e \u003e As I understand it (as related to me by Shawn) the footers were originally only included in the body because Gmail did-not / does-not support searching by arbitrary mail headers. By rights,\n\u003e \n\u003e I see your point, but that decision was made like 7 years ago, and revisiting those design decisions every few years is not out of the question.\n\nTotally reasonable.\n\n\u003e \u003e  For help writing filters, or to unsubscribe, visit [settings].\n\u003e \n\u003e +1 to this idea, except we need the documentation on the settings page.\n\nFiled at https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d4982 .\n\n\u003e \u003e Can certainly force Soy to preserve whitespace in the HTML footer as well.\n\u003e \n\u003e Yes please.\n\nDone.",
      "parentUuid": "10c70467_753008b1",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c70467_55c94cb7",
        "filename": "gerrit-server/src/main/resources/com/google/gerrit/server/mail/ChangeFooterHtml.soy",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2016-11-18T22:56:38Z",
      "side": 1,
      "message": "it might make sense to construct this map in Java and just call HiddenFooter foreach key/value pair",
      "range": {
        "startLine": 43,
        "startChar": 23,
        "endLine": 43,
        "endChar": 41
      },
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c70467_95d20463",
        "filename": "gerrit-server/src/main/resources/com/google/gerrit/server/mail/ChangeFooterHtml.soy",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-18T23:00:33Z",
      "side": 1,
      "message": "Great point. This would also obviate the CommentFooter templates.\n\nUpdating...",
      "parentUuid": "10c70467_55c94cb7",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10c70467_98223915",
        "filename": "gerrit-server/src/main/resources/com/google/gerrit/server/mail/ChangeFooterHtml.soy",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2016-11-22T00:06:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10c70467_95d20463",
      "revId": "25f2aadf5a118a8ebed356d5d2f8696d2c4a190f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}