{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "262bb3ec_6a023b34",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-02-22T08:45:48Z",
      "side": 1,
      "message": "Missing forward-compatibility check (Forward-Compatible: checked)",
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "779fdd26_a6216c63",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-03-11T08:00:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "262bb3ec_6a023b34",
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35520a47_87663902",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-02-22T08:45:48Z",
      "side": 1,
      "message": "Ping @dariusjokilehto@gmail.com",
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4cd2a88_0b3b79cf",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 824,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-02-18T00:38:57Z",
      "side": 1,
      "message": "This variable name is now stale. According to the comments at L826 and L827, this can be either the start of UUID or part of the username.",
      "range": {
        "startLine": 824,
        "startChar": 8,
        "endLine": 824,
        "endChar": 17
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2206adb_79b85d2e",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 824,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-02-22T19:56:23Z",
      "side": 1,
      "message": "Correct - it\u0027s stale until L831. I agree it\u0027s not great, but it\u0027s literally the next thing we do. One way to do this without compromising on stale variable names might be to abstract the code to derive `uuidStart` into its own method? I think that may also help with not increasing the size of an already bloated method (`parseCopiedApproval`) as well as keeping the code at the right level of abstraction.\n\nWDYT?\n\nI\u0027ll submit a patchset as soon as I get a chance.",
      "parentUuid": "e4cd2a88_0b3b79cf",
      "range": {
        "startLine": 824,
        "startChar": 8,
        "endLine": 824,
        "endChar": 17
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c287b891_5cfc7b4a",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 824,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-03-03T11:35:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2206adb_79b85d2e",
      "range": {
        "startLine": 824,
        "startChar": 8,
        "endLine": 824,
        "endChar": 17
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61a6acf6_475b7972",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-02-18T00:38:57Z",
      "side": 1,
      "message": "Basically, here we are saying that *IF* the uuidStart was not the first char after the score, then it means there is no uuid.\n\nWhy don\u0027t we do that instead at L824?\n- We look for the \u0027\u003d\u0027 and then the numbers after that\n- If the next char is a ` ` \u003d\u003e no UUID\n- If the next char is a `,` \u003d\u003e UUID",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e915d791_3c38f95b",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-02-22T19:56:23Z",
      "side": 1,
      "message": "Do you mean to use a regex? I was under the impression we wanted to keep using `indexOf` instead of regexes for performance reasons.",
      "parentUuid": "61a6acf6_475b7972",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "174824a6_1f070855",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-03-11T08:00:28Z",
      "side": 1,
      "message": "Not sure if that is what he meant but I could imagine up to two checks after that.\nHaving the following line\n`Label2\u003d+1, 577fb248e474018276351785930358ec0450e9f7 Gerrit User 1 \u003c1@gerrit\u003e`\nand `\u003d` being at index `6` all you have to do is check if `, ` starts at index `8` (when `0` is given) or `9` (when `-/+N`).\nAFAIU other case would mean thet it is not an UUID.\n\n@luca is that what you meant?",
      "parentUuid": "e915d791_3c38f95b",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a4b425f_64593aab",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-03-17T13:53:40Z",
      "side": 1,
      "message": "As the type is a short though, we\u0027d also have to check 2-digit scores, etc. though, no? Also `+` is optional.\n\nI think it\u0027d be a bit more fragile, even though in practice I don\u0027t know how many setups will allow \u003e 1 digit scores.\n\nI\u0027m not sure how we\u0027d check the character after the last digit of the vote.",
      "parentUuid": "174824a6_1f070855",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63bea3d7_e32cf5c2",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-04-24T07:48:25Z",
      "side": 1,
      "message": "\u003e As the type is a short though, we\u0027d also have to check 2-digit scores, etc. though, no? Also `+` is optional.\n\u003e \n\u003e I think it\u0027d be a bit more fragile, even though in practice I don\u0027t know how many setups will allow \u003e 1 digit scores.\n\nAFAIK, 2-digit scores is really unheard of.",
      "parentUuid": "0a4b425f_64593aab",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a637bfe_6ab95196",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-04-28T14:16:41Z",
      "side": 1,
      "message": "It does make me slightly uncomfortable as the docs [1] and the type [2] both express the type is `short`, and there is no mention of support single-digit numbers only. I can also see the vote formatter specifically supports multi-digit numbers [3].\n\nHaving said that I looked at the tests, and I don\u0027t see a case for multi-digit numbers [4]. Adding such a test case does pass... but if these are never used by convention, and we are ok with silently breaking this (maybe other parts of Gerrit core also make this assumption?) then yes we can simplify this case.\n\nWDYT?\n\n[1] https://gerrit-review.googlesource.com/Documentation/config-labels.html#label_value\n[2] https://gerrit.googlesource.com/gerrit/+/refs/heads/stable-3.5/java/com/google/gerrit/server/util/LabelVote.java#73\n[3] https://gerrit.googlesource.com/gerrit/+/refs/heads/stable-3.5/java/com/google/gerrit/server/util/LabelVote.java#73\n[4] https://gerrit.googlesource.com/gerrit/+/refs/heads/stable-3.5/javatests/com/google/gerrit/server/util/LabelVoteTest.java",
      "parentUuid": "63bea3d7_e32cf5c2",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7943ab78_5d49f5be",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-05-03T07:56:34Z",
      "side": 1,
      "message": "I would suggest adding to the documentation that the maximum vote is +9 and minimum vote is -9, so that documentation and code are consistent.\n\nWe can also mention that in the release notes.",
      "parentUuid": "5a637bfe_6ab95196",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec966bdb_e3669b9b",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-05-10T13:22:08Z",
      "side": 1,
      "message": "It is not needed anymore as all digits are walked over now - see the `for` loop in line #947",
      "parentUuid": "7943ab78_5d49f5be",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51bdcd04_030c5da6",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNotesParser.java",
        "patchSetId": 5
      },
      "lineNbr": 830,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-05-15T20:48:53Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "ec966bdb_e3669b9b",
      "range": {
        "startLine": 830,
        "startChar": 9,
        "endLine": 830,
        "endChar": 31
      },
      "revId": "29706d92af0e4253d871aef0174dc79dd213dda8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}