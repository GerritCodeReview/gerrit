{
  "comments": [
    {
      "key": {
        "uuid": "AAACf3////0\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Suggestion: \"of the update hook, hooks\"",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+w\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Seems like too many ~s",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////w\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Nit: lots of trailing spaces.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////s\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 28,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "suggestions:\n\n...with a non zero...\n\n...rejected, and the output...",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////o\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Suggestion: so it is recommended that it not block...",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////k\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "A default timeout...",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////g\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 32,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "This timeout value...",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////c\u003d",
        "filename": "Documentation/config-hooks.txt",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "This piece should probably be documented in the config section and linked to from here.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////I\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 146,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Nit: no tabs.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+s\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 187,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Since this is a new config, it should probably go in the all-projects config instead of the server config.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////o\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 187,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "Do you mean both the hook script name and the timeout?\nCan you give me an example of all-projects config? Is it the plan to have all server config project based?",
      "parentUuid": "AAACf3///+s\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACi3////g\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 187,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T18:41:01Z",
      "side": 1,
      "message": "I meant the timeout since it is a new feature.  The plan is not to have it project based, but rather to simply move most of the server config stuff into the all-projects config file so that it lives in a git repo and is version controlled.  For an example, perhaps look at the global capabilities stuff, that is now stored in all-projects.",
      "parentUuid": "AAACfn////o\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 264,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Why not also return the output up until this point?",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////Y\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 264,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "I can append the current output",
      "parentUuid": "AAACf3////E\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////U\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 527,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Nit: wrap sooner",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+o\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 541,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Are you intentionnaly not cancelling the task or the process here?  The docs should probably explain what happens on a timeout.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 541,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "You right the task should be cancelled. However, the script may continue. Not sure there is a way to clean this up?",
      "parentUuid": "AAACf3///+o\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////M\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 545,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "I think you need an else to close the repo here.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 545,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "Will add",
      "parentUuid": "AAACf3////M\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////A\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 570,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "This class is an awfull lot of copy and pasted code from HookTask, anyway to make this class share more code with HookTask instead?",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////g\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 570,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "Will see what I can do",
      "parentUuid": "AAACf3////A\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3////Y\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 612,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "We probably dont want the separator to change based on the server, I believe that we are making an effort to always use newlines in the ssh outputs.  Or, perhpas we should just output whatever the hook outputs?",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////c\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 612,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "So just use \\n?",
      "parentUuid": "AAACf3////Y\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACi3////c\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHookRunner.java",
        "patchSetId": 3
      },
      "lineNbr": 612,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T18:41:01Z",
      "side": 1,
      "message": "I guess I see no reason to change what the hook outputs, is there a simpler way to just shove it all directly in the StringBuffer?",
      "parentUuid": "AAACfn////c\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+8\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHooks.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Perhaps this hook should he called refUpdateHook instead?  I can easily imagine that other higher level update hooks (changeUpdateHook) will likely be desired in the future.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////M\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHooks.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "I am happy to rename it. I used update as I thought the hook was analogous to git\u0027s update hooks.",
      "parentUuid": "AAACf3///+8\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACi3////U\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHooks.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T18:41:01Z",
      "side": 1,
      "message": "Yeah, but most of the hooks here are more Gerrit based than git based (note the doRefUpfatedHook on line 116).  Which brings up an important point which you may or may not realize:  while I won\u0027t tell you which hooks you should implement, I suspect that this particular hook is less useful than you might believe, let me explain.\n\nAs you can see, most of the hooks here are based on Gerrit data structures, and for people who want to monitor uploads, they likely will need to at least tie the upload to a change and this does not allow them to do so (there is no direct unique connection between a git commit id and a gerrit change).  So, I suspect that for some things this may be OK (like checking the author\u0027s email address, or other simple things like that), but anything which requires looking at the change for which a patchset might be destined, it will not be possible to do that reliably with this hook.  With this in mind, perhaps you may desire to also add changeUpdateHook at a later date, a hook which operates further up in the ReceiveCommits stack?",
      "parentUuid": "AAACfn////M\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACi3////E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/common/ChangeHooks.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T19:28:11Z",
      "side": 1,
      "message": "The requirement for our hook it to be able to reject certain commits ( with bad history that we had to rewrite ) either direct pushes or changes hence the implementation at this level.",
      "parentUuid": "AAACi3////U\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+0\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 3
      },
      "lineNbr": 415,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "No need to repeat the code in comments",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACf3///+4\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 3
      },
      "lineNbr": 422,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-02-01T06:58:32Z",
      "side": 1,
      "message": "Nit: bracket on same line as if.",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAACfn////I\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 3
      },
      "lineNbr": 422,
      "author": {
        "id": 1010041
      },
      "writtenOn": "2012-02-01T14:45:33Z",
      "side": 1,
      "message": "Sorry, I will get used to the style :-)",
      "parentUuid": "AAACf3///+4\u003d",
      "revId": "2bd571c3e3c87d8367c12820cc6093cc9f47760a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}