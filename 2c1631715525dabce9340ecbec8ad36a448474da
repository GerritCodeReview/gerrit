{
  "comments": [
    {
      "key": {
        "uuid": "7dba97ea_f735c4ca",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2017-08-07T16:44:49Z",
      "side": 1,
      "message": "I don\u0027t think this else statement is necessary. I think this._cachedToken can always be set to null.",
      "range": {
        "startLine": 105,
        "startChar": 8,
        "endLine": 105,
        "endChar": 29
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "975b54f7_0f73f813",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-08-07T17:59:11Z",
      "side": 1,
      "message": "I don\u0027t see significant difference here, so done.",
      "parentUuid": "7dba97ea_f735c4ca",
      "range": {
        "startLine": 105,
        "startChar": 8,
        "endLine": 105,
        "endChar": 29
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fcf72cb_0e8429e6",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 110,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2017-08-07T16:44:49Z",
      "side": 1,
      "message": "I don\u0027t know what\u0027s the best response here. So the client has attempted to fetch a fresh access token, but that token is not valid. This seems like a failure scenario. Should this throw an exception? Or is it better to attempt to make the xhr request without the access_token\u003d\"token\" parameter? That xhr seems doomed to fail and a bit more challenging to debug. Thoughts?",
      "range": {
        "startLine": 110,
        "startChar": 10,
        "endLine": 110,
        "endChar": 21
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f52b2be5_74e34738",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 110,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-08-07T17:59:11Z",
      "side": 1,
      "message": "\u003e is it better to attempt to make the xhr request without the \naccess_token\u003d\"token\" parameter?\n\nThis is exactly what will happen.",
      "parentUuid": "6fcf72cb_0e8429e6",
      "range": {
        "startLine": 110,
        "startChar": 10,
        "endLine": 110,
        "endChar": 21
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45e896e3_56ec7d7f",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 110,
      "author": {
        "id": 1032503
      },
      "writtenOn": "2017-08-07T18:33:22Z",
      "side": 1,
      "message": "Yeah. Is making the xhr request without the access_token the best way to handle this scenario? Is the xhr guaranteed to fail w/out the access_token. If the xhr is doomed to fail, should this throw an exception?",
      "parentUuid": "f52b2be5_74e34738",
      "range": {
        "startLine": 110,
        "startChar": 10,
        "endLine": 110,
        "endChar": 21
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "148c403a_a49bf19c",
        "filename": "polygerrit-ui/app/elements/shared/gr-rest-api-interface/gr-auth.js",
        "patchSetId": 4
      },
      "lineNbr": 110,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-08-07T20:31:58Z",
      "side": 1,
      "message": "tl;dr: I\u0027m agree with the point, but I don\u0027t see a straightforward solution right here.\n\n\u003e If the xhr is doomed to fail\n\nEffectively, the response would be performed as if user isn\u0027t signed in.\nPractically this will generate mixed results - some things will work while some would not.\n\nSay, the access_token isn\u0027t expired, but user had logged out. What should happen? I presume, some sort of error should be reported.\n\nWould throwing an error solve it? We don\u0027t do that normally elsewhere, and I\u0027m not sure this is the best pattern for reporting errors.\n\nLet\u0027s discuss this.",
      "parentUuid": "45e896e3_56ec7d7f",
      "range": {
        "startLine": 110,
        "startChar": 10,
        "endLine": 110,
        "endChar": 21
      },
      "revId": "2c1631715525dabce9340ecbec8ad36a448474da",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}