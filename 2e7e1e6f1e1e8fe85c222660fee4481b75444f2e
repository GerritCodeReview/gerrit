{
  "comments": [
    {
      "key": {
        "uuid": "bb6267ec_2cae7b59",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-11-13T03:41:30Z",
      "side": 1,
      "message": "Running vulcanize using run_npm_binary() facility leaves some stuff in vulcanized file:\n\n  \u003cscript src\u003d\"../bower_components/promise-polyfill/Promise.js\"\u003e\u003c/script\u003e\n\nReplacing it with system one fixed it.",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b203791_db0fab44",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-11-13T18:27:46Z",
      "side": 1,
      "message": "Just so I\u0027m keeping track of progress, is this still an issue?",
      "parentUuid": "bb6267ec_2cae7b59",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb6267ec_ecb4e342",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-11-13T18:30:03Z",
      "side": 1,
      "message": "Yes, unfortunately. I even uploaded th fix for that, to reproduce that vilcanized PolyGerrit in gerrit.war is up and runnig in Buck driven build: [1].\n\n* [1] https://gerrit-review.googlesource.com/72440",
      "parentUuid": "3b203791_db0fab44",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b203791_7b72d7ca",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-11-13T19:05:53Z",
      "side": 1,
      "message": "Understood, just asking if there had been any progress since yesterday, and the answer is no, which is fine.",
      "parentUuid": "bb6267ec_ecb4e342",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb6267ec_0f14c98c",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-11-14T00:24:03Z",
      "side": 1,
      "message": "Well, I fixed it, but I am still completely stumped as to the actual cause of the bad behavior.\n\nI got to the point where running run_npm_binary \u003ctgz\u003e had broken behavior (failing to inline everything), whereas running directly the script extracted from \u003ctgz\u003e had the correct behavior. So, there could be literally no difference in the script being executed, only in the way it was invoked.\n\nI found that by changing os.execv in run_npm_binary.py to subprocess.check_call, and still passing *the exact same args*, the behavior worked.\n\nThis is basically the same wonky behavior I observed in https://gerrit-review.googlesource.com/72423. Obviously I just fail to understand how Python executes binaries.\n\nAnyway, it works now. Yay!",
      "parentUuid": "3b203791_7b72d7ca",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb6267ec_8fff9981",
        "filename": "lib/js.defs",
        "patchSetId": 5
      },
      "lineNbr": 100,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-11-14T00:34:09Z",
      "side": 1,
      "message": "That\u0027s really cool. Thanks for fixing it. Getting rid of vulcanize.py is also great optimization.",
      "parentUuid": "bb6267ec_0f14c98c",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 57
      },
      "revId": "2e7e1e6f1e1e8fe85c222660fee4481b75444f2e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}