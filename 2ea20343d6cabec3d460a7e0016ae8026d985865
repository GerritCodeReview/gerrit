{
  "comments": [
    {
      "key": {
        "uuid": "95446258_6f0c71de",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 90,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-23T19:37:06Z",
      "side": 1,
      "message": "Nice idea. We have a lot of this kind of classes in code. May be put it in another more central place and reuse? schemaFactory should be passed in constructor for this to work.",
      "range": {
        "startLine": 90,
        "startChar": 2,
        "endLine": 90,
        "endChar": 32
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "955d4234_87842631",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 90,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-23T19:41:26Z",
      "side": 1,
      "message": "Not now.",
      "parentUuid": "95446258_6f0c71de",
      "range": {
        "startLine": 90,
        "startChar": 2,
        "endLine": 90,
        "endChar": 32
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b53fa6b4_f0fa8053",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-23T19:37:06Z",
      "side": 1,
      "message": "This may be falsified messsage, when GetChanges fails. Conduct a more neutral message that would work for both classes?",
      "range": {
        "startLine": 99,
        "startChar": 18,
        "endLine": 99,
        "endChar": 62
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "955d4234_a7872a35",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-23T19:41:26Z",
      "side": 1,
      "message": "No? In order to reindex changes after a ref update we need to:\n\n1. Get the list of affected changes.\n2. Reindex each one.\n\nIf (1) fails, then the whole operation of reindexing changes after a ref update fails.\n\nI suppose I\u0027m open to other alternatives as long as they fit on one line.",
      "parentUuid": "b53fa6b4_f0fa8053",
      "range": {
        "startLine": 99,
        "startChar": 18,
        "endLine": 99,
        "endChar": 62
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b53fa6b4_700c50de",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-23T19:48:40Z",
      "side": 1,
      "message": "Sure, but we always should provide as specific error message as possible. And here we are losing information: Error happened during changes retrieval and not during actual reindexing. True, as the consequence the whole reindexing operation is failed.",
      "parentUuid": "955d4234_a7872a35",
      "range": {
        "startLine": 99,
        "startChar": 18,
        "endLine": 99,
        "endChar": 62
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b50a4612_388589e9",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-24T20:35:20Z",
      "side": 1,
      "message": "\u003e Sure, but we always should provide as specific error message as possible.\n\nI disagree. There is a stack trace for that.\n\nHowever, one job of the log message is to include information not in the stack trace. I will change this one log message to include information about the event itself.\n\n\u003e And here we are losing information:\n\nNo we\u0027re not. It\u0027s in the stack trace.",
      "parentUuid": "b53fa6b4_700c50de",
      "range": {
        "startLine": 99,
        "startChar": 18,
        "endLine": 99,
        "endChar": 62
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b50a4612_78be618e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-27T18:00:36Z",
      "side": 1,
      "message": "\u003e I will change this one log message to include information about the event itself.\n\nDone",
      "parentUuid": "b50a4612_388589e9",
      "range": {
        "startLine": 99,
        "startChar": 18,
        "endLine": 99,
        "endChar": 62
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95446258_4f11adf6",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 150,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-23T19:37:06Z",
      "side": 1,
      "message": "Another specific abstract base class candidate e. g. CtxTask, that exposes also ctx in call() and rebind old ctx in finaly(), so that the impl() implementation would just be:\n\n  protected Void impl() throws IOException {\n    indexerFactory.create(executor, indexes).index(db, change);\n    return null;\n  }",
      "range": {
        "startLine": 140,
        "startChar": 6,
        "endLine": 150,
        "endChar": 8
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75528e24_267456c2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 150,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-10-23T19:41:26Z",
      "side": 1,
      "message": "Except there\u0027s only one implementation, no point in another abstract base class.\n\nI agree if we factor out this task-with-db-scope logic that this would be another natural candidate, but that\u0027s beyond the scope of this change.",
      "parentUuid": "95446258_4f11adf6",
      "range": {
        "startLine": 140,
        "startChar": 6,
        "endLine": 150,
        "endChar": 8
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b53fa6b4_90f1f477",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/ReindexAfterUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 150,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-23T19:48:40Z",
      "side": 1,
      "message": "certainly.",
      "parentUuid": "75528e24_267456c2",
      "range": {
        "startLine": 140,
        "startChar": 6,
        "endLine": 150,
        "endChar": 8
      },
      "revId": "2ea20343d6cabec3d460a7e0016ae8026d985865",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}