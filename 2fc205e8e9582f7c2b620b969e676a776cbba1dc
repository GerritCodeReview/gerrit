{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "84097717_be6e349b",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1139611
      },
      "writtenOn": "2022-03-28T06:41:56Z",
      "side": 1,
      "message": "Doesn\u0027t it make more sense to compute this on dialog open instead of on select?",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "157ac2ed_aa66e8d3",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T09:21:23Z",
      "side": 1,
      "message": "The dialog HTML is not lazily computed, it exists even when closed (see render test). I think gr-account-list should have all it\u0027s props correct even when not visible, otherwise we may encounter some bizarre bugs down the line if some of the props are considered \"required\". It\u0027s not likely, but there is no serious downside to computing this on select. I could also make the dialog lazy with something like `${this.isShown ? html\u0027\u003cgr-dialog/\u003e\u0027 : undefined}` but it might be user visible to create/attach all the DOM children at the same instant we show the overlay. WDYT?",
      "parentUuid": "84097717_be6e349b",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "938c1f7c_848b39cc",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1139611
      },
      "writtenOn": "2022-03-28T10:10:51Z",
      "side": 1,
      "message": "It\u0027s a lot of unnecessary recomputation in resetFlow that only makes sense when you open the dialog.  This could all be done as part of the `@click { ... this.overlay.open()}`",
      "parentUuid": "157ac2ed_aa66e8d3",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c00161e2_79400c24",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T10:56:38Z",
      "side": 1,
      "message": "Can you reply to the concerns above? The extra work is creating 3 objects and loading the config\u0026account with no DOM operations or other heavy computation, which is done invisibly and asynchronously and seems worth avoiding the above concerns.",
      "parentUuid": "938c1f7c_848b39cc",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e25de16_a22fb2ed",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1139611
      },
      "writtenOn": "2022-03-28T13:12:16Z",
      "side": 1,
      "message": "I think you bring up a good point that the dialog could be lazy-loaded, that\u0027s a good idea.\n\nIn general I believe in only doing the work that\u0027s required unless there\u0027s a specific reason that it needs to be precomputed. I understand it\u0027s not a lot of cost, but by that reasoning we risk weighing down the app with lots of small low-costs (and allocations can cost) which eventually leads to hard to measure jankiness and death by a thousand paper cuts.\n\nIf we can avoid work upfront by-design, that avoids having to investigate these thousands of paper cuts later, especially if for instance the underlying pieces that are allocated grow in complexity.\n\nIf you\u0027re concerned about the overlay showing up before the dialog, this can be addressed through something like:\n\n```\nthis.isShown \u003d true;\nthis.updateComplete.then(() \u003d\u003e this.overlay.open());\n```",
      "parentUuid": "c00161e2_79400c24",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca338c3e_c410360c",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T14:15:01Z",
      "side": 1,
      "message": "Ack. I will prefer lazy-loading over messing up gr-account-list expectations. I will do this in a different change",
      "parentUuid": "1e25de16_a22fb2ed",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2dcaf7e_4117ba18",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T15:21:12Z",
      "side": 1,
      "message": "https://gerrit-review.googlesource.com/c/gerrit/+/334027",
      "parentUuid": "ca338c3e_c410360c",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c22fd3d4_8b61ebde",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 178,
      "author": {
        "id": 1139611
      },
      "writtenOn": "2022-03-28T14:23:16Z",
      "side": 1,
      "message": "getCurrentReviewers and getCurrentCCs are identical except for the \u0027ReviewerState.FOO\u0027 label",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "465ad61c_e3cb3ce6",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 178,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T15:21:12Z",
      "side": 1,
      "message": "merged everything",
      "parentUuid": "c22fd3d4_8b61ebde",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "725828d7_03fd00af",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1139611
      },
      "writtenOn": "2022-03-28T14:23:16Z",
      "side": 1,
      "message": "If you store `this.updatedReviewers` and `this.updatedCcs` as keyed by `[ReviewerState.REVIEWER]` or `[ReviewerState.CC]` on an object in this class, you can also dedup getAddedReviewers and getAddedCcs.\n\nIn fact you can probably make your entire render method generic if you key the various arguments by the ReviewerState.\n\nIt could simply be `this.getCurrent(ReviewerState.REVIEWER)` and `this.getAdded(ReviewerState.REVIEWER)`.",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b2dd7e8_849b7664",
        "filename": "polygerrit-ui/app/elements/change-list/gr-change-list-reviewer-flow/gr-change-list-reviewer-flow.ts",
        "patchSetId": 3
      },
      "lineNbr": 204,
      "author": {
        "id": 1119195
      },
      "writtenOn": "2022-03-28T15:21:12Z",
      "side": 1,
      "message": "merged everything",
      "parentUuid": "725828d7_03fd00af",
      "revId": "2fc205e8e9582f7c2b620b969e676a776cbba1dc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}