{
  "comments": [
    {
      "key": {
        "uuid": "ae202216_1418a4bb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 13,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "This query applies only to googlesource.com. Please exclude it from the public commit message.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 58
      },
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf0cad9c_4bac0737",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 13,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae202216_1418a4bb",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 58
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "234ef338_e41577c7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 19,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "Hm, I think I disagree with this check: There are two ways to sanely express that a parameter can be absent:\n1) @Nullable, @NonNull (which ever is the default in the code base)\n2) Optional\n\nHistorically, we weren\u0027t really thorough with @Nullable because of the lack of tooling. IntelliJ can run a nice analyzer over missing @Nullable annotations and checks, but we don\u0027t have any CI tooling for that. Also, it\u0027s all static analysis. In that world, Optional is a nice escape hatch because it\u0027s a compile time constraint that forces the programmer to consider the absent case.\n\nThe check mentions that with Optional we would get 3 states: present, absent and null. But null never happens here. In theory, it could, but in practice, we always use Optional.ofNullable(...)",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 68
      },
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a7734e0c_d110d65d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 19,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "IMHO forgetting an .isPresent() check is comparable to forgetting to check for null. Also, there are more disadvantages to Optional, e.g. it can be used in String.format(\"%s\") and static analysis won\u0027t catch it. Then there\u0027s the dichotomy between the different Optional classes. To me Optional feels like cognitive overhead here. But I realize it\u0027s a matter of opinion and I don\u0027t want to sneak in one-off style changes piggybacked on feature changes :-) When there\u0027s a more coordinated effort to clean up the code we can pick this up again and decide what to do.",
      "parentUuid": "234ef338_e41577c7",
      "range": {
        "startLine": 19,
        "startChar": 23,
        "endLine": 19,
        "endChar": 68
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "833585ea_6d2ea4f3",
        "filename": "java/com/google/gerrit/server/notedb/LimitExceededException.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2019-12-02T07:18:20Z",
      "side": 1,
      "message": "Missing license/copyright header.",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40d1cad3_eb12d153",
        "filename": "java/com/google/gerrit/server/notedb/LimitExceededException.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "833585ea_6d2ea4f3",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a41dca14_ddd2af36",
        "filename": "java/com/google/gerrit/server/notedb/LimitExceededException.java",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "nit: lower-case b",
      "range": {
        "startLine": 10,
        "startChar": 28,
        "endLine": 10,
        "endChar": 30
      },
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bad75706_d32e3713",
        "filename": "java/com/google/gerrit/server/notedb/LimitExceededException.java",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a41dca14_ddd2af36",
      "range": {
        "startLine": 10,
        "startChar": 28,
        "endLine": 10,
        "endChar": 30
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6f43a71_1c5ddfb3",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbUpdateManager.java",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-11-29T14:08:19Z",
      "side": 1,
      "message": "Do we need to announce this before merging it? Was the maxUpdates change announced?\n\nIMHO, given that only 8 changes exceeded this so far, I\u0027d say it\u0027s sufficient to announce it to chrome (who own all 8).",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ce80b4e_c36d6b63",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbUpdateManager.java",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2019-12-02T07:18:20Z",
      "side": 1,
      "message": "It can be added to the release notes for 3.2.",
      "parentUuid": "c6f43a71_1c5ddfb3",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c119acb2_dd3e8807",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbUpdateManager.java",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "+1 for release-notes only. In the end, we are just preventing misuse.",
      "parentUuid": "7ce80b4e_c36d6b63",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cfa0305c_8d973347",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbUpdateManager.java",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c119acb2_dd3e8807",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af597e2f_f891efbb",
        "filename": "java/com/google/gerrit/server/notedb/OpenRepo.java",
        "patchSetId": 7
      },
      "lineNbr": 132,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "You could just use: Integer.MAX_VALUE to spare creating a static variable per limit. Sometimes, named variables help to explain the reader the ordering of parameters, but here it doesn\u0027t really matter.",
      "range": {
        "startLine": 132,
        "startChar": 20,
        "endLine": 132,
        "endChar": 37
      },
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2941c2a9_7d2bce62",
        "filename": "java/com/google/gerrit/server/notedb/OpenRepo.java",
        "patchSetId": 7
      },
      "lineNbr": 132,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2019-12-02T17:21:38Z",
      "side": 1,
      "message": "The problem is that the code has a separate path for null. Changing that to trigger on Integer.MAX_VALUE would mean we\u0027d introduce a magic value that is indistinguishable from a regular value.\n\nI\u0027ll change it to \"Optional.empty() /* unlimited...*/\".",
      "parentUuid": "af597e2f_f891efbb",
      "range": {
        "startLine": 132,
        "startChar": 20,
        "endLine": 132,
        "endChar": 37
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6677b20_11a6d86f",
        "filename": "java/com/google/gerrit/server/notedb/OpenRepo.java",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2019-12-02T14:01:46Z",
      "side": 1,
      "message": "I think this would also trigger if I already have a change with 10k patch sets and try to add a comment (update) whose psId is 10k?\n\nSince the code is easier that way, I\u0027d leave it as-is.",
      "revId": "319c470d523353a6ccd797a1282982e859c3cd0f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}