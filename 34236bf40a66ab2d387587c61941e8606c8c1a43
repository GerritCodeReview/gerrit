{
  "pushCert": "certificate version 0.1\npusher Dave Borowitz \u003cdborowitz@google.com\u003e 1542666199 -0800\nnonce ADWBXRCsi/bl9Z5fYa1ZuocUGZU1jJAcrXlZkPke2KqaTM9H1DLWLzBryIwnof7UI97YfllstAKY\n\n0000000000000000000000000000000000000000 61ebe2787d3e3a26300d058c1876700f43ed27d8 refs/for/master\n-----BEGIN PGP SIGNATURE-----\n\niQJJBAABCgAzFiEEpPm/sOxWgSqG5grhX9fFmpoSiIwFAlvzN9cVHGRib3Jvd2l0\nekBnb29nbGUuY29tAAoJEF/XxZqaEoiMGjMQAMK2xJJ8iH1O/Dekn6uGMt5IxXlv\n7TNfdRjp3b1Thw4FGb4kpFJEPwlyWVtYY2nSxInN5UaIwyZ7k32fhaePo1qRGEML\nvrwcwnZbigpUiu32xPjkxdtCn1OIlz5jGf5Z+W/LBLftERxaWwX5mu1JI5SctHsc\nldm76SbzrS0WuJvqhJB9cwJT/4ZaTDuL8F2TiLBD1RmN78pm8HHAcxBvsDFsKFB+\nhNjeF9Y2khwo771AlU8OZid7quK4Q5HmCvW6Zhwd0aSP9M1LRVa5WO1lq1RmaHTY\nuWFFfbTn2dFD6bd+3//HTj1l8AfG5V6EvXhOhmBTVpEk8C+kvzrjV50DOWrlTJUq\niaz4YB8kdCLLKcFGiwbkkSXwttONzOiSbH4mZVmYTze/u3accBXjzRB9Ut0TZ9RP\nKrHdSUF/lGvDiQMTKf0jT4RO/rHz4o9M799GLdb6ikeznzWvCs3gqUZqZIQsgjtu\nvj7fbshl7BvcxCQwUAWQ5pPTnVNpoufna3a7r4i0TXe7K7Gq6YlXr0/wwrNYWEgF\nakqtGl1P3vN4QZR/tBnNp0Bg8l6J/IDJYRvtzS06BXYzKy22D1w81XGqw4Xhy5EJ\nxCVU1sufHRIFrOspphcdtFgjGe9Gp2sPN1Ca0jH7nyjTBMaQQvDGu7T+n+71h1p5\ne/oMbp/kuO+8bSSt\n\u003djPeQ\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "b9793f30_134fab78",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 11,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "in All-Projects?",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 17
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bbdb9d2b_bde6ed32",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "I\u0027m not sure that this is a good idea. \nWhat if I\u0027m on master with schema version 185 and now a schema migration is added on stable-2.16, how will it be executed for my master installation? And what if it touches data which is also touch by a NoteDb schema migration?\nSo far we never allowed schema migrations on stable branches. Why is it needed now?",
      "range": {
        "startLine": 12,
        "startChar": 49,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13d0595f_525eda71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2018-11-26T15:50:08Z",
      "side": 1,
      "message": "Well, there is always first time ;-)\n\nNote that these schema migrations strategy-wised and code-wised are complteley de-coupled: ReviewDb based and NoteDb based schema migrations. In fact, on master there cannot be any ReviewDb based migration any more. While on stable-2.16 we can have as many ReviewDb migrations as we may need. We would just raise the gap, done.\n\nWe discussed this during the hackathon and decided that we can do it now, that we are going to remove the ReviewDb schema migration anyway. So that on stable-2.16 we performed Schema migration 170 to remove last remaining ReviewDb table system_config.\n\nMoreover, currently we probably need yet another schema migration to re-scan NoteMap for GPG changes to add subkey to master-key mapping to support push verification for commit that were signed with GPG subkeys, We can still do it on stable-2.16 with schema migration 171. See pending change for review.\n\nThe follow-up change in this series guarantees that stable-2.16 migration was always done \n3.0 NoteDb schema migration.",
      "parentUuid": "bbdb9d2b_bde6ed32",
      "range": {
        "startLine": 12,
        "startChar": 49,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af5f88f0_e41c0baa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T16:03:18Z",
      "side": 1,
      "message": "\u003e The follow-up change in this series guarantees that stable-2.16 migration\n\u003e as always done 3.0 NoteDb schema migration.\n\nThis check doesn\u0027t help for migrations that will be newly added in stable 2.16.\n\nIf I install 2.16 now this check will pass and the 3.0 NoteDb schema migrations will be executed, and all schema migrations that are added in stable-2.16 later will be missed, even if init is executed again.",
      "parentUuid": "13d0595f_525eda71",
      "range": {
        "startLine": 12,
        "startChar": 49,
        "endLine": 13,
        "endChar": 53
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72679a5a_4de4737b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 26,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "ReviewDb?",
      "range": {
        "startLine": 26,
        "startChar": 9,
        "endLine": 26,
        "endChar": 15
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "676de91e_60dccfec",
        "filename": "java/com/google/gerrit/reviewdb/client/RefNames.java",
        "patchSetId": 5
      },
      "lineNbr": 53,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "Should this new ref be documented somewhere, e.g. in note-db.txt?",
      "range": {
        "startLine": 53,
        "startChar": 44,
        "endLine": 53,
        "endChar": 63
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06333965_2c48776d",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbSchemaVersionManager.java",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "Does this mean that this ref cannot be replicated by the replication plugin? This may be bad :/",
      "range": {
        "startLine": 40,
        "startChar": 73,
        "endLine": 41,
        "endChar": 60
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "968d7b88_1df0b329",
        "filename": "java/com/google/gerrit/server/notedb/NoteDbSchemaVersionManager.java",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:43:31Z",
      "side": 1,
      "message": "Uhm, nevermind. The replication plugin is missing all ref updates that happen during init. I hope it has some logic to replicate all refs on Gerrit startup?",
      "parentUuid": "06333965_2c48776d",
      "range": {
        "startLine": 40,
        "startChar": 73,
        "endLine": 41,
        "endChar": 60
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b6e7a4a_10c291f8",
        "filename": "java/com/google/gerrit/server/schema/AllProjectsCreator.java",
        "patchSetId": 5
      },
      "lineNbr": 278,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "nit: unused parameters",
      "range": {
        "startLine": 278,
        "startChar": 33,
        "endLine": 278,
        "endChar": 67
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c86c749c_cfd2b6b7",
        "filename": "java/com/google/gerrit/server/schema/NoteDbSchemaUpdater.java",
        "patchSetId": 5
      },
      "lineNbr": 66,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "nit: for consistency within this class use String.format here too",
      "range": {
        "startLine": 66,
        "startChar": 31,
        "endLine": 66,
        "endChar": 83
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dea6d3a2_b71fc31e",
        "filename": "java/com/google/gerrit/server/schema/NoteDbSchemaVersionCheck.java",
        "patchSetId": 5
      },
      "lineNbr": 53,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "[optional] here and at the other places where this method is used, would it be more readable to have a dedicated method in NotesMigration whether NoteDb migrations should be done (this method can delegate to commitChangeWrites())?",
      "range": {
        "startLine": 53,
        "startChar": 24,
        "endLine": 53,
        "endChar": 44
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d48e8c4f_7443ed24",
        "filename": "java/com/google/gerrit/server/schema/NoteDbSchemaVersionCheck.java",
        "patchSetId": 5
      },
      "lineNbr": 86,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "This will never be invoked since for this condition it will always take the first if branch.",
      "range": {
        "startLine": 79,
        "startChar": 8,
        "endLine": 86,
        "endChar": 7
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6031a3ce_e3029f1d",
        "filename": "java/com/google/gerrit/server/schema/ReviewDbSchemaVersion.java",
        "patchSetId": 5
      },
      "lineNbr": 43,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "Mention that this cannot be \u003e\u003d 180?",
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3435cebd_4ff90895",
        "filename": "java/com/google/gerrit/server/schema/Schema_180.java",
        "patchSetId": 5
      },
      "lineNbr": 18,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "Add\n  @SuppressWarnings(\"unused\")\nto avoid warning in Eclipse.",
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58a95378_ef0c55b2",
        "filename": "javatests/com/google/gerrit/server/schema/NoteDbSchemaUpdaterTest.java",
        "patchSetId": 5
      },
      "lineNbr": 129,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-11-26T15:35:17Z",
      "side": 1,
      "message": "Add\n  @SuppressWarnings(\"unused\")\nto avoid warning in Eclipse.\n\nSame for the TestSchema_11 constructor below.",
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d0d30a80_686668aa",
        "filename": "javatests/com/google/gerrit/server/schema/NoteDbSchemaVersionsTest.java",
        "patchSetId": 5
      },
      "lineNbr": 63,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2018-11-26T07:41:06Z",
      "side": 1,
      "message": "This filtering could be removed once all ReviewDb schema version migrations are removed.",
      "range": {
        "startLine": 63,
        "startChar": 12,
        "endLine": 63,
        "endChar": 47
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b76b1cf4_5dee2738",
        "filename": "javatests/com/google/gerrit/server/schema/NoteDbSchemaVersionsTest.java",
        "patchSetId": 5
      },
      "lineNbr": 65,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2018-11-26T07:41:06Z",
      "side": 1,
      "message": "Nice.",
      "range": {
        "startLine": 56,
        "startChar": 4,
        "endLine": 65,
        "endChar": 40
      },
      "revId": "34236bf40a66ab2d387587c61941e8606c8c1a43",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}