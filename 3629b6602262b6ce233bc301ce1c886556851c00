{
  "comments": [
    {
      "key": {
        "uuid": "AAAGlH///2E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-06-15T04:25:42Z",
      "side": 1,
      "message": "This solution still does this lookup and these tests potentially many times for the same parent project.  And although you know will limit the returned values, you are still incurring the cost of iterating over every project here!",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH////k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T04:42:55Z",
      "side": 1,
      "message": "your are right!\nI plan shift it to \n\n     if (parentState !\u003d null\n            \u0026\u0026 !parents.contains(parentState.getProject().getNameKey())){\n          ProjectControl parentCtrl \u003d parentState.controlFor(currentUser);\n          if (parentCtrl.isVisible() || parentCtrl.isOwner()) {\n            parents.add(parentState.getProject().getNameKey());\n          }\n      }\n\nhow are about your feeling, welcome proposal and direction.\nThanks a lot!\n/Bruce",
      "parentUuid": "AAAGlH///2E\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH////c\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T04:56:34Z",
      "side": 1,
      "message": ":) improve a bit\n\nfor (NameKey pName : projectCache.all()) {\n        if (parents.contains(pName)) {\n          continue;\n        }\n        ProjectState e \u003d projectCache.get(pName);\n        if (e \u003d\u003d null) {\n          // If we can\u0027t get it from the cache, pretend its not present.\n          //\n          continue;\n        }\n        ProjectState parentState \u003d e.getParentState();\n\n        if (parentState !\u003d null\n            \u0026\u0026 !parents.contains(parentState.getProject().getNameKey())){\n          ProjectControl parentCtrl \u003d parentState.controlFor(currentUser);\n           if (parentCtrl.isVisible() || parentCtrl.isOwner()) {\n               parents.add(parentState.getProject().getNameKey());\n           }\n        }\n\n}",
      "parentUuid": "AAAGmH////k\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGlH///04\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-06-15T05:04:30Z",
      "side": 1,
      "message": "I think your first suggestion works better, won\u0027t the second one risk losing some parents of parents?  Why not move it back into the main loop and simply add a counter increment and check before the continue?",
      "parentUuid": "AAAGmH////c\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH////U\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T05:08:51Z",
      "side": 1,
      "message": "you are exactly right ! :)\nI just want to revert the above one which will loss some parents nodes.",
      "parentUuid": "AAAGmH////c\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH////M\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T05:21:45Z",
      "side": 1,
      "message": "Hi Martin \n\nExcuse me.\n\nabout \"move it back into the main loop and simply add a counter increment and check before the continue\u0027\u0027  \n\nhere can I got your further detail information about  the usage of the \u0027a counter increment \u0027 , if you mean using it  to check with \u0027limit\u0027 , I don\u0027t think we need that.\n\nthanks!\n\n/Bruce",
      "parentUuid": "AAAGmH////U\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH////E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T05:54:06Z",
      "side": 1,
      "message": "\u0027\u0027parents\u0027 is subset of  \u0027all\u0027 , keep them to use same logic of display() would be clear and better.  but thus will need 2 loops, one for \u0027all\u0027 and the other for \u0027parents\u0027 . so move it back to main loop is better but  when we take in account the related ssh command, we have to check \u0027limit\u0027.  so I agree with you ,even in this fix bug feature let me add the limit checking logic.",
      "parentUuid": "AAAGmH////M\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAGmH///+8\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/ListProjects.java",
        "patchSetId": 3
      },
      "lineNbr": 310,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-06-15T06:18:43Z",
      "side": 1,
      "message": "Hi Martin\n\nwhen I reworking on new patch set, I find if user want ssh command \u0027create-project  --parents\u0027  display in tree style,  I mean not only show project name and description ...., not move back to main loop will be better as \u0027\u0027parents\u0027 is subset of \u0027all\u0027 , keep them to use same logic of display() would be clear and better.\n\nI am not sure, still waiting your feedback :)\nthanks!\n/Bruce",
      "parentUuid": "AAAGmH////E\u003d",
      "revId": "3629b6602262b6ce233bc301ce1c886556851c00",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}