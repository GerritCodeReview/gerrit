{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fb3018b3_78a0745d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "It feels suboptimal to fix both of these issues in one change - I am not quite sure how risky removing render-progress at this point is - I know that this will reopen a very popular bug in our internal code review system based on gr-diff, but maybe there is more than depends on this now. If we could keep this separate, we have some control and at import time and the ability to rollback if this is even worse than just slower diff rendering.",
      "range": {
        "startLine": 9,
        "startChar": 7,
        "endLine": 9,
        "endChar": 22
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31920a71_d9cdbe34",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2022-05-18T11:07:27Z",
      "side": 1,
      "message": "I know that this breaks a diff cursor feature that we want to bring back. I do expect that we (you?) will bring back this feature in o(days). I am more comfortable re-introducing that bug for a week than keeping the P1 SLO issue open and assigned to me for much longer.\n\nI have tried my best to verify that there are no other dependencies on `render-progress`.\n\nThat said, I would be willing to split this change up into two, if you prefer that. But it could mean a delay of 24h or so. And I wanted to first get on the same page about other review comments.",
      "parentUuid": "fb3018b3_78a0745d",
      "range": {
        "startLine": 9,
        "startChar": 7,
        "endLine": 9,
        "endChar": 22
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93ff2448_cf8d6344",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T11:48:51Z",
      "side": 1,
      "message": "Okay - I can also not quickly find deps, I hope we are right. If splitting is a bug effort on your end, I am okay with avoiding it.",
      "parentUuid": "31920a71_d9cdbe34",
      "range": {
        "startLine": 9,
        "startChar": 7,
        "endLine": 9,
        "endChar": 22
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58745a38_e8bce45e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "This was indeed not intended. The code before made it look as if the splice method was called with larger changes. Thanks for catching that, and I agree we need to debounce this.",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 14,
        "endChar": 66
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60338e1e_2afb5f79",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "Wouldn\u0027t that change be much less risky? Just stick a debounce 500 on the progress event to improve rendering performance while not causing the issue where a long synchronous render without ever updating the cursor means on long file renders users cannot start navigating with keyboard shortcuts until the entire, possibly 10000s of lines have rendered which can somethings takes dozens of seconds?",
      "range": {
        "startLine": 16,
        "startChar": 43,
        "endLine": 20,
        "endChar": 7
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c9d1d67_2545651f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2022-05-18T11:07:27Z",
      "side": 1,
      "message": "If you debounce an event that is fired every 20 ms or do to only fire every 500 ms, then you can as well just use setInterval and do something every 500 ms. That would have the advantage of reducing dependencies and making things simpler. We have learned that establishing a `render-progress` event is tricky, and we know that the diff builder API and design is in a fragile state. So refactorings will be coming. So I would prefer diff cursor to be more self sufficient and take care of its own problems.",
      "parentUuid": "60338e1e_2afb5f79",
      "range": {
        "startLine": 16,
        "startChar": 43,
        "endLine": 20,
        "endChar": 7
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1d9bef1f_3fd0e48b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T11:48:51Z",
      "side": 1,
      "message": "True. We could also debounce on the receiving end of the event. I think the interval is not necessarily simpler because need to install and uninstall it when a render starts and ends and so on, but we could have that conversation later.",
      "parentUuid": "0c9d1d67_2545651f",
      "range": {
        "startLine": 16,
        "startChar": 43,
        "endLine": 20,
        "endChar": 7
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52912c72_a322738b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "Nice solution! Thanks for finding this!",
      "range": {
        "startLine": 28,
        "startChar": 21,
        "endLine": 29,
        "endChar": 56
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "467b426d_8f87ea5f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2022-05-19T12:09:51Z",
      "side": 1,
      "message": "I like idea, but are we looking at right element? From performance tab, it looks event ends when there is grey area, not when diff is inside of this area. https://imgur.com/a/6hpsb1j",
      "range": {
        "startLine": 28,
        "startChar": 22,
        "endLine": 29,
        "endChar": 55
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f3bba39_91dc9caf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "Thanks for looking into these issues, and sorry for causing you pain. I have some concerns with the specific change, but I am overall thankful you are looking into it - also happy to maybe synchronously discuss this to converge faster and see how I can maybe help.",
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bce44d6_44c23add",
        "filename": "polygerrit-ui/app/embed/diff/gr-diff-builder/gr-diff-builder-element.ts",
        "patchSetId": 4
      },
      "lineNbr": 237,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "Nit: It feels there is a slight tension between the name \"all groups\" and the ability to pass specific groups to wait on. Maybe it should be `untilGroupsRendered()` or something?",
      "range": {
        "startLine": 237,
        "startChar": 8,
        "endLine": 237,
        "endChar": 11
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "255b837a_d85140af",
        "filename": "polygerrit-ui/app/embed/diff/gr-diff-builder/gr-diff-builder-element.ts",
        "patchSetId": 4
      },
      "lineNbr": 244,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2022-05-18T10:50:00Z",
      "side": 1,
      "message": "I would really like to remove this dependency from the model onto the view over time. I realize it is there now, and you are trying to fix an issue quickly, but we should start thinking about how we can cut this dependency - let\u0027s discuss that some time.",
      "range": {
        "startLine": 244,
        "startChar": 26,
        "endLine": 244,
        "endChar": 35
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbe9637b_708dcc3a",
        "filename": "polygerrit-ui/app/embed/diff/gr-diff-builder/gr-diff-builder-element.ts",
        "patchSetId": 4
      },
      "lineNbr": 244,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2022-05-18T11:07:27Z",
      "side": 1,
      "message": "Agreed. :-)",
      "parentUuid": "255b837a_d85140af",
      "range": {
        "startLine": 244,
        "startChar": 26,
        "endLine": 244,
        "endChar": 35
      },
      "revId": "36b1ae9993aa8760def654edf4c0890be1f2a0e5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}