{
  "comments": [
    {
      "key": {
        "uuid": "1da0b53d_f5e8c527",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-10-31T22:52:28Z",
      "side": 1,
      "message": "Can this be a function, private to this scope?\ni.e. var createThreadElement \u003d function() {\n};",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6d48fc6_3c98b11f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-04T21:37:11Z",
      "side": 1,
      "message": "No. That is, it could maybe in this change, but that method call moves out of this file in the next change: https://gerrit-review.googlesource.com/c/gerrit/+/201872/14",
      "parentUuid": "1da0b53d_f5e8c527",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7cf0355_150a6444",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-05T21:07:37Z",
      "side": 1,
      "message": "I see.\nThis is clearly not a common way for providing a utility for creating elements.\nAlso, looks like gr-diff-builder already has an instance of a gr-diff-comment-thread-group.\nWouldn\u0027t it be simpler to make a method similar to appendThread() and use it?\n\nIn other words, converting this static factory method into a public method on gr-diff-comment-thread-group?",
      "parentUuid": "f6d48fc6_3c98b11f",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08e41e1d_5279b17b",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2018-11-05T21:43:41Z",
      "side": 1,
      "message": "It is important to understand the goal state here: gr-diff-comment-thread-group will stay a dependency of gr-diff, and will be used also to group custom thread widgets. gr-diff-comment-thread will be a Gerrit only thing, that gr-diff must not depend on, and that will be created by gr-diff-host for Gerrit. \nSo this factory will eventually move to gr-diff-host, and that is why I want it to be as independent as can be from gr-diff-comment-thread-group. It\u0027s in the same file only because there is a short period between two files where I need to depend on it both from builder and from host.\nDoes that make sense?",
      "parentUuid": "d7cf0355_150a6444",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6774d14_88eefb70",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-06T17:47:05Z",
      "side": 1,
      "message": "Generally, it\u0027s advised in such cases accompany temporary implementations with commends that outline general direction, for the clarity. Priorities may change, or another person may join you in your task, and those comments would be super-helpful to make progress.\nNot to mention they save time during review.\n\nYes, this clears this a bit, but I\u0027m still not sure why element method is not a better alternative to a global function.\n\n\u003e So this factory will eventually move to gr-diff-host\n\nWhat\u0027s blocking the move right now?\nWhat\u0027s the plan on resolving those blockers?",
      "parentUuid": "08e41e1d_5279b17b",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb044d3f_27cf7d08",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-06T19:07:42Z",
      "side": 1,
      "message": "Fair point. I left a long comment explaining the motivation and the plan. Let me know if that makes sense.",
      "parentUuid": "f6774d14_88eefb70",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fdbd421_454587f7",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-08T18:18:15Z",
      "side": 1,
      "message": "The comment was removed from the latest patchset.\n\nCan you please use a method instead of global function? Since there\u0027s no clear path for moving this function into final destination, let\u0027s move it into a place where it wouldn\u0027t cause problems - keep in mind that the Gerrit scope is global and used by integrations and plugins.",
      "parentUuid": "fb044d3f_27cf7d08",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11a0a1e4_ac6bd453",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 30,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2018-11-08T18:35:12Z",
      "side": 1,
      "message": "Thanks for catching the removal of the comment - that was not on purpose.\n\nSorry, but I don\u0027t understand.\n\nThis global function is called from builder in the next change (https://gerrit-review.googlesource.com/c/gerrit/+/201872/18/polygerrit-ui/app/elements/diff/gr-diff-builder/gr-diff-builder.js#476). In that change, I could still call it if it was a public element method, because I have access to the a threadGroupEl.\n\nBut then in a later change also currently under review (https://gerrit-review.googlesource.com/c/gerrit/+/197112/27/polygerrit-ui/app/elements/diff/gr-diff-host/gr-diff-host.js#602) I am moving that call to gr-diff-host, which does not have access to a threadGroupEl, and so at that point I would have to move it. \n\nI do make an element method on gr-diff-host in another change under review (https://gerrit-review.googlesource.com/c/gerrit/+/203330/3). \n\nSo I would say there is a clear plan, even actual changes, to make this an element method again. Would you prefer that I move that code around in each of the changes? Or is there maybe a more suitable namespace that is less global?",
      "parentUuid": "2fdbd421_454587f7",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fef854e_c6d2360c",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-10-31T22:52:28Z",
      "side": 1,
      "message": "I wonder if this could become a part of gr-diff-comment-thread",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "558165fe_187cfbe8",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-04T21:37:11Z",
      "side": 1,
      "message": "I don\u0027t think it can - it modifies not threadEl, but thread, which the element has no access to.",
      "parentUuid": "1fef854e_c6d2360c",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "203aaadd_95b5ebe7",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-05T21:07:37Z",
      "side": 1,
      "message": "Wouldn\u0027t it be a bit more obvious if thread was passed into threadEl?",
      "parentUuid": "558165fe_187cfbe8",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51e2f06d_bf559c54",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2018-11-05T21:43:41Z",
      "side": 1,
      "message": "Possibly, but really do not want to touch gr-diff-comment-thread any more than I absolutely have to. This widget is used in other places of Gerrit, and changing it would require me to change a bunch of code that I really want nothing to do with. I am trying to do the minimal change to break gr-diff-comment-thread and dependencies lose from gr-diff, and if you look at all these commits, that already requires a ton of changes. I don\u0027t think refactoring gr-diff-comment-thread to get a thread passed in is strictly necessary for cutting this dependency, and so I would prefer not to do it.\nDoes that make sense?",
      "parentUuid": "203aaadd_95b5ebe7",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4dfa715_de1cf1a0",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-06T17:47:05Z",
      "side": 1,
      "message": "You\u0027re adding an implicit dependency here. This may be acceptable in the short-term, but in the long run this would increase tech debt. Generally, I feel much more confident when there is at least a path (if not a plan) on resolving such issues.\n\nBasically, gr-thread-element will have different behaviors depending on if was created with the help of this factory method or directly.\n\nIf you don\u0027t want to touch gr-diff-comment-thread, I can understand that. Have you considered wrapping gr-diff-comment-thread in another element that would have those custom behaviors?",
      "parentUuid": "51e2f06d_bf559c54",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31c9d521_c25561e8",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-06T19:07:42Z",
      "side": 1,
      "message": "I think that difference in how you create the element was already there before this change:\n 1) https://gerrit.googlesource.com/gerrit/+/master/polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.html#35\n 2) https://gerrit.googlesource.com/gerrit/+/master/polygerrit-ui/app/elements/change/gr-thread-list/gr-thread-list.html#85\n\nAlso wrapping this into another element would not solve that problem - unless I would use that wrapper also in gr-thread-list, which again means I need to update more code than I would like to.\n\nI just made one of them imperative to make it easier to move. I can convert it back after the move. Okay?",
      "parentUuid": "c4dfa715_de1cf1a0",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7318bbfe_ebddd090",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 39,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-08T18:18:15Z",
      "side": 1,
      "message": "Looks like you\u0027re right. I\u0027m trying to improve code health, but it\u0027s already not there.",
      "parentUuid": "31c9d521_c25561e8",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b50d5ad2_70cb0447",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-10-31T22:52:28Z",
      "side": 1,
      "message": "Should this also remove event listeners?\nAlternatively, consider using thread.listen() and thread.unlisten()",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4c8c25d_1b8d5819",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-04T21:37:11Z",
      "side": 1,
      "message": "Good point. Added that. I don\u0027t think listen/unlisten are applicable here, because they work by passing the string representation of methods on the element, but these listeners are outside of the element.",
      "parentUuid": "b50d5ad2_70cb0447",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f3df72c_626e9438",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-11-05T21:07:37Z",
      "side": 1,
      "message": "Listen/unlisten can be used in the threadEl - sorry, I should\u0027ve made this a bit more obvious.\n\nAlso, .removeChild() can be replaced with .remove():\nhttps://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\nThis way parent wouldn\u0027t be needed.",
      "parentUuid": "b4c8c25d_1b8d5819",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "831c5582_cf6d400c",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 51,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2018-11-05T21:43:41Z",
      "side": 1,
      "message": "I don\u0027t want to touch threadEl - see above. That would require me to change things like this: http://google3/third_party/javascript/polygerrit/elements/change/gr-thread-list/gr-thread-list.js?l\u003d137\u0026rcl\u003d195429541\nWhich requires me to update more tests, risks more rollbacks etc.\n\nAnd I tried using remove(), but it\u0027s not supported by the Polymer.dom() API (https://www.polymer-project.org/1.0/docs/devguide/local-dom) and using a native method caused problems (things like getDistributedElements() not updating correctly).",
      "parentUuid": "1f3df72c_626e9438",
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28f531f6_c33836c1",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 87,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2018-10-31T22:52:28Z",
      "side": 1,
      "message": "Nit: AFAIR Polymer.dom() converts NodeList to Array",
      "range": {
        "startLine": 87,
        "startChar": 22,
        "endLine": 87,
        "endChar": 51
      },
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "886f5d2a_4a4e1afe",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-comment-thread-group/gr-diff-comment-thread-group.js",
        "patchSetId": 8
      },
      "lineNbr": 87,
      "author": {
        "id": 1071987
      },
      "writtenOn": "2018-11-04T21:37:11Z",
      "side": 1,
      "message": "Yes, that is correct. But I only moved the method up to make it easier to read, and would like to edit it because it will be deleted 2-3 changes later and this causes only conflicts. But in principle you are correct.",
      "parentUuid": "28f531f6_c33836c1",
      "range": {
        "startLine": 87,
        "startChar": 22,
        "endLine": 87,
        "endChar": 51
      },
      "revId": "36ff6572d5785391e3d9393a56bafb7fdee66ea9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}