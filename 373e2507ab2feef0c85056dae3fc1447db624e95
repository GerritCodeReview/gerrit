{
  "comments": [
    {
      "key": {
        "uuid": "a36df4ee_5a88552f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-06-06T09:32:27Z",
      "side": 1,
      "message": "just\n\n  return size - other.size\n\n?",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "638e9cf1_0099067c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-06T10:06:37Z",
      "side": 1,
      "message": "That\u0027s how I originally did it, but I found that it results in some projects not being included. Seems to be related to this returning 0 in some cases.",
      "parentUuid": "a36df4ee_5a88552f",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3c28c56_34085086",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-07T08:09:27Z",
      "side": 1,
      "message": "With debug logging you can see how this works:\n\nhttp://paste.openstack.org/show/508543/\n\nversus how it works when changing to return size - other.size:\n\nhttp://paste.openstack.org/show/508544/\n\nAs you can see in the latter case, not all the projects are included.",
      "parentUuid": "638e9cf1_0099067c",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3c28c56_94f6849a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1011624
      },
      "writtenOn": "2016-06-07T08:41:28Z",
      "side": 1,
      "message": "if one wants to ensure stable total ordering, for the size equal case the result could be possible use:\n return this.name.compareTo(other.name)",
      "parentUuid": "e3c28c56_34085086",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3c28c56_d4f0fc9e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-07T08:47:25Z",
      "side": 1,
      "message": "Thanks for confirming the implementation.\n\nI don\u0027t think we\u0027re concerned about stable ordering by name within the ones that have equal size.  As long as the large ones are ordered first, that\u0027s enough.",
      "parentUuid": "e3c28c56_94f6849a",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a39a5476_923f5c0e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/change/AllChangesIndexer.java",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-06-07T13:05:51Z",
      "side": 1,
      "message": "What about using something like this:\n\n  return ComparisonChain.start()\n    .compare(size, other.size)\n    .compare(name.get(), other.name.get())\n    .result();",
      "parentUuid": "e3c28c56_d4f0fc9e",
      "revId": "373e2507ab2feef0c85056dae3fc1447db624e95",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}