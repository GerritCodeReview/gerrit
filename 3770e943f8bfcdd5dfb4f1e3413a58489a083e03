{
  "comments": [
    {
      "key": {
        "uuid": "dc60231e_13f70c71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 7,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-10-18T16:27:46Z",
      "side": 1,
      "message": "The commit message should eventually describe what this strategy does, how it differs from existing strategies, what the primary use case is, etc.",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc31af18_227aaee0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 8,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "No docs have been updated yet.",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dca2e37b_63a10230",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 258,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "i really don\u0027t understand this test case for CherryPick.",
      "range": {
        "startLine": 258,
        "startChar": 24,
        "endLine": 258,
        "endChar": 40
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ca06ba7_f1b7c8b7",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 258,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-10-18T14:08:55Z",
      "side": 1,
      "message": "I\u0027m also new to this test and I\u0027m not 100% sure how the submit preview request works. But I assume it returns a map of all refs which would be updated by the submit.\n\nAbove in line 247 the submit preview for change4 is requested. Submitting change4 with cherry-pick would update the destination branch (refs/heads/master) and create a new refs/changes/03/3/2 for the second patch set of change4 (which is created by the cherry-pick submit strategy).\n\nThere are no new patch sets for the other changes (change2 and change3) since the cherry-pick submit strategy ignores change dependencies and hence on submit of change4 this commit will be cherry-picked onto the destination branch, but change2 and change3 stay unmodified.",
      "parentUuid": "dca2e37b_63a10230",
      "range": {
        "startLine": 258,
        "startChar": 24,
        "endLine": 258,
        "endChar": 40
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c01db89_05d67251",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 258,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "Oh, yes, of course! Added explanation here for my future self.",
      "parentUuid": "9ca06ba7_f1b7c8b7",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dca2e37b_03960ed7",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 264,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "is the fact that last patchset of last change points to the same thing as master the reason there are only 4 items?",
      "range": {
        "startLine": 264,
        "startChar": 9,
        "endLine": 264,
        "endChar": 66
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ca06ba7_11e44cc9",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 264,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-10-18T14:08:55Z",
      "side": 1,
      "message": "Since RebaseAlways respects change dependencies (in contrast to CherryPick), we expect one new ref per change for the new patch set that is created by the rebase + 1 ref update for the destination branch. Since there are 3 changes (change2, change3 and change4), we expect 4 results here.\n\nI got a little confused by the change variables names (change2, change3, change4) as they make you think it\u0027s 4 changes, but it\u0027s really only 3 changes, with bad names.",
      "parentUuid": "dca2e37b_03960ed7",
      "range": {
        "startLine": 264,
        "startChar": 9,
        "endLine": 264,
        "endChar": 66
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c04df97_0651da20",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 264,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "well, change is change1 and is submitted really early. So, yes, your explanation makes sense. Added explanation.",
      "parentUuid": "9ca06ba7_11e44cc9",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc31af18_6284b6a3",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 418,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "footer as \"Patch Set 2: Patch Set 1 was rebased\". I want to get rid of it too.",
      "range": {
        "startLine": 418,
        "startChar": 27,
        "endLine": 418,
        "endChar": 32
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ca1f7a9_f0cee03f",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 418,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-10-18T16:16:36Z",
      "side": 1,
      "message": "This message comes from RebaseChangeOp [1], which is used by RebaseSubmitStrategy.RebaseOneOp with rebaseAlways \u003d\u003d false when a fast-forward is not possible. If a fast-forward is possible RebaseChangeOp is not used, which is why you don\u0027t get this message for the first change.\n\nTo fix this I would suggest to add a boolean option to RebaseChangeOp that controls whether this message should be set or not. Then in case of RebaseAlways you would set this option to false.\n\n[1] https://gerrit.googlesource.com/gerrit/+/refs/heads/master/gerrit-server/src/main/java/com/google/gerrit/server/change/RebaseChangeOp.java#157",
      "parentUuid": "bc31af18_6284b6a3",
      "range": {
        "startLine": 418,
        "startChar": 27,
        "endLine": 418,
        "endChar": 32
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c01db89_85a022dc",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 418,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "Great idea. Done and now everything works. Thanks!",
      "parentUuid": "7ca1f7a9_f0cee03f",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dca2e37b_239b0a00",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmitByRebase.java",
        "patchSetId": 5
      },
      "lineNbr": 188,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "should this not be true for rebaseAlways? somehoe test passes as is, and it doesn\u0027t look good to me.",
      "range": {
        "startLine": 188,
        "startChar": 4,
        "endLine": 188,
        "endChar": 75
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ca06ba7_71e3d8bf",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmitByRebase.java",
        "patchSetId": 5
      },
      "lineNbr": 188,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-10-18T14:57:35Z",
      "side": 1,
      "message": "I think the test succeeds because for the second submit in line 172 we are *not* rebasing change1 and change2 because change2 is a merge commit. For merge commits RebaseSubmitStrategy.RebaseMultipleParentsOp currently behaves like MERGE_IF_NECESSARY, and integration into the target branch is done by a merge commit.\n\nThis means in this case we miss to add footers to change1 and change2 :(",
      "parentUuid": "dca2e37b_239b0a00",
      "range": {
        "startLine": 188,
        "startChar": 4,
        "endLine": 188,
        "endChar": 75
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c04df97_e66c7eec",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmitByRebase.java",
        "patchSetId": 5
      },
      "lineNbr": 188,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "that makes sense, then I\u0027m leaving this as is, but I added comment in RebaseAlways implementation explaining the trade-off.",
      "parentUuid": "9ca06ba7_71e3d8bf",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dca2e37b_439c06f9",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/SubmitByRebaseIfNecessaryIT.java",
        "patchSetId": 5
      },
      "lineNbr": 1,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "most of the tests from here were put into AbstractSubmitByRebase to share between two different rebase strategies.",
      "range": {
        "startLine": 1,
        "startChar": 1,
        "endLine": 1,
        "endChar": 2
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c057749_b0b0b8c4",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-10-18T16:27:46Z",
      "side": 1,
      "message": "private final?",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c04df97_a67686b8",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 54,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c057749_b0b0b8c4",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc60231e_93addc6c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-10-18T16:27:46Z",
      "side": 1,
      "message": "This is because there is no \"base\" on which to rebase. I think this is an oversight in Cherry-Pick, it should still be possible to rewrite the commit message and take the same tree.",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c01db89_65b6462a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "Yes, indeed. I\u0027m leaving this for another CL.",
      "parentUuid": "dc60231e_93addc6c",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc31af18_827f3acf",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 135,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-17T18:56:38Z",
      "side": 1,
      "message": "I got suggestion to refactor this code and that of Cherry-Pick into mergeutil, which I like, but it has one downside: I have to expose message-footer-editing capabilities in two places, Rebasing and Cherry-picking. Maybe it\u0027s better to refactor RebaseOp to support cases where no actual rebase will happen but message gets modified anyway?",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 85
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1cc9dbea_e514b6b7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 135,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-10-21T11:35:18Z",
      "side": 1,
      "message": "Sounds ok to me. Then for this change we can leave it as is and the follow-up change that implements the footer support can do the refactoring which is necessary.",
      "parentUuid": "bc31af18_827f3acf",
      "range": {
        "startLine": 135,
        "startChar": 8,
        "endLine": 135,
        "endChar": 85
      },
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1cc9dbea_c567fa61",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 135,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-21T13:19:50Z",
      "side": 1,
      "message": "ACk",
      "parentUuid": "1cc9dbea_e514b6b7",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc60231e_33f20881",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 153,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-10-18T16:27:46Z",
      "side": 1,
      "message": "I don\u0027t follow. A rebase is not just editing a commit message, it\u0027s also changing the parent to be the current tip, which can cause a merge conflict. Am I missing something?",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c04df97_c67182c4",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 153,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "this code is executed only if fast-forward is an option. The rebase case is below line 161.",
      "parentUuid": "dc60231e_33f20881",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc60231e_f32890fa",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 154,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-10-18T16:27:46Z",
      "side": 1,
      "message": "Don\u0027t use checkState, throw IllegalStateException. That way the compiler knows that the function exits there.",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c01db89_45b34a38",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/strategy/RebaseSubmitStrategy.java",
        "patchSetId": 5
      },
      "lineNbr": 154,
      "author": {
        "id": 1022949
      },
      "writtenOn": "2016-10-20T21:33:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc60231e_f32890fa",
      "revId": "3770e943f8bfcdd5dfb4f1e3413a58489a083e03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}