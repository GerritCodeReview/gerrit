{
  "comments": [
    {
      "key": {
        "uuid": "3018ceb2_dfe0b523",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2019-01-24T23:15:13Z",
      "side": 1,
      "message": "tries",
      "range": {
        "startLine": 21,
        "startChar": 40,
        "endLine": 21,
        "endChar": 44
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2e79f09_b5a887c6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2019-01-24T23:15:13Z",
      "side": 1,
      "message": "Ouch.\n\nThis is the same reason we can\u0027t test the reflog access feature properly using the java API.",
      "range": {
        "startLine": 20,
        "startChar": 17,
        "endLine": 21,
        "endChar": 8
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99e20052_aee92c99",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:27:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3018ceb2_dfe0b523",
      "range": {
        "startLine": 21,
        "startChar": 40,
        "endLine": 21,
        "endChar": 44
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a9129b91_0192c490",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:27:25Z",
      "side": 1,
      "message": "Yes. Ideally, our endpoint tests should be built on REST calls. But not sure if now writing tests through REST calls is a good practice without performance concerns any more.",
      "parentUuid": "d2e79f09_b5a887c6",
      "range": {
        "startLine": 20,
        "startChar": 17,
        "endLine": 21,
        "endChar": 8
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "21ebda33_ced25611",
        "filename": "java/com/google/gerrit/server/restapi/change/CreateChange.java",
        "patchSetId": 2
      },
      "lineNbr": 202,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2019-01-24T23:15:13Z",
      "side": 1,
      "message": "What about PermissionBackendException?",
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2711951d_0619189b",
        "filename": "java/com/google/gerrit/server/restapi/change/CreateChange.java",
        "patchSetId": 2
      },
      "lineNbr": 202,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-25T07:53:06Z",
      "side": 1,
      "message": "I think this doesn\u0027t need to be handled. It\u0027s a failure that prevents us from checking permissions and that should always be an ISE, shouldn\u0027t it?",
      "parentUuid": "21ebda33_ced25611",
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a5b75a2_bccf34d8",
        "filename": "java/com/google/gerrit/server/restapi/change/CreateChange.java",
        "patchSetId": 2
      },
      "lineNbr": 202,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:27:25Z",
      "side": 1,
      "message": "PermissionBackendException will be a server error which should be thrown out and logged.",
      "parentUuid": "2711951d_0619189b",
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e37425e_33d47d0c",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-24T20:48:37Z",
      "side": 1,
      "message": "I think this is not needed. Just trying with a non-existing branch should be enough :)",
      "range": {
        "startLine": 461,
        "startChar": 30,
        "endLine": 461,
        "endChar": 39
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50852bab_fe11835b",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:27:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6e37425e_33d47d0c",
      "range": {
        "startLine": 461,
        "startChar": 30,
        "endLine": 461,
        "endChar": 39
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc759dc5_6c303c00",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-24T20:48:37Z",
      "side": 1,
      "message": "Could this line just be dropped?",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c22eb5b_444f2a0f",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:27:25Z",
      "side": 1,
      "message": "This is necessary becasue by default in All-Projects we have:\n\n[access \"refs/*\"],\n  read \u003d group Administrators,\n  read \u003d group Anonymous Users,",
      "parentUuid": "dc759dc5_6c303c00",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55852aad_41c7cc42",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-25T08:51:04Z",
      "side": 1,
      "message": "But if the branch doesn\u0027t exist, it shouldn\u0027t matter if you have READ access rights on this namespace or not, does it?",
      "parentUuid": "0c22eb5b_444f2a0f",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcb5558b_2c54172d",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T08:53:20Z",
      "side": 1,
      "message": "I don\u0027t think the PermissionBackend does an existence check which means it will pass the permission check in this case, right?",
      "parentUuid": "55852aad_41c7cc42",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83675902_dee0fea7",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-25T08:54:55Z",
      "side": 1,
      "message": "But if the branch doesn\u0027t exist we should fail in another place.\nThe point of this test is to prove that in this case the client gets the same error as if the permission check fails.",
      "parentUuid": "fcb5558b_2c54172d",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1a4154f_e61cdb5c",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2019-01-25T09:22:42Z",
      "side": 1,
      "message": "The motivation of those two tests is to make sure the user gets 404 when it doesn\u0027t have the require permission to read the target branch. And we want to verify that when the branch exists or doesn\u0027t exist.\n\nWhen the permission check passes, we don\u0027t care about the exception from the \"create change\" logic any more since it will not have the security concern we\u0027re addressing here.",
      "parentUuid": "83675902_dee0fea7",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc7e0cde_80016599",
        "filename": "javatests/com/google/gerrit/acceptance/rest/change/CreateChangeIT.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2019-01-25T09:51:41Z",
      "side": 1,
      "message": "OK, so you are saying if the user has READ access on the namespace but the branch doesn\u0027t exist it\u0027s okay that the user can deduce from the error message that the branch is really missing, and not just not visible?\n\nStill it would be nice to test this case to ensure that it fails with a reasonable error message. It\u0027s fine for me to add this test as a follow-up if you think it\u0027s not fitting into this change.",
      "parentUuid": "d1a4154f_e61cdb5c",
      "range": {
        "startLine": 462,
        "startChar": 4,
        "endLine": 462,
        "endChar": 50
      },
      "revId": "3c21e9aaa5f8c0c1a33ffcd67b17031d19575baf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}