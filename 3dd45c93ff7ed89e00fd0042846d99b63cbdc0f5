{
  "comments": [
    {
      "key": {
        "uuid": "8097ecbf_578314cb",
        "filename": "java/com/google/gerrit/server/change/AccountPatchReviewStore.java",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2019-05-14T15:45:06Z",
      "side": 1,
      "message": "Is this still used?",
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7563eee1_ddaa7e2f",
        "filename": "java/com/google/gerrit/server/change/AccountPatchReviewStore.java",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2019-05-15T08:01:11Z",
      "side": 1,
      "message": "it is used when PS is removed, see: com.google.gerrit.server.change.ConsistencyChecker.DeletePatchSetFromDbOp.updateChange(ChangeContext)",
      "parentUuid": "8097ecbf_578314cb",
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ed01ddd_32ef7830",
        "filename": "java/com/google/gerrit/server/change/DeleteChangeOp.java",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2019-05-14T15:45:06Z",
      "side": 1,
      "message": "Mention in the commit message that the new cleanup (per change) now also\nreplaces the old cleanup method (per patch set)",
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80dde039_a7c7c812",
        "filename": "java/com/google/gerrit/server/change/DeleteChangeOp.java",
        "patchSetId": 1
      },
      "lineNbr": 108,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2019-05-15T08:01:11Z",
      "side": 1,
      "message": "it doesn\u0027t as the other method is used in com.google.gerrit.server.change.ConsistencyChecker.DeletePatchSetFromDbOp.updateChange(ChangeContext)",
      "parentUuid": "9ed01ddd_32ef7830",
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0ce2105_1d2ed38d",
        "filename": "java/com/google/gerrit/server/schema/JdbcAccountPatchReviewStore.java",
        "patchSetId": 1
      },
      "lineNbr": 302,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2019-05-14T15:45:06Z",
      "side": 1,
      "message": "To make this efficient and avoid full-table-scan, we need to add (SQL) index on the change_id",
      "range": {
        "startLine": 302,
        "startChar": 68,
        "endLine": 302,
        "endChar": 87
      },
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7e995de_748f50d5",
        "filename": "java/com/google/gerrit/server/schema/JdbcAccountPatchReviewStore.java",
        "patchSetId": 1
      },
      "lineNbr": 302,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2019-05-15T08:01:11Z",
      "side": 1,
      "message": "Sounds reasonable, but it is not any worse than it was before (none of the primery_key fields is indexed hence selecting by not all of them is a subject of a full scan, right?) and IMHO it should be a subject of a follow-up change...",
      "parentUuid": "f0ce2105_1d2ed38d",
      "range": {
        "startLine": 302,
        "startChar": 68,
        "endLine": 302,
        "endChar": 87
      },
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9174a7f3_39832655",
        "filename": "java/com/google/gerrit/server/schema/JdbcAccountPatchReviewStore.java",
        "patchSetId": 1
      },
      "lineNbr": 302,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2019-05-15T08:14:10Z",
      "side": 1,
      "message": "per our discussion:\n1. the primary key is created out of 4 fields: change_id, patch_set_id, account_id, file_name (line #197), in addition, by default RDBMS creates index out of it\n2. if the prefix of a key is used (change_id is the perfect example) it will still use the index to find it, therefore performance should be fine",
      "parentUuid": "c7e995de_748f50d5",
      "range": {
        "startLine": 302,
        "startChar": 68,
        "endLine": 302,
        "endChar": 87
      },
      "revId": "3dd45c93ff7ed89e00fd0042846d99b63cbdc0f5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}