{
  "comments": [
    {
      "key": {
        "uuid": "a8e86966_c2ac629f",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1021482
      },
      "writtenOn": "2016-04-25T12:41:29Z",
      "side": 1,
      "message": "Naming convention for property observers is _\u003cpropName\u003eChanged, so in this case it should be _commitInfoChanged",
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68403143_d09f7c5f",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8e86966_c2ac629f",
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28d0f83a_f8d78ddd",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "This is a big object:\n\n  public class CommitInfo {\n    public String commit;\n    public List\u003cCommitInfo\u003e parents;\n    public GitPerson author;\n    public GitPerson committer;\n    public String subject;\n    public String message;\n    public List\u003cWebLinkInfo\u003e webLinks;\n  }\n\nAll you need here is message and commit. See also comment below to my suggestion to prepare revert message in revert confirmation dialog.",
      "range": {
        "startLine": 65,
        "startChar": 6,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68403143_708fb034",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "tl;dr: Unless there is a compelling reason, I\u0027d rather use commitInfo as a pass-around-model, because consistency and integrity.\n\nIt\u0027s not small, that\u0027s true, but I\u0027m not sure I fully understand your concern here.\nThere is no significant difference performance-wise either way, and commit info and message only make sense together, so separating them is debatable.\nCould you elaborate?",
      "parentUuid": "28d0f83a_f8d78ddd",
      "range": {
        "startLine": 65,
        "startChar": 6,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "282ab97a_0e9e0b67",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-25T19:00:42Z",
      "side": 1,
      "message": "The rule of thumb is to only persist in a component the data that is actualy needed by this component and not the whole world. Why are we storing here only actions, changeNum and patchNum? We could just pass in everywhere root ChangeInfo, because (almost) everything can be reached from there.",
      "parentUuid": "68403143_708fb034",
      "range": {
        "startLine": 65,
        "startChar": 6,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e83341f3_2cb0b3ec",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T20:00:25Z",
      "side": 1,
      "message": "... which actually seems like a good idea to me, if that would be possible. But since changeNum and patchNum are not part of a commit, they should be threaded separately.\n\nClearly, I\u0027m not trying to pass whole world here, just a best attempt for nearest common ancestor. \nMy main point here is that the commit message only makes sense with commit number, so separating them would reduce integrity. I agree that this is a slightly over ideal, but still sane.",
      "parentUuid": "282ab97a_0e9e0b67",
      "range": {
        "startLine": 65,
        "startChar": 6,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "282ab97a_cecda36f",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 68,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-25T20:48:27Z",
      "side": 1,
      "message": "\u003e ... which actually seems like a good idea to me, if that would be possible.\n\n\nI think we almost agree. I\u0027m fine with passing in the commitInfo instance into this component. All I\u0027m saying, we shouldn\u0027t persist in component more data that is actually needed. We need two attributes from there, fine, let\u0027s just persist them and not more. \n\nHave a look to the corresponding Actions.java component in GWT UI (yes, I know we are building here completely new UI, so there is no point to compare it to GWT based UI, but still): [1]. We are passing ChangeInfo (root) entity in display method and current revision we are on. So the argumentation commit message belongs togther with SHA1 is correct, but we don\u0027t actually care where it comes from (we don\u0027t touch SHA1 attribute from the commitInfo entity). Now what happens with CommitInfo? We are retrieving it from ChangeInfo: [2], but only persist revision, subject (construct revert commit message) and the whole message (construct the cherry-pick message).\n\n* [1] https://github.com/gerrit-review/gerrit/blob/master/gerrit-gwtui/src/main/java/com/google/gerrit/client/change/Actions.java#L76\n* [2] https://github.com/gerrit-review/gerrit/blob/master/gerrit-gwtui/src/main/java/com/google/gerrit/client/change/Actions.java#L85-L86",
      "parentUuid": "e83341f3_2cb0b3ec",
      "range": {
        "startLine": 65,
        "startChar": 6,
        "endLine": 68,
        "endChar": 8
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28d0f83a_385d0550",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "This else branch on key is slightly confusing as it\u0027s added to if statement on action type. There are exactly two action types: change|revision and different REST handler keys. With the current code I would expect the statement to be:\n\n  if (type \u003d\u003d\u003d ActionType.REVISION) {\n    if (key \u003d\u003d\u003d RevisionActions.REBASE) {\n    [...]\n  } else {\n    // change action type\n    if (key \u003d\u003d\u003d ChangeActions.REVERT) {\n      this._showActionDialog(this.$.confirmRevertDialog);\n      return;\n    } else {\n      this._fireAction(this._prependSlash(key), this.actions[key], false);\n    }\n  }",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 172,
        "endChar": 7
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68403143_f0a280a9",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "I see your point, but decided to make it a bit cleaner by moving a part of decision making into a separate function.\nLet me know if that helps.",
      "parentUuid": "28d0f83a_385d0550",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 172,
        "endChar": 7
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "282ab97a_eea29fa9",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-25T19:00:42Z",
      "side": 1,
      "message": "The proposed version is fine. Thanks.",
      "parentUuid": "68403143_f0a280a9",
      "range": {
        "startLine": 169,
        "startChar": 0,
        "endLine": 172,
        "endChar": 7
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "48d52c29_5977a7d6",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 217,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "This is wrong place to change the commit message to revert commit message. This is cherry-pick commit message.",
      "range": {
        "startLine": 217,
        "startChar": 19,
        "endLine": 217,
        "endChar": 25
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "680bd118_18b525dd",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 217,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "48d52c29_5977a7d6",
      "range": {
        "startLine": 217,
        "startChar": 19,
        "endLine": 217,
        "endChar": 25
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28d0f83a_185a4958",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 237,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "Here you could change to revert commit message.",
      "range": {
        "startLine": 237,
        "startChar": 19,
        "endLine": 237,
        "endChar": 25
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "680bd118_d8c68d59",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 237,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "28d0f83a_185a4958",
      "range": {
        "startLine": 237,
        "startChar": 19,
        "endLine": 237,
        "endChar": 25
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "48d52c29_19812fee",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "Remove this.",
      "range": {
        "startLine": 242,
        "startChar": 6,
        "endLine": 242,
        "endChar": 14
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88148534_39b0efec",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 242,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "48d52c29_19812fee",
      "range": {
        "startLine": 242,
        "startChar": 6,
        "endLine": 242,
        "endChar": 14
      },
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "48d52c29_3984ebfd",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 314,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-04-23T05:24:29Z",
      "side": 1,
      "message": "It\u0027s done for every change that is opened in the change screen, even though only tiny number of changes are going to be reverted. Why not to pass in the original commit message and revision to the confirm dialog and do it there?",
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e83341f3_6c8fdb34",
        "filename": "polygerrit-ui/app/elements/change/gr-change-actions/gr-change-actions.js",
        "patchSetId": 1
      },
      "lineNbr": 314,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-04-25T18:31:59Z",
      "side": 1,
      "message": "¯\\_(ツ)_/¯\nSeems the gain is marginal, but I agree this logic is more appropriate for the dialog itself.\nUpdated cherry-pick dialog to be consistent.",
      "parentUuid": "48d52c29_3984ebfd",
      "revId": "3ddae3c029a7028749d765d97da4034e94f771a5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}