{
  "comments": [
    {
      "key": {
        "uuid": "32ccc9e0_ac2aedaf",
        "filename": "e2e-tests/load-tests/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-02T08:28:24Z",
      "side": 1,
      "message": "nit: Why not use the COPY command to copy it directly into the new home directory? You will still need to chown it though. If you just copy a single file, you may even use the --chown option of COPY.",
      "revId": "42c7a8ce4d6e538ff267a34aa8a757c9fb615d31",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57972c25_a503f49b",
        "filename": "e2e-tests/load-tests/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-12-03T03:40:23Z",
      "side": 1,
      "message": "I thought about that, but since I need to copy multiple files and then \"chown\" them I thought it would have been better to keep the 2 commands in a single layer. Unless you are strong about that I\u0027d leave it as it is. WDYT?",
      "parentUuid": "32ccc9e0_ac2aedaf",
      "revId": "42c7a8ce4d6e538ff267a34aa8a757c9fb615d31",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ffb00e5_88faf2ab",
        "filename": "e2e-tests/load-tests/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2019-12-03T08:09:07Z",
      "side": 1,
      "message": "I am not against leaving it as it is. At the moment it doesn\u0027t make a difference, since we copy whole directories: There are two layers with the same file (the respective COPY layer and this RUN layer). Less is thus impossible. It just seemed unnecessary to copy them around. I would have suggested:\n\n  ARG gatling_home\u003d/home/gatling\n  RUN addgroup -g 1000 -S appgroup \u0026\u0026 \\\n        adduser -u 1000 -S gatling -G appgroup -h $gatling_home\n\n  COPY ./src/test/scala/com/google/gerrit/scenarios $gatling_home/user-files/simulations\n  COPY ./src/test/resources/application.conf $gatling_home/conf\n  COPY ./src/test/resources/data $gatling_home/user-files/resources/data\n  RUN chown -R gatling:appgroup $gatling_home\n\nThis doesn\u0027t reduce the number of layers with a version of the files, but is just a more direct way of doing this.\nBut that is optional.",
      "parentUuid": "57972c25_a503f49b",
      "revId": "42c7a8ce4d6e538ff267a34aa8a757c9fb615d31",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0efc368e_47c5f6b1",
        "filename": "e2e-tests/load-tests/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-12-11T10:22:44Z",
      "side": 1,
      "message": "I think I understand what you meant. Anyway, in /opt/gatling/ there are files coming from the standard Gatling installation that need to be copied around.\n\nWhat I could is moving the COPY of the file coming from the host after the gatling user creation. See the last patchset if it makes sense.",
      "parentUuid": "5ffb00e5_88faf2ab",
      "revId": "42c7a8ce4d6e538ff267a34aa8a757c9fb615d31",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cea78be1_8bafc4b9",
        "filename": "e2e-tests/load-tests/Dockerfile",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-06T22:14:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0efc368e_47c5f6b1",
      "revId": "42c7a8ce4d6e538ff267a34aa8a757c9fb615d31",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}