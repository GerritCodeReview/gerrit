{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "05b445e0_0762d462",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "This might be better:\n\n Add extension point that allows plugins to provide destination address for outgoing emails",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "caffa23d_3bb0c4f5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Yes, this conveys the intent of the extension point in a clearer way.",
      "parentUuid": "05b445e0_0762d462",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 51
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a6694497_030f01ec",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "How about:\n\nThis new extension point is helpful when organizations want all outgoing emails from Gerrit sent to a specific address (for example, an alternate registered email) of the user rather than their preferred email.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 18
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9237d878_1bb4346e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Fixed",
      "parentUuid": "a6694497_030f01ec",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 18
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9287e789_068cd6f1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "Remove \u0027Impact\u0027 footer.\n\nAdd a \u0027Release-Notes\u0027 footer.",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 66
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d19f1897_ddd91041",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9287e789_068cd6f1",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 66
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40b24ab2_9e8a6c6b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-06-07T06:49:20Z",
      "side": 1,
      "message": "i suppose this indirectly addresses https://crbug.com/gerrit/2615.\nbut i think that should be core functionality, not an extension point. an XP could be provided for validating addresses at configuration time, though.",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30d56867_905b756a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-07T23:39:21Z",
      "side": 1,
      "message": "Thanks for pointing that issue out, I didn\u0027t realize it existed. That actually deals with the issue we want to tackle next (which identity to use for git operations). We have two needs, 1) apply server-wide policy on where emails should be sent (for us, we\u0027ll have a plugin that forces it to go to the user\u0027s LDAP address, not any other registered address), and 2) apply per-repo policy on which registered email address for a user should be used for git author/committer.\n\nThe bug you linked leads me to potentially see adding a user preference for \"Override my preferred email and use this identity for git author/committer instead\" as a core feature and as a step towards #2. I don\u0027t think it applies to #1, which is what this change is working towards.\n\nDoes that help clarify? (we\u0027ll be sure to update the commit message if it does)",
      "parentUuid": "40b24ab2_9e8a6c6b",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b1b5fdc_b9086436",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-06-08T08:50:38Z",
      "side": 1,
      "message": "\u003e Does that help clarify?\n\nat a high level, it certainly does.\nat the implementation level, the patch seems backwards, as it basically subverts the configuration done in the UI. you\u0027d at least need an additional mechanism to disable/replace the UI. it appears easier to obtain a clean implementation by just relaying it entirely to the configuration (after introducing purpose-bound address settings), though your requirement to make the addresses repo-specific makes this somewhat cumbersome (unless it was a pattern like foo-${repo}@mail.dns).\n\nfwiw, the case which got me interested in this issue was a guy who contributes to qt-project as an employee and consequently needs to present himself as such in commits and the gerrit UI, but wants to use a private address for notifications, as the company\u0027s restrictive security policy makes using the company address somewhat impractical for that. he worked it around by having two gerrit accounts, which is obviously suboptimal.",
      "parentUuid": "30d56867_905b756a",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef21af85_391158dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-08T18:44:19Z",
      "side": 1,
      "message": "\u003e \u003e Does that help clarify?\n\u003e \n\u003e at a high level, it certainly does.\n\nglad it helped!\n\n\u003e at the implementation level, the patch seems backwards, as it basically subverts the configuration done in the UI. you\u0027d at least need an additional mechanism to disable/replace the UI.\n\nYes, that\u0027s a missing piece in this change currently and needs to be addressed before it gets +2.\n\n\u003e it appears easier to obtain a clean implementation by just relaying it entirely to the configuration (after introducing purpose-bound address settings), though your requirement to make the addresses repo-specific makes this somewhat cumbersome (unless it was a pattern like foo-${repo}@mail.dns).\n\nWe could maybe add the email sending behavior as an auth configuration setting (it would work for LDAP, not sure about others), but we\u0027d still want the UI disabling you mention above. Is that the kind of configuration you have in mind?\n\n\u003e \n\u003e fwiw, the case which got me interested in this issue was a guy who contributes to qt-project as an employee and consequently needs to present himself as such in commits and the gerrit UI, but wants to use a private address for notifications, as the company\u0027s restrictive security policy makes using the company address somewhat impractical for that. he worked it around by having two gerrit accounts, which is obviously suboptimal.\n\nYeah, that\u0027s not a great setup. I\u0027ll keep in mind when we start #2 later this month.",
      "parentUuid": "3b1b5fdc_b9086436",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b863d110_8918912c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-06-08T21:02:07Z",
      "side": 1,
      "message": "\u003e Is that the kind of configuration you have in mind?\n\nthe basic UI i have in mind is to extend the current email address table by an additional column of radio buttons, so you\u0027d have \"display email\" and \"notification email\".\n\nwhich emails can be added and/or which selected for which purpose could be restricted by a plugin.\n\nthis would even work if the per-repo addresses followed a pattern, so one could specify a templated address as proposed above. (of course, such addresses could not be confirmed, so they would be inapplicable to notifications.)\n\nnow, if you want to be able to specify arbitrary per-repo addresses, the concept breaks down. instead, you\u0027d need something similar to the notifications table, possibly with support for inheritance like the project configurations. i suppose my prior use of \"cumbersome\" for that UI is a bit of an understatement. üòÅ\n\nso instead you\u0027d presumably go with the regular table, but have some kind of plugin-provided \"magic\" entry in there, and have the validator hook ensure that this entry is selected as the display address.",
      "parentUuid": "ef21af85_391158dd",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75e26ce3_f0656923",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-15T02:13:17Z",
      "side": 1,
      "message": "\u003e \u003e Is that the kind of configuration you have in mind?\n\u003e \n\u003e the basic UI i have in mind is to extend the current email address table by an additional column of radio buttons, so you\u0027d have \"display email\" and \"notification email\".\n\nAre you expecting \"display email\" is used for author/committer when creating commits?\n\n\u003e \n\u003e which emails can be added and/or which selected for which purpose could be restricted by a plugin.\n\nBut what if the plugin policy changes after the user has made a selection? I think we\u0027d want to ensure that the plugin policy always applies and that\u0027s why this change applies policy at the time of sending the email.\n\n\u003e \n\u003e this would even work if the per-repo addresses followed a pattern, so one could specify a templated address as proposed above. (of course, such addresses could not be confirmed, so they would be inapplicable to notifications.)\n\u003e \n\u003e now, if you want to be able to specify arbitrary per-repo addresses, the concept breaks down. instead, you\u0027d need something similar to the notifications table, possibly with support for inheritance like the project configurations. i suppose my prior use of \"cumbersome\" for that UI is a bit of an understatement. üòÅ\n\u003e \n\u003e so instead you\u0027d presumably go with the regular table, but have some kind of plugin-provided \"magic\" entry in there, and have the validator hook ensure that this entry is selected as the display address.\n\nI can see the appeal of that approach, but I think that\u0027s more (and yet not enough) than we\u0027re trying to do for the use case we\u0027re trying to address.",
      "parentUuid": "b863d110_8918912c",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0330bfe9_0553a0fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-06-15T08:21:10Z",
      "side": 1,
      "message": "\u003e Are you expecting \"display email\" is used for author/committer when creating commits?\n\nyes. at least i can\u0027t see why not. but if not, we could have the third column of radio boxes just as well.\n\n\u003e But what if the plugin policy changes after the user has made a selection? \n\nif that happens, the plugin should re-validate/migrate all settings.\n\ni think it\u0027s fairly obvious that having the plugin subvert visible settings (even if \"just to be sure\") is bad UX. so if you go with enforcement at the execution site, you need to adjust the frontend to reflect reality anyway. but when you do that, you can go with a more general and therefore elegant approach just as well (provided it actually covers your use case - you\u0027d need to be more specific for me to be able to asses that).",
      "parentUuid": "75e26ce3_f0656923",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81387e90_a2351c9b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2022-06-17T21:25:25Z",
      "side": 1,
      "message": "\u003e i think it\u0027s fairly obvious that having the plugin subvert visible settings (even if \"just to be sure\") is bad UX. so if you go with enforcement at the execution site, you need to adjust the frontend to reflect reality anyway. but when you do that, you can go with a more general and therefore elegant approach just as well (provided it actually covers your use case - you\u0027d need to be more specific for me to be able to asses that).\n\nI agree that we want to UI to reflect when a plugin is providing a value, and no to \"subvert visible settings\". \n\nMy proposal is to start simple and add the ability for a plugin to override all the values and to have the UI reflect that a plugin is providing the values (when such a plugin is installed). This allows for plugins to provide policies with the minimal amount of work both in core, and for the plugin. This need not be the final solution, but I suspect it is a minimal \"good enough\" implementation that does not break user expectations, and allows for plugins to start providing policies (which is Qcom\u0027s objective). This does not provide a user interface to make finer grained selections available to users, but it does allow for such an interface still to be built by anyone desiring it.",
      "parentUuid": "0330bfe9_0553a0fb",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1380df5a_c3f397ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-06-18T09:37:55Z",
      "side": 1,
      "message": "hook-based systems are always more complex and fragile than monolithic systems for a given level of integration, so one shouldn\u0027t just ask whether it could be done with plugins, but also whether it should. externalizing a straight-forward and useful core feature just for the sake of it is usually a very bad deal.\n\nanother thing to consider is symmetry. it\u0027s a bad idea to introduce hooks into one path, while omitting another very similar one. a generalized role based \"address getter\" system would be preferable.\n\nlastly, the question is whether the system *needs* to by dynamic, or whether a static (possibly templated) configuration would be sufficient. it\u0027s less code overall and easier to get all cases right when hooks are involved only at configuration time.",
      "parentUuid": "81387e90_a2351c9b",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8209b79d_e11eabf9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2022-06-18T22:20:13Z",
      "side": 1,
      "message": "It seems like you think that some sort of rule system would be better than plugins. I am going to respectfully disagree. In this case a rule based system would need to be extremely complicated to meet both your use cases and our cases, as they are very different. Your use cases seem related to letting a user configure rules for themselves, whereas our use cases are related to letting our lawyers dictate to our users which email to use and when. There is a chance that our lawyers may need information from custom internal systems at some point, and that would not likely be feasible to do without a plugin. I currently believe a plugin system meets our needs best.\n\nAs a Gerrit maintainer my philosophy for Gerrit has always been to generally approach new exotic and generic use cases by 1) adding an extension point to core 2) implementing new exotic + generic policies in plugins 3) promote generic plugins to core plugins if they prove to be useful to many users.\n\nIn this case, our policies are somewhat exotic, so we won\u0027t likely be pursuing any generic solutions. But perhaps you will?",
      "parentUuid": "1380df5a_c3f397ab",
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "648eafb5_550e2afd",
        "filename": "Documentation/dev-plugins.txt",
        "patchSetId": 4
      },
      "lineNbr": 2902,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "How about:\n\nThis extension point allows plugins to provide a preferred destination address for all outgoing emails from Gerrit.",
      "range": {
        "startLine": 2901,
        "startChar": 0,
        "endLine": 2902,
        "endChar": 67
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67fc2e87_360862f2",
        "filename": "Documentation/dev-plugins.txt",
        "patchSetId": 4
      },
      "lineNbr": 2902,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Fixed",
      "parentUuid": "648eafb5_550e2afd",
      "range": {
        "startLine": 2901,
        "startChar": 0,
        "endLine": 2902,
        "endChar": 67
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b32b4811_635b7c8d",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "How about:\n\n Extension point to provide destination address for all outgoing emails from Gerrit.",
      "range": {
        "startLine": 21,
        "startChar": 1,
        "endLine": 22,
        "endChar": 42
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "369b549f_1edbf33d",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 22,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Fixed",
      "parentUuid": "b32b4811_635b7c8d",
      "range": {
        "startLine": 21,
        "startChar": 1,
        "endLine": 22,
        "endChar": 42
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c052d21_42e0e511",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "How about:\n\n Get preferred destination address for outgoing emails.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 28,
        "endChar": 46
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0cf70e95_468e0afd",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Fixed",
      "parentUuid": "8c052d21_42e0e511",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 28,
        "endChar": 46
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d6e9d7b7_0110ef1f",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "How about:\n\n The {@code Account} of the user whose destination address is to be obtained",
      "range": {
        "startLine": 30,
        "startChar": 20,
        "endLine": 30,
        "endChar": 89
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b4ac7ee8_5160ecb9",
        "filename": "java/com/google/gerrit/server/email/PreferredNotificationEmailProvider.java",
        "patchSetId": 4
      },
      "lineNbr": 30,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "Fixed",
      "parentUuid": "d6e9d7b7_0110ef1f",
      "range": {
        "startLine": 30,
        "startChar": 20,
        "endLine": 30,
        "endChar": 89
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44c99f91_01ba7ed0",
        "filename": "javatests/com/google/gerrit/acceptance/server/mail/PreferredNotificationEmailProviderIT.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2022-06-07T06:31:46Z",
      "side": 1,
      "message": "This might be more readable:\n\n ImmutableList\u003cMessage\u003e messages \u003d sender.getMessages();\n assertThat(messages).hasSize(1);\n ImmutableList\u003cAddress\u003e recipients \u003d messages.get(0).rcpt();\n assertThat(recipients.size()).isEqualTo(2);\n Set\u003cString\u003e recipient_emails \u003d recipients.stream().map(a -\u003e \n a.email()).collect(Collectors.toSet());\n assertThat(recipient_emails).contains(SET_BY_PLUGIN + admin.email());\n assertThat(recipient_emails).contains(SET_BY_PLUGIN + user.email());",
      "range": {
        "startLine": 69,
        "startChar": 1,
        "endLine": 74,
        "endChar": 61
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "144ee5fd_4b3b76df",
        "filename": "javatests/com/google/gerrit/acceptance/server/mail/PreferredNotificationEmailProviderIT.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1148825
      },
      "writtenOn": "2022-06-13T18:02:37Z",
      "side": 1,
      "message": "I see how this makes the code clearer.",
      "parentUuid": "44c99f91_01ba7ed0",
      "range": {
        "startLine": 69,
        "startChar": 1,
        "endLine": 74,
        "endChar": 61
      },
      "revId": "42ed71a5a0f59fb18e875c7d38e1b000896634c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}