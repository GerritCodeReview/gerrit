{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "71fdd047_f9722965",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-07-06T16:57:52Z",
      "side": 1,
      "message": "@Nasser any objections to enable it for offline-reindex?",
      "revId": "440b73c4dd7473a9796f6814086872078462cfbc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69989fb3_1facdbd9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-07-06T21:59:09Z",
      "side": 1,
      "message": "No concerns! We were focused on Lucene at the time we made the AutoFlush change and didn\u0027t test if it would make a difference for ES [1]. If you have a change for ES that you think will improve offline reindex with this we\u0027d be happy to try it out too.\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/323396/9/java/com/google/gerrit/elasticsearch/AbstractElasticIndex.java",
      "parentUuid": "71fdd047_f9722965",
      "revId": "440b73c4dd7473a9796f6814086872078462cfbc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df5a56ca_d39944b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-07-06T23:19:18Z",
      "side": 1,
      "message": "As a thought, looking back at the AutoFlush change, I think we could rename it to EnsureReadsConsistentWithWrites so that it\u0027s not named something Lucene-specific, because it is pretty closely representing the same idea.\n\nWe wouldn\u0027t want to use the TRUE case in AbstractLuceneIndex code like we do AutoFlush.ENABLED since Lucene (currently) doesn\u0027t honor that, but using only FALSE would be sufficient to replace AutoFlush and get the same behavior. If someone later wants to tackle making Lucene consistent, they can use TRUE in the code to show that it now supports it.",
      "revId": "440b73c4dd7473a9796f6814086872078462cfbc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd2b2067_bd5e2e6e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-07-07T08:07:13Z",
      "side": 1,
      "message": "Sure, that could be a refactoring on master. Thanks @Nasser for your thorough review and feedback.",
      "parentUuid": "df5a56ca_d39944b4",
      "revId": "440b73c4dd7473a9796f6814086872078462cfbc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}