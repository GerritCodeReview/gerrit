{
  "comments": [
    {
      "key": {
        "uuid": "b154dfd0_9be687ea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T09:50:45Z",
      "side": 1,
      "message": "perhaps \"this\" or \"the\" instead of \"those\" would be more appropriate",
      "range": {
        "startLine": 9,
        "startChar": 58,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3088cc36_ebfd7b25",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T09:50:45Z",
      "side": 1,
      "message": "Did you mean to say \"adapts\" instead of \"adopts\"?\nHow about: \"this commit makes the code compatible with servlet-api v2.5\"",
      "range": {
        "startLine": 13,
        "startChar": 12,
        "endLine": 13,
        "endChar": 29
      },
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe406b73_e091e671",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 161,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T09:50:45Z",
      "side": 1,
      "message": "What\u0027s the reason of this change? is this just a stylistic refactoring?",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1b72f3d_025e6431",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 326,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T09:50:45Z",
      "side": 1,
      "message": "Wouldn\u0027t this always generate a FORBIDDEN audit event, regardless the actual response result?",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b245e283_22c74d31",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 326,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2018-11-22T10:12:32Z",
      "side": 1,
      "message": "Yes, we have to call auditService.dispatch twice for the different cases, once for SUCCESS and once for FORBIDDEN.\n\nWe can do that easily without using the Servlet 3 getStatusCode by just passing the respective code directly.",
      "parentUuid": "d1b72f3d_025e6431",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0466ec9c_c03ae28d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 326,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T10:51:03Z",
      "side": 1,
      "message": "yep exactly,\nPerhaps we can still call the dispatch only once (in the finally), but set statusCode to SC_FORBIDDEN in the catch block accordingly.",
      "parentUuid": "b245e283_22c74d31",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23e0b8fd_13567771",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 326,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-11-22T16:41:31Z",
      "side": 1,
      "message": "I start thinking whether this \"dispatch\" is WAI.\n\nThis \"dispatch\" is contained in the \"finally\" block which will always be executed for both SUCCESS and ERROR. However, this is just one filter in the FilerChain. In the SUCCESS case, the request will be forwarded to the next filter which means we may send multiple audit events for one request. Also the \"status\" code is not set for the \"ServerException\" case line#313. Is this WAI?\n\nThe commit is wrong because the \"errorStatusCode\" is only set in one catch block, we don\u0027t set it for other execute path.\n\nHow do you think?",
      "parentUuid": "0466ec9c_c03ae28d",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e65038fb_ed5f7bcc",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 3
      },
      "lineNbr": 437,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2018-11-22T09:50:45Z",
      "side": 1,
      "message": "as above, wouldn\u0027t this always dispatch a FORBIDDEN audit log, even in case of success.",
      "revId": "44a54836a4028acfbb3402408e9a8bf32330312e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}