{
  "comments": [
    {
      "key": {
        "uuid": "af6ae563_aa366ffc",
        "filename": "gerrit-plugin-gwtui/src/main/java/com/google/gerrit/plugin/client/rpc/NativeString.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-17T17:54:08Z",
      "side": 0,
      "message": "Why this change? While looking into harmonizing of NativeString class in core and plugin in this change [1], i am wondering why this was changed?\n\nIn plugin JsonString \u003d T object form NativeString class in core. So returning this.get() would return \"string\" type, while returning this would return an object.\n\n [1] https://gerrit-review.googlesource.com/#/c/54375",
      "range": {
        "startLine": 28,
        "startChar": 14,
        "endLine": 28,
        "endChar": 24
      },
      "revId": "453b5c1e6a7b1e847c7cdff158f0fb405e1f2b8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af6ae563_6a19578e",
        "filename": "gerrit-plugin-gwtui/src/main/java/com/google/gerrit/plugin/client/rpc/NativeString.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-02-17T18:04:15Z",
      "side": 0,
      "message": "As explained in the commit message, this was not working at runtime and failed with saying that \u0027get\u0027 is not a function. Just returning \u0027this\u0027 works. Not sure why the one works but not the other.",
      "parentUuid": "af6ae563_aa366ffc",
      "range": {
        "startLine": 28,
        "startChar": 14,
        "endLine": 28,
        "endChar": 24
      },
      "revId": "453b5c1e6a7b1e847c7cdff158f0fb405e1f2b8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf7b9935_4b92658f",
        "filename": "gerrit-plugin-gwtui/src/main/java/com/google/gerrit/plugin/client/rpc/NativeString.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-17T18:12:52Z",
      "side": 0,
      "message": "But this is an object and not a string. What was your test case exactly? How can i reproduce it? Have you tried with this.s, like it is the case in NativeString core?\n\nI noticed that get() function not used any more at all and can be probably removed from NativeString\u0027s core class.",
      "parentUuid": "af6ae563_6a19578e",
      "range": {
        "startLine": 28,
        "startChar": 14,
        "endLine": 28,
        "endChar": 24
      },
      "revId": "453b5c1e6a7b1e847c7cdff158f0fb405e1f2b8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af6ae563_ca50832b",
        "filename": "gerrit-plugin-gwtui/src/main/java/com/google/gerrit/plugin/client/rpc/NativeString.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-17T18:21:22Z",
      "side": 0,
      "message": "So i changed the definition of NativeString in core to be:\n\n private static final native JavaScriptObject init() /*-{\n    if ($wnd.Gerrit \u003d\u003d\u003d undefined || $wnd.Gerrit.JsonString \u003d\u003d\u003d undefined) {\n      return function(s){this.s\u003ds};\n    } else {\n      return $wnd.Gerrit.JsonString;\n    }\n  }-*/;\n\n\nAfter loading of cookbook-plugin on current master, and opening JavaScript console in Chrome:\n\n window.Gerrit.JsonString\n function (s){\n   this.s \u003d s;\n }\n\nAnd when instantiated i am getting:\n\n a \u003d new window.Gerrit.JsonString(\"a\")\n Object {s: \"a\"}\n typeof(a) \u003d\u003e \"object\"\n typeof(a.s) \u003d\u003e \"string\"",
      "parentUuid": "cf7b9935_4b92658f",
      "range": {
        "startLine": 28,
        "startChar": 14,
        "endLine": 28,
        "endChar": 24
      },
      "revId": "453b5c1e6a7b1e847c7cdff158f0fb405e1f2b8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}