{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "bf833647_e191c0be",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 25,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-10-31T00:26:15Z",
      "side": 1,
      "message": "We have already 500k changes on GerritHub.io, I believe there are Gerrit setups with over 4M changes around.",
      "range": {
        "startLine": 25,
        "startChar": 15,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dea62982_7554820f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 25,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2022-11-03T13:47:24Z",
      "side": 1,
      "message": "yes, we have servers with \u003e 4M changes",
      "parentUuid": "bf833647_e191c0be",
      "range": {
        "startLine": 25,
        "startChar": 15,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1475672c_156511fd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 25,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-11-03T17:32:32Z",
      "side": 1,
      "message": "With the latest PS18, we allow to have a Gerrit server with up to 250M changes :-) that would buy us some time until Gerrit v3.8 (6 months away from now).",
      "parentUuid": "dea62982_7554820f",
      "range": {
        "startLine": 25,
        "startChar": 15,
        "endLine": 25,
        "endChar": 25
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fbffbfd_58b69ceb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-10-31T00:26:15Z",
      "side": 1,
      "message": "A way to reduce the collisions to zero is to introduce a dictionary-encoding of the server-ids.\n\nExample:\nserverId1 -\u003e 1\nserverId2 -\u003e 2\n...\n\nBy limiting the maximum number of imported serverIds to 64, we could then use just 6 bit for the serverId and leave all the others 26 bit for allowing 67M changes.",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aab6e38b_8674e372",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-10-31T00:27:59Z",
      "side": 1,
      "message": "The problem is: where to store this dictionary? Should we auto-generate it? (I believe we should)",
      "parentUuid": "8fbffbfd_58b69ceb",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05627ddc_2f6f8a9c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-10-31T07:07:58Z",
      "side": 1,
      "message": "I believe that 64 imports sounds great. The use cases that I\u0027m aware were either for moving project(s) between servers (that is a different use case and IMHO should be rather addressed by replying changes instead of just copying them) or for consolidation of max 3 servers... yet I can\u0027t tell if that will be enough for the GerritHub if feature is available for broader audience. Maybe it shouldn\u0027t be ;)\n\n\u003e The problem is: where to store this dictionary? Should we auto-generate it? (I believe we should)\n\nAs I have proposed before IMHO cached dictionary under `refs/meta` of `All-Projects` project should do. And auto-generation (by the order of imports)?\n\n@matthias.sohn@gmail.com WDYT?",
      "parentUuid": "aab6e38b_8674e372",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75333ab7_96b0a01e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2022-10-31T20:43:41Z",
      "side": 1,
      "message": "We could add another index field for the serverId index, if we use type short it adds 2 MB to the index size and allows 32k serverIds.",
      "parentUuid": "05627ddc_2f6f8a9c",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4006c949_1e1f6f39",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-11-01T07:49:05Z",
      "side": 1,
      "message": "Right but then IIUIC all queries to changes would have to be reworked to contain it...",
      "parentUuid": "75333ab7_96b0a01e",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a384dac2_78ba0578",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-11-02T09:31:34Z",
      "side": 1,
      "message": "\u003e Right but then IIUIC all queries to changes would have to be reworked to contain it...\n\nIndeed, at that point why don\u0027t we get rid of the change number and start using project/change-number instead? We already have all queries on that combination and it seems absurd we are still making queries by only change number after years we deprecated it.\n\nThat\u0027s not a solution for stable-3.7 though because it is due to be released in a few days.\n\nI believe going with an initial limitation to have 64 imports (currently we can do none on Gerrit) and get rid of change-number based queries altogether in v3.8.\n\nDoes that sound like a plan?\n\n@matthias.sohn@gmail.com @geminica.programs@gmail.com ?",
      "parentUuid": "4006c949_1e1f6f39",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "506e6675_368ed2a8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 13
      },
      "lineNbr": 26,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2022-11-03T13:47:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a384dac2_78ba0578",
      "range": {
        "startLine": 25,
        "startChar": 37,
        "endLine": 26,
        "endChar": 21
      },
      "revId": "454a477f28e5c291e65ad3ddfb84ce36ea358734",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}