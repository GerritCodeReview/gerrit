{
  "comments": [
    {
      "key": {
        "uuid": "88bc9b98_4a797325",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T04:41:06Z",
      "side": 1,
      "message": "Friends don\u0027t let friends use Maven.",
      "range": {
        "startLine": 15,
        "startChar": 20,
        "endLine": 15,
        "endChar": 25
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "683cc7c0_517ef40f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-18T23:50:18Z",
      "side": 1,
      "message": "Do this upgrade in a separate change?",
      "range": {
        "startLine": 15,
        "startChar": 58,
        "endLine": 16,
        "endChar": 34
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "683cc7c0_7179f825",
        "filename": "gerrit-server/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 51,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-18T23:50:18Z",
      "side": 1,
      "message": "nit: this list is in alphabetical order.",
      "range": {
        "startLine": 51,
        "startChar": 11,
        "endLine": 51,
        "endChar": 14
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_395d2f83",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/config/GerritGlobalModule.java",
        "patchSetId": 3
      },
      "lineNbr": 280,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "This is too generic of a binding. If we have to load Soy for other reasons with a different set of templates we\u0027ll need a different SoyTofu instance.\n\nAdd a runtime binding annotation called MailTemplates and then the args can use @MailTemplates SoyTofu.",
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_58e9fd76",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/config/GerritGlobalModule.java",
        "patchSetId": 3
      },
      "lineNbr": 281,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "Rename the provider to be MailSoyTofuProvider.",
      "range": {
        "startLine": 281,
        "startChar": 20,
        "endLine": 281,
        "endChar": 35
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_39460faf",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/SoyTofuProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "We have been trying to avoid java.io.File with SitePaths as we may one day load this as a virtual filesystem. Try to stick with the newer Path API:\n\n  Path tmpl \u003d site.mail_dir.resolve(name);\n  if (Files.isRegularFile(tmpl)) {\n    String content;\n    try (Reader r \u003d Files.newBufferedReader(p, StandardCharsets.UTF_8)) {\n      content \u003d CharStreams.toString(r);\n    }\n    builder.add(content, tmpl.toAbsolutePath());\n    return;\n  }",
      "range": {
        "startLine": 57,
        "startChar": 4,
        "endLine": 58,
        "endChar": 24
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_18ef857f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/SoyTofuProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 64,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "Leading / should not be required here.",
      "range": {
        "startLine": 64,
        "startChar": 27,
        "endLine": 64,
        "endChar": 28
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_5943c39d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/SoyTofuProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 65,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "Resources.getResource(resourcePath)",
      "range": {
        "startLine": 65,
        "startChar": 22,
        "endLine": 65,
        "endChar": 64
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_79408790",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/SoyTofuProvider.java",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2016-08-19T00:39:58Z",
      "side": 1,
      "message": "unnecessary if you use Resources.getResources() which promises to throw if it cannot find the URL for you.",
      "range": {
        "startLine": 66,
        "startChar": 4,
        "endLine": 68,
        "endChar": 5
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88bc9b98_6a7eb710",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T06:31:10Z",
      "side": 1,
      "message": "Gerrit core depends on soy that depends on jsr305. Because other plugins depend on soy as well, jsr305 must be exported in the plugin-api. IIRC, we have had problems with dependency on JSR305 in context of application servers (IBM WebSphere Application Server?). That was the reason, it was replaced in Gerrit core with home backed annotations.",
      "range": {
        "startLine": 88,
        "startChar": 60,
        "endLine": 89,
        "endChar": 54
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c1271d_c98c9133",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T06:31:10Z",
      "side": 1,
      "message": "That why the inclusion of jsr305 in soy rule above shouldn\u0027t work. In fact it does, even when I remove the visibility entirely, with visisbility \u003d [], both Â´buck build //lib:guava-retrying` and `buck build //lib:soy` still work. It looks like a Buck bug or missing feature to me: [1].\n\n* [1] https://github.com/facebook/buck/issues/846",
      "range": {
        "startLine": 91,
        "startChar": 2,
        "endLine": 91,
        "endChar": 40
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c1271d_09838903",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 276,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T06:31:10Z",
      "side": 1,
      "message": "Given that many Gerrit sites depend on gitiles-plugin, and given that this change adds soy and its dependency to Gerrit core, we should fix and test this plugin before this change is merged: [1]. For that you would need to add new deps to the gerrit PLugin API, in //gerrit-plugin-api:lib rule.\n\n* [1]  https://gerrit.googlesource.com/plugins/gitiles/+/master/BUCK#30",
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c1271d_8996993b",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 277,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T06:31:10Z",
      "side": 1,
      "message": "This is a different soy version that is used in gitiles (and gitiles-plugin) atm: \u0027com.google.template:soy:2015-04-10\u0027: [1]. To avoid problems here, first upgrade gitiles and gitiles-plugin to this version and make sure it doesn\u0027t break things.\n\n* [1] https://gerrit.googlesource.com/gitiles/+/master/lib/soy/BUCK#3",
      "range": {
        "startLine": 277,
        "startChar": 8,
        "endLine": 277,
        "endChar": 42
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "683cc7c0_51d034fc",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 277,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-19T07:08:06Z",
      "side": 1,
      "message": "Good catch.\n\nNote that upgrading gitiles to soy version 2016-01-12 wasn\u0027t possible due to it requiring Java 8 [1].\n\nDoes 2016-08-09 require Java 8 or is it Java 7 compatible?\n\n[1] https://gerrit-review.googlesource.com/#/c/74884/",
      "parentUuid": "68c1271d_8996993b",
      "range": {
        "startLine": 277,
        "startChar": 8,
        "endLine": 277,
        "endChar": 42
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "683cc7c0_51f7148a",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 277,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-19T08:28:23Z",
      "side": 1,
      "message": "Answering my own question: no, this version does not require java 8.  I\u0027ve updated that change, but it still needs work to make the tests pass.",
      "parentUuid": "683cc7c0_51d034fc",
      "range": {
        "startLine": 277,
        "startChar": 8,
        "endLine": 277,
        "endChar": 42
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68c1271d_2988cd1c",
        "filename": "lib/BUCK",
        "patchSetId": 3
      },
      "lineNbr": 282,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-08-19T06:31:10Z",
      "side": 1,
      "message": "How this supposed to work? The visibility of //lib:jsr305 is restricted to guava-retrying only.",
      "range": {
        "startLine": 282,
        "startChar": 4,
        "endLine": 282,
        "endChar": 19
      },
      "revId": "477d5da6de84471433697dd10a49c8dda93433d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}