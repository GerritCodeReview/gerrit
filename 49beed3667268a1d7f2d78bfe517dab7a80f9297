{
  "comments": [
    {
      "key": {
        "uuid": "9da1b103_24233316",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "There are cases where we have to check permissions for absent users. If we remove usages of \"PermissionBackend#user(Current User)\", how could we remove this method while continue supporting that?",
      "range": {
        "startLine": 33,
        "startChar": 0,
        "endLine": 34,
        "endChar": 68
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "940b9440_dc5f53bc",
        "filename": "java/com/google/gerrit/httpd/GitOverHttpServlet.java",
        "patchSetId": 4
      },
      "lineNbr": 182,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This could be moved to line#193 where it\u0027s actually used.",
      "range": {
        "startLine": 181,
        "startChar": 6,
        "endLine": 182,
        "endChar": 41
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "285ec6a3_31514de7",
        "filename": "java/com/google/gerrit/httpd/rpc/project/ProjectAccessHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 124,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "\u0027user\u0027 is not injected into this class, hence at this place we cannot be sure that \u0027user\u0027 is the current user from the request context. In fact the child classes always pass the current user in, but we can\u0027t know it from this class. I think it would be better if ProjectAccessHandler expects PermissionBackend.WithUser from the child classes and the child classes can then safely use permissionBackend.currentUser() to create it.",
      "range": {
        "startLine": 124,
        "startChar": 10,
        "endLine": 124,
        "endChar": 41
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d75de12_61aa228b",
        "filename": "java/com/google/gerrit/server/api/projects/ProjectApiImpl.java",
        "patchSetId": 4
      },
      "lineNbr": 91,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This is never used and thus could be removed.",
      "range": {
        "startLine": 91,
        "startChar": 2,
        "endLine": 91,
        "endChar": 33
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc591457_2fa60e67",
        "filename": "java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 4
      },
      "lineNbr": 1467,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "I think this shouldn\u0027t be done within this method. It\u0027s better to be moved out and in line#506, we could do like:\n\nPermissionBackend.ForChange perm \u003d permissionBackendForChange(cd).currentUser();",
      "range": {
        "startLine": 1467,
        "startChar": 4,
        "endLine": 1467,
        "endChar": 87
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4886a46d_140d918f",
        "filename": "java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T12:53:33Z",
      "side": 1,
      "message": "I think here it\u0027s not guaranteed that \u0027user\u0027 is the current user from the request context. Hence we can\u0027t replace permissionBackend.user(user) with permissionBackend.currentUser()?",
      "range": {
        "startLine": 107,
        "startChar": 29,
        "endLine": 107,
        "endChar": 42
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85e23cc6_bbf3775f",
        "filename": "java/com/google/gerrit/server/change/ChangeResource.java",
        "patchSetId": 4
      },
      "lineNbr": 107,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "I agree with Edwin. \n\nIdeally, I think the user to be checked should be provided by the caller explictly rather than implictly assigned. By doing that, we could prevent potential mistakes.",
      "parentUuid": "4886a46d_140d918f",
      "range": {
        "startLine": 107,
        "startChar": 29,
        "endLine": 107,
        "endChar": 42
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8580be68_a4849e37",
        "filename": "java/com/google/gerrit/server/git/BanCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 93,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This exception is never thrown.",
      "range": {
        "startLine": 93,
        "startChar": 28,
        "endLine": 93,
        "endChar": 48
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52fe4629_afb06afe",
        "filename": "java/com/google/gerrit/server/git/BanCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "No guaranteed that user was the calling user from the request context.",
      "range": {
        "startLine": 94,
        "startChar": 4,
        "endLine": 94,
        "endChar": 35
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1f8be4b_0f190d85",
        "filename": "java/com/google/gerrit/server/project/RemoveReviewerControl.java",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T12:53:33Z",
      "side": 1,
      "message": "Here we don\u0027t know if the provided currentUser is really the user from the request context, do we?",
      "range": {
        "startLine": 79,
        "startChar": 8,
        "endLine": 79,
        "endChar": 22
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "34747ceb_8aed5e9d",
        "filename": "java/com/google/gerrit/server/project/RemoveReviewerControl.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T12:53:33Z",
      "side": 1,
      "message": "Here we don\u0027t know if the provided currentUser is really the user from the request context, do we?",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8ee430b_c1b5f854",
        "filename": "java/com/google/gerrit/server/project/RemoveReviewerControl.java",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T12:53:33Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2bcd7390_1d506dc2",
        "filename": "java/com/google/gerrit/server/query/project/ProjectIsVisibleToPredicate.java",
        "patchSetId": 4
      },
      "lineNbr": 37,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T12:53:33Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88941ee6_e709cccb",
        "filename": "java/com/google/gerrit/server/restapi/change/DeletePrivate.java",
        "patchSetId": 4
      },
      "lineNbr": 85,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "we don\u0027t know if rsrc.getUser() really gives us the current user from the request context",
      "range": {
        "startLine": 85,
        "startChar": 8,
        "endLine": 85,
        "endChar": 39
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ffc1122_72f81c21",
        "filename": "java/com/google/gerrit/server/restapi/change/Move.java",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This could be moved to line#145 or inlined.",
      "range": {
        "startLine": 125,
        "startChar": 4,
        "endLine": 125,
        "endChar": 62
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8a69e13_f40ce7d2",
        "filename": "java/com/google/gerrit/server/restapi/change/Move.java",
        "patchSetId": 4
      },
      "lineNbr": 140,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "we don\u0027t know if rsrc.getUser() really gives us the current user from the request context",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c898678_bcfed1e1",
        "filename": "java/com/google/gerrit/server/restapi/change/Move.java",
        "patchSetId": 4
      },
      "lineNbr": 296,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d483494b_10bbfa3c",
        "filename": "java/com/google/gerrit/server/restapi/change/PostPrivate.java",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a862228_6218cae0",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewers.java",
        "patchSetId": 4
      },
      "lineNbr": 323,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e05a66c0_15166d63",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewers.java",
        "patchSetId": 4
      },
      "lineNbr": 440,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57346e1e_332d0880",
        "filename": "java/com/google/gerrit/server/restapi/change/Rebase.java",
        "patchSetId": 4
      },
      "lineNbr": 170,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92bccd66_4194e52f",
        "filename": "java/com/google/gerrit/server/restapi/change/Revert.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9fd7249_fb1d4fe2",
        "filename": "java/com/google/gerrit/server/restapi/change/Revert.java",
        "patchSetId": 4
      },
      "lineNbr": 263,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "same here",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65394162_ab4ae78d",
        "filename": "java/com/google/gerrit/server/restapi/change/Revisions.java",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-26T15:06:09Z",
      "side": 1,
      "message": "We don\u0027t know if change.getUser() really returned the current user from the request context",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "da4dcca4_1faeb052",
        "filename": "java/com/google/gerrit/server/restapi/config/ListTasks.java",
        "patchSetId": 4
      },
      "lineNbr": 61,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "this could be inlined.",
      "range": {
        "startLine": 61,
        "startChar": 4,
        "endLine": 61,
        "endChar": 34
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39f03be9_e8f1c42c",
        "filename": "java/com/google/gerrit/server/restapi/config/TasksCollection.java",
        "patchSetId": 4
      },
      "lineNbr": 67,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This could be inlined.",
      "range": {
        "startLine": 67,
        "startChar": 4,
        "endLine": 67,
        "endChar": 34
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23bdf9ae_4ff1a218",
        "filename": "java/com/google/gerrit/server/restapi/config/TasksCollection.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "Also here?",
      "range": {
        "startLine": 94,
        "startChar": 26,
        "endLine": 94,
        "endChar": 36
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b925d698_c826fe21",
        "filename": "java/com/google/gerrit/server/restapi/project/DashboardsCollection.java",
        "patchSetId": 4
      },
      "lineNbr": 147,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "These two expections are never thrown.",
      "range": {
        "startLine": 146,
        "startChar": 53,
        "endLine": 147,
        "endChar": 39
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2f285faf_be9ba8d7",
        "filename": "java/com/google/gerrit/server/restapi/project/ListProjects.java",
        "patchSetId": 4
      },
      "lineNbr": 142,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This field could be removed.",
      "range": {
        "startLine": 142,
        "startChar": 2,
        "endLine": 142,
        "endChar": 40
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43ef3f68_34083adb",
        "filename": "java/com/google/gerrit/server/restapi/project/SetParent.java",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This could be inlined.",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 81,
        "endChar": 60
      },
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56cf7f1a_640e4beb",
        "filename": "java/com/google/gerrit/sshd/commands/ShowQueue.java",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2018-02-26T15:05:13Z",
      "side": 1,
      "message": "This could be removed now.",
      "revId": "49beed3667268a1d7f2d78bfe517dab7a80f9297",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}