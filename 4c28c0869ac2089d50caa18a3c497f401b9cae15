{
  "comments": [
    {
      "key": {
        "uuid": "d0a803f6_6c2efbff",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 67
      },
      "lineNbr": 2543,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "ElasticSearch implementation is incomplete.",
      "range": {
        "startLine": 2543,
        "startChar": 9,
        "endLine": 2543,
        "endChar": 50
      },
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_4b2b25ee",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 67
      },
      "lineNbr": 2543,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0a803f6_6c2efbff",
      "range": {
        "startLine": 2543,
        "startChar": 9,
        "endLine": 2543,
        "endChar": 50
      },
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_8b4fcdba",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 67
      },
      "lineNbr": 2544,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-09-22T11:58:53Z",
      "side": 1,
      "message": "Lucene",
      "range": {
        "startLine": 2544,
        "startChar": 21,
        "endLine": 2544,
        "endChar": 26
      },
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_2bd059be",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 67
      },
      "lineNbr": 2544,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T12:17:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0a54f1d_8b4fcdba",
      "range": {
        "startLine": 2544,
        "startChar": 21,
        "endLine": 2544,
        "endChar": 26
      },
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_4c2b3fee",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticChangeIndex.java",
        "patchSetId": 67
      },
      "lineNbr": 147,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "Long line.",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_6c071b78",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticChangeIndex.java",
        "patchSetId": 67
      },
      "lineNbr": 147,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0a803f6_4c2b3fee",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_cb1ef5ca",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 59,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "Long line.\n\nGenerally in tests \"throws Exception\" is fine.",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_4c04df71",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 59,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0a54f1d_cb1ef5ca",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_6b2ee1ff",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 101,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "IIUC you are creating one index that is shared by all test methods in the test class, which seems like it would fail. Is there somewhere here where you\u0027re clearing the index in between tests?",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_eb6bf118",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 101,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "I didn\u0027t found a cleanup code in tests. even without it tests are passing, maybe we will have problems with account index, but at least for changes this seams to be working fine.",
      "parentUuid": "b0a54f1d_6b2ee1ff",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_2b56995b",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 101,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:54:18Z",
      "side": 1,
      "message": "That is very surprising. If you look at AbstractQueryChangesTest#byStatusOpen, it sure seems like those queries would end up returning more than change1 and change2 if there are other changes in the database.\n\nThe only reason I can think of right now for the observed behavior of the test passing is that it\u0027s returning other changes, but due to the fact that a new account is created for each test, they are getting filtered out by the implicit IsVisibleToPredicate.\n\nI would strongly prefer if you explicitly clear the index in between tests, or use a different index for each test.\n\nIf you really don\u0027t want to clear the index, I would at least like to have a clear and documented understanding of how it is that the tests are able to pass.",
      "parentUuid": "b0a54f1d_eb6bf118",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_0cf65756",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 101,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T12:10:43Z",
      "side": 1,
      "message": "\u003e The only reason I can think of right now\n\nAnother possibility: we are recreating the database and git repositories on each test method invocation, but not recreating the index. So maybe the changes are getting filtered out because they belong to nonexistent projects or something.\n\nIf this is the case, I really think we need to fix it to be consistent. The tests are supposed to be somewhat realistic, and a polluted index with data that doesn\u0027t correspond to the state in ReviewDb is not exactly realistic.",
      "parentUuid": "b0a54f1d_2b56995b",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_ec978bef",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 101,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T12:17:39Z",
      "side": 1,
      "message": "will add a cleanup step after test case. this change is not meant to fix those kind of inconsistencies.",
      "parentUuid": "d0a803f6_0cf65756",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_ccf72f73",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 137,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "Long lines here and below.",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_ac61033f",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 137,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0a803f6_ccf72f73",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_2b24d91f",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 140,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "You might be able to make these shorter or more readable by using checkState",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_ec44aba0",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 140,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "didn\u0027t found a way how to do a \u0027checkState\u0027 so that I would get the http port number. This was the only way I found.",
      "parentUuid": "b0a54f1d_2b24d91f",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_ecc5cb03",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 140,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:54:18Z",
      "side": 1,
      "message": "I just meant:\n\n import static com.google.common.base.Preconditions.checkState;\n ...\n checkState(info.nodes !\u003d null \u0026\u0026 info.nodes.size \u003d\u003d 1,\n     \"Cannot extract local Elasticsearch http port);",
      "parentUuid": "d0a803f6_ec44aba0",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_4cd7bfb4",
        "filename": "gerrit-elasticsearch/src/test/java/com/google/gerrit/elasticsearch/ElasticQueryChangesTest.java",
        "patchSetId": 67
      },
      "lineNbr": 140,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T12:17:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0a803f6_ecc5cb03",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_0b211d10",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitIndex.java",
        "patchSetId": 67
      },
      "lineNbr": 66,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "Long line.",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0a803f6_8c66c752",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitIndex.java",
        "patchSetId": 67
      },
      "lineNbr": 66,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0a54f1d_0b211d10",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_8b14edae",
        "filename": "lib/lucene/BUCK",
        "patchSetId": 67
      },
      "lineNbr": 77,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-09-22T11:22:43Z",
      "side": 1,
      "message": "Nit: sort the rules in this file.",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0a54f1d_abf8c966",
        "filename": "lib/lucene/BUCK",
        "patchSetId": 67
      },
      "lineNbr": 77,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2016-09-22T11:47:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0a54f1d_8b14edae",
      "revId": "4c28c0869ac2089d50caa18a3c497f401b9cae15",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}