{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a5b8739d_7a7f4465",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-09-04T21:19:33Z",
      "side": 1,
      "message": "Can we use the db pool implementation from the rest of the code instead? I think that would avoid the problem you have a later change to fix.",
      "range": {
        "startLine": 10,
        "startChar": 20,
        "endLine": 11,
        "endChar": 7
      },
      "revId": "4c848e4686af5bd741017d720bf3292060c71bbd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38ca5539_9efb336d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2020-09-13T22:15:33Z",
      "side": 1,
      "message": "We use MySQL and using connection pool on MySQL is not recommended.\n\nI don\u0027t understand how using a connection pool could fix the issue that the same single connection was used for all project slices concurrently which has the effect that only one slice can use the connection and the others wait to obtain the connection (observed by creating thread dumps during migration).",
      "parentUuid": "a5b8739d_7a7f4465",
      "range": {
        "startLine": 10,
        "startChar": 20,
        "endLine": 11,
        "endChar": 7
      },
      "revId": "4c848e4686af5bd741017d720bf3292060c71bbd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2eea558_74e6ce84",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-09-14T15:17:50Z",
      "side": 1,
      "message": "Ah, I forgot that about MySQL.\n\nI meant to use a pool in addition to the refactor to use connections per-thread. i.e. try to get a connection for each rebuild thread from the pool. But maybe I just didn\u0027t look closely enough at the code. If I\u0027ve configured gerrit.config to use a pool, will the migrator honor those settings (from reading the code now, I think it will)?",
      "parentUuid": "38ca5539_9efb336d",
      "range": {
        "startLine": 10,
        "startChar": 20,
        "endLine": 11,
        "endChar": 7
      },
      "revId": "4c848e4686af5bd741017d720bf3292060c71bbd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e68558ac_d17e4287",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2020-09-14T20:55:52Z",
      "side": 1,
      "message": "NoteDbMigrator.ContextHelper.getReviewDb() uses the gwtorm database abstraction hence I think it will use a connection pool if configured. I didn\u0027t try since we use MySQL.",
      "parentUuid": "d2eea558_74e6ce84",
      "range": {
        "startLine": 10,
        "startChar": 20,
        "endLine": 11,
        "endChar": 7
      },
      "revId": "4c848e4686af5bd741017d720bf3292060c71bbd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eedffe5b_7d3876dd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 11,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-10-06T22:24:42Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e68558ac_d17e4287",
      "range": {
        "startLine": 10,
        "startChar": 20,
        "endLine": 11,
        "endChar": 7
      },
      "revId": "4c848e4686af5bd741017d720bf3292060c71bbd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}