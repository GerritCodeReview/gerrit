{
  "pushCert": "certificate version 0.1\npusher A0D0EF51 1509722203 +0100\nnonce AMT3iFiPx5tLI9fzq/lmiW8Dwc4BZAhq7m82LssHGWrdvU1biMd0HymyfledQxsAS0ASVfX1ErCw\n\n0000000000000000000000000000000000000000 4d295284e2fff0b2a4ba194b7fcec9928687c1c3 refs/for/stable-2.15\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABAgAGBQJZ/IhbAAoJEFG1/Zeg0O9R57wH/1k4CMinXJ9Tl3KucTEQKuYq\n5o+LyUAX6AAJYONTpEsBIgCm+3b6fe7L9wFWk+OF4RmOSjU6OS7DRG1OZMgumsFv\nF7jK5C37NkDn4rfXRVQSFOQ3wYW9uw+bTu9cPW479J8GRUrjQsA5Db7iP3HWXx4U\n66bfazLKfGGPS55Slw5J89PFlNqYVpka4CrrCZrb7GG6SsjIYkWVOdp2Lq+Nrxz3\n0XNqA/5RvtlvXnCDOh0jSB+m1k0BvGGLPobTJN3vrFMDa0mtu0ULu7ekVL+26L7I\nEuYstklBq2TeadKq23RD4IVwgWFy1eMovs25wvxZqWrWCMdL19xFBXMtBwM2ZM0\u003d\n\u003dGxNk\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "6dfce330_e4ceafae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-03T15:19:21Z",
      "side": 1,
      "message": "Which of these issues apply to the stable branch? I am not particularly worried about leaking threads in tests, and it seems like the actual behavior of servers is not really a problem, with the possible exception of (1).",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd293687_8b062894",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2017-11-03T15:32:28Z",
      "side": 1,
      "message": "Ah, you were faster than I could add my comment on this change.\nI agree that this is not urgently needed for 2.15. I only did the cherry-pick since this was proposed on the fixes when I did them on master,\n\n\u003e Which of these issues apply to the stable branch?\n\n1. Reindexes that are scheduled via the batch index executor may get lost on Gerrit shutdown.\n   The batch index executor is only used by the change index for reindexIfStale. So this \n   affects changes that got stale in the index due to an update race (see \n   autoReindexIfStale).\n   I guess this can only affect very few changes.\n\n2. I think this affects 2.15. If search and write index are the same instance than the \n   interactive index executor is not shutdown.\n\n3. Not important for 2.15\n\n4. Not important for 2.15\n\n5. Not important for 2.15, since ElasticSearch is not officially supported?\n\nAFAIK the OOM when running the query tests doesn\u0027t occur on stable-2.15.",
      "parentUuid": "6dfce330_e4ceafae",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb95376e_1f307dec",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2017-11-03T15:34:00Z",
      "side": 1,
      "message": "No need to say that changing how the executors are shutdown is more risky than normal bug-fixes, which is why we may not want this on stable-2.15.",
      "parentUuid": "cd293687_8b062894",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4728660c_b3ab5cbc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-03T15:35:41Z",
      "side": 1,
      "message": "\u003e Ah, you were faster than I could add my comment on this change.\n\u003e I agree that this is not urgently needed for 2.15. I only did the cherry-pick since this was proposed on the fixes when I did them on master,\n\u003e \n\u003e \u003e Which of these issues apply to the stable branch?\n\u003e \n\u003e 1. Reindexes that are scheduled via the batch index executor may get lost on Gerrit shutdown.\n\u003e    The batch index executor is only used by the change index for reindexIfStale. So this \n\u003e    affects changes that got stale in the index due to an update race (see \n\u003e    autoReindexIfStale).\n\u003e    I guess this can only affect very few changes.\n\nYeah, I agree this isn\u0027t a serious issue.\n\n\u003e 2. I think this affects 2.15. If search and write index are the same instance than the \n\u003e    interactive index executor is not shutdown.\n\nWhat is the effect in practice? This was a cause of thread leaks in tests, which we don\u0027t care about; what about a running server? The server does eventually shut down, it\u0027s not like there\u0027s a deadlock. Are we failing to write some index updates to disk?",
      "parentUuid": "cd293687_8b062894",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "024c3a43_e713e435",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2017-11-03T15:36:38Z",
      "side": 1,
      "message": "\u003e 2. I think this affects 2.15. If search and write index are the same instance than the\n\u003e    interactive index executor is not shutdown.\n\nIf this is the only thing we are worried about we could fix this more easily by cherry-picking https://gerrit-review.googlesource.com/c/gerrit/+/138411",
      "parentUuid": "cb95376e_1f307dec",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d2259be_aaaaed03",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2017-11-03T15:39:00Z",
      "side": 1,
      "message": "\u003e What is the effect in practice? This was a cause of thread leaks in tests, which we don\u0027t care \n\u003e about; what about a running server? The server does eventually shut down, it\u0027s not like \n\u003e there\u0027s a deadlock. Are we failing to write some index updates to disk?\n\nIt means that we don\u0027t wait for reindex requests that were already scheduled and hence they may be lost.",
      "parentUuid": "024c3a43_e713e435",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 40,
        "endChar": 39
      },
      "revId": "4d295284e2fff0b2a4ba194b7fcec9928687c1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}