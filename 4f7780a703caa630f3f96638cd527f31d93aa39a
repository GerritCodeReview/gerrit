{
  "comments": [
    {
      "key": {
        "uuid": "8b9cf0b5_a35d9635",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T22:56:36Z",
      "side": 1,
      "message": "nit: seems to be missing punctuation. Can you summarize the change this makes? E.g.\n\n Properly consume json on endpoints that accept raw input\n\n(I\u0027m just guessing with the description above.)",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8ce1a32_dbfc0df5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:05:42Z",
      "side": 1,
      "message": "After reading the code more closely, I think this can say something like\n\n Leave discarding unconsumed JSON to JSON reader\n\n Some endpoints allow both JSON and raw input. parseRequest selects whether to\n parse to JSON using a reader or to provide the raw input as an InputStream\n based on the request\u0027s content-type.\n\n Since v2.15-rc0~1847^2 (Discard request HTTP bodies before writing response,\n 2017-03-16), on endpoints that permit raw input, we call getInputStream to\n obtain the rest of the response body and discard it before writing the response.\n When the request was JSON, this produces errors from Jetty, since calling\n getInputStream after getReader violates the servlet API:\n\n  [HTTP-66] ERROR com.google.gerrit.httpd.restapi.RestApiServlet : Error in PUT /a/plugins/reviewers.jar\n  java.lang.IllegalStateException: READER\n        at org.eclipse.jetty.server.Request.getInputStream(Request.java:844)\n        at javax.servlet.ServletRequestWrapper.getInputStream(ServletRequestWrapper.java:138)\n        at javax.servlet.ServletRequestWrapper.getInputStream(ServletRequestWrapper.java:138)\n\n To fix it, instead of guessing whether this was a raw request based on whether\n the endpoint supports raw requests, use the parseRequest result to decide whether\n this is a raw request for which we need to discard any unconsumed content.\n\n Bug: Issue 8677",
      "parentUuid": "8b9cf0b5_a35d9635",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a11ae36_2d13a16a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2018-04-02T23:08:26Z",
      "side": 1,
      "message": "Yes, that looks good to me.",
      "parentUuid": "c8ce1a32_dbfc0df5",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "325fa485_68f0b660",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1027112
      },
      "writtenOn": "2018-04-02T23:16:25Z",
      "side": 1,
      "message": "Changed to that except the first line. We discard unconsumed parts in JSON case.",
      "parentUuid": "6a11ae36_2d13a16a",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95b4161a_86876fba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:17:46Z",
      "side": 1,
      "message": "Thanks.",
      "parentUuid": "6a11ae36_2d13a16a",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b7f0fa4_c824cdf6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T22:56:36Z",
      "side": 1,
      "message": "nit: s/contains/contain/.",
      "range": {
        "startLine": 9,
        "startChar": 39,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee42b712_f677d5fe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1027112
      },
      "writtenOn": "2018-04-02T23:16:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2b7f0fa4_c824cdf6",
      "range": {
        "startLine": 9,
        "startChar": 39,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b46a9463_66fdfd02",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:17:46Z",
      "side": 1,
      "message": "Resolved.",
      "parentUuid": "2b7f0fa4_c824cdf6",
      "range": {
        "startLine": 9,
        "startChar": 39,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cba2a00_179dd209",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T22:56:36Z",
      "side": 1,
      "message": "nit: s/that/that,/",
      "range": {
        "startLine": 10,
        "startChar": 11,
        "endLine": 10,
        "endChar": 15
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "078819a1_03a872d5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1027112
      },
      "writtenOn": "2018-04-02T23:16:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3cba2a00_179dd209",
      "range": {
        "startLine": 10,
        "startChar": 11,
        "endLine": 10,
        "endChar": 15
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "924686c1_3d32af36",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:17:46Z",
      "side": 1,
      "message": "Resolved.",
      "parentUuid": "3cba2a00_179dd209",
      "range": {
        "startLine": 10,
        "startChar": 11,
        "endLine": 10,
        "endChar": 15
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "61edef5b_623cb327",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T22:56:36Z",
      "side": 1,
      "message": "nit: \u0027an InputStream or a Reader\u0027? (missing articles, s/of/or/)",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 21
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4360afc8_27386ce4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1027112
      },
      "writtenOn": "2018-04-02T23:16:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "61edef5b_623cb327",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 21
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2fe297d_e07434f2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:17:46Z",
      "side": 1,
      "message": "Resolved.",
      "parentUuid": "61edef5b_623cb327",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 21
      },
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f01a5a62_f03fcb9e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T22:56:36Z",
      "side": 1,
      "message": "Bug: Issue 8677",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19373aa3_f50a839d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1027112
      },
      "writtenOn": "2018-04-02T23:16:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f01a5a62_f03fcb9e",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8457cf34_cb213b5a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2018-04-02T23:17:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f01a5a62_f03fcb9e",
      "revId": "4f7780a703caa630f3f96638cd527f31d93aa39a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}