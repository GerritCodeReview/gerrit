{
  "comments": [
    {
      "key": {
        "uuid": "f367919d_e756e2d4",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/LuceneVersionManager.java",
        "patchSetId": 4
      },
      "lineNbr": 178,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-07-06T11:01:41Z",
      "side": 1,
      "message": "Does this mean that it is not possible to trigger reindexing when the index version is the latest? Why should this be forbidden? Maybe a site admin activated the latest index version although there were some changes where the indexing failed and would now like to (re)start the indexing again.",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8f6d649_3d10cf87",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/LuceneVersionManager.java",
        "patchSetId": 4
      },
      "lineNbr": 178,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-07-07T18:05:35Z",
      "side": 1,
      "message": "The way it is implemented now, this command just restart a reindexer that failed. If I allow to start a reindexer when the current is the latest, it will be possible that the reindexer is not created yet if Gerrit started with the latest index version. \n\nTo implement this use case, I will need to do more changes. I would prefer to not support this use case for now and do this eventually,after I moved the online indexer feature from lucene to generic gerrit index.",
      "parentUuid": "f367919d_e756e2d4",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5333fdd6_8aa24bb7",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/LuceneVersionManager.java",
        "patchSetId": 4
      },
      "lineNbr": 178,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-07-08T13:11:45Z",
      "side": 1,
      "message": "OK, I agree. This can be done later and in the master branch.",
      "parentUuid": "b8f6d649_3d10cf87",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "739481c1_bb32072c",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/OnlineReindexer.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-07-06T01:37:09Z",
      "side": 1,
      "message": "Should this be synchronized?",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13650596_6843a314",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/OnlineReindexer.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-07-06T11:01:41Z",
      "side": 1,
      "message": "I think it must be synchronized as other thread(s) will access this variable.",
      "parentUuid": "739481c1_bb32072c",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8f6d649_dded6b04",
        "filename": "gerrit-lucene/src/main/java/com/google/gerrit/lucene/OnlineReindexer.java",
        "patchSetId": 4
      },
      "lineNbr": 63,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-07-07T18:05:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "13650596_6843a314",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5365bdc2_fa2c89d3",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/IndexStartCommand.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-07-06T01:37:09Z",
      "side": 1,
      "message": "Same question as the other change.  What if we run this when using an index other than Lucene?",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "98059200_9ce7e522",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/IndexStartCommand.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-07-07T18:05:35Z",
      "side": 1,
      "message": "Good point! I think online reindexer should be move from lucene index implementation to gerrit generic index implementation. That said, eventually this command should be working for all index types but for now, this command should not be there if using another index than lucene.\n\nThere is 2 possible way of doing this:\n\n-in the DefaultCommandModule, I check index type before binding the command.\n\n-I define the command in gerrit-lucene and bind them in the lucene module (this option requires that gerrit-lucene depends on gerrit-sshd)\n\nWhich one do you prefer(or maybe you have another option)?",
      "parentUuid": "5365bdc2_fa2c89d3",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "132d0577_281fab8f",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/IndexStartCommand.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-07-07T22:31:38Z",
      "side": 1,
      "message": "I think it\u0027s better to only bind the command if the index supports online indexing.\n\nBut since Lucene is effectively the only index we use (I don\u0027t think anyone uses Solr) it\u0027s probably OK to leave it like this in this change, and do the refactoring in follow-up changes on master.",
      "parentUuid": "98059200_9ce7e522",
      "revId": "52071e5dac17062df3ead14ba942228b1c695676",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}