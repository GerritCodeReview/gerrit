{
  "comments": [
    {
      "key": {
        "uuid": "0fa9e515_0ecf73ad",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-05-28T16:19:36Z",
      "side": 0,
      "message": "Have you checked in the history of the change of this line on the reason why this was introduced? I reckon was exactly for the LDAP use-case ;-)\n\nCan we also add a test for making sure that the intended use-case is going to be supported moving forward? (the lack of testing on the LDAP side has caused so many issues in the past)",
      "range": {
        "startLine": 241,
        "startChar": 6,
        "endLine": 241,
        "endChar": 55
      },
      "revId": "52ac1dacc728af2658b9c8cd1a48607956ee9939",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4df8fc1f_d60e6915",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-05-29T07:04:32Z",
      "side": 0,
      "message": "This particular line was added here:\n\nhttps://gerrit-review.googlesource.com/c/gerrit/+/201450/3/gerrit-server/src/main/java/com/google/gerrit/server/account/AccountManager.java\n\nBefore then it was broken because the logic was inverted",
      "parentUuid": "0fa9e515_0ecf73ad",
      "range": {
        "startLine": 241,
        "startChar": 6,
        "endLine": 241,
        "endChar": 55
      },
      "revId": "52ac1dacc728af2658b9c8cd1a48607956ee9939",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddc33110_56007492",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-05-29T08:31:29Z",
      "side": 0,
      "message": "Will try to add a couple of tests.\n\n\u003e Before then it was broken because the logic was inverted\n\nI commented in that change.... for me this check (for the read-only policy) shouldn\u0027t be done when we authenticate user and get response from LDAP where\nusers\u0027s full name changed. The read-only-ness should only be enforced if a user\ntries to update his full name via UI/REST API.",
      "parentUuid": "4df8fc1f_d60e6915",
      "range": {
        "startLine": 241,
        "startChar": 6,
        "endLine": 241,
        "endChar": 55
      },
      "revId": "52ac1dacc728af2658b9c8cd1a48607956ee9939",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6e06a30_420f1cfe",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 1
      },
      "lineNbr": 241,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2020-05-29T09:58:57Z",
      "side": 0,
      "message": "Actually we already have a test for updating of the full name and it is in AccountManagerIT.authenticateWithUsernameAndUpdateDisplayName. This test clearly\nexpects that updating of the full name upon user authentication must be accepted\nin Gerrit which confirms that what I am doing in this change is correct.\n\nHowever, the AccountManager.real used in the test is the DefaultRealm and\nthe DefaultRealm allows edit of the FULL_NAME. I don\u0027t have a good idea right\nnow how to quickly add/fix tests. My change basically removes dependency to\nthe current realm when updating the full name upon authentication. Therefore,\nthe existing AccountManagerIT.authenticateWithUsernameAndUpdateDisplayName test\nactually covers what we need.\n\nIt looks like the main issue with testing is that we only test AccountManager\nwith the DefaultRealm. This seems unrelated to the fix here and probably shouldn\u0027t\nblock submission of this change. WDYT?",
      "parentUuid": "ddc33110_56007492",
      "range": {
        "startLine": 241,
        "startChar": 6,
        "endLine": 241,
        "endChar": 55
      },
      "revId": "52ac1dacc728af2658b9c8cd1a48607956ee9939",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}