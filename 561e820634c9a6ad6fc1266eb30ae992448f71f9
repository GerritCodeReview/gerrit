{
  "comments": [
    {
      "key": {
        "uuid": "9f237a46_c56033bd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-01-13T16:30:34Z",
      "side": 1,
      "message": "That was not the intent. The intent was to 1) remove round-trips for automation users that want to get all results of a query, and 2) avoid results changing during round-trip queries (this was a problem pre-index with sort_key, but I\u0027m not sure how applicable it is now).",
      "range": {
        "startLine": 9,
        "startChar": 55,
        "endLine": 10,
        "endChar": 34
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "207c1487_926f3f81",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2020-01-13T19:30:52Z",
      "side": 1,
      "message": "It sounds like these automation users are privileged, or in other words that this was not meant for use by ordinary users.\n\nWould it make sense to guard usage with a capability check?\n\n(I suspect the underlying need is for a pub/sub system / event broker.)",
      "parentUuid": "9f237a46_c56033bd",
      "range": {
        "startLine": 9,
        "startChar": 55,
        "endLine": 10,
        "endChar": 34
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f88a4e95_15bd2408",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-01-13T16:30:34Z",
      "side": 1,
      "message": "Also agreed. We didn\u0027t want to just set the limit for some users higher though as that changes the default number of results returned. We wanted an explicit \"yes, give me as many results as you can\" flag.",
      "range": {
        "startLine": 12,
        "startChar": 22,
        "endLine": 14,
        "endChar": 25
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0bf93e9_5cec52c4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1010013
      },
      "writtenOn": "2020-01-13T17:01:19Z",
      "side": 1,
      "message": "\"this option makes configuring limits by permissions useless and opens the door for DoS attacks\"\n\nDo you find this to be a problem in practice? If so, are they anonymous users? \n\nIf this is an actual problem in the real world, and you prevent the ability to override this limit with a switch, it seems there would be nothing to prevent such a \"smart\" user from simply calling the query many times in a row instead which is actually worse on the system then calling it once with a larger number.",
      "parentUuid": "f88a4e95_15bd2408",
      "range": {
        "startLine": 12,
        "startChar": 22,
        "endLine": 14,
        "endChar": 25
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c18b3933_3f26702a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2020-01-13T19:30:52Z",
      "side": 1,
      "message": "\u003e If this is an actual problem in the real world, and you prevent the ability to override this limit with a switch, it seems there would be nothing to prevent such a \"smart\" user from simply calling the query many times in a row instead\n\nOur load balancer and DoS protection system are reasonably good at defending against that.\n\nA single expensive request is harder to deal with (and in fact doesn\u0027t end up succeeding at all with our index).",
      "parentUuid": "a0bf93e9_5cec52c4",
      "range": {
        "startLine": 12,
        "startChar": 22,
        "endLine": 14,
        "endChar": 25
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fbc1632_d0e47936",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-01-13T16:30:34Z",
      "side": 1,
      "message": "Agreed. Any ideas on how we can get the above intent with this in mind?",
      "range": {
        "startLine": 14,
        "startChar": 26,
        "endLine": 16,
        "endChar": 52
      },
      "revId": "561e820634c9a6ad6fc1266eb30ae992448f71f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}