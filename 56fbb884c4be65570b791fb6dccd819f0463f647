{
  "comments": [
    {
      "key": {
        "uuid": "AAAAv3///3E\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/ListProjects.java",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2010-03-17T00:29:23Z",
      "side": 1,
      "message": "Please document this option in Documentation/cmd-ls-projects.txt",
      "revId": "56fbb884c4be65570b791fb6dccd819f0463f647",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAv3///3o\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/ListProjects.java",
        "patchSetId": 1
      },
      "lineNbr": 82,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2010-03-17T00:29:23Z",
      "side": 1,
      "message": "This has to be outside of the try/finally block, in order to use this particular \"db\" in the finally block for close.",
      "revId": "56fbb884c4be65570b791fb6dccd819f0463f647",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAv3///3s\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/ListProjects.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2010-03-17T00:29:23Z",
      "side": 1,
      "message": "Why not just return the ObjectId here?  The RevId wrapper is pointless and just confuses the code.\n\nI also find the use of the result variable confusing if you are just returning null in the error catch blocks anyway.  Rewrite the whole thing as this:\n\n  try {\n    final Repository r \u003d repoManager.openRepository(projectName.get());\n    try {\n      Ref ref \u003d r.getRef(branch);\n      return ref !\u003d null ? ref.getObjectId() : null;\n    } finally {\n      r.close();\n    }\n  } catch (RepositoryNotFoundException rnfe) {\n    return null;\n  } catch (IOException ioe) {\n    return null;\n  }\n\nIf you really prefer using a result variable, then use it throughout the entire method:\n\n  ObjectId result;\n  try {\n    final Repository r \u003d repoManager.openRepository(projectName.get());\n    try {\n      Ref ref \u003d r.getRef(branch);\n      result \u003d ref !\u003d null ? ref.getObjectId() : null;\n    } finally {\n      r.close();\n    }\n  } catch (RepositoryNotFoundException rnfe) {\n    result \u003d null;\n  } catch (IOException ioe) {\n    result \u003d null;\n  }\n  return result;\n\nand don\u0027t return in the middle of a block.  IOW, pick one coding style for handling return values, and stick to it.  Don\u0027t mix them around within the same method, it makes the code far too difficult to follow.  Personally, I prefer the former style, but I can appreciate people\u0027s preference for the latter.",
      "revId": "56fbb884c4be65570b791fb6dccd819f0463f647",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAv3///3k\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/ListProjects.java",
        "patchSetId": 1
      },
      "lineNbr": 92,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2010-03-17T00:29:23Z",
      "side": 1,
      "message": "Because the Repository was opened inside of the try block above, *this* particular db variable is actually the instance member, the ReviewDb object, and not the Repository.  So this method closes the database connection being used by the command, but leaks the Repository handle.",
      "revId": "56fbb884c4be65570b791fb6dccd819f0463f647",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAv3///3I\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/ListProjects.java",
        "patchSetId": 1
      },
      "lineNbr": 113,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2010-03-17T00:29:23Z",
      "side": 1,
      "message": "Just posing a question, does it make sense to print the revision first?  The revision is fixed-width in size.  So if you print that first, the whole output has a nice table feel to it.  But if you print it last, its going to be skewed all over the place.\n\nIf you do print the revision first, maybe use only a single space instead of a tab?  Its just as easy to split from the project name, and it uses less horizontal width when you run the command manually.",
      "revId": "56fbb884c4be65570b791fb6dccd819f0463f647",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}