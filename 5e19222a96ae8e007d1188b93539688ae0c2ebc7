{
  "comments": [
    {
      "key": {
        "uuid": "0b9697c9_3b119746",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-01-27T20:26:28Z",
      "side": 1,
      "message": "On the surface, this already seems possible with alternate solutions (mount points, soft links...).  Can you put your actual use case here so that we can better understand the motivation?\n\nFrom other comments, you have posted the following reason: \"Yes, we use gerrit to create project and the main problem is that it does not know that it need to create a softlink.\"  I assume you mean to create the softlink and move the project to a different location than the basepath?  If so, then I don\u0027t see how this change solves that problem?  It seems to eliminate the need for the soft link, but it does not eliminate the more serious problem, that Gerrit did not create the project in the right place in the first place, which means that it is now race prone to move it (and to make the soft link)?\n\nI think I could use a better explanation of exactly what problem you are trying to solve (i.e. what you cannot already do today), and how this change solves it.",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b8c0fba_fd0e4728",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-01-27T21:44:44Z",
      "side": 1,
      "message": "\u003e It seems to eliminate the need for the soft link, but it does not eliminate the more serious problem, that Gerrit did not create the project in the right place in the first place, which means that it is now race prone to move it (and to make the soft link)?\n\nExactly, this change allows Gerrit to create and use repo in different basePath (which are in located on different volumes) without using softlink.\n\nIt also eliminates any manual manipulation(create softlink and move repo) that would be required to host repositories on different volumes without this change.\n\nExample:\n\n[gerrit]\n  basePath \u003d /nfs_volume/repos\n[repository \"organizationA/*\"]\n  basePath \u003d /ssd_volume/repos\n\nIn this example, all the repositories go in /nfs_volume/repos except the one that the name start with \"organizationA\" go in the /ssd_volume/repos.\n\nThis change does eliminate the problem that you mentioned about creating the repo in the right place (and/or moving it to the right place) because when Gerrit will create the repo for the project organizationA/project1 for example, it will put it in /ssd_volume/repos/organizationA/project1.git and it will also use it from there.",
      "parentUuid": "0b9697c9_3b119746",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cb4e3f56_511e5455",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-27T21:45:45Z",
      "side": 1,
      "message": "\u003e It also eliminates any manual manipulation\n\nI think Martin\u0027s point is that the \"manual manipulation\" of setting up your links is exactly as much work as configuring it in gerrit.config.",
      "parentUuid": "4b8c0fba_fd0e4728",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b8c0fba_3d118f46",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-01-27T21:51:13Z",
      "side": 1,
      "message": "I would agree if I want to do this only for one repo but this change allows the admin to configure this once for all the repo name that starts with organizationA/* for example and every time a repo is created that match that pattern it automatically end up in the right volume.\n\nAnother reason why I did that change is that we want to be able to grant the create project access right to people that do not have access to the file system.",
      "parentUuid": "cb4e3f56_511e5455",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4b8c0fba_5d1e5b55",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-27T21:57:52Z",
      "side": 1,
      "message": "\u003e all the repo name that starts with organizationA/*\n\n ln -s /somewhere/else/organizationA /my/gerrit/site/git/organizationA\n\n\u003e people that do not have access to the file system\n\nIf they don\u0027t have access to the filesystem, how are they going to modify gerrit.config to add this configuration option?",
      "parentUuid": "4b8c0fba_3d118f46",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cb4e3f56_b12dc084",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-01-27T22:11:21Z",
      "side": 1,
      "message": "\u003e ln -s /somewhere/else/organizationA /my/gerrit/site/git/organizationA\n\nIf I create a softlink in my gerrit site, which is on NFS, will it go through the NFS volume to resolve the somewhere else volume?\n\n\u003e If they don\u0027t have access to the filesystem, how are they going to modify gerrit.config to add this configuration option?\n\nGerrit admin configure that any projects of organizationA goes on another volume and when anyone that have the right to create a project creates one, it end up in the right volume.",
      "parentUuid": "4b8c0fba_5d1e5b55",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b9697c9_5b1e6355",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-01-27T23:05:36Z",
      "side": 1,
      "message": "Thank you for this description, it helps explain what your change does better.  Can you put something like this in the commit message?  I did not envision this sort of approach from the current commit message.  The current commit message doesn\u0027t give me a picture of how this change potentially modifies the creation process.\n\nAs I see your example above, it seems that their is no namespace conflict (one of my main concerns) as I was originally envisioning?  However, it does still suffer from the confusing existing tools (tools that expect things to be in one place) problem.  It doesn\u0027t seem like there is a good way to get that information to those tools either if someone wanted to right an intelligent tool that could traverse all the repos.",
      "parentUuid": "4b8c0fba_fd0e4728",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0b9697c9_7b1b1f64",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-01-27T23:05:36Z",
      "side": 1,
      "message": "| If I create a softlink in my gerrit site, which is on NFS, will it go through the NFS volume to resolve the somewhere else volume?\n\nI would ask the same question of your solution though, how does a script follow the config file that potentially lives on another server?\nI think that with a link, a clever admin at least has the potential to make it work?\n\n| Gerrit admin configure that any projects of organizationA goes on another volume and when anyone that have the right to create a project creates one, it end up in the right volume.\n\nYes, but a Gerrit admin can also do what Dave suggested to get the same result, right?",
      "parentUuid": "cb4e3f56_b12dc084",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "372663b6_2d366d13",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-01-28T18:44:00Z",
      "side": 1,
      "message": "|Can you put something like this in the commit message?\nDone, let me know if the commit message is more clear now. Thanks for your feedback, as you probably figured out by now, English is not my first language so sometimes, I think my commit message is clear but it\u0027s not. In my future changes, I will expand more on the goal of the change.",
      "parentUuid": "0b9697c9_5b1e6355",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "174cff89_c4733ece",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 17,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2015-01-28T18:44:00Z",
      "side": 1,
      "message": "|how does a script follow the config file that potentially lives on another server?\n\nCurrently, there is no way since only gerrit knows where the repos are. We would need to create an API so the script can get the location of a repository.\n\n|Yes, but a Gerrit admin can also do what Dave suggested to get the same result, right?\n\nYes, the way I did this change, if you do not configure alternate basePath, Gerrit will work the same way it is without this change(all repos in the same basePath) so Admins can still decide to go with soft links if they prefer.\n\nI see this change as a extra feature in Gerrit that you can optionally enable if you want.",
      "parentUuid": "0b9697c9_7b1b1f64",
      "revId": "5e19222a96ae8e007d1188b93539688ae0c2ebc7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}