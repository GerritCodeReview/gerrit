{
  "comments": [
    {
      "key": {
        "uuid": "3118652c_95e544f3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-03-30T12:24:45Z",
      "side": 1,
      "message": "Do you observe connection leak in your Gerrit server(s)? Have you already tried using the feature which this change provides to debug your Gerrit server(s)? Why not push a fix for the (assumed) connection leak?",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71065dd1_f765a018",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1022287
      },
      "writtenOn": "2016-03-31T01:59:03Z",
      "side": 1,
      "message": "First of all,thanks for your review and questions.Actually I have encountered a connection leak in my Gerrit servers which was observed on the javamelody monitor web and the error_log.And I was using the feature to debug the gerrit servers,but the log seems not working.So util now I could not found the reason of the （assumed）connection leak.Because the gerrit is running in production environment,so it\u0027s a little diffcult to reproduce this issue.By the way,there is no doubt that the gerrit is a powerful application.",
      "parentUuid": "3118652c_95e544f3",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eb9c1a2c_7b8c3f2c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1022287
      },
      "writtenOn": "2016-04-11T08:12:48Z",
      "side": 1,
      "message": "Hi,Sasa\n1)I hava already found the connection leak in my Gerrit server(2.10.5),which is caused by the command \"suexec\" in Gerrit.When the \"--as\" is assigned a EMAIL address which is inaccurate (maybe not case-sensitive or imcomplete)but existed,the connection leak will occur.\n\n2)Because I am not familar with the Gerrit code,it takes some time to locate the connection leak and I just apply the \"removeAbandoned\" feature to avoid the gerrit crash when the count of connections in database pool is up to the limit.Actually,the result proved that it works.But the log cannot be observed which is still making me confused.\n\n3)And forgive my asking,could you give me some directions to solve this problem?",
      "parentUuid": "3118652c_95e544f3",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab7062c4_f9e9379c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-04-11T12:31:49Z",
      "side": 1,
      "message": "\u003e 3)And forgive my asking,could you give me some directions to solve this problem?\n\nWhat you described sounds like a problem in the parsing of the --as option. This is done by the AccountIdHandler class which further delegates to the AccountResolver class. These are two good starting points IMHO.",
      "parentUuid": "eb9c1a2c_7b8c3f2c",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4bc60632_6e0faf89",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1022287
      },
      "writtenOn": "2016-04-11T13:39:26Z",
      "side": 1,
      "message": "Fine,thanks a lot.\nYour opinoin is great,I have just debuged the code in the AccountResolver class.The problem is right here.",
      "parentUuid": "ab7062c4_f9e9379c",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab7062c4_99a83b50",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-04-11T14:10:24Z",
      "side": 1,
      "message": "Sounds good. Can you push a fix for review?",
      "parentUuid": "4bc60632_6e0faf89",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abbea28e_09b2a908",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1022287
      },
      "writtenOn": "2016-04-12T01:11:44Z",
      "side": 1,
      "message": "Of course.I\u0027m trying to do this now.",
      "parentUuid": "ab7062c4_99a83b50",
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "71065dd1_f7eac0c0",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 4
      },
      "lineNbr": 1498,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-03-30T12:18:21Z",
      "side": 1,
      "message": "Do you consider Gerrit as a poorly written application?\n\nI see that this text is copied from the apache AbandonedConfig.setRemoveAbandoned. It is appropriate there as they provide a general purpose connection pool to be used by any application. However, Gerrit doesn\u0027t provide a DB connection pool to be used by other applications... so mentioning poorly written applications in Gerrit\u0027s documentation makes not much sense IMHO.\n\nWhat is actually the intention of this change? Do you have a concrete issue with how Gerrit uses DB connections? Is the issue reproducible?",
      "range": {
        "startLine": 1497,
        "startChar": 54,
        "endLine": 1498,
        "endChar": 79
      },
      "revId": "5ede0c658627385457d5c6d7b37f77f51a288418",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}