{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f85191c5_743e646f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-01-10T17:22:33Z",
      "side": 1,
      "message": "thx.",
      "revId": "5fb1161ffe5a03ea6663686a8569383f33e3099d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "557f2ded_82eb52f2",
        "filename": "javatests/com/google/gerrit/acceptance/server/git/CodeReviewCommitTest.java",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-01-16T10:04:12Z",
      "side": 1,
      "message": "As Han-Wen pointed out in earlier comment, we are eliminating java serialization bits from the code base, see issue 14302, change 327124 and: [1].\n\nWhen I try to build Gerrit@HEAD with the latest Error Prone version, included in upcoming Bazel 5.x release the build is failing:\n\n  javatests/com/google/gerrit/acceptance/server/git/CodeReviewCommitTest.java:60: error: [BanSerializableRead] Deserializing user input via the `Serializable` API is extremely dangerous\n        return (CodeReviewCommit) in.readObject();\n                                               ^\n    (see https://errorprone.info/bugpattern/BanSerializableRead)\n  INFO: Elapsed time: 89.544s, Critical Path: 87.58s\n  INFO: 363 processes: 27 remote cache hit, 125 internal, 211 remote.\n  FAILED: Build did NOT complete successfully\n\nTo reproduce, fetch change 291864 and run (Note, though, that I will add SuppressWarning there in the latest patch set):\n\n  $ bazelisk test javatests/com/google/gerrit/acceptance/...\n\nThe better question is, why this problem was not detected during import of this change in Google internal VCS? In open source version, Dmitrii Filippov explicitly added BanSerializableRead with error severity:\n\n \"-Xep:Xep:BanSerializableRead:ERROR:ERROR\",\n\nbut unfortunately, the currently used Bazel version on gerrit@HEAD is 4.2.0: This bazel release is shipping outdated Error Prone version, so that BanSerializableRead:ERROR and other additions in Dmitrii\u0027s change are no-op.\n\nMoreover, in this CL: [3], Liam Miller-Cushon disabled BanSerializableRead bug pattern in Error Prone per default. The commit message is not detailed enough, but apparently this is the reason, why internal Google\u0027s build tool did not flag line 60 and allow even to import that code, without suppressing the warning.\n\n[1] https://errorprone.info/bugpattern/BanSerializableRead\n[2] https://gerrit-review.googlesource.com/c/gerrit/+/318678/3/tools/BUILD#106\n[3] https://github.com/google/error-prone/commit/c5e1687485bad49606a288187334a48fea284861",
      "range": {
        "startLine": 52,
        "startChar": 2,
        "endLine": 63,
        "endChar": 3
      },
      "revId": "5fb1161ffe5a03ea6663686a8569383f33e3099d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}