{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1b161c6a_9c53d9c5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-01-20T08:19:17Z",
      "side": 1,
      "message": "The logic looks good to me know. I only have one suggestion to make the code cleaner and more extensible. Sorry for bringing this up so late in the review.\n\nAlso pinging @david.ostrovsky@gmail.com again, since it would be great to have a review from somebody that knows the OAuth implementation. Thanks David!",
      "revId": "60f3cb12e4f505ea529f281bd49702cff24271e1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa417e74_20fb7281",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 16
      },
      "lineNbr": 282,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2023-01-20T08:19:17Z",
      "side": 1,
      "message": "This method now got huge and deals with multiple concerns. It might be nicer to have an extra link()-method that deals with linking a new ExternalId to an existing account and put the decision whether to create or link to the authenticate(AuthRequest who)-method. This would be cleaner and more extensible, e.g. if we want to be able to also link ExternalIds of other IDPs.",
      "revId": "60f3cb12e4f505ea529f281bd49702cff24271e1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5633e38b_8e335655",
        "filename": "java/com/google/gerrit/server/account/AccountManager.java",
        "patchSetId": 16
      },
      "lineNbr": 282,
      "author": {
        "id": 1153585
      },
      "writtenOn": "2023-01-20T09:39:19Z",
      "side": 1,
      "message": "I\u0027d just like to clarify this a bit more as it will be a refactor of the entire thing really.\n\nYour suggesting we in essense leave the ceate function alone. We decided at an early point, perhaps `java/com/google/gerrit/httpd/auth/oauth/OAuthSession.java:151` authenticateAndRedirect function. Here, we see if it is possible to link to an existing LDAP external ID, if it is then we call some link function which doees the needful linking of the external ID\u0027s and then call throgh to the authenticate(AuthRequest who)-method which should then work, alternatively we just pass straight through to authenticate(AuthRequest who)-method a",
      "parentUuid": "aa417e74_20fb7281",
      "revId": "60f3cb12e4f505ea529f281bd49702cff24271e1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}