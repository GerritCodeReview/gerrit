{
  "comments": [
    {
      "key": {
        "uuid": "e7828650_328750fa",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-01-19T18:32:58Z",
      "side": 1,
      "message": "Why can we ignore such an exception here?\nI\u0027d think it would make more sense to check for line to be in bounds at the caller or here?\n\nThis way doesn\u0027t make a difference between intentional-and-we-know-it\u0027s-harmless and unintentional-maybe-programming-error-with-data-loss out of bounds.",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7828650_926e3c03",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1019219
      },
      "writtenOn": "2016-01-19T21:37:54Z",
      "side": 1,
      "message": "I agree, I think we should be able to handle this more cleanly.",
      "parentUuid": "e7828650_328750fa",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7b88e3e_f00ac06b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-01-21T08:44:52Z",
      "side": 1,
      "message": "Yes, this is a nasty hack.  I still need to debug more to find the root cause.",
      "parentUuid": "e7828650_926e3c03",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51895439_0d98b18c",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-02-03T20:03:57Z",
      "side": 1,
      "message": "I debugged this and the ArrayIndexOutOfBoundsException is caused by this class trying to add the line from \"side a\", which is wrong because in the case of adding a submodule, \"side a\" should be empty.\n\nThe root cause seems to be the Edit returned by JGit when generating the diff for a submodule add, instead of returning INSERT(0-0,0-1), it returns REPLACE(0-1,0-1).",
      "parentUuid": "a7b88e3e_f00ac06b",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "913d8cf0_bf6a57ee",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1017837
      },
      "writtenOn": "2016-02-03T20:09:34Z",
      "side": 1,
      "message": "So instead of catching all exceptions we could modify the code up in line 182.\n\nWe\u0027d keep the check for FileMode.GITLINK and instead of doing nothing we check do a s/REPLACE(0-1,0-1)/INSERT(0-0,0-1)/ if applicable and then call to addLine?\n(would we consider that a JGit bug which needs filing?)",
      "parentUuid": "51895439_0d98b18c",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31986085_2c9d737d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-02-03T20:47:52Z",
      "side": 1,
      "message": "I am digging in JGit, I think I found the root cause and a possible fix, I will continue to work on this tomorrow.\n\nI think the proper fix in JGit is easier/safer to do than a patch in Gerrit.",
      "parentUuid": "913d8cf0_bf6a57ee",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91a58cc9_ff977f5d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/patch/PatchScriptBuilder.java",
        "patchSetId": 5
      },
      "lineNbr": 431,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-02-04T15:50:12Z",
      "side": 1,
      "message": "Fix submitted in JGit: https://git.eclipse.org/r/#/c/65903/\n\nOnce we have a JGit version that include that fix, I will upload a patchset on this change.",
      "parentUuid": "31986085_2c9d737d",
      "range": {
        "startLine": 431,
        "startChar": 8,
        "endLine": 431,
        "endChar": 17
      },
      "revId": "6114e05de6db58dde51c74f523e24b6bcb79529f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}