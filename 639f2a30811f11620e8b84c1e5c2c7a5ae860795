{
  "comments": [
    {
      "key": {
        "uuid": "61781470_761df057",
        "filename": "gerrit-reviewdb/src/main/resources/com/google/gerrit/reviewdb/server/index_postgres.sql",
        "patchSetId": 8
      },
      "lineNbr": 148,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-12-25T17:41:10Z",
      "side": 0,
      "message": "These indices (and one below on line 155) were removed here, but they were not dropped in the database. So in schema 84 (corresponds to release 2.8.6.1) we still have them in production (PostgreSQL):\n\n  Indexes on changes:\n  changes_allclosed (status, sort_key) WHERE (open \u003d \u0027N\u0027::bpchar)(open \u003d \u0027N\u0027::bpchar)\n  changes_allopen (sort_key) WHERE (open \u003d \u0027Y\u0027::bpchar)\n  changes_bybranchclosed (status, dest_project_name, dest_branch_name, sort_key) WHERE (open \u003d \u0027N\u0027::bpchar)(open \u003d \u0027N\u0027::bpchar)(open \u003d \u0027N\u0027::bpchar)(open \u003d \u0027N\u0027::bpchar)\n\nThis prevents upgrade to schema 102: sort_key cannot be dropped, because it is still referenced [1].\n\n[1] https://gerrit-review.googlesource.com/#/c/62687",
      "range": {
        "startLine": 136,
        "startChar": 0,
        "endLine": 148,
        "endChar": 17
      },
      "revId": "639f2a30811f11620e8b84c1e5c2c7a5ae860795",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}