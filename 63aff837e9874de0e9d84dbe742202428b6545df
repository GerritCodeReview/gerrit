{
  "comments": [
    {
      "key": {
        "uuid": "1c7f1b9a_f5d4d8d4",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2016-10-17T18:11:37Z",
      "side": 1,
      "message": "Correct me if I\u0027m wrong... But I believe the idiomatic way of using flush() is to set up all of your values in the test, and then call it. So these two lines should be outside the flush call. \n\nClearly in this case it doesn\u0027t matter for the success of the test, though, so this is a non-blocking nit.",
      "range": {
        "startLine": 123,
        "startChar": 8,
        "endLine": 124,
        "endChar": 41
      },
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_b5ce603f",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-10-17T18:14:09Z",
      "side": 1,
      "message": "What needs to be flushed is the stamping of the \u003coption\u003e elements with the data that is set in the setup above (specifically, lines 50-54). The test was failing because line 124 here was referring to an option that didn\u0027t yet exist.",
      "parentUuid": "1c7f1b9a_f5d4d8d4",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_550b4c97",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-10-17T18:21:49Z",
      "side": 1,
      "message": "How about stubbing gr-rest-api to provide fake account with this info?",
      "parentUuid": "1c7f1b9a_b5ce603f",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_b5250021",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-10-17T18:28:52Z",
      "side": 1,
      "message": "I\u0027m not sure I follow. There is a stub that produces a fake account with the info that subsequently gets stamped into the DOM. What I\u0027m testing here is the flow of clicking save and having the right data passed to the setAccount* stubs.",
      "parentUuid": "1c7f1b9a_550b4c97",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_15ecf49f",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-10-17T18:43:37Z",
      "side": 1,
      "message": "Ah, sorry - I was thinking about something else.\nRight, the account data was already loaded and here you edit name/email.\nIdeally, this shouldn\u0027t be needed as this flush() handles part of the setup.\nYou probably can listen to ready/attached event in setup and flush after that.\nAlso, I couldn\u0027t repro test failure in safari in WCT.\nAnyway, this is fine for now, I just don\u0027t want this pattern to creep around.",
      "parentUuid": "1c7f1b9a_b5250021",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c3c33f2_bfd7f7d7",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-10-17T18:49:04Z",
      "side": 1,
      "message": "What\u0027s the pattern that you\u0027re seeing here that you don\u0027t want creeping around?",
      "parentUuid": "1c7f1b9a_15ecf49f",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_35b6d092",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-10-17T19:32:08Z",
      "side": 1,
      "message": "Wrapping individual tests in flush()",
      "parentUuid": "5c3c33f2_bfd7f7d7",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c7f1b9a_d5bafc74",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-10-17T19:33:03Z",
      "side": 1,
      "message": "What if I wrapped setup instead?",
      "parentUuid": "1c7f1b9a_35b6d092",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c057749_306fa871",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-10-17T20:16:37Z",
      "side": 1,
      "message": "I forgot, I already do call flush in setup, probably for this exact reason, but it wasn\u0027t sufficient because the way I set things up prevents me from guaranteeing flush is called after the account emails are loaded. Since this is the only test that depends on this particular sequence of events, I think this workaround is good enough as is.",
      "parentUuid": "1c7f1b9a_d5bafc74",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c057749_b08278e4",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2016-10-17T20:29:39Z",
      "side": 1,
      "message": "\u003e Wrapping individual tests in flush()\n\nWhat\u0027s wrong with this?",
      "parentUuid": "1c7f1b9a_35b6d092",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c057749_70b13099",
        "filename": "polygerrit-ui/app/elements/settings/gr-registration-dialog/gr-registration-dialog_test.html",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2016-10-18T19:54:48Z",
      "side": 1,
      "message": "(discussed this with Logan offline, but I\u0027ll reply here since you\u0027ve asked)\nFew reasons:\n1) It\u0027s a boilerplate - so it\u0027s a waste of time to write and read and debug etc\n2) It\u0027s a setup step which may change eventually and will trigger cascading changes\n3) It actually doesn\u0027t solve all the problems - for example if registration page will add another restAPI call that involves sequential promise, this will probably break. This means more cascading changes in tests.\n\nHaving said that, I think in this case I\u0027m ok with this approach since it\u0027s only single test.",
      "parentUuid": "7c057749_b08278e4",
      "revId": "63aff837e9874de0e9d84dbe742202428b6545df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}