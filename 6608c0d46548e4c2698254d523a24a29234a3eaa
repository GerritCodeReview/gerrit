{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "51b5aff9_2c78dcbe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-05-11T06:27:12Z",
      "side": 1,
      "message": "prior to the specific",
      "range": {
        "startLine": 19,
        "startChar": 36,
        "endLine": 19,
        "endChar": 50
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b21bc3c8_5e87c518",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-05-11T13:25:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "51b5aff9_2c78dcbe",
      "range": {
        "startLine": 19,
        "startChar": 36,
        "endLine": 19,
        "endChar": 50
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64681b88_48a8c9ad",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-05-11T06:27:12Z",
      "side": 1,
      "message": "Actually mention what is done: add Optional type adapter for java 17 support.",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 19
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "df3939a2_b45fc81c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-05-11T13:25:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "64681b88_48a8c9ad",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 19
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1dc583d_f4521115",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-05-11T06:27:12Z",
      "side": 1,
      "message": "Can we move this change to stable-3.6 branch? That way we could announce that the upcoming 3.6 release is fully compatible with Java 17 LTS release.\n\nOther JSON type adapters also added tests, for example: EnumTypeAdapterFactory is tested in JsonEnumMappingTest. Please, add a test for the new Optional type adapter.",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a785db8f_2e1ff673",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2022-05-11T06:37:54Z",
      "side": 1,
      "message": "Seems like a good thing to have, but would you mind waiting a bit?\n\nWe\u0027ve had several outages with incompatible storage format changes and I would like to see us addressing that systematically first before we make more changes. It has bitten us too often at this point.\n\nYoussef is working on this so he can comment more :-)\n\nSorry for putting a block on the change and thank you for your patience.",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0d3f4d5_a27b4694",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-05-11T07:15:12Z",
      "side": 1,
      "message": "Yes, I noticed: OptionalSubmitRequirementExpressionResultAdapterFactory. And I alos added Youssef as reviewer to this change.\n\n@Youssef, can you comment on the current status of incompatible storage format changes?\n\nOne problem is that the current state of the affairs prevents us to fully support JDK 17 that is currently LTS release.",
      "parentUuid": "a785db8f_2e1ff673",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "329af249_6cb452d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-05-11T13:25:40Z",
      "side": 1,
      "message": "I have introduced a dedicated change that performs JSON Optional (de)serialization.",
      "parentUuid": "b1dc583d_f4521115",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aef2f45f_111e0509",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-05-11T13:25:40Z",
      "side": 1,
      "message": "@Patrick I do agree that we shouldn\u0027t change the way things get serialized so that we avoid any issues hence I have prepended the change with one that performs JSON serialization tests of Optional and AFAICT nothing has changed with this change.\n\nObviously I could be missing sth so feel free to point me to it (@Youssef could do that too ;)).",
      "parentUuid": "b0d3f4d5_a27b4694",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06236810_556f5891",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-05-16T11:19:14Z",
      "side": 1,
      "message": "No objections on this change. I tried (with this change) removing our custom serializers in favour of the new one:\n  * OptionalBooleanAdapter\n  * OptionalSubmitRequirementExpressionResultAdapterFactory\n  \nBut it didn\u0027t work. We have these custom adapters because we had fields that were mandatory, then we made them optional: [1], [2], hence we needed these custom adapters s.t. they can understand both serial formats (this was hacky, and we should get rid of these adapters on the long run and data-migrate all serialized entities to one format).\n\nSince the custom serializers are still kept, they are picked up for SR deserialization and this change is a no/op for them. We have guarding tests (SubmitRequirementJsonSerializerTest) for SRs. Looks good to me.\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/321518\n\n[2] https://gerrit-review.googlesource.com/c/gerrit/+/328617",
      "parentUuid": "aef2f45f_111e0509",
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c6df070_80faea6f",
        "filename": "java/com/google/gerrit/json/OptionalSerializer.java",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-05-11T06:27:12Z",
      "side": 1,
      "message": "The class naming does not fully reflect what this class provides: both serialization and de-serialization. Given that this class is registered using:\n\n  .registerTypeAdapter(Optional.class, new OptionalSerializer())\n  \nshould it be called: OptionalTypeAdapter?",
      "range": {
        "startLine": 31,
        "startChar": 21,
        "endLine": 31,
        "endChar": 31
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32f3937a_0d7f4454",
        "filename": "java/com/google/gerrit/json/OptionalSerializer.java",
        "patchSetId": 3
      },
      "lineNbr": 31,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-05-11T13:25:40Z",
      "side": 1,
      "message": "Right, double checked the code base and that is the approach taken.",
      "parentUuid": "0c6df070_80faea6f",
      "range": {
        "startLine": 31,
        "startChar": 21,
        "endLine": 31,
        "endChar": 31
      },
      "revId": "6608c0d46548e4c2698254d523a24a29234a3eaa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}