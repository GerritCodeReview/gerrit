{
  "comments": [
    {
      "key": {
        "uuid": "dd428cea_cc26d357",
        "filename": "java/com/google/gerrit/reviewdb/client/RefNames.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-10T15:49:30Z",
      "side": 1,
      "message": "Any reason this shouldn\u0027t go under refs/meta? Like refs/meta/external-ids, which is the closest analogue.",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4943e4be_41b76f38",
        "filename": "java/com/google/gerrit/reviewdb/client/RefNames.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-11-14T13:38:45Z",
      "side": 1,
      "message": "No strong reason. I changed it to refs/meta/group-names.",
      "parentUuid": "dd428cea_cc26d357",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8978fb4_ee28d804",
        "filename": "java/com/google/gerrit/reviewdb/client/RefNames.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-14T14:13:38Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4943e4be_41b76f38",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77b1a2ed_4c8f1892",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 56,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-10T15:49:30Z",
      "side": 1,
      "message": "Maybe add checkNotNull(newGroupName)?",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08f61bd3_3e60da7f",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 56,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-11-14T13:38:45Z",
      "side": 1,
      "message": "Well, most of this class is already prepared for the deletion of groups, even though we don\u0027t support it yet. As newGroupName may be null without any resulting errors, I wouldn\u0027t want to restrict it (within the constructor of this class). I added @Nullable to the constructor (see the next patch set) to emphasize that null values are allowed. In addition, I added some calls to checkNotNull() to the factory methods.",
      "parentUuid": "77b1a2ed_4c8f1892",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03740e90_66bc280b",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 102,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-10T15:49:30Z",
      "side": 1,
      "message": "If we always throw CIE if the old name is not present, then how do we repair the notes branch? Some manual intervention not involving this class?\n\nMaybe the answer is that a later change will make this check optional, if the caller declares their intent to perform a repair.\n\nEither way I suppose this is fine to leave as-is in this change.",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e41ed37a_f998f0e2",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 102,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-11-14T13:38:45Z",
      "side": 1,
      "message": "Up to now, I tried to avoid inconsistent states by restricting the ways to get there. Do you think that we should have an explicit mechanism for repairing this notes branch? \n\nAs a compromise, we could only throw a CIE if the old name points to another UUID. I\u0027m not sure if that would really help, though. It would strongly depend on the way the notes branch is broken compared to the group.config file.\n\nAfter I night\u0027s sleep, I tend to rather implement a repairer which creates the NoteMap from scratch from all existing group refs. It shouldn\u0027t be too difficult to implement it and expose it e.g. as a site program. Hence, I would prefer to not open up loop-holes here.",
      "parentUuid": "03740e90_66bc280b",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a951c108_a8325620",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 102,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-14T14:13:38Z",
      "side": 1,
      "message": "\u003e Up to now, I tried to avoid inconsistent states by restricting the ways to get there. Do you think that we should have an explicit mechanism for repairing this notes branch? \n\u003e ...\n\u003e After I night\u0027s sleep, I tend to rather implement a repairer which creates the NoteMap from scratch from all existing group refs.\n\nYeah, I agree that consistency checks and repairs should happen a) later and b) not in this class.",
      "parentUuid": "e41ed37a_f998f0e2",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ebb56bb_6800c675",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-10T15:49:30Z",
      "side": 1,
      "message": "I can tell you right now that I\u0027m going to need this functionality in some other method that\u0027s not in onSave, so I can bulk update notes in GroupRebuilder with a single commit.\n\nI don\u0027t mind doing that on my own later, though.",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 148,
        "endChar": 5
      },
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "075ff8c5_649ca091",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-11-14T13:38:45Z",
      "side": 1,
      "message": "I extracted the logic to two static methods: one for adding and one for removing a note. They are currently private. Feel free to increase their visibility when necessary.",
      "parentUuid": "2ebb56bb_6800c675",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 148,
        "endChar": 5
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b28398ae_2f0d3e10",
        "filename": "java/com/google/gerrit/server/group/db/GroupNameNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 148,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-14T14:13:38Z",
      "side": 1,
      "message": "Thanks.",
      "parentUuid": "075ff8c5_649ca091",
      "range": {
        "startLine": 138,
        "startChar": 0,
        "endLine": 148,
        "endChar": 5
      },
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "043f8b3e_c20bc67c",
        "filename": "java/com/google/gerrit/server/group/db/GroupsUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-11-10T15:49:30Z",
      "side": 1,
      "message": "I think I already mentioned in some doc somewhere that I think this is pretty low priority, FWIW. We don\u0027t have a high rate of group creation traffic.",
      "revId": "665a53fad717605db016acc0edd3881bbf0c596e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}