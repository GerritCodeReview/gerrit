{
  "comments": [
    {
      "key": {
        "uuid": "ce4e4d56_518bb447",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "I see how it is annoying to bump the schema version every day. OTOH, master was recently broken because of stale indexes.\n\nSuggestion: upload a WIP change, and update it with every removed index (or even column) and put a blocker on release (2.11) not to forget to merge this pending change before rc0 is cut of.",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cedbadab_296b4d8f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "No. It\u0027s a waste of effort. The schema upgrade I have written loops through and deletes all changes indexes. Writing one beforehand to delete a subset is pointless.\n\nNobody is going to run this code before that schema upgrade gets checked in. And if they did, the extra SQL indexes wouldn\u0027t hurt them.",
      "parentUuid": "ce4e4d56_518bb447",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee49514e_d29fa46b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T17:27:39Z",
      "side": 1,
      "message": "| And if they did, the extra SQL indexes wouldn\u0027t hurt them.\n\nSee, sort_key removal change and broken master for weeks because of stale indexes. So the general statement: stale indexes don\u0027t hurt, is wrong of course.",
      "parentUuid": "cedbadab_296b4d8f",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e6375c3_f78580e5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:32:56Z",
      "side": 1,
      "message": "Um, ok, but I\u0027m still not writing another schema upgrade for this change.\n\nLiterally the only thing preventing me from finishing the next change is having to respond to your comments on this one.",
      "parentUuid": "ee49514e_d29fa46b",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce4e4d56_316550ff",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "Unrelated change?",
      "range": {
        "startLine": 172,
        "startChar": 4,
        "endLine": 172,
        "endChar": 25
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cedbadab_0968098f",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 172,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "No. MergeOp now depends on the secondary index for listing submitted changes on a branch, so this database update needs to be reflected.\n\nNormally changes are submitted through the Submit class, which of course already indexes in the appropriate place. But this helper method is used by tests to test specific multi-change merge scenarios.",
      "parentUuid": "ce4e4d56_316550ff",
      "range": {
        "startLine": 172,
        "startChar": 4,
        "endLine": 172,
        "endChar": 25
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee49514e_f2a4a8be",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 172,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T17:27:39Z",
      "side": 1,
      "message": "Thanks, missed it. I wonder if some of unit tests are red if this line is missed?",
      "parentUuid": "cedbadab_0968098f",
      "range": {
        "startLine": 172,
        "startChar": 4,
        "endLine": 172,
        "endChar": 25
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e6375c3_176bd48e",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/rest/change/AbstractSubmit.java",
        "patchSetId": 5
      },
      "lineNbr": 172,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:32:56Z",
      "side": 1,
      "message": "Yes, otherwise I wouldn\u0027t have known to add it :)\n\nBut I forget which ones.",
      "parentUuid": "ee49514e_f2a4a8be",
      "range": {
        "startLine": 172,
        "startChar": 4,
        "endLine": 172,
        "endChar": 25
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce4e4d56_11684cd8",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReloadSubmitQueueOp.java",
        "patchSetId": 5
      },
      "lineNbr": 57,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "Could be inlined in loop below.",
      "range": {
        "startLine": 57,
        "startChar": 6,
        "endLine": 57,
        "endChar": 30
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e6375c3_7797b01f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReloadSubmitQueueOp.java",
        "patchSetId": 5
      },
      "lineNbr": 57,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ce4e4d56_11684cd8",
      "range": {
        "startLine": 57,
        "startChar": 6,
        "endLine": 57,
        "endChar": 30
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee49514e_f2cd8896",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/SiteIndexer.java",
        "patchSetId": 5
      },
      "lineNbr": 285,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "This feels very wrong to me. How would be this translated to SQL?\n\n* where change_id \u003d 1 or change_id \u003d 2 or ...\n* where change_id in (1,2,3,4,5, 1024) or (1024, 1025, ...) or ... \n\nWe cannot use byProject index predicate here, because we are reindexing. We don\u0027t want to use database here, because that what this change is about. So just leave it as is for now and add a TODO? Or have you verified site reindexing with this method implementation for one *very* big repository (0,5 million changes)?",
      "range": {
        "startLine": 285,
        "startChar": 11,
        "endLine": 285,
        "endChar": 32
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cedbadab_69754563",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/SiteIndexer.java",
        "patchSetId": 5
      },
      "lineNbr": 285,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "Good point. I don\u0027t know what that performance is like for get with 10k IDs.\n\nChanged to do single lookups, with a comment as to why this is ok.",
      "parentUuid": "ee49514e_f2cd8896",
      "range": {
        "startLine": 285,
        "startChar": 11,
        "endLine": 285,
        "endChar": 32
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce4e4d56_91535c32",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "Can we be consistent with creation of collections classes? 8 line above you haven\u0027t used helper class.",
      "range": {
        "startLine": 89,
        "startChar": 8,
        "endLine": 89,
        "endChar": 56
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cedbadab_896239aa",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "newHashMapWithExpectedSize has heuristics in its body to call HashMap(initialCapacity, loadFactor) with appropriate arguments. There is no single constructor in HashMap that has equivalent behavior.",
      "parentUuid": "ce4e4d56_91535c32",
      "range": {
        "startLine": 89,
        "startChar": 8,
        "endLine": 89,
        "endChar": 56
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ce4e4d56_7188b84a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/InternalChangeQuery.java",
        "patchSetId": 5
      },
      "lineNbr": 56,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "I\u0027ve found this non obvious if not to say confusing and way to hidden. Move this comment (or part of it) to line 30?",
      "range": {
        "startLine": 54,
        "startChar": 4,
        "endLine": 56,
        "endChar": 57
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e6375c3_97760475",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/InternalChangeQuery.java",
        "patchSetId": 5
      },
      "lineNbr": 56,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ce4e4d56_7188b84a",
      "range": {
        "startLine": 54,
        "startChar": 4,
        "endLine": 56,
        "endChar": 57
      },
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee49514e_d2c88489",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/util/ManualRequestContext.java",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-01-14T15:11:24Z",
      "side": 1,
      "message": "License header is missing.",
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e6375c3_b77b085e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/util/ManualRequestContext.java",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2015-01-14T17:18:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ee49514e_d2c88489",
      "revId": "67f61727842526cd5fe622cfd50ef4b790c38179",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}