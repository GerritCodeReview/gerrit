{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "277be2d6_dd54caa1",
        "filename": "java/com/google/gerrit/server/patch/SubmitWithStickyApprovalDiff.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2021-11-08T10:51:49Z",
      "side": 1,
      "message": "I see your point, but I think that preventing breakage downstream is equally important. As discussed in the standup just now, can we somehow include this with the other messages we\u0027re already checking? Because to the backends like STBTI it\u0027s one and the same.",
      "range": {
        "startLine": 99,
        "startChar": 11,
        "endLine": 99,
        "endChar": 47
      },
      "revId": "696467e40b4b57a27cc9df0bcd77dbb4888ac1c2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cfa596c_f6c34675",
        "filename": "java/com/google/gerrit/server/patch/SubmitWithStickyApprovalDiff.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-11-08T11:18:09Z",
      "side": 1,
      "message": "This is the first time we encounter this issue of something breaking, and this feature was in prod for around a year. Hence I think it\u0027s not super important.\n\nAnyway, autogenerated change messages were always excluded from the limit (see your initial implementation in  I93a6374b). We might have to rework that, but that means we risk breaking some user operations. \n\nI think it\u0027s best to keep as is. I also reduced the size too divide by 10 (300KB).",
      "parentUuid": "277be2d6_dd54caa1",
      "range": {
        "startLine": 99,
        "startChar": 11,
        "endLine": 99,
        "endChar": 47
      },
      "revId": "696467e40b4b57a27cc9df0bcd77dbb4888ac1c2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "103e83cd_22348994",
        "filename": "java/com/google/gerrit/server/patch/SubmitWithStickyApprovalDiff.java",
        "patchSetId": 3
      },
      "lineNbr": 99,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2021-11-08T11:36:55Z",
      "side": 1,
      "message": "I\u0027m guilty of not documenting why we exclude autogenerated messages. IIRC we reasoned that they are always small. Whether or not I remember correctly, this is definitely not true today, even with a limit of just 300KB.\n\nThis particular type of message has the nice property that it is only generated on submit, i.e. once. But I still think we should include autogenerated messages.\n\nConsider the failure modes: If some automation/some team\u0027s process breaks because they hit the validation threshold, they will get a clear message that explains the root cause. If we don\u0027t do that, we\u0027ll get degraded behavior in our storage layer or other dependencies. This will cause the same breakage, but it will likely be flaky and harder to diagnose.",
      "parentUuid": "2cfa596c_f6c34675",
      "range": {
        "startLine": 99,
        "startChar": 11,
        "endLine": 99,
        "endChar": 47
      },
      "revId": "696467e40b4b57a27cc9df0bcd77dbb4888ac1c2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}