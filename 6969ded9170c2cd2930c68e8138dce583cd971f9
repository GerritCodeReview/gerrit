{
  "comments": [
    {
      "key": {
        "uuid": "fb1b8608_0b814303",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "Why do we need a config option? What is the harm in always sending them (when serving a top-level PG page)?",
      "range": {
        "startLine": 11,
        "startChar": 6,
        "endLine": 11,
        "endChar": 40
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86a7fc5c_f24a50af",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "tl;dr: so it can be easily turned off in case of problems and turned on for testing ahead of prod release.\n\nLink preload spec is new and not widely supported (http://caniuse.com/#feat\u003dlink-rel-preload), so I wouldn\u0027t be surprised if it may cause issues and some installation would prefer to opt-out.",
      "parentUuid": "fb1b8608_0b814303",
      "range": {
        "startLine": 11,
        "startChar": 6,
        "endLine": 11,
        "endChar": 40
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31baceb2_7451f751",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-10T14:42:07Z",
      "side": 1,
      "message": "It looks like that caniuse link is about \u003clink rel\u003d\"preload\"\u003e, not the HTTP header. Is the header supported by a different set of browsers?\n\nAnyway, I\u0027m still not 100% convinced we need a flag for this, but you are absolutely right it is safest, and you already wrote the code, so it\u0027s not like it\u0027s wasting anybody\u0027s time at this point. We can leave it.",
      "parentUuid": "86a7fc5c_f24a50af",
      "range": {
        "startLine": 11,
        "startChar": 6,
        "endLine": 11,
        "endChar": 40
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e3ea5c9_acc4b9c3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "JS and fonts are preloaded using \u003clink rel\u003d\"preload\"\u003e in the body of the HTML. Can you explain briefly in the commit message why you\u0027re using a different mechanism here? Is it just that it\u0027s easier to implement this way than it would be to support a dynamic list of preloads in the HTML template?\n\nOr would it make sense to have JS/fonts preload using headers instead?\n\nAre they supported by different sets of browsers?",
      "range": {
        "startLine": 14,
        "startChar": 20,
        "endLine": 14,
        "endChar": 33
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c30164fe_5bf343a3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "\u003e Can you explain briefly in the commit message why you\u0027re using a different mechanism here?\n\nMakes sense, done.\n\n\nFonts are preloaded, but not all .js files (webcomponents-lite, for example, and other Polymer dependencies). \n\nIn any case, the point was that this gives signal to browser for what should be loaded so it can be prioritized/preloaded.\n\n\u003e would it make sense to have JS/fonts preload using headers instead?\n\nI think yes, to keep all preloading logic in one place to make maintenance easier.\nHowever, I\u0027d prefer to roll out a small set of headers initially and experiment with determining the right amount in follow-up releases.",
      "parentUuid": "8e3ea5c9_acc4b9c3",
      "range": {
        "startLine": 14,
        "startChar": 20,
        "endLine": 14,
        "endChar": 33
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab6fc22a_ecc3ffbc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 14,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-10T14:42:07Z",
      "side": 1,
      "message": "Ack, we can consider that for later cleanup.",
      "parentUuid": "c30164fe_5bf343a3",
      "range": {
        "startLine": 14,
        "startChar": 20,
        "endLine": 14,
        "endChar": 33
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39bfad62_22da475f",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 3
      },
      "lineNbr": 2058,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2017-03-08T00:35:06Z",
      "side": 1,
      "message": "Supporting browsers",
      "range": {
        "startLine": 2058,
        "startChar": 0,
        "endLine": 2058,
        "endChar": 27
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a8e272d_7a1846af",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 3
      },
      "lineNbr": 2058,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-03-26T16:39:32Z",
      "side": 1,
      "message": "Ping",
      "parentUuid": "39bfad62_22da475f",
      "range": {
        "startLine": 2058,
        "startChar": 0,
        "endLine": 2058,
        "endChar": 27
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0b188a4_63ea381f",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "What about / and dashboard links?",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dacc0c4_66e7478a",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0b188a4_63ea381f",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec0e3910_c22239f8",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2017-03-08T00:35:06Z",
      "side": 1,
      "message": "Does it make sense to include /accounts/self/detail, etc., in the preloads for this page as well?",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1eb5bdc4_455990e1",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "Those are already implied by the previous one. Guice makes sure that *all* matching filters get called, so the ^/c/.* ones will run as well.\n\nI would think there are some more change-specific ones here, though. Like /comments and /related and stuff.",
      "parentUuid": "ec0e3910_c22239f8",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d866265_c1ea571d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "Dave\u0027s right - it\u0027s a set of matches, and all will be applied.\n\nThe list is clearly incomplete, but I think it would make sense to experiment and fine tune it once the preload is working end-to-end.\n\nI can imagine situation when preloading all REST APIs chokes the browser and in fact increases user-perceived latency (time to first draw).\n\nComment added.",
      "parentUuid": "1eb5bdc4_455990e1",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "82ce5036_33735137",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 48,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-10T14:42:07Z",
      "side": 1,
      "message": "\u003e I can imagine situation when preloading all REST APIs chokes the browser and in fact increases user-perceived latency (time to first draw).\n\nReally good point. I look forward to seeing numbers on this :)",
      "parentUuid": "8d866265_c1ea571d",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36f19e16_379ce689",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "It feels a little wasteful to add N filters when 1 will do. LinkPreloadFilter could take a List.",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80ffccad_28170b6b",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 59,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-10T14:42:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "36f19e16_379ce689",
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6970f7d_c4a52539",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "HttpHeaders.LINK",
      "range": {
        "startLine": 79,
        "startChar": 20,
        "endLine": 79,
        "endChar": 26
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0dc3e9eb_ffd57759",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f6970f7d_c4a52539",
      "range": {
        "startLine": 79,
        "startChar": 20,
        "endLine": 79,
        "endChar": 26
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7653602_7383a777",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-03-08T02:20:10Z",
      "side": 1,
      "message": "I don\u0027t think this works with a nonempty context path; would getPathInfo() be a better fit perhaps?",
      "range": {
        "startLine": 81,
        "startChar": 18,
        "endLine": 81,
        "endChar": 31
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14d11df5_29cff028",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 1024777
      },
      "writtenOn": "2017-03-08T20:13:11Z",
      "side": 1,
      "message": "Good point on context path.\n\nI couldn\u0027t figure out why getPathInfo() was returning null always, so added support for context path using getContextPath() and getServletPath() - since Module in this file installs filters in configureServets, it looked like a good match.\n\nLet me know if this looks better, this isn\u0027t something I\u0027m totally familiar with.",
      "parentUuid": "f7653602_7383a777",
      "range": {
        "startLine": 81,
        "startChar": 18,
        "endLine": 81,
        "endChar": 31
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c8e0559_15fe0444",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/LinkPreloadFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-03-26T16:39:32Z",
      "side": 1,
      "message": "I don\u0027t have any advice other than just try it until it works. We just need to check that it works in the supported use cases, including with/without context path.",
      "parentUuid": "14d11df5_29cff028",
      "range": {
        "startLine": 81,
        "startChar": 18,
        "endLine": 81,
        "endChar": 31
      },
      "revId": "6969ded9170c2cd2930c68e8138dce583cd971f9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}