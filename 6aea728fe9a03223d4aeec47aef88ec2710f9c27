{
  "comments": [
    {
      "key": {
        "uuid": "7cbfe0de_17ea1478",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/BaseInit.java",
        "patchSetId": 32
      },
      "lineNbr": 226,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-02-09T16:21:07Z",
      "side": 1,
      "message": "This means that the InitStepSecureStoreProvider will never get a null SecureStoreData injected.",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_b707e890",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/BaseInit.java",
        "patchSetId": 32
      },
      "lineNbr": 226,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2015-02-10T11:57:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7cbfe0de_17ea1478",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_d79edcce",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/BaseInit.java",
        "patchSetId": 32
      },
      "lineNbr": 226,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-02-10T16:31:18Z",
      "side": 1,
      "message": "My comment above wasn\u0027t an objection... there was no hint to move this line above the if statement :-(\n\nit was only there to help understanding why a null check is not necessary in the InitStepSecureStoreProvider.",
      "parentUuid": "7cbfe0de_b707e890",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_57abeced",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/BaseInit.java",
        "patchSetId": 32
      },
      "lineNbr": 226,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2015-02-10T18:38:36Z",
      "side": 1,
      "message": "Without this modification init step will fail when started without \u0027--secure-sotore-lib\u0027 parameter. \n\nThis is because of missing binding for the last parameter of SitePathInitializer, which is SecureStoreInitData. Therefore this line was moved to always bind.",
      "parentUuid": "7cbfe0de_d79edcce",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b137c3c2_e9d3d559",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/BaseInit.java",
        "patchSetId": 32
      },
      "lineNbr": 226,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2015-02-10T23:00:43Z",
      "side": 1,
      "message": "Indeed, it\u0027s failing with SecureStoreInitData being not bound in init case without `--secure-sotore-lib` parameter. But I find the code in the ps33  confusing:\n\n  SecureStoreInitData secureStoreInitData \u003d discoverSecureStoreClass();\n  bind(SecureStoreInitData.class).toProvider(\n      Providers.of(secureStoreInitData));\n  if (secureStoreInitData !\u003d null) {\n      bind(SecureStore.class).toProvider(\n          InitStepSecureStoreProvider.class);\n  } else {\n      bind(SecureStore.class).toProvider(\n          SecureStoreProvider.class);\n  }\n\nWould it be more clear to explicitly bind SecureStoreInitData to null value in secureStoreInitData \u003d\u003d null case?\n\n  SecureStoreInitData secureStoreInitData \u003d discoverSecureStoreClass();\n  if (secureStoreInitData !\u003d null) {\n      bind(SecureStoreInitData.class).toProvider(\n          Providers.of(secureStoreInitData));\n      bind(SecureStore.class).toProvider(\n          InitStepSecureStoreProvider.class);\n  } else {\n      bind(SecureStoreInitData.class).toProvider(\n          (SecureStoreInitData)null);\n      bind(SecureStore.class).toProvider(\n          SecureStoreProvider.class);\n  }",
      "parentUuid": "7cbfe0de_57abeced",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_f70320b6",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 27,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-02-09T16:21:07Z",
      "side": 1,
      "message": "remove the @Nullable as, from the binding code in the BaseInit, it is obvious that a null will not be injected here",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcb1100e_9b03ebec",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 27,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-02-10T01:56:30Z",
      "side": 1,
      "message": "While we\u0027re here, another minor nit.  The injected ctor arguments should be listed one per line.",
      "parentUuid": "7cbfe0de_f70320b6",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cbad4ec_78aee1ff",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 27,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-02-10T09:01:11Z",
      "side": 1,
      "message": "Shall we document that [1] ?\n\n[1] https://gerrit-review.googlesource.com/64288",
      "parentUuid": "fcb1100e_9b03ebec",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_1774541c",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 27,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2015-02-10T11:57:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcb1100e_9b03ebec",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cbad4ec_38caa9cd",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 27,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2015-02-10T11:57:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7cbfe0de_f70320b6",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_d7081cd3",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-02-09T16:21:07Z",
      "side": 1,
      "message": "btw, with the @Nullable we have a potential NPE here",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cbfe0de_f7fd6010",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitStepSecureStoreProvider.java",
        "patchSetId": 32
      },
      "lineNbr": 28,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2015-02-10T11:57:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7cbfe0de_d7081cd3",
      "revId": "6aea728fe9a03223d4aeec47aef88ec2710f9c27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}