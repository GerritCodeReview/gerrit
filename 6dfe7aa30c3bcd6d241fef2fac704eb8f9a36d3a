{
  "comments": [
    {
      "key": {
        "uuid": "55c2ea1e_cd4ca93c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-29T18:48:58Z",
      "side": 1,
      "message": "Are you able to reproduce this? Was draft workflow involved?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "955d4234_4702aee3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2014-10-29T19:00:13Z",
      "side": 1,
      "message": "Yes, this inconsistency is because we have a active/hot-stand-by topology and since those 2 gerrit instances do not share the lucene index, the index on the hot-stand-by is always out-of-date.\n\nWe use the REST api to keep the lucene index of the hot-stand-by up to date but when a draft change is deleted, there is no way to index(remove) that change because the change no longer exist in the DB.",
      "parentUuid": "55c2ea1e_cd4ca93c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d52b3ac1_a90a1d44",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-10-30T01:24:02Z",
      "side": 1,
      "message": "It would be better to include this detail in the commit message.",
      "parentUuid": "955d4234_4702aee3",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d52b3ac1_8907593e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-10-30T01:25:44Z",
      "side": 1,
      "message": "Or maybe better to add the detail in an issue on the tracker, so we can link to it here and from the release notes.",
      "parentUuid": "d52b3ac1_a90a1d44",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55dcaa2f_fd016728",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-10-30T12:40:01Z",
      "side": 1,
      "message": "Have you considered to disable DRAFT workflow and enable WIP workflow instead?",
      "parentUuid": "955d4234_4702aee3",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75c8ce75_36d3f869",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2014-10-30T13:26:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d52b3ac1_8907593e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75c8ce75_56d87481",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2014-10-30T13:26:43Z",
      "side": 1,
      "message": "We have quite a lot of users that already uses the DRAFT workflow so it would be hard to disable it and tell them that they need to use something else, especially that the only problem we have(the one solved by this change) is caused by the way we deploy Gerrit.\n\nI guess I could enable the WIP workflow to see if the users prefer that but in the meantime, I still need to be able remove a deleted change from the index.\n\nIt is also possible(even if it is unlikely) to get into that situation of having a change in the index that is not in the DB without having this active/hot-stand-by topology. If a draft change is deleted and Gerrit crashes before the index was flushed to the disk.",
      "parentUuid": "55dcaa2f_fd016728",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 16
      },
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d52b3ac1_49f601f4",
        "filename": "gerrit-solr/src/main/java/com/google/gerrit/solr/SolrChangeIndex.java",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-10-30T01:23:33Z",
      "side": 1,
      "message": "No implementation for Solr?",
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95b382f9_17cef4be",
        "filename": "gerrit-solr/src/main/java/com/google/gerrit/solr/SolrChangeIndex.java",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1016722
      },
      "writtenOn": "2014-10-30T12:09:14Z",
      "side": 1,
      "message": "We do not use Solr. This issue never was reproduced with it.",
      "parentUuid": "d52b3ac1_49f601f4",
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d52b3ac1_094a4981",
        "filename": "gerrit-solr/src/main/java/com/google/gerrit/solr/SolrChangeIndex.java",
        "patchSetId": 1
      },
      "lineNbr": 390,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-10-30T12:14:08Z",
      "side": 1,
      "message": "Right, but presumably the same problem will also occur for other index types.  I see no valid reason to omit the implementation for those indexes.",
      "parentUuid": "95b382f9_17cef4be",
      "revId": "6dfe7aa30c3bcd6d241fef2fac704eb8f9a36d3a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}