{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e6ca6174_6c8fec31",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 77,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-04-08T11:59:15Z",
      "side": 1,
      "message": "Inject AuthConfig and use AuthConfig.isUserNameToLowerCase?",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25d73f9c_97798463",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 77,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-10T06:25:27Z",
      "side": 1,
      "message": "I wanted to avoid to inject both the GerritServerConfig and AuthConfig, which seems to be redundant.",
      "parentUuid": "e6ca6174_6c8fec31",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e5921d7_a3522ad1",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 77,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-22T07:31:18Z",
      "side": 1,
      "message": "@Sasa: Is that OK for you or should I change this to use AuthConfig?",
      "parentUuid": "25d73f9c_97798463",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a159024d_023a0c6d",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 199,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-04-08T11:59:15Z",
      "side": 1,
      "message": "If the (de)serialization changes then the serialVersionUID also needs to change. This ensures that we don\u0027t try to deserialize old entries (without the new field) into the new format (with the new field).",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12953cff_d2a0d213",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 199,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-10T06:25:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a159024d_023a0c6d",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7350050f_d7c400d7",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 208,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-04-08T11:59:15Z",
      "side": 1,
      "message": "Why do we need this field here? Looks like this class is trying to support both cases, case sensitive and case insensitive usernames, at the same time? However, this is a global setting and it cannot change until the next restart. Maybe a simpler solution is to simply drop this (persistent) cache whenever accounts are migrated?",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37c70405_5b16efad",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 208,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2021-04-08T13:30:56Z",
      "side": 1,
      "message": "the cache could be dropped by the migration program in order to ensure we don\u0027t miss this",
      "parentUuid": "7350050f_d7c400d7",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "055bcc04_98de370b",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 208,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-10T06:25:27Z",
      "side": 1,
      "message": "Unfortunately, we would still have to parse the Key and to be able to do that, we would still need to know the option here, since the ExternalId.Key.parse() is static.",
      "parentUuid": "37c70405_5b16efad",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19769f53_66be34bb",
        "filename": "java/com/google/gerrit/httpd/WebSessionManager.java",
        "patchSetId": 15
      },
      "lineNbr": 208,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-22T07:31:18Z",
      "side": 1,
      "message": "Using static injection should resolve this issue.",
      "parentUuid": "055bcc04_98de370b",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a17101ad_bc9cfe28",
        "filename": "java/com/google/gerrit/server/account/externalids/ExternalIdKeyFactory.java",
        "patchSetId": 15
      },
      "lineNbr": 31,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-04-08T11:59:15Z",
      "side": 1,
      "message": "Looks like this is only used from the tests plus from the WebSessionManager.\nBut the WebSessionManager takes this parameter from the gerrit.config, so why\nnot inject ExternalIdKeyFactory into the WebSessionManager and thus remove\nexplicit instance creation there? Once this is done, annotate this constructor with @VisibleForTesting.",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c817d3f_c5e156b4",
        "filename": "java/com/google/gerrit/server/account/externalids/ExternalIdKeyFactory.java",
        "patchSetId": 15
      },
      "lineNbr": 31,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-10T06:25:27Z",
      "side": 1,
      "message": "We can\u0027t inject it in WebSessionManager.Val, since this class is static and can\u0027t be not static. However, if we remove the new field in the cache, this could be removed here.",
      "parentUuid": "a17101ad_bc9cfe28",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b098e481_b5c3cd0f",
        "filename": "java/com/google/gerrit/server/account/externalids/ExternalIdKeyFactory.java",
        "patchSetId": 15
      },
      "lineNbr": 31,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-04-22T07:31:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3c817d3f_c5e156b4",
      "revId": "6dffd29e86d75d7b02ac3a20404db9329d18852c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}