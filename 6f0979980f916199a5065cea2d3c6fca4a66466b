{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f205d485_6a1096dc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-11-27T17:57:26Z",
      "side": 1,
      "message": "@david.ostrovsky@gmail.com I have done some tests (in a docker container gerritforge/gerrit-release-bazel:debian-bullseye)\n\n- Test 1:\n\n```\nbazelisk  test //javatests/... --config\u003dremote_bb --remote_header\u003dx-buildbuddy-api-key\u003dXXXXX\n```\n\nResult: Succesful\n\n- Test 2:\n\n```\nbazelisk  test //javatests/... --config\u003dremote11_bb --remote_header\u003dx-buildbuddy-api-key\u003dXXXXX\n```\n\nResult: Succesful\n\n- Test 3:\n\n```\nbazelisk  test \\\n--config\u003dremote_bb \\\n--remote_header\u003dx-buildbuddy-api-key\u003dXXXXX \\\n--flaky_test_attempts 3 \\\n--test_timeout 3600 \\\n--test_tag_filters\u003d-flaky,-elastic,-no_rbe \\\n//...\n```\n\nResult: Failed 3 times in the same test:\n\n```\nThere was 1 failure:\n1) invalidTargetArchiveFolder(com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest)\nexpected: /buildbuddy/remotebuilds/9812aa4d-4b39-405e-bc45-6662fc6d7b28/_tmp/1a603f63979fdbf7741d14f4152518a3/junit8509788577984914603/data\nbut was : /\\\\\\\n    at com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest.invalidTargetArchiveFolder(ConfigurationTest.java:127)\n\nFAILURES!!!\nTests run: 45,  Failures: 1\n```\n\n- Test 4:\n\n```\nbazelisk  test \\\n--config\u003dremote11_bb \\\n--remote_header\u003dx-buildbuddy-api-key\u003dXXXXX \\\n--flaky_test_attempts 3 \\\n--test_timeout 3600 \\\n--test_tag_filters\u003d-flaky,-elastic,-no_rbe \\\n//...\n```\n\n\nResult: Failed 3 times in the same test:\n```\nThere was 1 failure:\n1) invalidTargetArchiveFolder(com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest)\nexpected: /buildbuddy/remotebuilds/b32ea687-69a4-4aa5-9398-c06cefd8cdfe/_tmp/1a603f63979fdbf7741d14f4152518a3/junit14292937447987984095/data\nbut was : /\\\\\\\n    at com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest.invalidTargetArchiveFolder(ConfigurationTest.java:127)\n\nFAILURES!!!\nTests run: 45,  Failures: 1\n\n```\n\n\nI think I am missing something when I execute the test remotely against the target `//...`",
      "revId": "6f0979980f916199a5065cea2d3c6fca4a66466b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "923fda08_eeed899f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-28T09:02:56Z",
      "side": 1,
      "message": "The difference between javatests/... and //...:  also plugin tests are executed.\n\nCan you take RBE-BB out of the picture, start their docker image directly and run delete-plugin test there like this:\n\n```bash\n  $ bazel test plugins/delete-project/...\n```",
      "parentUuid": "f205d485_6a1096dc",
      "revId": "6f0979980f916199a5065cea2d3c6fca4a66466b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ccd9bd93_9c90bdb0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-11-28T10:47:44Z",
      "side": 1,
      "message": "- Local tests:\n```\n$ bazelisk test plugins/delete-project/...\n```\n\n**Tests pass**\n\n\n- Remote tests:\n```\n$bazelisk test --flaky_test_attempts 3 --config\u003dremote_bb  --remote_header\u003dx-buildbuddy-api-key\u003dXXXX plugins/delete-project/...\n```\n\n**Tests fail**\n\n```\nThere was 1 failure:\n1) \ninvalidTargetArchiveFolder(com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest)\nexpected: /buildbuddy/remotebuilds/1d9f2dcf-1db8-4ee4-82c2-94c5f3519f10/_tmp/1a603f63979fdbf7741d14f4152518a3/junit16069211931322936868/data\nbut was : /\\\\\\\n        at com.googlesource.gerrit.plugins.deleteproject.ConfigurationTest.invalidTargetArchiveFolder(ConfigurationTest.java:127)\nFAILURES!!!\nTests run: 45,  Failures: 1\n```\n\nAny thought? Could it be the docker image used by BuildBuddy for running the sandboxed environment? Apologies for my lack of accuracy in the Bazel terminology.",
      "parentUuid": "923fda08_eeed899f",
      "revId": "6f0979980f916199a5065cea2d3c6fca4a66466b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92e64d45_1d0ea787",
        "filename": "tools/remote-bazelrc",
        "patchSetId": 17
      },
      "lineNbr": 63,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-28T09:02:56Z",
      "side": 1,
      "message": "Nit: blank after # character, like in all comment lines below.",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 63,
        "endChar": 14
      },
      "revId": "6f0979980f916199a5065cea2d3c6fca4a66466b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b16b1e8_a870a073",
        "filename": "tools/remote-bazelrc",
        "patchSetId": 17
      },
      "lineNbr": 63,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-11-28T10:47:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "92e64d45_1d0ea787",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 63,
        "endChar": 14
      },
      "revId": "6f0979980f916199a5065cea2d3c6fca4a66466b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}