{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ab3921c7_f2f008d0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-20T12:15:54Z",
      "side": 1,
      "message": "Can you reference the backend change that this depends on? We have to check whether the backend change is already rolled out in Google\u0027s Gerrit release.",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ffdaf23_17d07f94",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-20T16:57:45Z",
      "side": 1,
      "message": "You shouldn\u0027t need any backend changes. This is the purpose of the change.\n\nHowever, in the message, I mentioned 2 changes I have reverted to clean up my previous attempts: \"Reverted I354d78ea and I354d78ea in previous commits\nto cleanup the previous attempt.\"",
      "parentUuid": "ab3921c7_f2f008d0",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0852d35_01c299ea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2023-11-20T10:49:29Z",
      "side": 1,
      "message": "I thinks this is interesting enough to add an entry in the release notes",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "20125f16_7ca4eb62",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-20T16:57:45Z",
      "side": 1,
      "message": "ok, added.",
      "parentUuid": "e0852d35_01c299ea",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4ad5ef5_2a418058",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1304,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-20T12:15:54Z",
      "side": 1,
      "message": "Maybe remove the method?",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55f1cb5f_4970565c",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1304,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-20T16:57:45Z",
      "side": 1,
      "message": "Good point. I missed it.",
      "parentUuid": "d4ad5ef5_2a418058",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6a0e231_bdb3554f",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-20T12:15:54Z",
      "side": 1,
      "message": "Why remove `project` here?",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "646fee2e_b9fcfa6c",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-20T16:57:45Z",
      "side": 1,
      "message": "We know that both vanilla Gerrit and \"Google\" Gerrit implement a redirection logic for `/changeNum` urls.\n\nHence, we delegate the redirection to the backend, regardless of the backend used.",
      "parentUuid": "c6a0e231_bdb3554f",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4db8028_26017606",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-20T21:49:24Z",
      "side": 1,
      "message": "Well, why then calling the REST-API for the project lookup if the project name isn\u0027t used?",
      "parentUuid": "646fee2e_b9fcfa6c",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba597a55_fc4ca48b",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-20T22:19:09Z",
      "side": 1,
      "message": "True...we could eliminate the `getFromProjectLookup` entirely and defer to the backend the project lookup.\n\nThe downside I see is a possible performance degradation since the frontend caches a `changeNum -\u003e project` lookup variable.\n\nThis part of the code is only called for legacy URLs. In gerrithub.io we have about 150 calls a day using the legacy endpoint, all coming from bots. So I don\u0027t see it having a big impact, at least in gerrithub.io.\n\nDo you see any downside in getting rid of `getFromProjectLookup`?",
      "parentUuid": "d4db8028_26017606",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e292021_30be6d42",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-21T08:59:41Z",
      "side": 1,
      "message": "Let\u0027s just keep the method as is? What is the benefit of removing `project` here?\n\nDelegating to the backend means that the entire Gerrit web app has to be reloaded, which is a fairly high latency penalty.",
      "parentUuid": "ba597a55_fc4ca48b",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efa41d41_397f30a7",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2023-11-21T17:06:17Z",
      "side": 1,
      "message": "Removing `project` will allow us to consolidate the way we handle `/c/changeNum` (returns `200`) and `/changeNum` (returns `302`) queries and delegate the lookup to the backend returning a consistent HTTP response code.\n\nI understand this would add a round trip to the backend, however, by checking at the gerrithub logs I don\u0027t see any call to this endpoint. Possibly your concern is related to any frontend plugin you have in mind? Maybe used in other Gerrit installations, for example Chromium?\n\nFurthermore, this is also a legacy endpoint which I believe it should be dismissed at some point. Maybe I can mark it as deprecated somehow in a followup change?\n\nThe following might be premature but just to keep in mind. When project-specific change numbers will be available in next Gerrit versions (v3.10 hopefully) the lookup by change number won\u0027t work anymore. But as I said it is probably too early to talk about that.",
      "parentUuid": "7e292021_30be6d42",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d9d4144_e3b8b4c3",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.ts",
        "patchSetId": 4
      },
      "lineNbr": 1477,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2023-11-22T10:44:19Z",
      "side": 1,
      "message": "\u003e Removing `project` will allow us to consolidate the way we handle `/c/changeNum` (returns `200`) and `/changeNum` (returns `302`) queries and delegate the lookup to the backend returning a consistent HTTP response code.\n\nWhat is the benefit of this consolidation?\n \n\u003e I understand this would add a round trip to the backend, however, by checking at the gerrithub logs I don\u0027t see any call to this endpoint. Possibly your concern is related to any frontend plugin you have in mind? Maybe used in other Gerrit installations, for example Chromium?\n\nNo, I don\u0027t have anything specific in mind. But we would also need to do logs analysis on our side to understand how this is used. And atm it seemer cheaper to just keep maintaining this code than doing the logs analysis.\n \n\u003e Furthermore, this is also a legacy endpoint which I believe it should be dismissed at some point. Maybe I can mark it as deprecated somehow in a followup change?\n\nSure. But just marking something as deprecated will not help. It may be used and whoever uses it may be upset.\n \n\u003e The following might be premature but just to keep in mind. When project-specific change numbers will be available in next Gerrit versions (v3.10 hopefully) the lookup by change number won\u0027t work anymore. But as I said it is probably too early to talk about that.\n\nI have not yet heard about that, but yeah, that sounds convincing. But let\u0027s wait until a design doc for that is approved.",
      "parentUuid": "efa41d41_397f30a7",
      "revId": "70967aad59cc9c0081dfaa27f29e99b29404e43f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}