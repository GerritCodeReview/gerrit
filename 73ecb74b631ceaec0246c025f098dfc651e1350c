{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "127d80e9_54a4f3b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-11-25T02:14:49Z",
      "side": 1,
      "message": "Current tests did not highlight the problem: hence we are missing at least ONE test that is posting draft comments and then send the review.",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2370edd2_d350c1d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1011217
      },
      "writtenOn": "2022-11-29T23:49:54Z",
      "side": 1,
      "message": "And this is a separate patchset level comment posted via the top level REPLY button.",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee164215_ef276bcd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1011217
      },
      "writtenOn": "2022-11-29T23:49:54Z",
      "side": 1,
      "message": "I think this is a patchset level comment in reply to an existing patchset level comment.",
      "parentUuid": "127d80e9_54a4f3b2",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe20bef9_57a56d51",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1156235
      },
      "writtenOn": "2023-01-27T01:07:40Z",
      "side": 1,
      "message": "Hello!\n\nThis is also a problem for us wrt. jenkins not triggering jobs on comments (and I\u0027d love a 3.7.1 for https://gerrit-review.googlesource.com/c/gerrit/+/352194 as well as a firefox user...), is there any reason you stopped halfway two months ago?\n\n\u003e Current tests did not highlight the problem: hence we are missing at least ONE test that is posting draft comments and then send the review.\n\nLooking at `javatests/com/google/gerrit/acceptance/server/change/CommentsIT.java` it wouldn\u0027t be too hard to add a new test (as a new test or just creating it as draft before adding in `patchsetLevelCommentCanBeAddedAndRetrieved`), but that doesn\u0027t really help with validating the stream event content.\nA new test in `javatests/com/google/gerrit/acceptance/ssh/StreamEventsIT.java` that does something similar (create draft, post it) and waitForEvent() checking message is shown?\n\nI probably can\u0027t justify spending much time on it but if something quick would help moving forward and nobody else has started I can give it a shot.",
      "parentUuid": "ee164215_ef276bcd",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9032bf4d_18d84513",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-01-27T20:49:33Z",
      "side": 1,
      "message": "\u003e Hello!\n\u003e \n\u003e This is also a problem for us wrt. jenkins not triggering jobs on comments (and I\u0027d love a 3.7.1 for https://gerrit-review.googlesource.com/c/gerrit/+/352194 as well as a firefox user...), is there any reason you stopped halfway two months ago?\n\nOverload at my $DAYJOB, but I am happy for everyone to help and collaborate to get this fixed.\n\n\u003e \u003e Current tests did not highlight the problem: hence we are missing at least ONE test that is posting draft comments and then send the review.\n\u003e \n\u003e Looking at `javatests/com/google/gerrit/acceptance/server/change/CommentsIT.java` it wouldn\u0027t be too hard to add a new test (as a new test or just creating it as draft before adding in `patchsetLevelCommentCanBeAddedAndRetrieved`), but that doesn\u0027t really help with validating the stream event content.\n\u003e A new test in `javatests/com/google/gerrit/acceptance/ssh/StreamEventsIT.java` that does something similar (create draft, post it) and waitForEvent() checking message is shown?\n\nExactly, the right place should be instead `StreamEventsIT`.\n\n\u003e I probably can\u0027t justify spending much time on it but if something quick would help moving forward and nobody else has started I can give it a shot.\n\nCan you help reviewing it? I\u0027ll add a new test to `StreamEventsIT` tonight and then this will be ready to go.\n\nContribution \u003d feedback; that\u0027s always more than welcome !",
      "parentUuid": "fe20bef9_57a56d51",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08d3526a_03cb0d44",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1156235
      },
      "writtenOn": "2023-01-28T01:51:32Z",
      "side": 1,
      "message": "Thanks! No problem, free time is a scarce resource for everyone. I\u0027ve had a look at the last version you just posted, it looks good to me; just a nitpick/possible simplification on the test.\n\nSince I took the time to install bazel to run tests I\u0027ve also built a release archive and upgraded our install to it (... might as well benefit from it right away), and as a double-check jenkins triggered build on comment just fine. Great!",
      "parentUuid": "9032bf4d_18d84513",
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3b4bd96_1e1ad458",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewOp.java",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1011217
      },
      "writtenOn": "2022-11-29T23:49:54Z",
      "side": 1,
      "message": "Is it possible for there to be more than one PATCHSET_LEVEL comment? For example if I reply to someone elses existing patchset level comment and also leave my own patchset level comment? I\u0027ll attempt to do this when I post this inline comment to help illustrate what I mean.\n\nIf that is possible should we try and serialize all of the comments in the event?",
      "range": {
        "startLine": 197,
        "startChar": 79,
        "endLine": 197,
        "endChar": 88
      },
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b12e4571_e758d4e2",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewOp.java",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1016080
      },
      "writtenOn": "2022-12-20T21:25:54Z",
      "side": 1,
      "message": "I (as a reporter of the regression) have no opinion.\nThe regression I reported has to do with a change in the behavior of the comment left in the comment box when clicking REPLY on the change, not if you add a patchset comment or reply to an existing patchset comment.\n\nI think, but might be wrong, that the changed behavior in the UI part is that even the text in the comment box that is shown when clicking on REPLY now is sent as a PATCHSET_LEVEL comment in advance. I have too little knowledge about internals of Gerrit and its UI to be sure.",
      "parentUuid": "e3b4bd96_1e1ad458",
      "range": {
        "startLine": 197,
        "startChar": 79,
        "endLine": 197,
        "endChar": 88
      },
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f530cfd3_3d913e3f",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewOp.java",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-01-27T20:32:14Z",
      "side": 1,
      "message": "I believe @clark.boylan@gmail.com is right: you _may_ have multiple comments associated with the `PATCHSET_LEVEL` entry and therefore we should process them all.",
      "parentUuid": "b12e4571_e758d4e2",
      "range": {
        "startLine": 197,
        "startChar": 79,
        "endLine": 197,
        "endChar": 88
      },
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7fc450f_5991f403",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReviewOp.java",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-01-27T20:49:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f530cfd3_3d913e3f",
      "range": {
        "startLine": 197,
        "startChar": 79,
        "endLine": 197,
        "endChar": 88
      },
      "revId": "73ecb74b631ceaec0246c025f098dfc651e1350c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}