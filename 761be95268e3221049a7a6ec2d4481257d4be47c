{
  "comments": [
    {
      "key": {
        "uuid": "P8DKI8Co",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1012155
      },
      "writtenOn": "2013-02-20T18:28:58Z",
      "side": 1,
      "message": "That is somewhat misleading.\n\nAlthough canPerformRawQuery does not yield true for administrators without RAW_QUERY, plain administrators nevertheless have access to the relevant code, as all of RestApiServlet, DispatchCommand, and AliasCommand implicitly grant access for administrators (grep for \u0027!ctl\\.canAdministrateServer\u0027).\n\nFor example I could still run\n\n  ssh -p 29418 admin@gerrit.local gerrit  gsql -c \"\u0027SELECT registered_on from accounts;\u0027\"\n\nafter cherry-picking this patch set and received the following response:\n\n   registered_on\n   ---------------------\n   2013-02-04 06:56:03.0\n   2013-02-20 17:20:47.0\n  (2 rows; 1 ms)\n\nalthough admin@gerrit.local does not have RAW_QUERY.\n\nWhat about picking the commit message of Patch Set 1, and explicitly add administrators in\n\n  gerrit-server/src/main/java/com/google/gerrit/server/account/CapabilityControl.java:canPerformRawQuery\n\nto avoid a mismatch between can*() functions and effective permissions?",
      "revId": "761be95268e3221049a7a6ec2d4481257d4be47c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "P8rCyGAE",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1010813
      },
      "writtenOn": "2013-02-20T20:42:32Z",
      "side": 1,
      "message": "Well, the whole point was to make it so administrators don\u0027t get this anymore, so we\u0027ll probably need to fix it so the summary is true.",
      "parentUuid": "P8DKI8Co",
      "revId": "761be95268e3221049a7a6ec2d4481257d4be47c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}