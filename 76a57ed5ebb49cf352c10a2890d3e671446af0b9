{
  "comments": [
    {
      "key": {
        "uuid": "AAABhH///+M\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "I think this feature needs to be seriously rethought.  The list of potential receivers of these emails is huge.  I could see why owners might (but I am not convinced that they will always) want this info, and since owners are always specified by groups, this could easily be much larger than expected.  Unlike change owners, I do not think that it is reasonable to send email to project owners without giving them an option to decline.  Without introducing a new category to watch projects by, I am also not convinced that all project watchers want this info.  I suspect that we are not alone in having some branches which we push external contributions too all the time (in our case, hourly); the amount \nof undesired email that this would generate if I understand this correctly is enormous.",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABin////0\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1010014
      },
      "writtenOn": "2011-11-24T03:35:27Z",
      "side": 1,
      "message": "Hi, Martin. Thanks for your thorough idea first. Should I understand your meaning like following: You would like to send this kind of notification email to the person who has explicitly tell Gerrit he/she want to this kind of email, but not send this mail to all the owners of the project. Or else, this feature will send a lot of junk mails. Am I right?\nSo, I am thinking of just send this notification mail only to the watcher, not to the project owner. If some owner want to receive this kind of notification mail, he/she also have to watch this certain project and this certain branch(es). I mean that watching this project (with branches) means subscribing the mail, only the subscriber will be notified. Do you think I am right?",
      "parentUuid": "AAABhH///+M\u003d",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///98\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T04:22:27Z",
      "side": 1,
      "message": "For creates it seems reasonable to send it to anyone watching the whole project, and for branch deletes, only the watchers of that branch.  But for updates, it still seems like it will be too much to send to all those subscribing to the branch, I think you should add a new notification type (like the existing \"new changes\", \"all comments\" and \"changes submitted\") for these, perhaps called \"direct pushes\".",
      "parentUuid": "AAABin////0\u003d",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABin////s\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1010014
      },
      "writtenOn": "2011-11-24T06:07:11Z",
      "side": 1,
      "message": "Hi, Martin. Thanks for your explanation. Let me tell you my understanding of your meaning. Please tell me I am right or not. Thanks in advance:)\n\n1. For creating a branch : Send notification mail to the person who watch the whole project (without specifying the branch) and the person who watch a wildcarded branch (such as refs/* or refs/heads/*) contains the created branch \n\n2. For deleting a branch : Send the notification mail to the person who watches the certain branch and the person who watches a wildcarded branch (such as refs/* or refs/heads/*) contains the deleted branch. But notification mail will not be sent to the person who watch the whole project (without specifying branches)\n\n3. For updating a branch with \"push refs/heads/branch\" : I should add a column named \"Directly Pushed\" in \"Email Notifications\" table for \"/settings/projects\" page.Of course, I should also modify the structure of \"ACCOUNT_PROJECT_WATCHES\" table. The notification mail will only be sent to the person who watches the updated branch and checked the \"Directly Pushed\" checkbox. \n\n4. For all the push head operations, owners of the project will not be notified by this mail.\n\n5. I will also have to modify the schema accordingly, since I have to modify the structure of \"ACCOUNT_PROJECT_WATCHES\"\n\nIf there is something wrong with my understanding, would you please tell me? Thanks a lot in advance:)",
      "parentUuid": "AAABhH///98\u003d",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///9g\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T06:25:15Z",
      "side": 1,
      "message": "After further consideration, I see no reason to not send delete emails to those watching the entire project.  Everything else sounds right on.",
      "parentUuid": "AAABin////s\u003d",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 3
      },
      "lineNbr": 621,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "Is there something missing here?  Any reason these 3 lines couldn\u0027t be one?",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+g\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/BranchEmail.java",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "You can seed the size since it it known.",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+Y\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/BranchEmail.java",
        "patchSetId": 3
      },
      "lineNbr": 113,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "I don\u0027t think that project inheritance was meant to apply to watchers, so far it is only an ACL concept.",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+c\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/BranchEmail.java",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "You need to detect inheritance loops and abort, see the \"seen\" set in the ProjectState class.",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+U\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/BranchEmail.java",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "Use interfaces (Set) when possible.",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///+Q\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/BranchEmail.java",
        "patchSetId": 3
      },
      "lineNbr": 150,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T03:00:52Z",
      "side": 1,
      "message": "I am not sure this is valuable?  Would anyone care who the project/branch owners are?  Is that info perhaps sensitive even?",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABhH///9w\u003d",
        "filename": "gerrit-server/src/main/resources/com/google/gerrit/server/mail/BranchSubject.vm",
        "patchSetId": 3
      },
      "lineNbr": 34,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-11-24T06:25:15Z",
      "side": 1,
      "message": "/is/was/",
      "revId": "76a57ed5ebb49cf352c10a2890d3e671446af0b9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}