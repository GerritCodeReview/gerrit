{
  "comments": [
    {
      "key": {
        "uuid": "AAABTH///+0\u003d",
        "filename": "gerrit-common/src/main/java/com/google/gerrit/common/data/PatchScript.java",
        "patchSetId": 1
      },
      "lineNbr": 201,
      "author": {
        "id": 1000253
      },
      "writtenOn": "2011-11-02T22:54:30Z",
      "side": 1,
      "message": "Initially I tried this with \u0026\u0026, but it would return false in my test case.  This was slightly confusing, so I also updated the logic when expanding skipped lines to try and better handle the case where 1 file might be partially missing.",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABTH///9A\u003d",
        "filename": "gerrit-common/src/main/java/com/google/gerrit/common/data/PatchScript.java",
        "patchSetId": 1
      },
      "lineNbr": 201,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2011-11-03T21:15:20Z",
      "side": 1,
      "message": "IIRC the server only sends both as a whole file if both are whole files. So this may be OK.",
      "parentUuid": "AAABTH///+0\u003d",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABTH///+w\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 183,
      "author": {
        "id": 1000253
      },
      "writtenOn": "2011-11-02T22:54:30Z",
      "side": 1,
      "message": "I didn\u0027t have a good test case for this, so I hard-coded containsWhoeFiles() to return false when testing.",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABTH///+s\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 392,
      "author": {
        "id": 1000253
      },
      "writtenOn": "2011-11-02T22:54:30Z",
      "side": 1,
      "message": "The lines are identical, so try grabbing them from one source or the other.\n\nQuestion - is this a good policy if the user has enabled \u0027ignore whitespace\u0027?",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABTH///88\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 392,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2011-11-03T21:15:20Z",
      "side": 1,
      "message": "No. When ignore whitespace is set the lines are not identical, but they were claimed to be. Don\u0027t copy from the other side. IIRC the server should have given you the line when this happens for each side so the UI looks right.\n\nIf the line isn\u0027t available, you can\u0027t expand. Don\u0027t try to steal from the other side.",
      "parentUuid": "AAABTH///+s\u003d",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABUX////4\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 392,
      "author": {
        "id": 1000253
      },
      "writtenOn": "2011-11-03T21:28:08Z",
      "side": 1,
      "message": "\u0027If the line isn\u0027t available, you can\u0027t expand. Don\u0027t try to steal from the other side.\u0027\n\nHow should I handle this from a UI perspective?  Is it possible for a line to be available in one side but not the other?  That is what I was assuming, because in my test one side said the whole file was available but the other side was not.\n\nI think this code is similar to what is done on line 123:\n\n final SafeHtml ctx \u003d a.getSafeHtmlLine(hunk.getCurA());\n appendLineText(nc, hunk.getCurA(), CONTEXT, ctx, false, false);\n if (ignoreWS \u0026\u0026 b.contains(hunk.getCurB())) {\n      appendLineText(nc, hunk.getCurB(), CONTEXT, b, hunk.getCurB(),\n       false);\n } else {\n      appendLineText(nc, hunk.getCurB(), CONTEXT, ctx, false, false);\n }",
      "parentUuid": "AAABTH///88\u003d",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABTH///80\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 392,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2011-11-03T21:35:38Z",
      "side": 1,
      "message": "Urrrgh. You are right. When ignoreWS \u003d false the server assumes the client will use the line from A on B side when the lines are common context lines. Because that makes for a smaller download to the client.\n\nWhen ignoreWS \u003d true, the server also includes lines from B that are in the context region set by the user, are \"identical\", but are still different in B.\n\nBut either way, B is still not a whole file.\n\nSo just like with big files, we may have a problem when ignoreWS \u003d true. B is not complete and showing more context may show the wrong indentation on B side because the client does not have those sections of the file.\n\nYou might have to disable the expand feature if:\n\n  a.isWholeFile() \u003d\u003d false\n  || ignoreWS \u003d\u003d true",
      "parentUuid": "AAABUX////4\u003d",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABUX////w\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/SideBySideTable.java",
        "patchSetId": 1
      },
      "lineNbr": 392,
      "author": {
        "id": 1000253
      },
      "writtenOn": "2011-11-03T21:44:19Z",
      "side": 1,
      "message": "Thanks, that makes far more sense now.\n\nIt\u0027d be unfortunate if we had to disable this feature some of the time when ignoreWS \u003d\u003d true - what would you think about modifying the server to send back all context lines in that case - basically have the server ignore the ignoreWS flag?  IMO the bandwidth hit would be worth it.\n\nI don\u0027t use ignoreWS most of the time, so I\u0027m fine either way :)",
      "parentUuid": "AAABTH///80\u003d",
      "revId": "76ab480229a31b850df74166a2c90c71e141feb1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}