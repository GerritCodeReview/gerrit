{
  "comments": [
    {
      "key": {
        "uuid": "04c4ebd5_b39339df",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2020-04-21T18:12:53Z",
      "side": 1,
      "message": "It looks like this does not verify that the existing queue meets the criteria requested. This could be problematic if say 10 threads were requested, but the existing queue only has 2?",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87e2011c_61f3f0a2",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-04-21T18:42:51Z",
      "side": 1,
      "message": "Even though the javadoc states that parameters are only for the none-yet case. Maybe rename the method to getExistingOrCreateWith -or similar?",
      "parentUuid": "04c4ebd5_b39339df",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07b40ef8_313160a0",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-04-21T19:09:28Z",
      "side": 1,
      "message": "But when would you use this where you are ok with the queue you get not meeting the parameters you gave? It seems the utility of this would be to have a helper to confirm those details.",
      "parentUuid": "87e2011c_61f3f0a2",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d1cb551_7ce7d184",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2020-04-21T19:15:48Z",
      "side": 1,
      "message": "Good point.",
      "parentUuid": "07b40ef8_313160a0",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec59008d_8ac45f1a",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-04-30T00:37:54Z",
      "side": 1,
      "message": "What is the expected behavior when a queue exists but doesn\u0027t match the requested criteria?  The intention here is to allow sharing of queues between plugins, so it won\u0027t work as expected if we just create a different queue.\n\nShould we make it throw an exception?",
      "parentUuid": "2d1cb551_7ce7d184",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1030a8c3_0cc437e2",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2020-04-30T15:30:07Z",
      "side": 1,
      "message": "I would expect it to bump up the thread count on the existing queue to meet the requirements.",
      "parentUuid": "ec59008d_8ac45f1a",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22d0014f_3f40ecee",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-04-30T15:58:33Z",
      "side": 1,
      "message": "What if you request a smaller queue though? Or no metrics (and the existing one has metrics)?\n\nTo be clear, I really like the idea of helping plugins share a queue. It\u0027s just the semantics of figuring out how they request the same queue that seems tricky right now.",
      "parentUuid": "1030a8c3_0cc437e2",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e236317b_1ed3a48e",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2020-04-30T21:38:31Z",
      "side": 1,
      "message": "I suspect that when developers ask for a queue of a certain size, knowing that they are willing to share that queue, that they mean\"at least\" a certain size. Same for metrics, if they didn\u0027t request metrics I don\u0027t think they will be upset if they get them anyway. In light of the willingness to share a queue, I would view the requirement requests as requests for minimums, not exact requests, perhaps hinting at that in the method name would help, getSharedQueueAtLeast()?",
      "parentUuid": "22d0014f_3f40ecee",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "394a771b_a386b220",
        "filename": "java/com/google/gerrit/server/git/WorkQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 198,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-05-01T02:55:21Z",
      "side": 1,
      "message": "I\u0027d rather not change the method name, but instead clarify the semantics in the javadoc.\n\nI\u0027ll need to look into whether it\u0027s possible to increase the pool size on an existing queue.",
      "parentUuid": "e236317b_1ed3a48e",
      "range": {
        "startLine": 198,
        "startChar": 0,
        "endLine": 198,
        "endChar": 1
      },
      "revId": "77b077579b205f285f82b6e94dacf990b3dd0de7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}