{
  "comments": [
    {
      "key": {
        "uuid": "290fc3b4_4ae87436",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 17
      },
      "lineNbr": 2136,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-05-29T13:11:52Z",
      "side": 1,
      "message": "Is this accurate? I would have expected this statement to be:\n\n  Allow Gerrit v3.2 to start even if the underlying schema version\n  has not been bumped yet, and is still 181 (corresponds to the v3.1)\n\nThe only problem still remains here is: If someone would jump over the releases. Say we add this experimental option in v3.2 and someone would set it to true, and has gerri site with v3.2 installed and will start the site upgrade to v3.4, jumping over v3.3 without making a stop there. In that case the NoteDb Schem Version check would still accept it, right. That is of course wrong, because online reindex could be unsupported?",
      "range": {
        "startLine": 2135,
        "startChar": 0,
        "endLine": 2136,
        "endChar": 24
      },
      "revId": "77e7b5733723344660c9e258dddb0bc30b93627c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06659dbf_2a71e17b",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 17
      },
      "lineNbr": 2136,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-05-29T13:15:49Z",
      "side": 1,
      "message": "\u003e Is this accurate? \n\nYes, it is.\n\n\u003e I would have expected this statement to be:\n\u003e \n\u003e   Allow Gerrit v3.2 to start even if the underlying schema version\n\u003e   has not been bumped yet, and is still 181 (corresponds to the v3.1)\n\nThat is not accurate: this change allows an earlier version of the code (e.g. v3.1 \u003d refs/meta/version\u003d181) to start if the underlying refs/meta/version has been bumped already (e.g. v3.2 refs/meta/version\u003d183).\n\n\u003e The only problem still remains here is: If someone would jump over the releases. Say we add this experimental option in v3.2 and someone would set it to true, and has gerri site with v3.2 installed and will start the site upgrade to v3.4, jumping over v3.3 without making a stop there. In that case the NoteDb Schem Version check would still accept it, right. That is of course wrong, because online reindex could be unsupported?\n\nIf you jump across releases, you have to perform everything offline:\n- offline upgrade\n- offline reindex\n\nThere isn\u0027t any possibility for an on-line upgrade of any kind.",
      "parentUuid": "290fc3b4_4ae87436",
      "range": {
        "startLine": 2135,
        "startChar": 0,
        "endLine": 2136,
        "endChar": 24
      },
      "revId": "77e7b5733723344660c9e258dddb0bc30b93627c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9725a161_62cd2ceb",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 17
      },
      "lineNbr": 2136,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-05-29T13:24:49Z",
      "side": 1,
      "message": "You are right ;-)\n\nStill because it is that convoluted case, please, add number in that statement. because if you just say number I lost you whether you are talking about gerrit release or schema number version. So say this:\n\n  Allow Gerrit v3.1 to start even if the underlying schema version has been bumped to 183,\n  that corresponds to the Gerrit release v3.2\n\n\n\u003e There isn\u0027t any possibility for an on-line upgrade of any kind.\n\nYeah, but would the check detect the problem? I think not, so that gerrit v3.2 node would start even if the underlying schema version would be 190 that correspond gerrit v3.4 (jumping over v3.2 releases). ideally the check would detect it, and reject experimentalRollingUpgrade option. But we don\u0027t know, what gerrit release correpsonds to what schema version number, don\u0027t we?",
      "parentUuid": "06659dbf_2a71e17b",
      "range": {
        "startLine": 2135,
        "startChar": 0,
        "endLine": 2136,
        "endChar": 24
      },
      "revId": "77e7b5733723344660c9e258dddb0bc30b93627c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1a8ec2d_1d659879",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 17
      },
      "lineNbr": 2136,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2020-06-01T07:49:14Z",
      "side": 1,
      "message": "\u003e \u003e There isn\u0027t any possibility for an on-line upgrade of any kind.\n\u003e \n\u003e Yeah, but would the check detect the problem? I think not, so that gerrit v3.2 node would start even if the underlying schema version would be 190 that correspond gerrit v3.4 (jumping over v3.2 releases). ideally the check would detect it, and reject experimentalRollingUpgrade option. But we don\u0027t know, what gerrit release correpsonds to what schema version number, don\u0027t we?\n\nAt the moment, we do not automatically check the sanity of a Gerrit config before starting, which isn\u0027t good I agree.\n\nWhat I can propose it to display a giant warning when people use this flag, by saying \"You are starting in rolling upgrade mode ...\". I already have that message in the code, but I can make it more prominent. What do you think?",
      "parentUuid": "9725a161_62cd2ceb",
      "range": {
        "startLine": 2135,
        "startChar": 0,
        "endLine": 2136,
        "endChar": 24
      },
      "revId": "77e7b5733723344660c9e258dddb0bc30b93627c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}