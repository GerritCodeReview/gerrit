{
  "comments": [
    {
      "key": {
        "uuid": "5b6b4f9b_9979db2a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2016-08-18T20:43:09Z",
      "side": 1,
      "message": "The commit message should briefly describe the bug this fixes (or link to a bug in monorail).\n\nIs the problem that if I pass %l\u003dCode-Review+1, that doesn\u0027t successfully override my prior Code-Review+2? Or does this bug also take effect in some other situations?",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_39b9afbb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5b6b4f9b_9979db2a",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db001f88_858ee2d5",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 2
      },
      "lineNbr": 791,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-18T18:25:27Z",
      "side": 1,
      "message": "You need to save the config for this to have an effect.",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b6b4f9b_19bcebaa",
        "filename": "gerrit-acceptance-tests/src/test/java/com/google/gerrit/acceptance/git/AbstractPushForReview.java",
        "patchSetId": 2
      },
      "lineNbr": 791,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "db001f88_858ee2d5",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db001f88_657406dd",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-18T18:25:27Z",
      "side": 1,
      "message": "Or Collections.\u003cPatchSetApproval\u003eemptyList(), either way.",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_38e289c7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 83,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "db001f88_657406dd",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b88f7a3_bf7e770d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-18T18:25:27Z",
      "side": 1,
      "message": "It\u0027s not obvious what \"incoming\" means in this context. Digging in it sounds like it means approvals that override the results of copying. Is there another variable name that would convey this more clearly? Or just write some javadoc (and sorry for setting a bad example there).",
      "range": {
        "startLine": 87,
        "startChar": 33,
        "endLine": 87,
        "endChar": 50
      },
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_58df3d02",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b88f7a3_bf7e770d",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b0b97aa_a789ead1",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalsUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 257,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-18T18:25:27Z",
      "side": 1,
      "message": "I would slightly prefer \"build\" to \"make\", I think.",
      "range": {
        "startLine": 257,
        "startChar": 36,
        "endLine": 257,
        "endChar": 49
      },
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_78dc010d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalsUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 257,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1b0b97aa_a789ead1",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_d8834d00",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReplaceOp.java",
        "patchSetId": 2
      },
      "lineNbr": 266,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2016-08-18T20:44:54Z",
      "side": 1,
      "message": "Would moving this line to before the approvalCopier have the same effect? That seems like a slightly simpler fix (but I also don\u0027t mind the one here).",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_f888111d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReplaceOp.java",
        "patchSetId": 2
      },
      "lineNbr": 266,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T20:47:13Z",
      "side": 1,
      "message": "I\u0027m still investigating. I\u0027d like to avoid making this change to ApprovalCopier. The problem I\u0027m seeing is when notesMigration.readChanges() is true, the approvals from the PatchSet being inserted aren\u0027t seen by the copier. Passing in the new approvals works around that, but it feels clunky and I\u0027d rather understand the underlying issue.",
      "parentUuid": "3b5cdb04_d8834d00",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_d8ea6da0",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReplaceOp.java",
        "patchSetId": 2
      },
      "lineNbr": 266,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2016-08-18T22:17:27Z",
      "side": 1,
      "message": "Oh, good point. This step only affects reviewdb. In approvalsUtil we added to the ChangeUpdate to prepare a notedb update.\n\nChangeUpdate doesn\u0027t have a getter to read that back. In absence of an object representing the current state of the change (i.e. an api more like reviewdb gives) passing in the approvals as an explicit argument seems like a sensible enough minimal change.",
      "parentUuid": "3b5cdb04_f888111d",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b5cdb04_981d55d2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReplaceOp.java",
        "patchSetId": 2
      },
      "lineNbr": 266,
      "author": {
        "id": 1027267
      },
      "writtenOn": "2016-08-18T22:29:47Z",
      "side": 1,
      "message": "I explored doing this with ChangeUpdate, but it was a bit more awkward. Approvals are stored in ChangeUpdate as a table of \u003cLabel, Account.Id, Optional\u003cshort\u003e\u003e, whereas ApprovalCopier is set up to work with PatchSetApproval objects. It\u0027s doable, but arguably not worth it here.",
      "parentUuid": "3b5cdb04_d8ea6da0",
      "revId": "79dba149b80289ad77215050e3f62768669ee80a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}