{
  "comments": [
    {
      "key": {
        "uuid": "8d7b0944_06aa0468",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/send/OutgoingEmailValidator.java",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2017-04-24T11:47:53Z",
      "side": 1,
      "message": "Can this be moved out of the production code path and called from the tests wherever needed?\n\nFor example: Make resetMailValidator public and annotate it with @VisibleForTesting and then call it before or after your newly added tests.\n\nFrom what I see it should never be needed inside a Gerrit instance, since it has to be restarted when the config changes (to create a new Singleton).",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 39,
        "endChar": 5
      },
      "revId": "7b5bbd76e5b952831aed97df521a03ebc374cbb2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1c47e29_7ecbfba7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/send/OutgoingEmailValidator.java",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-04-24T11:54:39Z",
      "side": 1,
      "message": "I couldn\u0027t get this to work properly when it was in the AbstractDaemonTest, either in an @Before or @After annotated class.",
      "parentUuid": "8d7b0944_06aa0468",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 39,
        "endChar": 5
      },
      "revId": "7b5bbd76e5b952831aed97df521a03ebc374cbb2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c178a20e_7f992d4a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/send/OutgoingEmailValidator.java",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2017-04-24T12:27:34Z",
      "side": 1,
      "message": "Is this automation (@Before and @After) needed? I agree that it would be nice, but we might get away with calling it manually from the methods that change the DomainValidator config? Right now there are only two such tests and there is a good chance that there might never be more than a hand full.\n\nOur does this result in the same problem?",
      "parentUuid": "b1c47e29_7ecbfba7",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 39,
        "endChar": 5
      },
      "revId": "7b5bbd76e5b952831aed97df521a03ebc374cbb2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fdc12f53_3626fc0a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/mail/send/OutgoingEmailValidator.java",
        "patchSetId": 11
      },
      "lineNbr": 39,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-04-24T12:51:32Z",
      "side": 1,
      "message": "It\u0027s not related to which classes change the config.  The problem is that even though this class is a Singleton its constructor is getting invoked multiple times when running tests.",
      "parentUuid": "c178a20e_7f992d4a",
      "range": {
        "startLine": 33,
        "startChar": 6,
        "endLine": 39,
        "endChar": 5
      },
      "revId": "7b5bbd76e5b952831aed97df521a03ebc374cbb2",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}