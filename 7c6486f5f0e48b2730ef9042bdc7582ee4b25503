{
  "comments": [
    {
      "key": {
        "uuid": "6701e8f2_fbfb8ff8",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Reindex.java",
        "patchSetId": 4
      },
      "lineNbr": 392,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2013-06-28T15:30:30Z",
      "side": 1,
      "message": "I think you want to rebase this on Martin\u0027s recent changes.",
      "revId": "7c6486f5f0e48b2730ef9042bdc7582ee4b25503",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea303dcf_07d3b657",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Reindex.java",
        "patchSetId": 4
      },
      "lineNbr": 392,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-06-28T19:03:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6701e8f2_fbfb8ff8",
      "revId": "7c6486f5f0e48b2730ef9042bdc7582ee4b25503",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87041c03_5c16fd5b",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Reindex.java",
        "patchSetId": 4
      },
      "lineNbr": 407,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2013-06-28T15:30:30Z",
      "side": 1,
      "message": "PatchList contains enough information to populate this, as you can see from the implementation of ChangeData.currentFilePaths(). So the call to getPaths seems extraneous at this point (though still pretty fast).\n\nLooking at this code it doesn\u0027t look like we are reusing the RevWalk. I\u0027m not 100% sure about the performance improvement this would have, but diff generation is slow enough that I think it\u0027s worth investigating.\n\nHow would you feel about this: add an optional RevWalk to PatchListKey that is not used for hashCode/Equals but is used by PatchListLoader if present rather than allocating a new walk. It is hacky, certainly, but if it makes a measurable, significant improvement, it might be the way to go.\n\n(You are welcome to defer this suggestion until after seeing how bad this makes indexing for Martin.)",
      "revId": "7c6486f5f0e48b2730ef9042bdc7582ee4b25503",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa22c587_e59bf6b6",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Reindex.java",
        "patchSetId": 4
      },
      "lineNbr": 407,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-06-28T19:03:34Z",
      "side": 1,
      "message": "Thanks, I think it\u0027s worth to optimize for performance here. I tried to implement your suggestions. Let me know if I did it right!",
      "parentUuid": "87041c03_5c16fd5b",
      "revId": "7c6486f5f0e48b2730ef9042bdc7582ee4b25503",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}