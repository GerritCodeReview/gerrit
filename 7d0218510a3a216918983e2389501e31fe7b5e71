{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e1580cfa_6a776401",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-06-24T09:02:37Z",
      "side": 1,
      "message": "s/AccountValidatorm/AccountValidator",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 17
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b18ffe28_33ded325",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e1580cfa_6a776401",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 17
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b383bb0_77f7e278",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 11,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:45:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b18ffe28_33ded325",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 11,
        "endChar": 17
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44308ed8_8bc33563",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "Shouldn\u0027t we try to have test coverage for that?\n\nWe introduced integration tests, see package: `java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java` where we already do extensive integration tests for git and ssh. Could the missing test be implemented similarly, by extending the existing or writing a new integration test?",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a715e755_67efbdb0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:08:36Z",
      "side": 1,
      "message": "Typo, I meant:\n\n  see package: javatests/com/google/gerrit/integration",
      "parentUuid": "44308ed8_8bc33563",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf03ae84_b112f6df",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "\u003e Shouldn\u0027t we try to have test coverage for that?\n\nYes, we should. Any hints how to improve the PushAccountIT to eliminate false positives?",
      "parentUuid": "a715e755_67efbdb0",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19e89e8c_49b19e97",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:57:37Z",
      "side": 1,
      "message": "I don\u0027t see how to simulate this behavior with InProcessProtocol. That\u0027s why my suggestion was to try it the hard way with integration test similarly what we did in GitProtocolV2IT, where we span full gerrit server process, set up client credentials (HTTP and SSH protocols) and use git client to perform the test. Without this change pushing to refs/users/xx/xxxxxx would fail.",
      "parentUuid": "cf03ae84_b112f6df",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c60416c5_80e4d7cb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T14:02:17Z",
      "side": 1,
      "message": "Ideally we would make PushAccountIT (it is also an integration test) run all, or at least some, test cases via starting full Gerrit server process and using a real client.\n\n@Edwin: Is that possible? Or do we really need a new test class?",
      "parentUuid": "19e89e8c_49b19e97",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49b5361d_2df9e72a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-27T04:03:45Z",
      "side": 1,
      "message": "\u003e Ideally we would make PushAccountIT [...]\n\nAs I said in my previous comment, PushAccountIT is an acceptance test (derived from AbstractDaemonTest) that is using InProcessProtocol.\n\nI wrote a real integration test, derived from StandaloneSiteTest, to reproduce this problem, see change 339671. Also note, that the test is passing, because I reverted non working test for own account deactivation in parent change 339668.",
      "parentUuid": "c60416c5_80e4d7cb",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "300cd2fe_2ca70e8b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-27T08:31:26Z",
      "side": 1,
      "message": "\u003e \u003e Ideally we would make PushAccountIT [...]\n\u003e \n\u003e As I said in my previous comment, PushAccountIT is an acceptance test (derived from AbstractDaemonTest) that is using InProcessProtocol.\n\nThe InProcessProtocol is a performance optimization due to which the issue addressed in this change was hidden. Shall we be worried about that?\nMaybe we would see more such issues if more acceptance tests would be (re)written\nas standalone site tests.\n\n\u003e \n\u003e I wrote a real integration test, derived from StandaloneSiteTest, to reproduce this problem, see change 339671. Also note, that the test is passing, because I reverted non working test for own account deactivation in parent change 339668.\n\nThanks I would use your standalone test.",
      "parentUuid": "49b5361d_2df9e72a",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 28,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f549b13d_03844c78",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "Is the whole stack trace really needed or could it be shorten to a couple of lines?",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea9eb46b_5182ba2a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "Likely not. I will reduce it to the minimum.",
      "parentUuid": "f549b13d_03844c78",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90d8aab1_996e34ee",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:46:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ea9eb46b_5182ba2a",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7af1be76_ad93dec5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:07:05Z",
      "side": 1,
      "message": "Release-Notes footer is missing.",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5e519a6_202c6926",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:45:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7af1be76_ad93dec5",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "57c215cb_3c670867",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "Shouldn\u0027t this fix be targeting the oldest supported stable branch (stable-3.4) an be merged up to master?",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d83a2db_8043fc95",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "Yes, sure, it should start from stable-3.4. ATM I would like to collect some feedback on this fix as it is not as nice as I would like it to be. So let\u0027s continue here for a while and then I will move this to stable-3.4",
      "parentUuid": "57c215cb_3c670867",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27542163_2cbed12e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:52:53Z",
      "side": 1,
      "message": "Moved to stable-3.4",
      "parentUuid": "9d83a2db_8043fc95",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efe3dea7_94da97af",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "requestProvider?",
      "range": {
        "startLine": 40,
        "startChar": 45,
        "endLine": 40,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8cf4499b_d2301471",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "It is quite common in Gerrit code base to omit the ...Provider suffix in such cases, examples:\n\n  Provider\u003cCurrentUser\u003e self;\n  ...\n  self.get()\n  \n  Provider\u003cSshSession\u003e session;\n  ...\n  session.get()\n  \nI personally prefer this style :-)",
      "parentUuid": "efe3dea7_94da97af",
      "range": {
        "startLine": 40,
        "startChar": 45,
        "endLine": 40,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e53b034c_008099e8",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:46:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8cf4499b_d2301471",
      "range": {
        "startLine": 40,
        "startChar": 45,
        "endLine": 40,
        "endChar": 52
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4276c36_17d2c769",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "Nit: Unneeded new line.",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68f6b41b_260ddacf",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a4276c36_17d2c769",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "34493bac_e9923313",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:45:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68f6b41b_260ddacf",
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "762831b4_4d08768f",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-06-24T09:06:17Z",
      "side": 1,
      "message": "Optional: leave a comment why we do this?",
      "range": {
        "startLine": 54,
        "startChar": 4,
        "endLine": 58,
        "endChar": 5
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed86b91a_4429067a",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:30:31Z",
      "side": 1,
      "message": "This part I don\u0027t really like but didn\u0027t find any better way without moving WebSession class down to the \"server\" layer.\n\nWill provide a comment",
      "parentUuid": "762831b4_4d08768f",
      "range": {
        "startLine": 54,
        "startChar": 4,
        "endLine": 58,
        "endChar": 5
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e79a269a_be1a6d86",
        "filename": "java/com/google/gerrit/server/util/GuiceRequestScopePropagator.java",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2022-06-24T09:46:21Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ed86b91a_4429067a",
      "range": {
        "startLine": 54,
        "startChar": 4,
        "endLine": 58,
        "endChar": 5
      },
      "revId": "7d0218510a3a216918983e2389501e31fe7b5e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}