{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5723a603_71e49341",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 16,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-03T18:07:05Z",
      "side": 1,
      "message": "nit: AFAIU or project configuration e.g. when label was added since the change was merged",
      "range": {
        "startLine": 16,
        "startChar": 51,
        "endLine": 16,
        "endChar": 61
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2214d00a_c4fb1c0d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 16,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T18:40:35Z",
      "side": 1,
      "message": "when labels are added or removed, since change was merged or abandoned - to be exact ;)",
      "parentUuid": "5723a603_71e49341",
      "range": {
        "startLine": 16,
        "startChar": 51,
        "endLine": 16,
        "endChar": 61
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "856a64ff_9f158fdd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 16,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-06T08:08:04Z",
      "side": 1,
      "message": "correct, IOW when either `rules.pl` or project\u0027s labels get modified - scope is bigger then mentioned in the commit description",
      "parentUuid": "2214d00a_c4fb1c0d",
      "range": {
        "startLine": 16,
        "startChar": 51,
        "endLine": 16,
        "endChar": 61
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb97a6bc_162f51f6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 17,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-06T08:40:46Z",
      "side": 1,
      "message": "state",
      "range": {
        "startLine": 17,
        "startChar": 62,
        "endLine": 17,
        "endChar": 66
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "245772a4_6ec1e8ac",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 20,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-06T08:40:46Z",
      "side": 1,
      "message": "`skipCurrentRulesEvaluationOnClosedChanges` would be a better name IMHO",
      "range": {
        "startLine": 20,
        "startChar": 12,
        "endLine": 20,
        "endChar": 47
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5308ed1_57c7a991",
        "filename": "/COMMIT_MSG",
        "patchSetId": 8
      },
      "lineNbr": 21,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-06T08:40:46Z",
      "side": 1,
      "message": "What if someone gives a positive vote?",
      "range": {
        "startLine": 21,
        "startChar": 21,
        "endLine": 21,
        "endChar": 49
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14f0d785_6b781a8e",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 8
      },
      "lineNbr": 4666,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-03T18:07:05Z",
      "side": 1,
      "message": "nit: AFAIU it is _not_ only about `Prolog` rules but about all submit rules (including `Prolog`). If that is correct then description should be changed and perhaps also the configuration section (`change` sound like a good example). WDYT?",
      "range": {
        "startLine": 4661,
        "startChar": 9,
        "endLine": 4666,
        "endChar": 56
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "271cccf1_ad097952",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 8
      },
      "lineNbr": 4666,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T18:40:35Z",
      "side": 1,
      "message": "Well, the Prolog rules are the most problematic, because of `rules.reductionLimit` brech that will cause an exception and pollute the logs, not to mention additional CPU and memory load caused by pointless rules engine execution.\n\nTBH, I\u0027m on the fence here, as on the one side I don\u0027t want to leak too many _implementation details_ into the documentation, but on the other side, I still want to provide enough information for the users to decide if they need to change this option. Maybe the way to go is to say _this option could reduce the server load generated by viewing closed (merged or abandoned) changes_. WDYT?",
      "parentUuid": "14f0d785_6b781a8e",
      "range": {
        "startLine": 4661,
        "startChar": 9,
        "endLine": 4666,
        "endChar": 56
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c00c93b_1205fed7",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 8
      },
      "lineNbr": 4666,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-06T08:08:04Z",
      "side": 1,
      "message": "\u003eI don\u0027t want to leak too many implementation details\n\nit modifies the way that system acts (even if we agree that previous behaviour was wrong ðŸ˜Š) hence IMHO it is not an implementation detail and it affects not only prolog rules - let me give you the example: I don\u0027t use the `rules.pl` in my project therefore, according to the description, I\u0027m not affected regardless if this option is enabled or not, right? AFAIU that is a wrong assumption...\n\n\u003ethis option could reduce the server load generated by viewing closed (merged or abandoned) changes\n\nbut that doesn\u0027t describe the behaviour of the system from the functional perspective _when_ the option get enabled. IOW if it brings only benefits why bother adding a switch to it? ðŸ˜Š",
      "parentUuid": "271cccf1_ad097952",
      "range": {
        "startLine": 4661,
        "startChar": 9,
        "endLine": 4666,
        "endChar": 56
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a35ed49_483296e8",
        "filename": "java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 8
      },
      "lineNbr": 1093,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-03T18:07:05Z",
      "side": 1,
      "message": "question: I have checked what is performed in `evaluate` and AFAIU when `SubmitRuleOptions.recomputeOnClosedChanges` is `false` it already handles the case by copying the existing submit records.\n\nHow about influencing the `recomputeOnClosedChanges` and keeping the logic of submit rules evaluation in one place?",
      "range": {
        "startLine": 1090,
        "startChar": 6,
        "endLine": 1093,
        "endChar": 74
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82ed4245_e3b91000",
        "filename": "java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 8
      },
      "lineNbr": 1093,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T18:40:35Z",
      "side": 1,
      "message": "I don\u0027t like mutating input arguments, we can copy that object with `recomputeOnCloseChages` set to `false`, but this also doesn\u0027t feel _right_.\n\nAlso, it\u0027s better to bail out earlier, when we already know the result, than continue the computation. This can save us a few CPU cycles and memory that could be used for other operations.",
      "parentUuid": "5a35ed49_483296e8",
      "range": {
        "startLine": 1090,
        "startChar": 6,
        "endLine": 1093,
        "endChar": 74
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba2bf2cd_c6cac326",
        "filename": "java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 8
      },
      "lineNbr": 1093,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-06T08:08:04Z",
      "side": 1,
      "message": "\u003e I don\u0027t like mutating input arguments...\n\nBy setting the option to `true` it is done _implicitly_ anyway so it could be done _explicitly_ instead ðŸ˜Š\n\n\u003e Also, it\u0027s better to bail out earlier...\n\nNote that there is a room for improvement (addressed in Ifaf6ead5c869ba7) to make it less costly so that you could reconsider ðŸ˜Š",
      "parentUuid": "82ed4245_e3b91000",
      "range": {
        "startLine": 1090,
        "startChar": 6,
        "endLine": 1093,
        "endChar": 74
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95864729_edfef499",
        "filename": "java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 8
      },
      "lineNbr": 1093,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-06T08:40:46Z",
      "side": 1,
      "message": "\u003e \u003e I don\u0027t like mutating input arguments...\n\u003e \n\u003e By setting the option to `true` it is done _implicitly_ anyway so it could be done _explicitly_ instead ðŸ˜Š\n\u003e \n\u003e \u003e Also, it\u0027s better to bail out earlier...\n\u003e \n\u003e Note that there is a room for improvement (addressed in Ifaf6ead5c869ba7) to make it less costly so that you could reconsider ðŸ˜Š\n\nI do not see anywhere in Ifaf6ead5c869ba7 that would prevent the Prolog rules execution (and potential explosion), do you have a more specific line number to point to?",
      "parentUuid": "ba2bf2cd_c6cac326",
      "range": {
        "startLine": 1090,
        "startChar": 6,
        "endLine": 1093,
        "endChar": 74
      },
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f300a74_136af9bf",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 8
      },
      "lineNbr": 3810,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-03T18:07:05Z",
      "side": 1,
      "message": "nit: how about adding test for `abandoned` changes? The full coverage would be:\n1. vote on change\n2. abandon it\n3. add label\n4. verify that label is not part of the abandoned change submit records\n5. restore change and verify that new label is required (optional)\nWDYT?",
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cab0b1b_a425eaba",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 8
      },
      "lineNbr": 3810,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T18:40:35Z",
      "side": 1,
      "message": "makes sense",
      "parentUuid": "5f300a74_136af9bf",
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b11957d2_cb3d5bb8",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 8
      },
      "lineNbr": 3819,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-03T18:07:05Z",
      "side": 1,
      "message": "nit: there is `ChangeInfo.submitRecords` therefore I would propose to check the content of it throughout the test as AFAIU that is the ultimate confirmation whether it was re-computed or not...",
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c38e49b0_feca15f6",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 8
      },
      "lineNbr": 3819,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T18:40:35Z",
      "side": 1,
      "message": "let me check this",
      "parentUuid": "b11957d2_cb3d5bb8",
      "revId": "7db66f0766b7fb20e64adb377a33c7fb97354cbe",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}