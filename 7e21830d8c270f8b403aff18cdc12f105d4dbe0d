{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fe0e98bb_06863e2c",
        "filename": "java/com/google/gerrit/server/query/account/AccountQueryBuilder.java",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-10-24T09:59:19Z",
      "side": 1,
      "message": "Instead of disallowing this, could we just limit the query to all users that are involved in private change? E.g. return a predicate for: \"id:owner-id OR id:reviewer1-id OR id:reviewer2-id OR ... OR id:cc1-id OR cc2-id OR ...\"\n\nThis way the query would only match accounts that can see the private change.",
      "range": {
        "startLine": 125,
        "startChar": 6,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "7e21830d8c270f8b403aff18cdc12f105d4dbe0d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c90e729_cca94dcc",
        "filename": "java/com/google/gerrit/server/query/account/AccountQueryBuilder.java",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-10-24T10:04:26Z",
      "side": 1,
      "message": "Thought about that, but I don\u0027t see this as a useful use case, i.e. the user doing that can alternatively request the change data and get this info.\n\nAlso, you\u0027ll anyway need to disallow such query if querying user not in \u003cinvolved_parties\u003e (reviewer, cc, owner, ...), meaning that we still need to have this logic + exception for involved parties, as you suggested.\n\nWDYT? I also don\u0027t think this feature has many usages since\n  * it\u0027s not available in the UI\n  * I think it\u0027s an unlikely use case to be executed by bots. I can check the data if you want to.",
      "parentUuid": "fe0e98bb_06863e2c",
      "range": {
        "startLine": 125,
        "startChar": 6,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "7e21830d8c270f8b403aff18cdc12f105d4dbe0d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8928e6af_36b66714",
        "filename": "java/com/google/gerrit/server/query/account/AccountQueryBuilder.java",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-10-24T10:13:45Z",
      "side": 1,
      "message": "I thought this is used by the frontend to suggest users for mentions on private changes?",
      "parentUuid": "9c90e729_cca94dcc",
      "range": {
        "startLine": 125,
        "startChar": 6,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "7e21830d8c270f8b403aff18cdc12f105d4dbe0d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "78bd9e5f_1c563eab",
        "filename": "java/com/google/gerrit/server/query/account/AccountQueryBuilder.java",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-10-24T10:19:30Z",
      "side": 1,
      "message": "Right. I meant not available as a user feature in the UI, unlike searching changes on the dashboard for example. Front-end (mention users) will need to adapt to this case in the FE.\n\nI gave it a second thought and I think your way is better. (let `cansee` work normally in this case and return empty or owner/reviewer/cc if caller in owner/reviewer/cc). I will adapt.",
      "parentUuid": "8928e6af_36b66714",
      "range": {
        "startLine": 125,
        "startChar": 6,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "7e21830d8c270f8b403aff18cdc12f105d4dbe0d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39d7f83b_ea7bdf87",
        "filename": "java/com/google/gerrit/server/query/account/AccountQueryBuilder.java",
        "patchSetId": 1
      },
      "lineNbr": 128,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-10-24T10:22:19Z",
      "side": 1,
      "message": "\u003e Front-end (mention users) will need to adapt to this case in the FE.\n\nIf it\u0027s feasible for us to make this work in the backend, I think that\u0027s preferred over special casing this in the frontend.\n\n\u003e I gave it a second thought and I think your way is better.\n\nThanks, let mw know how this goes :)",
      "parentUuid": "78bd9e5f_1c563eab",
      "range": {
        "startLine": 125,
        "startChar": 6,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "7e21830d8c270f8b403aff18cdc12f105d4dbe0d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}