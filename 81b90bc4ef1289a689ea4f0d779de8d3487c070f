{
  "comments": [
    {
      "key": {
        "uuid": "a77fb735_e27cf4d1",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 708,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-07-26T18:17:55Z",
      "side": 1,
      "message": "It seems to me like this test can be rewritten in a more obvious/legible way.\n\n    test(\u0027should not send on enter key\u0027, () \u003d\u003e {\n      const sendHandler \u003d sandbox.stub();\n      element.addEventListener(\u0027send\u0027, sendHandler);\n      MockInteractions.pressAndReleaseKeyOn(element, 13, null, \u0027enter\u0027);\n      flushAsynchronousOperations();\n\n      assert.isFalse(sendHandler.called);\n    });\n\nThis is far more consistent with the rest of the tests, both in this file and elsewhere in the codebase, but as your approach also works adopting this is optional.",
      "range": {
        "startLine": 704,
        "startChar": 0,
        "endLine": 708,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e04a4d7_a9bd5285",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 708,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2017-07-26T19:47:50Z",
      "side": 1,
      "message": "that\u0027s how i wrote it the first time.  it doesn\u0027t work.  the send event fires after this function returns.",
      "parentUuid": "a77fb735_e27cf4d1",
      "range": {
        "startLine": 704,
        "startChar": 0,
        "endLine": 708,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "615fca71_e449964f",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 708,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-07-26T19:57:35Z",
      "side": 1,
      "message": "How about we then just spy on the submit function?\n\n    test(\u0027emit send on ctrl+enter key\u0027, () \u003d\u003e {\n      const submitStub \u003d sandbox.stub(element, \u0027_submit\u0027);\n      MockInteractions.pressAndReleaseKeyOn(element, 13, null, \u0027enter\u0027);\n      flushAsynchronousOperations();\n\n      assert.isFalse(submitStub.called);\n    });",
      "parentUuid": "6e04a4d7_a9bd5285",
      "range": {
        "startLine": 704,
        "startChar": 0,
        "endLine": 708,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c304d923_5345c69e",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 708,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2017-07-26T20:10:47Z",
      "side": 1,
      "message": "hooking just \u0027send\u0027 seemed to be cleaner (and the current version here is simpler, and it\u0027s how other tests hook \u0027send\u0027), but i don\u0027t feel strongly.  if you want me to try that way, i can see if the tests still pass.",
      "parentUuid": "615fca71_e449964f",
      "range": {
        "startLine": 704,
        "startChar": 0,
        "endLine": 708,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "439227a1_75dc002a",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 708,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-07-26T20:18:20Z",
      "side": 1,
      "message": "This test in particular seems like it could pass erroneously, as WCT thinks it\u0027s a synchronous test. The send may fire after the function returns, as you mentioned above.",
      "parentUuid": "c304d923_5345c69e",
      "range": {
        "startLine": 704,
        "startChar": 0,
        "endLine": 708,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdb1876a_a4e8af79",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 714,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-07-26T18:17:55Z",
      "side": 1,
      "message": "It seems to me like this test can be rewritten in a more obvious/legible way.\n\n    test(\u0027emit send on ctrl+enter key\u0027, () \u003d\u003e {\n      const sendHandler \u003d sandbox.stub();\n      element.addEventListener(\u0027send\u0027, sendHandler);\n      MockInteractions.pressAndReleaseKeyOn(element, 13, null, \u0027enter\u0027);\n      flushAsynchronousOperations();\n\n      assert.isTrue(sendHandler.called);\n    });\n\nThis is far more consistent with the rest of the tests, both in this file and elsewhere in the codebase, but as your approach also works adopting this is optional.",
      "range": {
        "startLine": 710,
        "startChar": 0,
        "endLine": 714,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66467fdc_2b564ba8",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 714,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2017-07-26T19:47:50Z",
      "side": 1,
      "message": "that doesn\u0027t work -- see above",
      "parentUuid": "cdb1876a_a4e8af79",
      "range": {
        "startLine": 710,
        "startChar": 0,
        "endLine": 714,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3debe1dd_78262b0b",
        "filename": "polygerrit-ui/app/elements/change/gr-reply-dialog/gr-reply-dialog_test.html",
        "patchSetId": 2
      },
      "lineNbr": 714,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-07-26T19:57:35Z",
      "side": 1,
      "message": "How about we then just spy on the submit function?\n\n    test(\u0027emit send on ctrl+enter key\u0027, () \u003d\u003e {\n      const submitStub \u003d sandbox.stub(element, \u0027_submit\u0027);\n      MockInteractions.pressAndReleaseKeyOn(element, 13, \u0027ctrl\u0027, \u0027enter\u0027);\n      flushAsynchronousOperations();\n\n      assert.isTrue(submitStub.called);\n    });",
      "parentUuid": "66467fdc_2b564ba8",
      "range": {
        "startLine": 710,
        "startChar": 0,
        "endLine": 714,
        "endChar": 7
      },
      "revId": "81b90bc4ef1289a689ea4f0d779de8d3487c070f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}