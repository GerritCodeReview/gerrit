{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5093011d_ea2cf940",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T04:16:06Z",
      "side": 1,
      "message": "Generally looks good, just a few comments.",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d56f1b4_95eba3c7",
        "filename": "java/com/google/gerrit/server/notedb/AbstractChangeNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 176,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T04:16:06Z",
      "side": 1,
      "message": "Not thrown now",
      "range": {
        "startLine": 176,
        "startChar": 3,
        "endLine": 176,
        "endChar": 88
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f17b7db0_c867d90e",
        "filename": "java/com/google/gerrit/server/notedb/AbstractChangeNotes.java",
        "patchSetId": 3
      },
      "lineNbr": 176,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-14T18:54:45Z",
      "side": 1,
      "message": "Done, good catch üëç",
      "parentUuid": "5d56f1b4_95eba3c7",
      "range": {
        "startLine": 176,
        "startChar": 3,
        "endLine": 176,
        "endChar": 88
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df0c04bd_c357b3d1",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T04:16:06Z",
      "side": 1,
      "message": "Maybe do this in getMetaRevId() so that other future callers won\u0027t forget to check it?",
      "range": {
        "startLine": 109,
        "startChar": 6,
        "endLine": 109,
        "endChar": 18
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "044ffb85_df0c63ea",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-14T18:54:45Z",
      "side": 1,
      "message": "Yep, good idea. Done.",
      "parentUuid": "df0c04bd_c357b3d1",
      "range": {
        "startLine": 109,
        "startChar": 6,
        "endLine": 109,
        "endChar": 18
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f9739b8_dfd145e2",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 156,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T04:16:06Z",
      "side": 1,
      "message": "This wasn\u0027t done in the code you\u0027re copying from, but we should probably be setting rw.setRetainBody(false) so that we\u0027re not using extra memory here.",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d401f7ef_75933556",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-14T19:48:54Z",
      "side": 1,
      "message": "This is how it was:\n\n\n  private void verifyMetaId(Repository repo, ObjectId id)\n      throws IOException, MissingMetaObjectException {\n    try (RevWalk rw \u003d new RevWalk(repo)) {\n      Ref ref \u003d repo.getRefDatabase().exactRef(getRefName());\n      RevCommit tip \u003d rw.parseCommit(ref.getObjectId());\n      rw.markStart(tip);\n      for (RevCommit rev : rw) {\n        if (id.equals(rev)) {\n          return;\n        }\n      }\n    }\n\n    throw new MissingMetaObjectException(id.getName() + \" not reachable from \" + getRefName());\n  }\n  \nI can see the rw.markStart(tip) or I am reading it wrongly?",
      "parentUuid": "2f9739b8_dfd145e2",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f788acd8_90c20369",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 156,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T21:54:03Z",
      "side": 1,
      "message": "Sorry, my comment wasn\u0027t clear enough. I wasn\u0027t commenting on the markStart(). That looks fine.\n\nI was suggesting you add another line that does rw.setRetainBody(false) so that we don\u0027t use extra memory.",
      "parentUuid": "d401f7ef_75933556",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4f1685d_55155491",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-30T21:50:26Z",
      "side": 1,
      "message": "Sure, I\u0027ll include that in a separate follow-up change, so that I separate the pure relocation of the validation logic and the subsequent memory optimisation.",
      "parentUuid": "f788acd8_90c20369",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86d340df_4634c3e5",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 156,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-30T22:18:33Z",
      "side": 1,
      "message": "Done Change-Id: I66fe2103d",
      "parentUuid": "a4f1685d_55155491",
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c02e1d05_7263f08b",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-10-14T04:16:06Z",
      "side": 1,
      "message": "It looks like the message of this exception could go to the user? If that\u0027s correct, could it leak info that wouldn\u0027t be appropriate (security or host internals wise)?",
      "range": {
        "startLine": 164,
        "startChar": 92,
        "endLine": 164,
        "endChar": 93
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ed606bc_0d5fab17",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-14T19:48:54Z",
      "side": 1,
      "message": "Let me just reduce the change output to its numeric id, which is anonymous and does not leak any sensitive or private data.",
      "parentUuid": "c02e1d05_7263f08b",
      "range": {
        "startLine": 164,
        "startChar": 92,
        "endLine": 164,
        "endChar": 93
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb3457ca_20e54e2c",
        "filename": "java/com/google/gerrit/server/restapi/change/GetChange.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-10-14T19:49:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ed606bc_0d5fab17",
      "range": {
        "startLine": 164,
        "startChar": 92,
        "endLine": 164,
        "endChar": 93
      },
      "revId": "84f48f74665497b6f3bba871f8c2190091eaf944",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}