{
  "comments": [
    {
      "key": {
        "uuid": "cdf801d5_a3ac3aba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-01-10T13:31:53Z",
      "side": 1,
      "message": "This is cool :-)",
      "range": {
        "startLine": 22,
        "startChar": 63,
        "endLine": 25,
        "endChar": 61
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf801d5_23a16abf",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-10T13:49:22Z",
      "side": 1,
      "message": "2014",
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d027d8d_06931a8a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-10T14:54:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdf801d5_23a16abf",
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edfb05cc_04c55675",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 111,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-01-10T13:31:53Z",
      "side": 1,
      "message": "Since we allow deletion of draft patch sets, having a gap in the patch sets is not necessarily bad, but could be a valid state. This means we must not fail here, but rather continue with the next patch set.",
      "range": {
        "startLine": 109,
        "startChar": 10,
        "endLine": 111,
        "endChar": 11
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d027d8d_e660feea",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 111,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-10T14:54:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "edfb05cc_04c55675",
      "range": {
        "startLine": 109,
        "startChar": 10,
        "endLine": 111,
        "endChar": 11
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf801d5_039e6e77",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 141,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-10T13:49:22Z",
      "side": 1,
      "message": "new HashMap\u003c\u003e(patchSets.size()) is shorter.",
      "range": {
        "startLine": 141,
        "startChar": 8,
        "endLine": 141,
        "endChar": 57
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0dff79b9_8555c211",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 141,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-10T14:54:13Z",
      "side": 1,
      "message": "See Effective Java item 1.",
      "parentUuid": "cdf801d5_039e6e77",
      "range": {
        "startLine": 141,
        "startChar": 8,
        "endLine": 141,
        "endChar": 57
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf801d5_e313523e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-10T13:49:22Z",
      "side": 1,
      "message": "This condition looks wrong to me for the same reason Edwin pointed out above.",
      "range": {
        "startLine": 155,
        "startChar": 15,
        "endLine": 155,
        "endChar": 34
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d027d8d_c66502f9",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-10T14:54:13Z",
      "side": 1,
      "message": "Good point.\n\nBut I\u0027m not totally sure what the right behavior is. Consider:\n\n PS1: -2\n PS2: -1\n PS3: n/a\n\nand PS1 is deleted.\n\nWith the old approach, PS3 would be -1 because it was copied from PS2 at creation time. With this approach, as long as PS2 exists, PS3 should be n/a.\n\nWith the current implementation (a), PS3 would be n/a after PS2 is deleted.\n\nIf we changed this to look at the previous patch set skipping gaps (b), PS3 would be -2 after PS2 is deleted.\n\nI\u0027m on the fence between these two options.",
      "parentUuid": "cdf801d5_e313523e",
      "range": {
        "startLine": 155,
        "startChar": 15,
        "endLine": 155,
        "endChar": 34
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf801d5_833b7eaf",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-01-10T15:28:48Z",
      "side": 1,
      "message": "\u003e and PS1 is deleted.\n\nDo you mean PS2?\n\nIt\u0027s difficult to say what is best in this situation. For this concrete example I would say that option (a) is more correct. \n\nThe user initially gave a veto on this change (-2 on PS1) but then he changed his mind and he removed the veto on PS2. A deletion of PS2 does not mean that the user changed his mind again and resurrecting the veto from PS1 would be a surprise.\n\nThe expected result would be different if the veto was not removed on PS2. In this case the veto should still be there on PS3.\n\nHence, I\u0027m also undecided if (a) or (b) is better here. I think it depends on the approval of the deleted patch set. Maybe we could just keep the approvals when deleting patch sets?",
      "parentUuid": "2d027d8d_c66502f9",
      "range": {
        "startLine": 155,
        "startChar": 15,
        "endLine": 155,
        "endChar": 34
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0dff79b9_0542f256",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ApprovalCopier.java",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-10T15:34:00Z",
      "side": 1,
      "message": "\u003e Do you mean PS2?\n\nYes, sorry.\n\n\u003e A deletion of PS2 does not mean that the user changed his mind again and resurrecting the veto from PS1 would be a surprise.\n\nAre you sure? The veto means \"do not submit until I agree you have fixed this in a later patch set.\" If the reviewer agrees it was fixed in PS2 but then PS2 goes away, then that agreement no longer holds.\n\nI think it\u0027s fair in this case to make the reviewer reevaluate whether the more recent patch set fixes the issue. With this I\u0027m leaning towards (b).",
      "parentUuid": "cdf801d5_833b7eaf",
      "range": {
        "startLine": 155,
        "startChar": 15,
        "endLine": 155,
        "endChar": 34
      },
      "revId": "85ada50f1a2bfa2c2b4a8c3798e142f417818a20",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}