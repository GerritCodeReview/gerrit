{
  "comments": [
    {
      "key": {
        "uuid": "d65ff225_4acbd376",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PostReview.java",
        "patchSetId": 17
      },
      "lineNbr": 452,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2015-10-29T21:55:19Z",
      "side": 1,
      "message": "could simplify by using the PatchLineComment to generate the CommentSetEntry:\n\n String parent \u003d Url.decode(...);\n PatchLineComment e \u003d drafts.remove(...);\n if (e \u003d\u003d null) {\n   ... (but without the messageUUID) ...\n } else if (parent !\u003d null) {\n   ...\n }\n CommentSetEntry cse\u003d CommentSetEntry.create(e);\n if (existingIds.contains(cse)) {\n   continue;\n }\n if (e.getKey().get() \u003d\u003d null) {\n   e.getKey().set(ChangeUtil.messageUUID(ctx.getDb());\n }\n\nThat way the comment is removed from drafts even if it does not need to be published because an equivalent comment was already published.",
      "range": {
        "startLine": 436,
        "startChar": 0,
        "endLine": 452,
        "endChar": 11
      },
      "revId": "86e0289371057724c771eeb58f7820b9b79757c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3625aea9_6dc6b570",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PostReview.java",
        "patchSetId": 17
      },
      "lineNbr": 452,
      "author": {
        "id": 1021057
      },
      "writtenOn": "2015-10-29T21:58:09Z",
      "side": 1,
      "message": "But doesn\u0027t that waste time building a whole PatchLineComment just to throw it away in the duplicate case?",
      "parentUuid": "d65ff225_4acbd376",
      "range": {
        "startLine": 436,
        "startChar": 0,
        "endLine": 452,
        "endChar": 11
      },
      "revId": "86e0289371057724c771eeb58f7820b9b79757c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d65ff225_0ac5db5e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/PostReview.java",
        "patchSetId": 17
      },
      "lineNbr": 452,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2015-10-29T22:04:43Z",
      "side": 1,
      "message": "The PatchLineComment constructor does very little. Making a database call would be unfortunate (hence the suggestion of deferring generation of a UUID). All that\u0027s left after removing that is generating and populating three small Java objects.\n\nThe corresponding benefit is not having to have a separate CommentSetEntry.create(CommentInput) code path. That seems worth it to me.",
      "parentUuid": "3625aea9_6dc6b570",
      "range": {
        "startLine": 436,
        "startChar": 0,
        "endLine": 452,
        "endChar": 11
      },
      "revId": "86e0289371057724c771eeb58f7820b9b79757c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}