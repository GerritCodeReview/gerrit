{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b5e0543f_fd55c858",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2020-12-10T09:58:32Z",
      "side": 1,
      "message": "FYI, when writing this test I was wondering whether refs/meta/version should be considered as a protected NoteDb ref. I think I convinced myself that this ref is intentional visible to normal users (assuming they have READ permissions on it) and that it shouldn\u0027t require the Access Database capability. The reason is that users are allowed to fetch the NoteDb meta ref of changes that are visible to them, but to parse information from the NoteDb data they need to know the NoteDb version, which is what is stored in refs/meta/version. So I think if you can see NoteDb data, you should also be able to see the NoteDb version. Just my 2 cents :) \n\nOf course any user with Access Database should always be able to see this ref. Maybe this is what you are trying to fix?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 29
      },
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8249bfd0_206e43c9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-12-10T10:57:19Z",
      "side": 1,
      "message": "Thanks for the explanation, Edwin.\n\nYes I think this change is not contradicting with what you wrote. Having the \"Access Database\" implies having read access to any NoteDb ref, but that doesn\u0027t mean that this ref is only visible to people with the \"Administrate Database\" authority.\n\nOn a separate note, looking at the javadocs of RefNames#isGerritRef\n\u003e Whether the ref is managed by Gerrrit. Covers all Gerrit-internal refs ...\n\nThis is true for refs/meta/version, so should be added to the list IIUC",
      "parentUuid": "b5e0543f_fd55c858",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 29
      },
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "23946721_9e057ef5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2020-12-10T10:58:25Z",
      "side": 1,
      "message": "Ok, thanks for checking :)",
      "parentUuid": "8249bfd0_206e43c9",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 29
      },
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b294faad_4b20a392",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2020-12-10T08:57:26Z",
      "side": 1,
      "message": "Please use gitiles links:\n\ngerrit.googlesource.com/...",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 160
      },
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d25e288_47b01719",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2020-12-09T16:52:22Z",
      "side": 1,
      "message": "Coincidentally GetBranchIT#getVersionMetaRef used to pass, but is now failing with change https://gerrit-review.googlesource.com/c/gerrit/+/287351, which reduces refs visibility to refs/heads/* instead of refs/*",
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a5903ff_0772894d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2020-12-10T08:57:26Z",
      "side": 1,
      "message": "The test failure here seems related:\n\n1) uploadPackSequencesWithAccessDatabase(com.google.gerrit.acceptance.git.RefAdvertisementIT)\nunexpected (1): refs/meta/version\n---\nexpected      : [refs/sequences/changes]\nbut was       : [refs/meta/version, refs/sequences/changes]\n\tat com.google.gerrit.acceptance.git.RefAdvertisementIT.assertRefs(RefAdvertisementIT.java:1449)",
      "revId": "875576ea5722cf7ac556aeb4766add367b267429",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}