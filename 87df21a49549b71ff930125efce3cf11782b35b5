{
  "comments": [
    {
      "key": {
        "uuid": "7fec56ce_4ddf39ef",
        "filename": "Documentation/cmd-move-change.txt",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-14T15:22:08Z",
      "side": 1,
      "message": "not really. it\u0027s something our contributors do all the time \"manually\" (currently by sending me a mail or irc message, because only me as an admin can hack the database).",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "762485ad_cde249f8",
        "filename": "Documentation/cmd-move-change.txt",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-21T16:16:03Z",
      "side": 1,
      "message": "This is stated in most, if not all, the existing commands.  It doesn\u0027t mean that it\u0027s *only* intended to be used in scripts; I guess a better wording would be \"suitable to be used in scripts\" or something like that.",
      "parentUuid": "7fec56ce_4ddf39ef",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ffefa6f_92e13cf3",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "General comment: it might be better to implement this as a REST API endpoint instead?",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f3e16ee_1d7b9381",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-14T15:22:08Z",
      "side": 1,
      "message": "the ssh api has the advantage that the commands can be issued in an intuitive way, which is a good idea for such end-user oriented functionality. i for one wouldn\u0027t know how to do a REST call from the command line ...",
      "parentUuid": "1ffefa6f_92e13cf3",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "762485ad_eddce547",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1005956
      },
      "writtenOn": "2015-10-21T11:17:17Z",
      "side": 1,
      "message": "David/Martin, any thoughts on Oswald\u0027s comment?",
      "parentUuid": "7f3e16ee_1d7b9381",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "762485ad_adeffddd",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-21T16:16:03Z",
      "side": 1,
      "message": "I an ssh command is really wanted, OK.  But I would prefer that the core functionality is implemented as a REST API and then the ssh command invokes that.\n\nThere are already examples of this pattern in the existing commands.",
      "parentUuid": "762485ad_eddce547",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "36476d69_434986a1",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-22T10:22:42Z",
      "side": 1,
      "message": "well, the right approach would be of course an ssh transport for the REST api, plus an associated front-end script for commands that make sense on the command line. then the old api could be actually deprecated, and there would be no need to separately \"bridge\" each new functionality server-side.",
      "parentUuid": "762485ad_adeffddd",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "567a21ab_34afb0bb",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-10-22T19:50:53Z",
      "side": 1,
      "message": "I consider it normal policy to require a REST-API for this, and to make the ssh command use the REST-API.  It is not what we implemented because we implemented this on our internal release which didn\u0027t have a stable REST-API.  We uploaded this rebased on master without porting to REST because people were asking about it, and I figured it was a starting place.  We use the non rebased version of this code in production.",
      "parentUuid": "36476d69_434986a1",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_3c477190",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Don\u0027t use final in new code unless needed by the compiler.",
      "range": {
        "startLine": 77,
        "startChar": 13,
        "endLine": 77,
        "endChar": 18
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_1c4c35b1",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 81,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Wrap this to the next line.  For injected parameters we put each one on a new line.",
      "range": {
        "startLine": 81,
        "startChar": 47,
        "endLine": 81,
        "endChar": 66
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_9c08456b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Put this in a try-with-resource",
      "range": {
        "startLine": 112,
        "startChar": 4,
        "endLine": 112,
        "endChar": 61
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_dc02cd46",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "No final in new code.  Also below.",
      "range": {
        "startLine": 114,
        "startChar": 4,
        "endLine": 114,
        "endChar": 9
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_bc0b8166",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 116,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Put this in a try-with-resource on line 115.",
      "range": {
        "startLine": 116,
        "startChar": 12,
        "endLine": 116,
        "endChar": 47
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f3e16ee_9d8683dc",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-14T15:22:08Z",
      "side": 1,
      "message": "that seems arbitrary to me. suppose both the old and new target branch point to the same commit, as one of them got just created from the other. in this case, moving the change will be perfectly fine.\n\nwhat is a much bigger problem is moving from a more advanced branch to a lower branch if the submission type is not cherry-pick, as that would obviously \"downmerge\" the entire branch. but i think the submission itself verifies that condition already?",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "762485ad_8dec41ea",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-21T16:16:03Z",
      "side": 1,
      "message": "I think it\u0027s reasonable to reject moving merge commits, at least in the initial implementation.  If we want to support that, it can be added in a separate commit later with better handling of the potential edge cases.",
      "parentUuid": "7f3e16ee_9d8683dc",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "168429cb_621b36bb",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-22T10:22:42Z",
      "side": 1,
      "message": "well, my point was that merges don\u0027t seem all that special when you consider the other \"edge cases\" - which you really should.",
      "parentUuid": "762485ad_8dec41ea",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "567a21ab_94bd64ee",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-10-22T19:50:53Z",
      "side": 1,
      "message": "I don\u0027t think moving merges make sense.  Merges tend to be about merging some other branch to the current branch.  Such a merge likely does not make a lot of sense destined for another branch.  But I suspect we want to follow whatever policy we use for cherry-picks.  Does master allow cherry-picks of merges (we don\u0027t allow our internal \"copy\" command on merges), if so, does it make sense?",
      "parentUuid": "168429cb_621b36bb",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ffefa6f_12f6ecbf",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Not needed if repo is opened in try-with-resource (line 112)",
      "range": {
        "startLine": 135,
        "startChar": 6,
        "endLine": 137,
        "endChar": 5
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7fec56ce_2d8f4d01",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-14T15:22:08Z",
      "side": 1,
      "message": "the condition is wrong. you obviously shouldn\u0027t be able to move a merged change, but moving an abandoned one (or a draft) is perfectly fine.",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59c412d2_e4fcba9e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1005956
      },
      "writtenOn": "2015-10-21T11:17:17Z",
      "side": 1,
      "message": "Agree for the draft change but I am not sure why would anyone move an abandoned change.",
      "parentUuid": "7fec56ce_2d8f4d01",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79c556cc_c5537a4e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-21T11:27:01Z",
      "side": 1,
      "message": "they might want to restore it only at a later point.\nthe thing is that there is no logical reason to impose a limitation here.",
      "parentUuid": "59c412d2_e4fcba9e",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59c412d2_e4131a9f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-21T16:16:03Z",
      "side": 1,
      "message": "AFAIK this is consistent with how we treat abandoned changes in other cases.",
      "parentUuid": "79c556cc_c5537a4e",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "168429cb_8220bae4",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2015-10-22T10:22:42Z",
      "side": 1,
      "message": "i\u0027ll assume that you mean mostly pushing new changesets here, as that seems the most pertinent case i can think of. i guess one can argue that way, though the push behavior can be questioned as well - it would make more sense if there was also a \"deferred\" state which is considered non-final (we patched that into our gerrit on qt-project), while \"abandoned\" would be really terminal. anyway...",
      "parentUuid": "59c412d2_e4131a9f",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b690bd0a_5f2dabca",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-22T10:29:24Z",
      "side": 1,
      "message": "No, I meant that there are many other operations that we only allow when the change is open.  Edit topic, add reviewer, remove reviewer, etc.\n\nI don\u0027t think it\u0027s unreasonable to expect that a change is open before it can be \u0027moved\u0027.",
      "parentUuid": "168429cb_8220bae4",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "567a21ab_b4bae0f1",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 161,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-10-22T19:50:53Z",
      "side": 1,
      "message": "If you want to move a change, I think you should have to restore it first.  As for drafts, I would like to pretend they just don\u0027t exist. :)   But I guess moving a draft is fine.",
      "parentUuid": "b690bd0a_5f2dabca",
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4dd2ad_fc050951",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 174,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Can\u0027t we check the change state earlier and abort if it\u0027s not open?",
      "range": {
        "startLine": 173,
        "startChar": 48,
        "endLine": 174,
        "endChar": 26
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ffefa6f_72fbf8a7",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Why use a StringBuilder but initialise it with a concatenation? :)\n\nIt would be neater to add multiple .append calls for these.",
      "range": {
        "startLine": 178,
        "startChar": 38,
        "endLine": 180,
        "endChar": 77
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "567a21ab_54c90c8a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 180,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2015-10-22T19:50:53Z",
      "side": 1,
      "message": "I am not sure I agree with the neater part (I think appends are wordy and harder to read), and I suspect this is just as efficient as a StringBuilder, but changing it is fine.",
      "parentUuid": "1ffefa6f_72fbf8a7",
      "range": {
        "startLine": 178,
        "startChar": 38,
        "endLine": 180,
        "endChar": 77
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ffefa6f_b2e44003",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 181,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "!Strings.isNullOrEmpty(changeComment)",
      "range": {
        "startLine": 181,
        "startChar": 8,
        "endLine": 181,
        "endChar": 59
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1ffefa6f_5200744a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/changedetail/MoveChange.java",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2015-10-13T06:02:49Z",
      "side": 1,
      "message": "Should this be msgBug.toString()?  Otherwise msgBuf isn\u0027t used.",
      "range": {
        "startLine": 187,
        "startChar": 41,
        "endLine": 187,
        "endChar": 54
      },
      "revId": "87df21a49549b71ff930125efce3cf11782b35b5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}