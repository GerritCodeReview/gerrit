{
  "comments": [
    {
      "key": {
        "uuid": "35cf80f4_2867bbc7",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "According to our style guide [1] and general Java practices, the names of interfaces are either noun phrases or (when applicable) adjective phrases. I don\u0027t have a perfect suggestion yet but let\u0027s discuss some alternatives:\n- UrlProvider\n- UrlFormatter\n- UrlBrowser (This is the noun variant of the current name. I honestly wouldn\u0027t know what to make of this class without reading the Javadoc description.)\n- Urls\n- GerritUrls (Typically, including the product name in class names just inflates all names and is thus discouraged. It might still help here to clarify the very vague \u0027Urls\u0027.)\n- BrowsableUrls (Does \"browsable\" exist as a word and in that context?)\n\nI\u0027m happy to hear more ideas.\n\n[1] https://google.github.io/styleguide/javaguide.html#s5.2.2-class-names",
      "range": {
        "startLine": 27,
        "startChar": 17,
        "endLine": 27,
        "endChar": 27
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec9f32ad_dbb97995",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-09-12T17:08:38Z",
      "side": 1,
      "message": "UrlFormatter works for me",
      "parentUuid": "35cf80f4_2867bbc7",
      "range": {
        "startLine": 27,
        "startChar": 17,
        "endLine": 27,
        "endChar": 27
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2887e4f_181b436b",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "That\u0027s a bit confusing. Saying \"in the following circumstances\" makes me think that you provide a comprehensive list but adding \"for example\" makes me wonder which other cases aren\u0027t mentioned.",
      "range": {
        "startLine": 32,
        "startChar": 61,
        "endLine": 33,
        "endChar": 12
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5002c9a9_62d52a1e",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-09-12T17:08:38Z",
      "side": 1,
      "message": "I wonder if anyone knows of all the cases where this can happen at all.",
      "parentUuid": "d2887e4f_181b436b",
      "range": {
        "startLine": 32,
        "startChar": 61,
        "endLine": 33,
        "endChar": 12
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93096307_39d6203d",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "This is formulated from the view of somebody implementing the interface. I would rather formulate the Javadoc description for the users of the interface and hence not describe what it \"should\" do but what it\u0027s real contract is.",
      "range": {
        "startLine": 40,
        "startChar": 76,
        "endLine": 40,
        "endChar": 96
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52cb7c8c_0c94ef6a",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-09-12T15:14:07Z",
      "side": 1,
      "message": "What is the intended behavior of webUrl() when hasUrl() is false? Should it throw ISE? Return null? Either way, that significantly complicates the contract that implementers need to follow.\n\nOne way around this might be to make this an abstract class, where there are protected abstract methods like webUrlImpl and webUrl always calls checkState. But I think that would get pretty ugly.\n\nAnother possibility is to give hasUrl() a default implementation which returns true, and bind BrowseUrls to an implementation that returns false from hasUrl and throws ISE from all other methods.\n\nIf that all turns out to be too difficult, we can just punt and document the unfortunately complicated contract.",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4022a99a_9d3053ce",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-09-12T16:22:15Z",
      "side": 1,
      "message": "currently it returns \"/\" to avoid causing null ptr exceptions, which seem unwarranted for the places where this is used.\n\nBut honestly, I would rather get rid of the hasURL \u003d\u003d false case. I don\u0027t understand what use-case it could serve, but resolving that seems a separate discussion from the one we have here.",
      "parentUuid": "52cb7c8c_0c94ef6a",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1ebd2a3c_0ea4dec1",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "I agree with Dave that the contract is complicated.\n\nWould it be an option to make webUrl() and changeViewUrl() return Optional\u003cString\u003e? Thus, we would have a much easier contract and callers wouldn\u0027t forget to handle the case when the URL isn\u0027t present.",
      "parentUuid": "52cb7c8c_0c94ef6a",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2ab78c3_b86cff28",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-09-12T17:08:38Z",
      "side": 1,
      "message": "yeah, that works. I dislike how that makes the callsites more verbose, but I can live with that.",
      "parentUuid": "1ebd2a3c_0ea4dec1",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afb6e2bd_15ce4a21",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 43,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "According to our style guide [1] and general Java practices, the names of methods are typically verbs or verb phrases. We only make an exception for the \"method fields\" of plain DTOs like AutoValue classes. Hence, we should rather use getChangeViewUrl() and getWebUrl().\n\n[1] https://google.github.io/styleguide/javaguide.html#s5.2.3-method-names",
      "range": {
        "startLine": 43,
        "startChar": 17,
        "endLine": 43,
        "endChar": 30
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73187628_fc70d5cc",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 43,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "This method also needs a Javadoc description.",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "decec1db_fc779b0c",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 46,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-09-12T15:14:07Z",
      "side": 1,
      "message": "Nit: wrapping",
      "range": {
        "startLine": 45,
        "startChar": 3,
        "endLine": 46,
        "endChar": 20
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bca9dd87_2679f279",
        "filename": "java/com/google/gerrit/server/config/BrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-09-12T15:14:07Z",
      "side": 1,
      "message": "What if this returns null?",
      "range": {
        "startLine": 47,
        "startChar": 11,
        "endLine": 47,
        "endChar": 19
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2df6afd8_390b0cd2",
        "filename": "java/com/google/gerrit/server/config/DefaultBrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 27,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-09-12T16:23:54Z",
      "side": 1,
      "message": "optional: I know I\u0027m fighting Gerrit traditions but the recent ToTT 538 explicitly highlighted the importance of the use of good names. Writing \"url\" instead of \"u\" really doesn\u0027t use so many more characters.",
      "range": {
        "startLine": 27,
        "startChar": 11,
        "endLine": 27,
        "endChar": 12
      },
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "923f96f1_a39ef6f3",
        "filename": "java/com/google/gerrit/server/config/DefaultBrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 29,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-09-12T15:14:07Z",
      "side": 1,
      "message": "It looks like this means changeViewUrl will return \"/project/+/#\" when hasUrl is false. Is that actually a reasonable thing to output?",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba6394b0_124e1e22",
        "filename": "java/com/google/gerrit/server/config/DefaultBrowseUrls.java",
        "patchSetId": 6
      },
      "lineNbr": 29,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-09-12T16:22:15Z",
      "side": 1,
      "message": "right, but is not having any URL at all a reasonable thing support?",
      "parentUuid": "923f96f1_a39ef6f3",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "154bc68e_56560b90",
        "filename": "java/com/google/gerrit/server/git/DefaultChangeReportFormatter.java",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-09-12T15:14:07Z",
      "side": 1,
      "message": "The calls to changeViewUrl in this class will both return invalid URLs if hasUrl is false. In my mind, it feels like programmer error to call changeViewUrl here in that case; this should perhaps just say \"change 1234 closed\" rather than a URL if there is no URL available.\n\nThe fact that this mistake is easy to make is an argument for implementing one of the solutions that throws ISE when this programmer error is made.",
      "revId": "9182ff285058bed165978242e28adb0fd73f4f2c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}