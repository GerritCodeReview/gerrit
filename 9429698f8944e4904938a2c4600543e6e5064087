{
  "comments": [
    {
      "key": {
        "uuid": "AAAA7X///zI\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2010-09-08T09:19:45Z",
      "side": 1,
      "message": "fileList might be null. \n\nI\u0027m getting the following exception whenever I\u0027m opening a file diff in a new browser tab:\n\njava.lang.NullPointerException: while trying to invoke the method com.google.gerrit.client.changes.PatchTable.getPreferences() of an object loaded from field com.google.gerrit.client.patches.PatchScreen.fileList of an object loaded from local variable \u0027this\u0027\n \tat com.google.gerrit.client.patches.PatchScreen.\u003cinit\u003e(PatchScreen.java:171)\n \tat com.google.gerrit.client.patches.PatchScreen$SideBySide.\u003cinit\u003e(PatchScreen.java:63)\n \tat com.google.gerrit.client.Dispatcher$2.select(Dispatcher.java:280)\n \tat com.google.gerrit.client.Dispatcher$2.onSuccess(Dispatcher.java:272)\n \tat com.google.gwt.core.client.GWT.runAsyncWithoutCodeSplitting(GWT.java:284)\n \tat com.google.gwt.core.client.GWT.runAsync(GWT.java:228)\n \tat com.google.gerrit.client.Dispatcher.patch(Dispatcher.java:270)\n \tat com.google.gerrit.client.Dispatcher.select(Dispatcher.java:117)\n \tat com.google.gerrit.client.Dispatcher.display(Dispatcher.java:105)\n \tat com.google.gerrit.client.Gerrit.display(Gerrit.java:118)\n \tat com.google.gerrit.client.Gerrit.onModuleLoad2(Gerrit.java:430)\n \tat com.google.gerrit.client.Gerrit.access$4(Gerrit.java:337)\n \tat com.google.gerrit.client.Gerrit$2.onSuccess(Gerrit.java:271)\n \tat com.google.gerrit.client.Gerrit$2.onSuccess(Gerrit.java:1)\n \tat com.google.gwtjsonrpc.client.JsonUtil.invoke(JsonUtil.java:136)\n \tat com.google.gerrit.client.HostPageDataService_JsonProxy.load(HostPageDataService_JsonProxy.java:20)\n \tat com.google.gerrit.client.Gerrit.onModuleLoad(Gerrit.java:262)\n \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:369)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:185)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:380)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:222)\n \tat java.lang.Thread.run(Thread.java:679)",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7X///vo\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2010-09-15T21:44:34Z",
      "side": 1,
      "message": "Good catch.  Done.",
      "parentUuid": "AAAA7X///zI\u003d",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7X///zE\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 346,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2010-09-08T09:19:45Z",
      "side": 1,
      "message": "Not sure how the following problem can be caused by this change, but whenever I change any checkbox in the account diff preferences, apply the new values with \u0027Update\u0027 and then click on the \u0027Up to change\u0027 link I get the following exception:\n\n\n00:01:20,782 [ERROR] Uncaught exception escaped\ncom.google.gwt.user.client.ui.AttachDetachException: One or more exceptions caught, see full set in AttachDetachException#getCauses\n \tat com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:85)\n \tat com.google.gwt.user.client.ui.Panel.doDetachChildren(Panel.java:167)\n \tat com.google.gwt.user.client.ui.Widget.onDetach(Widget.java:333)\n \tat com.google.gwt.user.client.ui.Widget.setParent(Widget.java:402)\n \tat com.google.gwt.user.client.ui.Panel.orphan(Panel.java:210)\n \tat com.google.gwt.user.client.ui.ComplexPanel.remove(ComplexPanel.java:63)\n \tat com.google.gwtexpui.user.client.ViewSite.swap(ViewSite.java:79)\n \tat com.google.gwtexpui.user.client.View.display(View.java:54)\n \tat com.google.gerrit.client.rpc.ScreenLoadCallback.onSuccess(ScreenLoadCallback.java:33)\n \tat com.google.gwtjsonrpc.client.JsonUtil.invoke(JsonUtil.java:136)\n \tat com.google.gwtjsonrpc.client.impl.v2_0.JsonCall20.onResponseReceived(JsonCall20.java:85)\n \tat com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)\n \tat com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:393)\n \tat sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessagesWhileWaitingForReturn(BrowserChannel.java:1714)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:165)\n \tat com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:120)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:507)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:264)\n \tat com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)\n \tat com.google.gwt.core.client.impl.Impl.apply(Impl.java)\n \tat com.google.gwt.core.client.impl.Impl.entry0(Impl.java:188)\n \tat sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessages(BrowserChannel.java:1669)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:401)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:222)\n \tat java.lang.Thread.run(Thread.java:679)\nCaused by: java.lang.AssertionError: nul\n \tat com.google.gwtexpui.globalkey.client.KeyCommandSet.remove(KeyCommandSet.java:63)\n \tat com.google.gwtexpui.globalkey.client.KeyCommandSet.remove(KeyCommandSet.java:83)\n \tat com.google.gwtexpui.globalkey.client.GlobalKey$State.remove(GlobalKey.java:176)\n \tat com.google.gwtexpui.globalkey.client.GlobalKey$6.removeHandler(GlobalKey.java:118)\n \tat com.google.gerrit.client.patches.PatchScreen.onUnload(PatchScreen.java:346)\n \tat com.google.gwt.user.client.ui.Composite.onDetach(Composite.java:117)\n \tat com.google.gwt.user.client.ui.AttachDetachException$2.execute(AttachDetachException.java:41)\n \tat com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:72)\n \tat com.google.gwt.user.client.ui.Panel.doDetachChildren(Panel.java:167)\n \tat com.google.gwt.user.client.ui.Widget.onDetach(Widget.java:333)\n \tat com.google.gwt.user.client.ui.Widget.setParent(Widget.java:402)\n \tat com.google.gwt.user.client.ui.Panel.orphan(Panel.java:210)\n \tat com.google.gwt.user.client.ui.ComplexPanel.remove(ComplexPanel.java:63)\n \tat com.google.gwtexpui.user.client.ViewSite.swap(ViewSite.java:79)\n \tat com.google.gwtexpui.user.client.View.display(View.java:54)\n \tat com.google.gerrit.client.rpc.ScreenLoadCallback.onSuccess(ScreenLoadCallback.java:33)\n \tat com.google.gwtjsonrpc.client.JsonUtil.invoke(JsonUtil.java:136)\n \tat com.google.gwtjsonrpc.client.impl.v2_0.JsonCall20.onResponseReceived(JsonCall20.java:85)\n \tat com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)\n \tat com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:393)\n \tat sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessagesWhileWaitingForReturn(BrowserChannel.java:1714)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:165)\n \tat com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:120)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:507)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:264)\n \tat com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)\n \tat com.google.gwt.core.client.impl.Impl.apply(Impl.java)\n \tat com.google.gwt.core.client.impl.Impl.entry0(Impl.java:188)\n \tat sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessages(BrowserChannel.java:1669)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:401)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:222)\n \tat java.lang.Thread.run(Thread.java:679)\n\nAny ideas?",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7X///vk\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 346,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2010-09-15T21:44:34Z",
      "side": 1,
      "message": "No idea, I can\u0027t reproduce this either.",
      "parentUuid": "AAAA7X///zE\u003d",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7n///2g\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 346,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2010-09-16T11:26:47Z",
      "side": 1,
      "message": "Looks like this exception also occurs only if Gerrit is running in GWT Development Mode...\n\nWhen I\u0027m running the Gerrit daemon all is fine, so my comment can be ignored.",
      "parentUuid": "AAAA7X///vk\u003d",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7X///zA\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 448,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2010-09-08T09:19:45Z",
      "side": 1,
      "message": "When calling the NavLinks#display(...) method we register key commands to navigate to the next / previous diff (keys \u0027[\u0027 and \u0027]\u0027).\nLet\u0027s say there is a previous diff to which I could navigate pressing \u0027[\u0027, but now I change the account diff preferences so that uncommented diffs are skipped. Now it might be that there is no previous diff anymore to which I can navigate (if all previous diffs have no comments). Pressing now \u0027[\u0027 fails with a NPE. I guess we need to ensure that the key command is unregistered in this case.\n\nLooks all a bit tricky.\n\nHere is the stacktrace for the NPE:\n\njava.lang.NullPointerException: while trying to invoke the method com.google.gerrit.client.ui.InlineHyperlink.go() of an object returned from com.google.gerrit.client.patches.NavLinks.access$0(com.google.gerrit.client.patches.NavLinks)\n \tat com.google.gerrit.client.patches.NavLinks$1.onKeyPress(NavLinks.java:84)\n \tat com.google.gwtexpui.globalkey.client.KeyCommandSet.onKeyPress(KeyCommandSet.java:117)\n \tat com.google.gwtexpui.globalkey.client.GlobalKey$2.onKeyPress(GlobalKey.java:55)\n \tat com.google.gwt.event.dom.client.KeyPressEvent.dispatch(KeyPressEvent.java:70)\n \tat com.google.gwt.event.dom.client.KeyPressEvent.dispatch(KeyPressEvent.java:1)\n \tat com.google.gwt.event.shared.HandlerManager$HandlerRegistry.fireEvent(HandlerManager.java:65)\n \tat com.google.gwt.event.shared.HandlerManager$HandlerRegistry.access$1(HandlerManager.java:53)\n \tat com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:178)\n \tat com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:52)\n \tat com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)\n \tat com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:100)\n \tat com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1307)\n \tat com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1263)\n \tat sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessagesWhileWaitingForReturn(BrowserChannel.java:1714)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:165)\n \tat com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:120)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:507)\n \tat com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:264)\n \tat com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)\n \tat com.google.gwt.core.client.impl.Impl.apply(Impl.java)\n \tat com.google.gwt.core.client.impl.Impl.entry0(Impl.java:188)\n \tat sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)\n \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n \tat java.lang.reflect.Method.invoke(Method.java:597)\n \tat com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)\n \tat com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)\n \tat com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:157)\n \tat com.google.gwt.dev.shell.BrowserChannel.reactToMessages(BrowserChannel.java:1669)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:401)\n \tat com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:222)\n \tat java.lang.Thread.run(Thread.java:679)",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA7X///vg\u003d",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/patches/PatchScreen.java",
        "patchSetId": 2
      },
      "lineNbr": 448,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2010-09-15T21:44:34Z",
      "side": 1,
      "message": "Good catch, I simply need to be sure unregister the old keys and register the new ones whenever the screen is updated.  Done.",
      "parentUuid": "AAAA7X///zA\u003d",
      "revId": "9429698f8944e4904938a2c4600543e6e5064087",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}