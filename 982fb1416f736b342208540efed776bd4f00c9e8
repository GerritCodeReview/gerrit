{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7648e0fd_2880060b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-26T11:16:59Z",
      "side": 1,
      "message": "Should revoting only be allowed if the patch set differs (as in this example)?\nOr should it also work if I vote +2 multiple times on the same patch set?",
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18a78d1a_7258c65e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-26T19:39:55Z",
      "side": 1,
      "message": "discussed with the frontend (since they have to adjust this as well).\n\nWe don\u0027t see a reason why voting +2 multiple times on the same patch set should be disallowed, so it\u0027s better to allow it.",
      "parentUuid": "7648e0fd_2880060b",
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b68ea64b_575801c3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-27T08:22:08Z",
      "side": 1,
      "message": "Ack. Fine with me if it\u0027s intended :)\n\nShould there be a test for this?",
      "parentUuid": "18a78d1a_7258c65e",
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef14f75a_6ac804b3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-27T10:16:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b68ea64b_575801c3",
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58fdca01_b972808a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-26T11:16:59Z",
      "side": 1,
      "message": "Allowing to revote with the same value has some implications:\n\n1. a change message for the re-vote is added to the change\n2. revotes trigger an email and events\n   e.g. the OnPostReview extension point is invoked for the revote\n\nMaybe say if that\u0027s intended?\nE.g. 2. breaks a test in the code-owners plugin, so we would need to adapt it there.",
      "range": {
        "startLine": 24,
        "startChar": 34,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "652768cf_381c0c77",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-26T19:39:55Z",
      "side": 1,
      "message": "I think the additional change message makes lots of sense (that\u0027s how it is in e.g our internal code-review system).\n\nthe OnPostReview is anyway invoked, but it may have a different vote, is that what you meant?\n\nThe email is also anyway sent, it will just have a minor difference.",
      "parentUuid": "58fdca01_b972808a",
      "range": {
        "startLine": 24,
        "startChar": 34,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe953914_305f428f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-27T08:22:08Z",
      "side": 1,
      "message": "\u003e I think the additional change message makes lots of sense (that\u0027s how it is in e.g our internal code-review system).\n\nSure. Just wanted to be sure it\u0027s intended. Should it be verified by a test then that the change message is added?\n\n\u003e the OnPostReview is anyway invoked, but it may have a different vote, is that what you meant?\nNo. The current behaviour is that this extension point is not invoked (because currently Gerrit core doesn\u0027t post a change message in this case), see CodeOwnersOnPostReviewIT#changeMessageNotExtended_sameCodeOwnerApprovalAppliedAgain test in the code-owners plugin, but now it does get invoked. I don\u0027t mind much about this behaviour change, just saying that this test in the code-owners plugin needs to be adapted then and that the Javadoc in OnPostReview should probably be updated/clarified.\n\nIt\u0027s not only about the OnPostReview extension point (which is fine changing since it\u0027s only used by the code-owners plugin) but (I think) it\u0027s also effecting the CommentAdded hook which is triggering stream events? Not sure if anyone cares about this behaviour change here.\n\n\u003e The email is also anyway sent, it will just have a minor difference.\nNot sure if there is an email with the current behaviour (I think not). Anyway I believe the new test doesn\u0027t verify yet that the email is send now.",
      "parentUuid": "652768cf_381c0c77",
      "range": {
        "startLine": 24,
        "startChar": 34,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a219631_002c4f21",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-27T10:16:22Z",
      "side": 1,
      "message": "right, there is no email when posting a review with nothing. New behaviour looks better to me anyway.\nAdded tests for all of those.\n\nOnPostReview anyway got invoked (just verified with a debugger), you actually have an if condition in CodeOwnersOnPostReview#83: oldApprovals was null since the vote didn\u0027t change. Now, oldApprovals will not be null anymore, so your code is now invoked.",
      "parentUuid": "fe953914_305f428f",
      "range": {
        "startLine": 24,
        "startChar": 34,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3815c218_ab4b135c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-27T10:29:38Z",
      "side": 1,
      "message": "Thanks for checking!",
      "parentUuid": "9a219631_002c4f21",
      "range": {
        "startLine": 24,
        "startChar": 34,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c3984c4_e6118572",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReview.java",
        "patchSetId": 3
      },
      "lineNbr": 1276,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-26T11:16:59Z",
      "side": 1,
      "message": "maybe add \"in the request input\"",
      "range": {
        "startLine": 1276,
        "startChar": 32,
        "endLine": 1276,
        "endChar": 38
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebff2f37_da246a84",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReview.java",
        "patchSetId": 3
      },
      "lineNbr": 1276,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-26T19:39:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c3984c4_e6118572",
      "range": {
        "startLine": 1276,
        "startChar": 32,
        "endLine": 1276,
        "endChar": 38
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6cd5aa8_8a4c8c0e",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReview.java",
        "patchSetId": 3
      },
      "lineNbr": 1277,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-01-26T11:16:59Z",
      "side": 1,
      "message": "better: \"reapply the vote\"?\n\notherwise I read this reads as:\n\n \"If the user hadn\u0027t voted again (the user hasn\u0027t revoted),there is no need to re-vote\"",
      "range": {
        "startLine": 1277,
        "startChar": 33,
        "endLine": 1277,
        "endChar": 40
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a75f5e08_04800ad7",
        "filename": "java/com/google/gerrit/server/restapi/change/PostReview.java",
        "patchSetId": 3
      },
      "lineNbr": 1277,
      "author": {
        "id": 1085183
      },
      "writtenOn": "2021-01-26T19:39:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a6cd5aa8_8a4c8c0e",
      "range": {
        "startLine": 1277,
        "startChar": 33,
        "endLine": 1277,
        "endChar": 40
      },
      "revId": "982fb1416f736b342208540efed776bd4f00c9e8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}