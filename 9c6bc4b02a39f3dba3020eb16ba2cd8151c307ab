{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9f396363_9cc6efb5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Add a `,` otherwise the sentence isn\u0027t easy to read",
      "range": {
        "startLine": 9,
        "startChar": 26,
        "endLine": 9,
        "endChar": 27
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b8231c1_2306c169",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f396363_9cc6efb5",
      "range": {
        "startLine": 9,
        "startChar": 26,
        "endLine": 9,
        "endChar": 27
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d319b27f_10834365",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Not just the creation: it is created during the trial migration and kept up to date upon change updates.",
      "range": {
        "startLine": 12,
        "startChar": 40,
        "endLine": 12,
        "endChar": 48
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31986b60_e0acab24",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 12,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d319b27f_10834365",
      "range": {
        "startLine": 12,
        "startChar": 40,
        "endLine": 12,
        "endChar": 48
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61e97e5d_beefcb87",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Notified where?",
      "range": {
        "startLine": 15,
        "startChar": 38,
        "endLine": 15,
        "endChar": 49
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2fb0ec81_bca9a41d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "61e97e5d_beefcb87",
      "range": {
        "startLine": 15,
        "startChar": 38,
        "endLine": 15,
        "endChar": 49
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97bdf5c2_f7708bda",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "It is a bit hard to read. Why not says _\"Gerrit does not emit ref-updated stream events for those trial updates because they are not part of the batch update of the Git repository\"_",
      "range": {
        "startLine": 16,
        "startChar": 11,
        "endLine": 16,
        "endChar": 70
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "383d9fcd_e86668ac",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "97bdf5c2_f7708bda",
      "range": {
        "startLine": 16,
        "startChar": 11,
        "endLine": 16,
        "endChar": 70
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1429be8b_cb7ff38e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "a temporary trial",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 56
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6144ba92_bc62a6da",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1429be8b_cb7ff38e",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 56
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ce13d43_f9896af7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-07T12:10:22Z",
      "side": 1,
      "message": "Not done, unresolving.",
      "parentUuid": "6144ba92_bc62a6da",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 56
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1b91c4f_081cdc5e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2024-03-07T14:27:27Z",
      "side": 1,
      "message": "I think you highlighted the wrong section? \"A temporary trial\" is in the line above? \n\nReplacing the highlighted section with that doesn\u0027t make much sense?",
      "parentUuid": "4ce13d43_f9896af7",
      "range": {
        "startLine": 19,
        "startChar": 13,
        "endLine": 19,
        "endChar": 56
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89fe8a54_87816d61",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "The cases mentioned do not seem relevant to me: can we just avoid mentioning them?",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4526238_16c8204f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89fe8a54_87816d61",
      "range": {
        "startLine": 22,
        "startChar": 1,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fd6f90d_ee93c740",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Say simply _\"to enable to notification of /meta ref-updates in trial mode\"_",
      "range": {
        "startLine": 26,
        "startChar": 61,
        "endLine": 27,
        "endChar": 46
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9f4e056_877887e9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 27,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4fd6f90d_ee93c740",
      "range": {
        "startLine": 26,
        "startChar": 61,
        "endLine": 27,
        "endChar": 46
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1fd8834f_9f8b9cdf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "That part isn\u0027t relevant to me, why would this matter for generating ref-updated events?",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 31,
        "endChar": 40
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "685b5918_04666059",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "This is relevant: the /meta ref-update is not part of the batch-ref-update of the impacted change.",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 68
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ebb332a6_856d8069",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1fd8834f_9f8b9cdf",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 31,
        "endChar": 40
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dbcb4156_60ca42e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Removing this as it has already been mentioned above.",
      "parentUuid": "685b5918_04666059",
      "range": {
        "startLine": 31,
        "startChar": 46,
        "endLine": 31,
        "endChar": 68
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "033e6cd8_3985b44b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "I would add this as a note, e.g.\n\n\u003e **IMPORTANT NOTE**: The ref-updates in trial mode can be used for logging or tracing purposes, but should not be relied upon for any data replication, because of the inherent danger of inconsistency. E.g. when uploading a new patch-set, the ref-update of the patch may fail but not the associated /meta update.",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 36,
        "endChar": 22
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "675f08d1_d7f1a477",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1155610
      },
      "writtenOn": "2024-03-07T10:19:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "033e6cd8_3985b44b",
      "range": {
        "startLine": 34,
        "startChar": 0,
        "endLine": 36,
        "endChar": 22
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f98c5ee9_b62f06de",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Does not seem clear enough: I would say _\"enable the ref-updates in trial mode for the post-migration modification of changes meta-data\"_",
      "range": {
        "startLine": 157,
        "startChar": 15,
        "endLine": 157,
        "endChar": 26
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "727f91b3_22230fce",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "the notedb migration and the trial mode do not generate ref-updated stream events on the /meta ref.",
      "range": {
        "startLine": 156,
        "startChar": 10,
        "endLine": 157,
        "endChar": 10
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe8f0877_d8b1b815",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2024-03-07T14:40:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "727f91b3_22230fce",
      "range": {
        "startLine": 156,
        "startChar": 10,
        "endLine": 157,
        "endChar": 10
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d7dc64d_d5635ced",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2024-03-07T14:40:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f98c5ee9_b62f06de",
      "range": {
        "startLine": 157,
        "startChar": 15,
        "endLine": 157,
        "endChar": 26
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "415a0d8d_75e686a8",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "I would simply say that the replication of /meta refs should be disabled until the notedb migration has entered its final mode, because of the lack of transactionality. When events are generated forcibly can be used for sole logging and tracing purposes.",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 163,
        "endChar": 22
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e404b968_a4eac3d9",
        "filename": "Documentation/note-db.txt",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2024-03-07T14:40:13Z",
      "side": 1,
      "message": "Not sure I get the part about the events being generated forcibly.",
      "parentUuid": "415a0d8d_75e686a8",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 163,
        "endChar": 22
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "691c3b4c_d928cb8d",
        "filename": "java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 1
      },
      "lineNbr": 127,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "`metaRefStreamEventsInTrial` seems more accurate to me, WDYT?",
      "range": {
        "startLine": 127,
        "startChar": 54,
        "endLine": 127,
        "endChar": 71
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b9ef506_875296aa",
        "filename": "java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "`getEnableMetaRefStreamEventsInTrial`",
      "range": {
        "startLine": 148,
        "startChar": 24,
        "endLine": 148,
        "endChar": 44
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c6c02c0_ee05de36",
        "filename": "java/com/google/gerrit/server/update/ReviewDbBatchUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 345,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Why are we duplicating the injection? How is this different from L335?",
      "range": {
        "startLine": 345,
        "startChar": 6,
        "endLine": 345,
        "endChar": 45
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5336da8_1b15eb60",
        "filename": "java/com/google/gerrit/server/update/ReviewDbBatchUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 361,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "As far as I see, this is only used at L617: why fetch the flag directly from the config when needed?",
      "range": {
        "startLine": 361,
        "startChar": 4,
        "endLine": 361,
        "endChar": 73
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25d1d3c4_43e5cc1c",
        "filename": "java/com/google/gerrit/server/update/ReviewDbBatchUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 618,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "This would generate out of order events, by emitting the ref-updated event on the /meta before the patch-set, which would potentially leave the replicas (I know, we discouraged that, but people will make this mistake as the replication plugin by default will replicate them) with inconsistent state.\n\nI tried it and I see this when uploading a new patch-set:\n```\n{\"submitter\":{\"name\":\"Admin\",\"username\":\"admin\"},\"refUpdate\":{\"oldRev\":\"991a050fb6989739e6f16cbadb345795b58f6d67\",\"newRev\":\"7917ff4e2142013666440b3acf9feb7a69809665\",\"refName\":\"refs/changes/02/2/meta\",\"project\":\"test-repo\"},\"type\":\"ref-updated\",\"eventCreatedOn\":1709760832}\n{\"submitter\":{\"name\":\"Admin\",\"username\":\"admin\"},\"refUpdate\":{\"oldRev\":\"0000000000000000000000000000000000000000\",\"newRev\":\"e82893f862f5122b1321c3c7e66ea34f55149b18\",\"refName\":\"refs/changes/02/2/2\",\"project\":\"test-repo\"},\"type\":\"ref-updated\",\"eventCreatedOn\":1709760832}\n```\n\nThe first update is the `refs/changes/02/2/meta` and the second is `refs/changes/02/2/2`. The order is wrong, the safest way to notify a new patch-set, if they are not part of the same batch, is:\n1. Notify the patch-set creation\n2. Notify the /meta ref update\n\nThe right place for notification is at L294, but not here.",
      "range": {
        "startLine": 616,
        "startChar": 0,
        "endLine": 618,
        "endChar": 5
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b9391be_f05ed4bb",
        "filename": "java/com/google/gerrit/server/update/ReviewDbBatchUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 863,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "This is only used once, therefore it can be inlined.",
      "range": {
        "startLine": 860,
        "startChar": 0,
        "endLine": 863,
        "endChar": 3
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5198258_2fb44644",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 264,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "```suggestion\n      List\u003cGitReferenceUpdatedListener.Event\u003e emittedEvents \u003d new ArrayList\u003c\u003e();\n```",
      "range": {
        "startLine": 264,
        "startChar": 0,
        "endLine": 264,
        "endChar": 89
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd30552e_d03ca87d",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 265,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "```suggestion\n      testListenerHandle \u003d refUpdateListeners.add(\"gerrit\", emittedEvents::add);\n```",
      "range": {
        "startLine": 265,
        "startChar": 60,
        "endLine": 265,
        "endChar": 78
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "769aa8fc_96bf11c7",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 270,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "Redundant, we just expect 2 ref-updates",
      "range": {
        "startLine": 269,
        "startChar": 0,
        "endLine": 270,
        "endChar": 98
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f5d63be_6a5d17fc",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 272,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "I believe we should assert that we receive 2 events in order:\n1. The ref-updated for the new patch-set\n2. The ref-updated for the /meta update",
      "range": {
        "startLine": 269,
        "startChar": 0,
        "endLine": 272,
        "endChar": 50
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71de55b3_8950a9d6",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 299,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "This is the exact copy of the one above: can we DRY 90% of this test and just leave the assertion out?",
      "range": {
        "startLine": 282,
        "startChar": 0,
        "endLine": 299,
        "endChar": 5
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "340e953d_676dca68",
        "filename": "javatests/com/google/gerrit/acceptance/server/notedb/OnlineNoteDbMigrationIT.java",
        "patchSetId": 1
      },
      "lineNbr": 884,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-06T21:51:36Z",
      "side": 1,
      "message": "This can be just replaced with an inlined lambda.",
      "range": {
        "startLine": 868,
        "startChar": 0,
        "endLine": 884,
        "endChar": 3
      },
      "revId": "9c6bc4b02a39f3dba3020eb16ba2cd8151c307ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}