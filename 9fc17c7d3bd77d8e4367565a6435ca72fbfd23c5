{
  "comments": [
    {
      "key": {
        "uuid": "8d9bb78c_e198062d",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/AccountSshKey.java",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-05-05T22:18:18Z",
      "side": 1,
      "message": "Didn\u0027t we determine that 0 is invalid as well?",
      "revId": "9fc17c7d3bd77d8e4367565a6435ca72fbfd23c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d9bb78c_41921209",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/AccountSshKey.java",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-05-06T01:58:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8d9bb78c_e198062d",
      "revId": "9fc17c7d3bd77d8e4367565a6435ca72fbfd23c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ad987b90_a2ed5e9c",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/AccountSshKey.java",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-05-05T22:18:18Z",
      "side": 1,
      "message": "I forget how gwtorm works...does it call set() in order to set the field when it\u0027s converting it from a SQL row? If so, this will break when attempting to load invalid records during the schema migration.",
      "revId": "9fc17c7d3bd77d8e4367565a6435ca72fbfd23c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ad987b90_02940af7",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/AccountSshKey.java",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-05-06T01:58:50Z",
      "side": 1,
      "message": "I\u0027m not sure.  Maybe better to test this case in combination with Edwin\u0027s fixes.",
      "parentUuid": "ad987b90_a2ed5e9c",
      "revId": "9fc17c7d3bd77d8e4367565a6435ca72fbfd23c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ad831b1c_ea55070f",
        "filename": "gerrit-reviewdb/src/main/java/com/google/gerrit/reviewdb/client/AccountSshKey.java",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2016-05-06T07:20:53Z",
      "side": 1,
      "message": "Good catch!\n\nI tested the migration with having an SSH key with an invalid sequence number and now it fails, because the invalid key cannot be loaded. However the stacktrace shows that it invokes the constructor and not this set method:\n\nMigrating data to schema 124 ...\nException in thread \"main\" java.lang.IllegalArgumentException: invalid sequence number 0\n\tat com.google.gerrit.reviewdb.client.AccountSshKey$Id.checkSequenceValue(AccountSshKey.java:61)\n\tat com.google.gerrit.reviewdb.client.AccountSshKey$Id.\u003cinit\u003e(AccountSshKey.java:38)\n\tat com.google.gerrit.server.schema.Schema_124.migrateData(Schema_124.java:85)\n\tat com.google.gerrit.server.schema.SchemaVersion.migrateData(SchemaVersion.java:141)\n        ...",
      "parentUuid": "ad987b90_02940af7",
      "revId": "9fc17c7d3bd77d8e4367565a6435ca72fbfd23c5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}