{
  "comments": [
    {
      "key": {
        "uuid": "76bff38c_0924e99b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 12
      },
      "lineNbr": 875,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-08-06T22:50:52Z",
      "side": 1,
      "message": "How is this change even supposed to apply to refs/heads/* considering that the code below doesn\u0027t execute in that case?",
      "range": {
        "startLine": 875,
        "startChar": 8,
        "endLine": 875,
        "endChar": 14
      },
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96baa79a_0a24db9b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 12
      },
      "lineNbr": 875,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-08-06T22:52:35Z",
      "side": 1,
      "message": "Nevermind, !isCommit...",
      "parentUuid": "76bff38c_0924e99b",
      "range": {
        "startLine": 875,
        "startChar": 8,
        "endLine": 875,
        "endChar": 14
      },
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "76bff38c_49d2e172",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 12
      },
      "lineNbr": 880,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-08-04T20:41:45Z",
      "side": 1,
      "message": "This is always false, since obj is a RevObject and allRefs.values() is a Collection\u003cRef\u003e",
      "range": {
        "startLine": 880,
        "startChar": 44,
        "endLine": 880,
        "endChar": 74
      },
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "76bff38c_c9133178",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 12
      },
      "lineNbr": 880,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2014-08-05T13:30:31Z",
      "side": 1,
      "message": "Right! I was wrong here.\nplease see\nhttps://gerrit-review.googlesource.com/#/c/59020/",
      "parentUuid": "76bff38c_49d2e172",
      "range": {
        "startLine": 880,
        "startChar": 44,
        "endLine": 880,
        "endChar": 74
      },
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96baa79a_2a299f72",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ReceiveCommits.java",
        "patchSetId": 12
      },
      "lineNbr": 880,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-08-06T23:01:38Z",
      "side": 1,
      "message": "Even if \"existsOnServer\" is implemented correctly, this still breaks SubmitOnPushIT.submitOnPushWithTag.\n\nThat test pushes the same commit to refs/for/master%submit and refs/tags/v1.0. In that code path, parseCreate is called on the tag creation before the submit is processed, so the object does not exist on the server.\n\nBefore you suggest inspecting the rest of the commands to see if it\u0027s already being pushed somewhere else: ew. No. There has to be a better way.\n\n[1] This test only happens to be passing at head because of buggy visibility checking behavior, as illustrated by failures in https://gerrit-review.googlesource.com/59008/2",
      "parentUuid": "76bff38c_c9133178",
      "range": {
        "startLine": 880,
        "startChar": 44,
        "endLine": 880,
        "endChar": 74
      },
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96baa79a_ca2d637f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/RefControl.java",
        "patchSetId": 12
      },
      "lineNbr": 253,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-08-06T23:25:37Z",
      "side": 1,
      "message": "It is wrong to depend on canReadCommit here for the purpose of allowing/denying create of a ref that doesn\u0027t exist on the server.\n\ncanReadCommit should return true (doesn\u0027t, but will after my change) when the commit is an unsubmitted patch set of a change that is visible to the current user. We should really not allow creation of a ref pointing to an unsubmitted patch set without PUSH permission.\n\nI think this needs to be a specific check that this commit is merged only in to branches (and maybe tags). Which maybe is what your other change is doing, Bruce, so let me go check on that.",
      "revId": "9fd0c50a8a6887dbde88ff926c26f10eb0e5be07",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}