= ChangeExternalIdCaseSensitivity

== NAME
ChangeExternalIdCaseSensitivity - Convert `username` and `gerrit`
external IDs to be handled case insensitively

== SYNOPSIS
[verse]
--
_java_ -jar gerrit.war _ChangeExternalIdCaseSensitivity_
  -d <SITE_PATH>
  [--batch]
  [--dryrun]
  [--no-reindex]
--

== DESCRIPTION
Convert `username` and `gerrit` external IDs to be handled case
insensitively or case sensitively. This is done by recomputing
the name of the note from the sha1 sum of the all lowercase
external ID key or of the key with its original capitalization
respectively.

The tool uses the `auth.userNameCaseInsensitive` option to determine,
whether the migration to case insensitive usernames needs to be performed,
i.e. if the option is set to `false`, migration will be performed to make
external IDs case insensitive and if set to `true` to case sensitive.

== OPTIONS

-d::
--site-path::
	Path of the Gerrit site

--batch::
    No user interaction is required. The tool won't ask for confirmation before migrating.

--dryrun::
    Whether to perform the conversion without persisting it.

--no-reindex::
    Whether to skip the reindexing of accounts. In most cases offline reindexing
    accounts is not required, since index entries of migrated accounts will be
    invalidated and reindexed online. This will reduce the migration time considerably.
    CAREFUL: If the migration leads to user JohnDoe getting an external ID that
    previously belonged to johndoe whose account was deleted and not yet removed from the
    index, the indexed data will not match the data in NoteDB!

== CONTEXT
This command can only be run offline with direct access to the server's
site.

== EXAMPLES
To convert the external IDs to be case insensitive:

----
    $ git config -f $SITE/etc/gerrit.config auth.userNameCaseInsensitive false
    $ java -jar gerrit.war ChangeExternalIdCaseSensitivity -d site_path
----

To convert the external IDs to be case sensitive again:

----
    $ git config -f $SITE/etc/gerrit.config auth.userNameCaseInsensitive true
    $ java -jar gerrit.war ChangeExternalIdCaseSensitivity -d site_path
----


== SEE ALSO

* Configuration parameter link:config-gerrit.html#auth.userNameCaseInsensitive[auth.userNameCaseInsensitive]

GERRIT
------
Part of link:index.html[Gerrit Code Review]

SEARCHBOX
---------
