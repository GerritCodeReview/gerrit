{
  "comments": [
    {
      "key": {
        "uuid": "2f8fd5ae_be2cb9ad",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/query/change/AbstractQueryChangesTest.java",
        "patchSetId": 3
      },
      "lineNbr": 747,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-02-20T11:52:54Z",
      "side": 1,
      "message": "For me this test is failing for LuceneQueryChangesTest and LuceneQueryChangesV7Test if I\u0027m running the test from Buck. If I execute them from Eclipse they succeed.\n\nAny idea how to fix this?\n\nFAIL   8.6s 31 Passed   1 Failed   com.google.gerrit.server.query.change.LuceneQueryChangesTest\nFAILURE byAfterAbsolute:\njava.lang.AssertionError\n\tat org.junit.Assert.fail(Assert.java:86)\n\tat org.junit.Assert.assertTrue(Assert.java:41)\n\tat org.junit.Assert.assertTrue(Assert.java:52)\n\tat com.google.gerrit.server.query.change.AbstractQueryChangesTest.byAfterAbsolute(AbstractQueryChangesTest.java:795)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n\tat org.junit.runners.Suite.runChild(Suite.java:127)\n\tat org.junit.runners.Suite.runChild(Suite.java:26)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:160)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:138)\n\tat com.facebook.buck.junit.JUnitRunner.run(JUnitRunner.java:92)\n\tat com.facebook.buck.junit.JUnitRunner.main(JUnitRunner.java:250)\n\nFAIL   5.3s 33 Passed   1 Failed   com.google.gerrit.server.query.change.LuceneQueryChangesV7Test\nFAILURE byAfterAbsolute:\njava.lang.AssertionError\n\tat org.junit.Assert.fail(Assert.java:86)\n\tat org.junit.Assert.assertTrue(Assert.java:41)\n\tat org.junit.Assert.assertTrue(Assert.java:52)\n\tat com.google.gerrit.server.query.change.AbstractQueryChangesTest.byAfterAbsolute(AbstractQueryChangesTest.java:795)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n\tat org.junit.runners.Suite.runChild(Suite.java:127)\n\tat org.junit.runners.Suite.runChild(Suite.java:26)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:160)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:138)\n\tat com.facebook.buck.junit.JUnitRunner.run(JUnitRunner.java:92)\n\tat com.facebook.buck.junit.JUnitRunner.main(JUnitRunner.java:250)",
      "range": {
        "startLine": 747,
        "startChar": 14,
        "endLine": 747,
        "endChar": 31
      },
      "revId": "a0af7febe66d3c33aeb73c448222af0240b5e14c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "afd66580_6a11b76e",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/query/change/AbstractQueryChangesTest.java",
        "patchSetId": 3
      },
      "lineNbr": 747,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-20T23:02:29Z",
      "side": 1,
      "message": "My best guess is it\u0027s timezone related. Does java.util.TimeZone.getDefault() report different values in buck vs. command line?\n\nI\u0027m going to rewrite this change soon to use a different date parser and be more clear about timezones, I\u0027ll definitely take a look then.",
      "parentUuid": "2f8fd5ae_be2cb9ad",
      "range": {
        "startLine": 747,
        "startChar": 14,
        "endLine": 747,
        "endChar": 31
      },
      "revId": "a0af7febe66d3c33aeb73c448222af0240b5e14c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f8fd5ae_3e78a996",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/query/change/AbstractQueryChangesTest.java",
        "patchSetId": 3
      },
      "lineNbr": 747,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2014-02-21T08:15:22Z",
      "side": 1,
      "message": "Yes, for me the timezones are different when running this test from Eclipse (\"US/Eastern\") and from Buck (\"Europe/Berlin\"). This likely is the reason why these tests are failing for me when running them from Buck.",
      "parentUuid": "afd66580_6a11b76e",
      "range": {
        "startLine": 747,
        "startChar": 14,
        "endLine": 747,
        "endChar": 31
      },
      "revId": "a0af7febe66d3c33aeb73c448222af0240b5e14c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf12b90d_d38cf470",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/query/change/AbstractQueryChangesTest.java",
        "patchSetId": 3
      },
      "lineNbr": 747,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-21T18:06:47Z",
      "side": 1,
      "message": "That\u0027s odd. US/Eastern is expected since that\u0027s what we set in setTimeForTesting above. Why it shouldn\u0027t be working in buck is unclear. If multiple instances of this test are running concurrently there might be a race on setting the system property, but I was pretty sure tests were single-threaded.",
      "parentUuid": "2f8fd5ae_3e78a996",
      "range": {
        "startLine": 747,
        "startChar": 14,
        "endLine": 747,
        "endChar": 31
      },
      "revId": "a0af7febe66d3c33aeb73c448222af0240b5e14c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0fc771d6_c5eedada",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/query/change/AbstractQueryChangesTest.java",
        "patchSetId": 3
      },
      "lineNbr": 747,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-02-21T21:05:09Z",
      "side": 1,
      "message": "Fixed in [1].\n\n[1] https://gerrit-review.googlesource.com/#/c/54794",
      "parentUuid": "cf12b90d_d38cf470",
      "range": {
        "startLine": 747,
        "startChar": 14,
        "endLine": 747,
        "endChar": 31
      },
      "revId": "a0af7febe66d3c33aeb73c448222af0240b5e14c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}