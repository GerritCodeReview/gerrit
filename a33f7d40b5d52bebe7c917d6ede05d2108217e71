{
  "comments": [
    {
      "key": {
        "uuid": "744806fe_de8e251d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_117.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-01-27T07:29:53Z",
      "side": 1,
      "message": "You don\u0027t need this select, to retrieve the column name. Yes, it was done in schema 115 migration, but only because a select statement was needed there anyway. Here it\u0027s not, and patch sets is the biggest table. Instea use listcolumns method from JdbcDialect:\n\n    JdbcSchema jdbcSchema \u003d (JdbcSchema) db;\n    Set\u003cString\u003e columns \u003d jdbcSchema.getDialect().listColumns(\n        jdbcSchema.getConnection(), \"patch_sets\");\n    if (columns.contains(\"push_certficate\")) {\n      renameColumn(db, \"patch_sets\", \"push_certficate\", \"push_certificate\");\n    }",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 67
      },
      "revId": "a33f7d40b5d52bebe7c917d6ede05d2108217e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9441fad9_9f6f3303",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_117.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2016-01-27T09:28:46Z",
      "side": 1,
      "message": "+1 Don\u0027t use SELECT\n\nJust for completeness of discussion:\nWhen using SELECT for this append \" LIMIT 1\" to limit the number of fetched rows.",
      "parentUuid": "744806fe_de8e251d",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 67
      },
      "revId": "a33f7d40b5d52bebe7c917d6ede05d2108217e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9441fad9_bf7477d3",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_117.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-01-27T09:35:49Z",
      "side": 1,
      "message": "No. It wouldn\u0027t work for all SQL dialects since adding support for Apache Derby: [1]. You would have to use new introduced method SqlDialect#getLimitSql() ti make your suggestion work for all dialects.\n\n* [1] https://gerrit-review.googlesource.com/#/c/69777/9",
      "parentUuid": "9441fad9_9f6f3303",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 67
      },
      "revId": "a33f7d40b5d52bebe7c917d6ede05d2108217e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f41dd6f7_da1145a3",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_117.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-01-27T09:37:42Z",
      "side": 1,
      "message": "Done in patch set 2.",
      "parentUuid": "9441fad9_bf7477d3",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 36,
        "endChar": 67
      },
      "revId": "a33f7d40b5d52bebe7c917d6ede05d2108217e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "744806fe_3e2f09c8",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_117.java",
        "patchSetId": 1
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2016-01-27T07:17:36Z",
      "side": 1,
      "message": "Optional: extract to a class variable, as it\u0027s used more than once.",
      "range": {
        "startLine": 37,
        "startChar": 38,
        "endLine": 37,
        "endChar": 55
      },
      "revId": "a33f7d40b5d52bebe7c917d6ede05d2108217e71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}