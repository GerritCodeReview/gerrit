{
  "comments": [
    {
      "key": {
        "uuid": "19a1880c_4e3693d2",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/rpc/changedetail/PatchSetDetailFactory.java",
        "patchSetId": 3
      },
      "lineNbr": 173,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "Optional nit: we tend to put the : on the following line.\n\nAlso this final is unnecessary so you might be able to fit it on one line anyway.",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_0c9db78b",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/rpc/changedetail/PatchSetDetailFactory.java",
        "patchSetId": 3
      },
      "lineNbr": 173,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "19a1880c_4e3693d2",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_2cb99305",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ChangeUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 511,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "See my note below. I\u0027m not sure they actually have to be removed removed, we should just filter out all comments (like approvals) for deleted patch sets.",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_ec24ab9d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/ChangeUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 511,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9aa90eb_2cb99305",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_0cb65713",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/PatchLineCommentsUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "No need to create an extra list, just\n\n for (PatchLineComment c : byChange(db, notes))",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_6c9a7b95",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/PatchLineCommentsUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 76,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9aa90eb_0cb65713",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "595ea0fe_58065dad",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/PatchLineCommentsUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-07-29T11:38:59Z",
      "side": 1,
      "message": "We normally don\u0027t mess around with null values. Either we have an error case here, in which case we should fail earlier and loud and probably log and throw not found exception, or the value may be really absent then we should use Optional\u003cT\u003e to make it transparent to the caller that the return value may be absent. See also this link [1] for more information why returning null is a bad idea [1]. Also note that ReviewDb implementation never returns null for get(key) method for all entities.\n\n [1] https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained",
      "range": {
        "startLine": 82,
        "startChar": 11,
        "endLine": 82,
        "endChar": 15
      },
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_6cc39b6d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/PatchLineCommentsUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 265,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "I don\u0027t think you ever use the values, you could return .keySet() from this method.",
      "range": {
        "startLine": 265,
        "startChar": 10,
        "endLine": 265,
        "endChar": 13
      },
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19a1880c_2e56a7e8",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/PatchLineCommentsUtil.java",
        "patchSetId": 3
      },
      "lineNbr": 265,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9aa90eb_6cc39b6d",
      "range": {
        "startLine": 265,
        "startChar": 10,
        "endLine": 265,
        "endChar": 13
      },
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19a1880c_8e46bb37",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ListDrafts.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "Is this behavior change necessary?",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19a1880c_0e53ebf8",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ListDrafts.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Hm, kind of. In CommentsTest, there is a method that asserts that a PatchLineComment is the same as a CommentInfo and it asserts that the author info is included. I could change the test assert method or I could change this. I wasn\u0027t sure which was preferred/why that test method was asserting that the author info be included...",
      "parentUuid": "19a1880c_8e46bb37",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9c370c9_441cae85",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ListDrafts.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T22:54:42Z",
      "side": 1,
      "message": "This is a public REST API, you should change the test method. Author info is intentionally omitted from drafts because it\u0027s implied by context (the user being authenticated). For published comments, ListComments inherits from ListDrafts and overrides this method to return true. That is a bit obtuse, but matches the intended/documented behavior of the REST API.\n\nWhy we thought having ListComments inherit from ListDrafts was a good idea is beyond me.",
      "parentUuid": "19a1880c_0e53ebf8",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_6c39dbc2",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ListDrafts.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T23:05:59Z",
      "side": 1,
      "message": "Gotcha. I was confused about why that constant was what it was, but that makes sense. Done",
      "parentUuid": "d9c370c9_441cae85",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_4cc05f5f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 3
      },
      "lineNbr": 533,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "byChange is the ugliest method in PLCUtil. Looking at the callers of this method, I think most of them just want published comments, not drafts. For example, ChangeField.COMMENTS really shouldn\u0027t be indexing drafts.\n\nThe exception is HasDraftByPredicate, which is _only_ interested in drafts.\n\nSo it would probably make sense to split this into publishedComments() and draftComments(), which would both have simpler implementations in PLCUtil.\n\nThat particular fix should probably be in a separate change, either before or after this one.",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_4c97bf69",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/ChangeData.java",
        "patchSetId": 3
      },
      "lineNbr": 533,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Acknowledged. I will make the change after this one..",
      "parentUuid": "d9aa90eb_4cc05f5f",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19a1880c_ee3bffb5",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/HasDraftByPredicate.java",
        "patchSetId": 3
      },
      "lineNbr": 44,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "This basically works (though see my other comments on this method), but more efficient would be to use draftByAuthor here as well.",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_ac1aa35f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/HasDraftByPredicate.java",
        "patchSetId": 3
      },
      "lineNbr": 44,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "I made another method called draftByChangeAuthor that I think would be even more efficient because we wouldn\u0027t have to scan refs.",
      "parentUuid": "19a1880c_ee3bffb5",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9c370c9_a4476265",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/query/change/HasDraftByPredicate.java",
        "patchSetId": 3
      },
      "lineNbr": 44,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T22:54:42Z",
      "side": 1,
      "message": "Good plan.",
      "parentUuid": "d9aa90eb_ac1aa35f",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_8cb08714",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/change/CommentsTest.java",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "You need to set draft comments true as well or you\u0027re not testing those code paths",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19a1880c_6e50afea",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/change/CommentsTest.java",
        "patchSetId": 3
      },
      "lineNbr": 107,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9aa90eb_8cb08714",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_acabc3a6",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/change/CommentsTest.java",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-07-25T21:48:11Z",
      "side": 1,
      "message": "No need to do to this in a separate module. Add a @Provides method to the module above:\n\n @Provides\n @Singleton\n CurrentUser getCurrentUser(IdentifiedUser.GenericFactory userFactory) {\n   return userFactory.create(ownerId);\n }",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9aa90eb_8c1fe74f",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/change/CommentsTest.java",
        "patchSetId": 3
      },
      "lineNbr": 208,
      "author": {
        "id": 1016407
      },
      "writtenOn": "2014-07-25T22:32:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d9aa90eb_acabc3a6",
      "revId": "a3a39b9392cabb94bbcd7d92df179cb651c0c785",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}