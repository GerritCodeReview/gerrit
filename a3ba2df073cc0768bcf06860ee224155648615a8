{
  "comments": [
    {
      "key": {
        "uuid": "002a3b7a_8e40bb90",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 2
      },
      "lineNbr": 956,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-06-28T13:31:53Z",
      "side": 1,
      "message": "I\u0027m a little worried about the performance implications of this. This call unconditionally opens the repo to get the kind, and this path is called whenever the caller requests CURRENT_REVISION or ALL_REVISIONS. Fortunately those are not called to render standard dashboards, otherwise I would say this is definitely not ok.\n\nIn an ideal world we would store change kinds for all patch sets, or at the very least for the current patch set, in the index. That would be kind of a lot of work though.\n\nAs a compromise I could be ok with this if you rewrite the loop in revisions() above to open the repo exactly once. You will need to tweak ChangeKindCache to add a method that takes the Repository and ChangeData.",
      "revId": "a3ba2df073cc0768bcf06860ee224155648615a8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c033c3f3_ec186b7d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 2
      },
      "lineNbr": 956,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-29T03:57:48Z",
      "side": 1,
      "message": "The repository is opened anyway at line 963 when the caller requests ALL_COMMITS or when it\u0027s the current commit and CURRENT_COMMIT or COMMIT_FOOTERS is set.\n\nHow about just moving this into that block?",
      "parentUuid": "002a3b7a_8e40bb90",
      "revId": "a3ba2df073cc0768bcf06860ee224155648615a8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a02ecf8e_4b208591",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 2
      },
      "lineNbr": 956,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-29T05:00:19Z",
      "side": 1,
      "message": "\u003e rewrite the loop in revisions() above to open the repo exactly once. You will need to tweak ChangeKindCache to add a method that takes the Repository and ChangeData.\n\nDone in the two separate changes below this one.",
      "parentUuid": "002a3b7a_8e40bb90",
      "revId": "a3ba2df073cc0768bcf06860ee224155648615a8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}