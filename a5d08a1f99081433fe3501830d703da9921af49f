{
  "comments": [
    {
      "key": {
        "uuid": "402b0eb9_64cab4f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2020-09-17T12:04:21Z",
      "side": 1,
      "message": "I\u0027m a bit confused by this change. The threaded feedback design is already implemented. During the implementation, we decided to use the name \"patchset-level\" as it turned out that change messages are always associated with a patchset. Hence, the natural mapping was \"change messages\" -\u003e \"patchset-level\" comments. Patchset-level comments are fully implemented and supported in Gerrit. I\u0027m in fact even using such a patchset-level comment for writing this comment right now.\n\nJacek, can you please elaborate what the intention of this change is given that we already have patchset-level comments?",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d769f6b6_436df35a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T12:45:03Z",
      "side": 1,
      "message": "Ups... it seems that I have missed it somehow ;)\nAnyway I was under impression that patchset comments are not exactly the same as they are VISUALLY bound to the particular ps (in my proposal \u0027/CHANGE_LEVEL\u0027 comments are not ;)) not necessarily relating to the whole change.\nIn addition when one replies (through the main \u0027Reply\u0027 button not through any \u0027reply\u0027 link) feedback is posted as regular message which is not thread\u0027able unless feature flag \u0027UiFeature__patchset_comments\u0027 is used (at least this is what see in my locally built master). To sum it up: have noticed patchset comments but was rather under impression that they are exactly what the feature is about...",
      "parentUuid": "402b0eb9_64cab4f0",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b05e88c_0435da85",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T12:45:03Z",
      "side": 1,
      "message": "Wondering if that comment will be visible in patchset level...",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "33b6feca_c3a5b8df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T12:48:06Z",
      "side": 1,
      "message": "It seems that gerrit-review page works by default with \u0027UiFeature__patchset_comments\u0027 enabled which I haven\u0027t noticed :/",
      "parentUuid": "0b05e88c_0435da85",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55e00828_614b47c4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T12:48:06Z",
      "side": 1,
      "message": "they are exactly \u003d they are NOT exactly ;)",
      "parentUuid": "d769f6b6_436df35a",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8387224e_b2e3dc5e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2020-09-17T12:56:21Z",
      "side": 1,
      "message": "\u0027UiFeature__patchset_comments\u0027 is a feature flag we introduced for gradual rollout of the feature. We still need it as some tool owners haven\u0027t switched fully from change messages to patchset-level comments. The flag just influences whether the \"Reply\" dialog posts change messages or patchset-level comments. The rest of the handling of patchset-level comments (such as replies to them even via the UI) is not guarded by this flag.\n\nI\u0027d expect that we can remove the feature flag at the beginning of November which should be right in time for Gerrit 3.4.",
      "parentUuid": "55e00828_614b47c4",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c74e2043_55ac7285",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-09-17T13:02:22Z",
      "side": 1,
      "message": "So the experiment has 100% rollout on canary(gerrit-review). The flag allows you to enable the experiment on hosts which do not have the experiment enabled.",
      "parentUuid": "33b6feca_c3a5b8df",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7def451c_dcb5924a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T13:20:28Z",
      "side": 1,
      "message": "I wonder how it works for you as it was IMHO broken until I have fixed it in [1] but I guess you have some other means to enforce it ;)\n\nSorry for not reviewing it earlier but initial commit message on [2] led me to build the impression that this is sth not related which resulted in me not seeing it at all (totally my fault all I can say for my defend is that I was busy elsewhere hence had to prioritise :/). \n\nRegardless ;) Do you think that making it visually less related to the PS would be closer to what \u0027change message\u0027 currently delivers (which is PS agnostic change feedback) obviously offering also the possibility to thread it?\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/281661\n[2] https://gerrit-review.googlesource.com/c/gerrit/+/259613",
      "parentUuid": "8387224e_b2e3dc5e",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92e54ebd_c83cea8f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2020-09-17T13:32:24Z",
      "side": 1,
      "message": "\u003e Regardless ;) Do you think that making it visually less related to the PS would be closer to what \u0027change message\u0027 currently delivers (which is PS agnostic change feedback) obviously offering also the possibility to thread it?\n\nChange messages are not agnostic to patchsets. They are always associated with one. On larger screens, the \"Patchset X\" indicator just moves further to the right.\n\nThat\u0027s comparable to the \"Patchset X\" indicator of a comment, which is just a bit closer to the message on large screens.\n\nHence, adding messages/comments to Gerrit which aren\u0027t associated with patchsets would be a completely new feature, also UX wise. Before we think about this or about hiding the patchset-relation of patchset-level comments, what\u0027s the use case you\u0027re thinking of? When would users not want to have a patchset-association? When would it be harmful?",
      "parentUuid": "7def451c_dcb5924a",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4085aae0_54d7c0a3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-17T14:30:02Z",
      "side": 1,
      "message": "\u003e Change messages are not agnostic to patchsets. They are always associated with one.\n\nThey are for sure recorded with one. But I believe that it is a matter of perception. Imagine the scenario when feedback is given to PS#1, owner rebases the change 2 times so it is in PS#3 now. Does that change anything in the feedback that change received? Not really (obviously there will be cases when it does but \u0027copyAllScoresOnTrivialRebase\u0027 is there for a reason) so in this case feedback is not related to the PS.\n\nIMHO good example is in [1]. AFAICT people debated on the rationality behind the change regardless of the PS# their feedback was recorded with. There is a relation between a PS and feedback. Typically new PS is a result of the feedback (specific in particular line or general when reply button is used) and that is nicely captured by the \u0027Change Log\u0027. However, fundamental questions (like the one that you raised against this very change ;)) are IMHO independent from PS. My assumption was/is that it forms a discussion that happens in parallel to what is done in the code (hence no file, line, side or PS ;)) hence grouping it by PS seems to be suboptimal to me. Is this harmful? I don\u0027t know, a bit unexpected to me for sure. Could/Should we improve it? That is the question that I wanted to ask :)\n\n[1] https://gerrit-review.googlesource.com/c/plugins/replication/+/267812",
      "parentUuid": "92e54ebd_c83cea8f",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6205caee_bb70cb82",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2020-09-18T13:46:27Z",
      "side": 1,
      "message": "My gut feeling is that the additional complexity in the code and on the UI would not be worth it. We would also need to come up with different UX workflows to both support change- and patchset-level comments, which would be very confusing for users if not done right.",
      "parentUuid": "4085aae0_54d7c0a3",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee29335c_8474db7c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2020-09-18T22:08:33Z",
      "side": 1,
      "message": "\u003e My gut feeling is that the additional complexity in the code and on the UI would not be worth it.\n\u003e We would also need to come up with different UX workflows to both support change- and patchset-level comments...\n\nIntention behind the \u0027/PATCHSET_LEVEL\u0027 wasn\u0027t clear (and visible in local dev) to me hence I have proposed the \u0027/CHANGE_LEVEL\u0027. Now I don\u0027t believe that we need these two (this change is going to be abandoned).\n\nI would propose the following:\n1. keep the \u0027Pathset X\u0027 indicator of a comment (so that relation is clear - I can see the value in knowing when the discussion started)\n2. get rid of \u0027Patchset\u0027 grouping header (IMHO that anchors unnecessarily general discussion to the specific PS) - having none would cleanly indicate that change as a whole is being discussed (groups could be still ordered by patchset number so that one could easily understand of when particular thread started).",
      "parentUuid": "6205caee_bb70cb82",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1248f25_8f4f5b58",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2020-09-22T15:58:12Z",
      "side": 1,
      "message": "I remember that we discussed the \"Patchset\" grouping header during the implementation. At that time, we needed it as comments were shuffled on the \"Comments\" tab and a section without header could have been interpreted as belonging to the previous section. For the other representations (e.g. emails; change log), we wanted to apply a consistent style.\n\nNow that we have a fixed ordering (patchset-level comments first, then comments ordered by file path), we could leave out the \"Patchset\" header as you suggested. I thought we even discussed it during the implementation and I thought we wanted to remove it once the fixed ordering was in place but I\u0027m not sure anymore. Dhruv, do you still remember what we agreed on?\n\nIn any case, if we decide to remove the \"Patchset\" grouping, we should do so in all views we show such comments. Out of the top of my head, these are at least:\n- \"Comments\" tab\n- Entry in \"Change Log\"\n- Emails",
      "parentUuid": "ee29335c_8474db7c",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51548fb9_4e5742a5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-09-23T11:05:22Z",
      "side": 1,
      "message": "I took a look at the mocks and it looks like the Patchset header is supposed to be there.\nWe can let Delphine decide once she comes back from vacation. I assigned a bug to keep track of this.",
      "parentUuid": "b1248f25_8f4f5b58",
      "revId": "a5d08a1f99081433fe3501830d703da9921af49f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}