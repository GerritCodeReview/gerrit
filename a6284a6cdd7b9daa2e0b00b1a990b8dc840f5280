{
  "comments": [
    {
      "key": {
        "uuid": "e6561ce6_bf5bb12f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 24
      },
      "lineNbr": 9,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "update",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5002db77_6c18d62e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 24
      },
      "lineNbr": 9,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e6561ce6_bf5bb12f",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5968def2_d151713a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 24
      },
      "lineNbr": 11,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "pattern",
      "range": {
        "startLine": 11,
        "startChar": 5,
        "endLine": 11,
        "endChar": 13
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8acf358_ad4d164d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 24
      },
      "lineNbr": 11,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5968def2_d151713a",
      "range": {
        "startLine": 11,
        "startChar": 5,
        "endLine": 11,
        "endChar": 13
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d27088b8_47ff2549",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 24
      },
      "lineNbr": 136,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "remove",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "feff22c8_99d8e440",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 24
      },
      "lineNbr": 136,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d27088b8_47ff2549",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3a82baf_e96a5b6f",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 24
      },
      "lineNbr": 137,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "update",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ffa65e0c_80100f71",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 24
      },
      "lineNbr": 137,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3a82baf_e96a5b6f",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dcdb72ac_0ca52f66",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 188,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "unused, remove",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5cba9020_4e76864e",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 188,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dcdb72ac_0ca52f66",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56175e50_dd95aece",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 259,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Nit: _patchrange is always set as a whole, so I would rather just observe \"_patchRange\" without \".*\".\n\nIf you stick with the current version, then may have to check patchRangeRecord.base to be undefined as in _getFiles().",
      "range": {
        "startLine": 259,
        "startChar": 57,
        "endLine": 259,
        "endChar": 68
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10ddef68_4d793c21",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 259,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Added undefined check.",
      "parentUuid": "56175e50_dd95aece",
      "range": {
        "startLine": 259,
        "startChar": 57,
        "endLine": 259,
        "endChar": 68
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05660f87_703cf208",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 796,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Maybe this could become a \"initPatchRange\" method instead?",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21d57948_b0482fbd",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 796,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "05660f87_703cf208",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3636901d_bb46fa8f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 799,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "You are accessing a private property of the ChangeComments class here. Don\u0027t do that. Instead add a method to ChangeComments that finds a comment by id.",
      "range": {
        "startLine": 799,
        "startChar": 34,
        "endLine": 799,
        "endChar": 43
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1238107_735dcacf",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 799,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3636901d_bb46fa8f",
      "range": {
        "startLine": 799,
        "startChar": 34,
        "endLine": 799,
        "endChar": 43
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02f3cbc8_ea1b8398",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 841,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-24T12:48:08Z",
      "side": 1,
      "message": "I didn\u0027t review chane in detail, because you asked for a sanity check.\nThe change has some updates in different methods, related to commentlink. This can be good from performance point of view, but for me it makes code less clear. \n\nI can suggest to call additional code for commentLink before any other code and make a minimal changes in existing code.\n\nFor example, this can be done in this way:\nrename _paramsChanged to _paramsChangedOld (I know, name is not good, i didn\u0027t think about better naming)\n\nThen, reimplement _paramsChanged:\n_paramsChanged(value) {\n  const loadCommentsPromise \u003d this._loadComments();\n  return getFullParams(value, loadCommentsPromise).then(fullParams \u003d\u003e _paramsChangedOld(fullParams, loadCommentsPromise));\n}\n\nfunction getFullParams(value, loadCommentsPromise) {\n  if(!value.commentLink) return Promise.resolve(value);\n  return loadCommentsPromise.then(comments \u003d\u003e getParamsForCommentLink(comments, value));\n}\n\nfunction getParamsForCommentLink(changeComments, params) {\n   // Use params.commentId to find path and patchnum\n   // Create new params or update existing one (I prefer create a new ony)\n   // return created/updated params\n}\n\nfunction _paramsChangedOld(value, loadCommentsPromise) {\n   // Code remains almost unchanged, except 1 line\n   ...\n   // Replace the line\n   // promises.push(this._loadComments());\n   // with\n   promises.push(loadCommentsPromise);\n   ...\n}\n\nWhat do you think about it?",
      "range": {
        "startLine": 841,
        "startChar": 0,
        "endLine": 841,
        "endChar": 25
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3f5385f_98dbe110",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 841,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T13:01:13Z",
      "side": 1,
      "message": "I don\u0027t really like that idea. The gr-diff-view is already suffering from ten people trying to make the least invasive change, but it is not actually that hard to look at the somewhat bigger picture.\n\nI find my comments rather small. That could all be fixed and cleaned up in 15 minutes.\n\nAlso, I have performance concerns, because I think it would be beneficial to keep loading change and comments in parallel.\n\nThis is an opportunity to clean up the paramsChanged() method: Kick off all the promises first, do all the initialization only when all promises have resolved.",
      "parentUuid": "02f3cbc8_ea1b8398",
      "range": {
        "startLine": 841,
        "startChar": 0,
        "endLine": 841,
        "endChar": 25
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3420413e_4f9038e9",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 841,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-24T13:46:52Z",
      "side": 1,
      "message": "Agree. Long term, it is better to clear paramsChanged rather than add a new level on top of existing one.",
      "parentUuid": "a3f5385f_98dbe110",
      "range": {
        "startLine": 841,
        "startChar": 0,
        "endLine": 841,
        "endChar": 25
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f1508ae_e64f9ccd",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 849,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Can this be moved to line 987, so it does not have to be called twice?\n\nGenerally I don\u0027t think we want to or have to initialize anything other than the _changeNum before all the promises have resolved. That makes it easier to understand and change this method, e.g. in the way that you are currently doing. When all the promises have resolved, then we have the change, the comments and the prefs.",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe5ba505_089c1d89",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 849,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2f1508ae_e64f9ccd",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a72d28a_653f40db",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 853,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Not your change, but it feels to me as if a more aggressive reset of properties is warranted at this point. Maybe:\n\n  this._change \u003d undefined;\n  this._files \u003d undefined;\n  this._path \u003d undefined;\n  this._patchRange \u003d undefined;\n  this._commitRange \u003d undefined;\n  this._changeComments \u003d undefined;\n\nWDYT?",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a5a52ff_bb9c8eeb",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 853,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Any benefit of this?\nAll of them are being overwritten at some point.",
      "parentUuid": "1a72d28a_653f40db",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dab590c9_bdf868df",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 853,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-27T17:09:11Z",
      "side": 1,
      "message": "Are you sure that they are all overridden before being used?\n\nPolymer has a lot of observing going on, so I have often seen bugs where one property had still the old value, but another was already initialized with a new value. That is why I think it is better to force undefined everywhere, if you init something.\n\nAny downside of this? Should be easy to add and I don\u0027t know what bad can come out of it.",
      "parentUuid": "2a5a52ff_bb9c8eeb",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9fb47a82_0bded7a6",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 863,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Can the initialization of _patchRange and _path be moved to line 896?",
      "range": {
        "startLine": 856,
        "startChar": 4,
        "endLine": 863,
        "endChar": 6
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddd7100c_f8114ca9",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 863,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9fb47a82_0bded7a6",
      "range": {
        "startLine": 856,
        "startChar": 4,
        "endLine": 863,
        "endChar": 6
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b07ca2a7_f7415249",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 868,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Not your change, but despite the comment I don\u0027t understand why this can happen. Can you add a console.warn() before the return?\n\nAlso maybe move to line 842.",
      "range": {
        "startLine": 865,
        "startChar": 4,
        "endLine": 868,
        "endChar": 76
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c457dcd1_29ffcb43",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 868,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b07ca2a7_f7415249",
      "range": {
        "startLine": 865,
        "startChar": 4,
        "endLine": 868,
        "endChar": 76
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f429de8_67de16be",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 868,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-27T17:09:11Z",
      "side": 1,
      "message": "Sure? :-)",
      "parentUuid": "c457dcd1_29ffcb43",
      "range": {
        "startLine": 865,
        "startChar": 4,
        "endLine": 868,
        "endChar": 76
      },
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3f0dd05_a6e6d192",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 883,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2020-07-24T12:38:42Z",
      "side": 1,
      "message": "Can this be moved to line 896, so it does not have to be called twice?",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e8bc703_195a0423",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 24
      },
      "lineNbr": 883,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-27T11:39:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3f0dd05_a6e6d192",
      "revId": "a6284a6cdd7b9daa2e0b00b1a990b8dc840f5280",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}