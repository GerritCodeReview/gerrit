{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e6bfe884_dd464c2e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2021-09-09T06:48:14Z",
      "side": 1,
      "message": "1. Without the fix, the tests fail:\nREST Test case:\n\n$ bazel test --test_filter\u003dcom.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT -- //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection\nINFO: Invocation ID: 58bca602-bd3c-4493-a4de-f7fc0f926ab3\nDEBUG: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/bazel_toolchains/rules/rbe_repo/version_check.bzl:68:14: \nCurrent running Bazel is ahead of bazel-toolchains repo. Please update your pin to bazel-toolchains repo in your WORKSPACE file.\nINFO: Analyzed target //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection (0 packages loaded, 0 targets configured).\nINFO: Found 1 test target...\nFAIL: //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection (see /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/execroot/gerrit/bazel-out/darwin-fastbuild/testlogs/javatests/com/google/gerrit/acceptance/rest/rest_bindings_collection/test.log)\nINFO: From Testing //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d Test output for //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection:\nJUnit4 Test Runner\n.WARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by com.google.inject.assistedinject.FactoryProvider2 (file:/private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/guice-assistedinject/jar/guice-assistedinject-4.2.3.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)\nWARNING: Please consider reporting this to the maintainers of com.google.inject.assistedinject.FactoryProvider2\nWARNING: Use --illegal-access\u003dwarn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027WorkQueue\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027Index-Interactive\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027ReceiveCommits\u0027 queue\nWARN  com.google.gerrit.server.documentation.QueryDocumentationExecutor : No index available\nINFO  com.google.gerrit.server.rules.PrologEnvironment : reductionLimit: 100000, compileLimit: 1000000\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"gc\".\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"changeCleanup\".\nWARN  com.google.gerrit.server.plugins.PluginLoader : Unable to discover stale plugin files: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/55/execroot/gerrit/_tmp/1af269132d3ad032ce7f68ea7626be18/junit12669044086636911585/junit13363073516130065417/tmp\nINFO  com.google.gerrit.server.plugins.PluginLoader : /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/55/execroot/gerrit/_tmp/1af269132d3ad032ce7f68ea7626be18/junit12669044086636911585/junit13363073516130065417/plugins does not exist; creating\nINFO  com.google.gerrit.server.plugins.PluginLoader : Loading plugins from /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/55/execroot/gerrit/_tmp/1af269132d3ad032ce7f68ea7626be18/junit12669044086636911585/junit13363073516130065417/plugins\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"accountDeactivation\".\nElog4j:WARN No appenders could be found for logger (com.google.gerrit.server.config.ScheduleConfig).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n\nTime: 4.604\nThere was 1 failure:\n1) testBeanParseListener(com.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT)\nvalue of: map.size()\nexpected: 1\nbut was : 5\nmap was : {All-Projects\u003d{id\u003dAll-Projects, state\u003dACTIVE}, All-Users\u003d{id\u003dAll-Users, state\u003dACTIVE}, com.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project\u003d{id\u003dcom.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project, state\u003dACTIVE}, com.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project1\u003d{id\u003dcom.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project1, state\u003dACTIVE}, com.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project2\u003d{id\u003dcom.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project2, state\u003dACTIVE}}\n\tat com.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT.testBeanParseListener(DynamicOptionsBeanParseListenerIT.java:39)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\nFAILURES!!!\nTests run: 1,  Failures: 1\n\n\nBazelTestRunner exiting with a return value of 1\nJVM shutdown hooks (if any) will run now.\nThe JVM will exit once they complete.\n\n-- JVM shutdown starting at 2021-09-09 06:36:29 --\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nTarget //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection up-to-date:\n  bazel-bin/javatests/com/google/gerrit/acceptance/rest/rest_bindings_collection.jar\n  bazel-bin/javatests/com/google/gerrit/acceptance/rest/rest_bindings_collection\nINFO: Elapsed time: 6.055s, Critical Path: 5.79s\nINFO: 5 processes: 3 remote cache hit, 1 internal, 1 darwin-sandbox.\nINFO: Build completed, 1 test FAILED, 5 total actions\n//javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection   FAILED in 5.5s\n\n\n\nSSH Test case:\n\n\n$ bazel test --test_filter\u003dcom.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT -- //javatests/com/google/gerrit/acceptance/ssh:ssh\nINFO: Invocation ID: 5e5f3f84-159d-459c-8ecc-a446eae82e98\nDEBUG: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/bazel_toolchains/rules/rbe_repo/version_check.bzl:68:14: \nCurrent running Bazel is ahead of bazel-toolchains repo. Please update your pin to bazel-toolchains repo in your WORKSPACE file.\nINFO: Build option --test_filter has changed, discarding analysis cache.\nINFO: Analyzed target //javatests/com/google/gerrit/acceptance/ssh:ssh (0 packages loaded, 4453 targets configured).\nINFO: Found 1 test target...\nINFO: From BazelWorkspaceStatusAction stable-status.txt:\nfatal: this operation must be run in a work tree\nFAIL: //javatests/com/google/gerrit/acceptance/ssh:ssh (see /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/execroot/gerrit/bazel-out/darwin-fastbuild/testlogs/javatests/com/google/gerrit/acceptance/ssh/ssh/test.log)\nINFO: From Testing //javatests/com/google/gerrit/acceptance/ssh:ssh:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d Test output for //javatests/com/google/gerrit/acceptance/ssh:ssh:\nJUnit4 Test Runner\n.WARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by com.google.inject.assistedinject.FactoryProvider2 (file:/private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/guice-assistedinject/jar/guice-assistedinject-4.2.3.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)\nWARNING: Please consider reporting this to the maintainers of com.google.inject.assistedinject.FactoryProvider2\nWARNING: Use --illegal-access\u003dwarn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027WorkQueue\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027Index-Interactive\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027ReceiveCommits\u0027 queue\nWARN  com.google.gerrit.server.documentation.QueryDocumentationExecutor : No index available\nINFO  com.google.gerrit.server.rules.PrologEnvironment : reductionLimit: 100000, compileLimit: 1000000\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"gc\".\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"changeCleanup\".\nSep 09, 2021 6:36:55 AM com.google.inject.assistedinject.FactoryProvider2 isValidForOptimizedAssistedInject\nWARNING: AssistedInject factory com.google.gerrit.sshd.DispatchCommand$Factory will be slow because class com.google.gerrit.sshd.DispatchCommand has assisted Provider dependencies or injects the Injector. Stop injecting @Assisted Provider\u003cT\u003e (instead use @Assisted T) or Injector to speed things up. (It will be a ~6500% speed bump!)  The exact offending deps are: [Key[type\u003dcom.google.inject.Injector, annotation\u003d[none]]@com.google.gerrit.sshd.BaseCommand.injector]\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027SshCommandStart\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027SSH-Stream-Worker\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027SSH-Interactive-Worker\u0027 queue\nINFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for \u0027SSH-Batch-Worker\u0027 queue\nWARN  com.google.gerrit.server.plugins.PluginLoader : Unable to discover stale plugin files: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/57/execroot/gerrit/_tmp/6640f52d6ac6e5caee8421a358c8a4ba/junit13220742097214138954/junit7375703639830707739/tmp\nINFO  com.google.gerrit.server.plugins.PluginLoader : /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/57/execroot/gerrit/_tmp/6640f52d6ac6e5caee8421a358c8a4ba/junit13220742097214138954/junit7375703639830707739/plugins does not exist; creating\nINFO  com.google.gerrit.server.plugins.PluginLoader : Loading plugins from /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/sandbox/darwin-sandbox/57/execroot/gerrit/_tmp/6640f52d6ac6e5caee8421a358c8a4ba/junit13220742097214138954/junit7375703639830707739/plugins\nINFO  com.google.gerrit.server.config.ScheduleConfig : No schedule configuration for \"accountDeactivation\".\nINFO  com.google.gerrit.sshd.SshDaemon : Started Gerrit SSHD-CORE-2.0.0 on localhost:0\nEINFO  com.google.gerrit.sshd.SshDaemon : Stopped Gerrit SSHD\nlog4j:WARN No appenders could be found for logger (com.google.gerrit.server.config.ScheduleConfig).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n\nTime: 4.945\nThere was 1 failure:\n1) testBeanParseListener(com.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT)\nvalue of    : iterable.size()\nexpected    : 1\nbut was     : 5\niterable was: [All-Projects, All-Users, com.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project, com.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project1, com.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT_testBeanParseListener_project2]\n\tat com.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT.testBeanParseListener(DynamicOptionsBeanParseListenerIT.java:41)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\nFAILURES!!!\nTests run: 1,  Failures: 1\n\n\nBazelTestRunner exiting with a return value of 1\nJVM shutdown hooks (if any) will run now.\nThe JVM will exit once they complete.\n\n-- JVM shutdown starting at 2021-09-09 06:36:57 --\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nTarget //javatests/com/google/gerrit/acceptance/ssh:ssh up-to-date:\n  bazel-bin/javatests/com/google/gerrit/acceptance/ssh/ssh.jar\n  bazel-bin/javatests/com/google/gerrit/acceptance/ssh/ssh\nINFO: Elapsed time: 7.525s, Critical Path: 6.93s\nINFO: 3 processes: 1 internal, 1 darwin-sandbox, 1 worker.\nINFO: Build completed, 1 test FAILED, 3 total actions\n//javatests/com/google/gerrit/acceptance/ssh:ssh                         FAILED in 5.7s\n\n\n\n2. With the fix, the tests pass:\n\nREST:\n\n$ bazel test --test_filter\u003dcom.google.gerrit.acceptance.rest.DynamicOptionsBeanParseListenerIT -- //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection\nINFO: Invocation ID: 1a5a2254-d770-42d3-b3e1-8583077909b8\nDEBUG: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/bazel_toolchains/rules/rbe_repo/version_check.bzl:68:14: \nCurrent running Bazel is ahead of bazel-toolchains repo. Please update your pin to bazel-toolchains repo in your WORKSPACE file.\nINFO: Build option --test_filter has changed, discarding analysis cache.\nINFO: Analyzed target //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection (0 packages loaded, 4445 targets configured).\nINFO: Found 1 test target...\nINFO: From BazelWorkspaceStatusAction stable-status.txt:\nfatal: this operation must be run in a work tree\nTarget //javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection up-to-date:\n  bazel-bin/javatests/com/google/gerrit/acceptance/rest/rest_bindings_collection.jar\n  bazel-bin/javatests/com/google/gerrit/acceptance/rest/rest_bindings_collection\nINFO: Elapsed time: 5.517s, Critical Path: 5.11s\nINFO: 2 processes: 1 internal, 1 darwin-sandbox.\nINFO: Build completed successfully, 2 total actions\n//javatests/com/google/gerrit/acceptance/rest:rest_bindings_collection   PASSED in 4.9s\n\nExecuted 1 out of 1 test: 1 test passes.\n\nSSH:\n\n$ bazel test --test_filter\u003dcom.google.gerrit.acceptance.ssh.DynamicOptionsBeanParseListenerIT -- //javatests/com/google/gerrit/acceptance/ssh:ssh\nWARNING: Ignoring JAVA_HOME, because it must point to a JDK, not a JRE.\nINFO: Invocation ID: cb2cfc72-e50f-4c16-b07e-e9aaca2a4683\nDEBUG: /private/var/tmp/_bazel_prudhvi/e37608cb9f9210309e2ba9c31d3e5aaf/external/bazel_toolchains/rules/rbe_repo/version_check.bzl:68:14: \nCurrent running Bazel is ahead of bazel-toolchains repo. Please update your pin to bazel-toolchains repo in your WORKSPACE file.\nINFO: Analyzed target //javatests/com/google/gerrit/acceptance/ssh:ssh (0 packages loaded, 0 targets configured).\nINFO: Found 1 test target...\nTarget //javatests/com/google/gerrit/acceptance/ssh:ssh up-to-date:\n  bazel-bin/javatests/com/google/gerrit/acceptance/ssh/ssh.jar\n  bazel-bin/javatests/com/google/gerrit/acceptance/ssh/ssh\nINFO: Elapsed time: 5.692s, Critical Path: 5.48s\nINFO: 5 processes: 3 remote cache hit, 1 internal, 1 darwin-sandbox.\nINFO: Build completed successfully, 5 total actions\n//javatests/com/google/gerrit/acceptance/ssh:ssh                         PASSED in 5.3s\n\nExecuted 1 out of 1 test: 1 test passes.",
      "revId": "ada725e804fc78ae5a36395820a274f504ad0a39",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "edc1b09a_061d6e64",
        "filename": "Documentation/dev-plugins.txt",
        "patchSetId": 6
      },
      "lineNbr": 799,
      "author": {
        "id": 1096249
      },
      "writtenOn": "2021-09-09T11:14:01Z",
      "side": 1,
      "message": "crossing the char limit?",
      "range": {
        "startLine": 799,
        "startChar": 78,
        "endLine": 799,
        "endChar": 86
      },
      "revId": "ada725e804fc78ae5a36395820a274f504ad0a39",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}