{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f606df65_8edb21ca",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNoteJson.java",
        "patchSetId": 2
      },
      "lineNbr": 165,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-02-16T17:57:43Z",
      "side": 1,
      "message": "We already have EnumTypeAdapterFactory[1], that is currently throwing for unknown fields.\nIt was added here to reject the REST requests[2] with invalid enums. \nI actually think do not want to throw for other NoteDb enums too.\nMaybe it would be better to adjust that factory instead?\n\nI could suggest to have an explicit list of NoteDb enums along with the deafult \u0027unparsed\u0027 values annd adjust the read method to either return the default or throw for everyhing else.\n\nThis way, we can prevent possible similar issues and keep the logic in one place.\n\n\n\n[1]https://gerrit.googlesource.com/gerrit/+/edc37bcca670d31a19ccc15011bbea3317d29083/java/com/google/gerrit/json/EnumTypeAdapterFactory.java\n[2]I65d522a1fce4c3ee2a0e98b37fe535d610b39acc",
      "range": {
        "startLine": 165,
        "startChar": 2,
        "endLine": 165,
        "endChar": 61
      },
      "revId": "ae1d30bd317eca077ad8d9f98966fcf5580246ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae92aa13_45160cb6",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNoteJson.java",
        "patchSetId": 2
      },
      "lineNbr": 165,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-02-16T18:06:53Z",
      "side": 1,
      "message": "Please, add a comment why this is needed.",
      "range": {
        "startLine": 165,
        "startChar": 15,
        "endLine": 165,
        "endChar": 61
      },
      "revId": "ae1d30bd317eca077ad8d9f98966fcf5580246ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "398d4b7f_497991b8",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNoteJson.java",
        "patchSetId": 2
      },
      "lineNbr": 165,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-02-17T09:39:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae92aa13_45160cb6",
      "range": {
        "startLine": 165,
        "startChar": 15,
        "endLine": 165,
        "endChar": 61
      },
      "revId": "ae1d30bd317eca077ad8d9f98966fcf5580246ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95bb51ec_48a7bf06",
        "filename": "java/com/google/gerrit/server/notedb/ChangeNoteJson.java",
        "patchSetId": 2
      },
      "lineNbr": 165,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-02-17T09:39:08Z",
      "side": 1,
      "message": "Thanks for suggesting. I\u0027d actually prefer not to do that since:\n1) it shouldn\u0027t be the norm to accept unrecognized enums, and it\u0027s better to throw a storage exception. Here in our case, we are retreating to the value \"ERROR\" which is present in this enum. What we should do for other enums?\n2) this is added temporarily to ensure a safe rollout of the change, but it shouldn\u0027t be needed in o(days) moving forward.\n\nI\u0027d prefer we delete this adapter in 1 or 2 weeks. It will not be needed after we rollout the next change. I added a TODO.",
      "parentUuid": "f606df65_8edb21ca",
      "range": {
        "startLine": 165,
        "startChar": 2,
        "endLine": 165,
        "endChar": 61
      },
      "revId": "ae1d30bd317eca077ad8d9f98966fcf5580246ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c17902e1_272d6f4f",
        "filename": "javatests/com/google/gerrit/server/cache/serialize/entities/SubmitRequirementJsonSerializerTest.java",
        "patchSetId": 2
      },
      "lineNbr": 197,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-02-16T17:57:43Z",
      "side": 1,
      "message": "Thank you for adding the test, LGTM!",
      "range": {
        "startLine": 197,
        "startChar": 46,
        "endLine": 197,
        "endChar": 63
      },
      "revId": "ae1d30bd317eca077ad8d9f98966fcf5580246ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}