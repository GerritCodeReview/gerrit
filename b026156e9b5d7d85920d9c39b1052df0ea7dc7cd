{
  "comments": [
    {
      "key": {
        "uuid": "f2cda6a7_d417fc2d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 6
      },
      "lineNbr": 312,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-01-31T05:00:39Z",
      "side": 1,
      "message": "This seems to be writing a commit for every reviewer. But we only want to write a commit if the normalizer had to the change PSA object. Right now I think the upsert on line 283 above is updating all approvals at submit time, which is more database traffic than is necessary.\n\nThe normalizer also doesn\u0027t actually flatten the PSA value to within the type floor if the user\u0027s granted value is outside of the type floor but within their permitted range.  Its unclear if RefControl is squashing the PermissionRange down to match the configured label range, or if the LabelNormalizer is where this is done.",
      "range": {
        "startLine": 309,
        "startChar": 8,
        "endLine": 312,
        "endChar": 9
      },
      "revId": "b026156e9b5d7d85920d9c39b1052df0ea7dc7cd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2cda6a7_74d5c80a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 6
      },
      "lineNbr": 312,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-31T15:51:01Z",
      "side": 1,
      "message": "Ack, we don\u0027t want to do this. To verify this behavior, I\u0027m going to move the deduplication logic into LabelNormalizer and write some tests.",
      "parentUuid": "f2cda6a7_d417fc2d",
      "range": {
        "startLine": 309,
        "startChar": 8,
        "endLine": 312,
        "endChar": 9
      },
      "revId": "b026156e9b5d7d85920d9c39b1052df0ea7dc7cd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92862a64_11100c69",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 6
      },
      "lineNbr": 312,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-02-04T20:18:30Z",
      "side": 1,
      "message": "Another bikeshedding question!\n\nWhat to do about approvals that the normalizer says to remove entirely (i.e. nonexistent label or empty permission range)? Again, this is about freezing the state wrt the label and permission configurations.\n\nPerhaps:\n\n Label: -Code-Review\n\nContrast with:\n\n Label: Code-Review\u003d0\n\nfor a zero vote. But I don\u0027t like that this conflicts with the semantics of LabelVote.parse, which treats -Code-Review as Code-Review\u003d-1.",
      "parentUuid": "f2cda6a7_74d5c80a",
      "range": {
        "startLine": 309,
        "startChar": 8,
        "endLine": 312,
        "endChar": 9
      },
      "revId": "b026156e9b5d7d85920d9c39b1052df0ea7dc7cd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2cda6a7_f412f83f",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/Submit.java",
        "patchSetId": 6
      },
      "lineNbr": 331,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-01-31T05:00:39Z",
      "side": 1,
      "message": "If there is an OK record, I think its OK to store only that one record and not all of the alternatives. Even if force is true.",
      "range": {
        "startLine": 331,
        "startChar": 17,
        "endLine": 331,
        "endChar": 50
      },
      "revId": "b026156e9b5d7d85920d9c39b1052df0ea7dc7cd",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}