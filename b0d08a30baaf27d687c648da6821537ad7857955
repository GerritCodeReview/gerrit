{
  "comments": [
    {
      "key": {
        "uuid": "335629fc_22f10f98",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2018-01-12T05:17:43Z",
      "side": 1,
      "message": "I\u0027m not sure that I understand the use case here, nor the motivation for adding this restriction.\n\nCan you elaborate on the steps that would result in the situation that should be prevented?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8ab315b1_2df22a08",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1021592
      },
      "writtenOn": "2018-01-12T08:39:54Z",
      "side": 1,
      "message": "One of our most common and costly support tickets is to help inexperienced users that wrongly used the old refs/changes/ namespace for uploading new patchsets.\n\nTypically the users google \"how to update changes in Gerrit\" and sometimes finds the documentation on how to push the old way, eg. pushing to \"refs/changes/\" instead of using the \"Change-Id:\"-footer with the \"refs/for/\"-namespace.\n\nBy pushing new patchsets to \"refs/changes/\" it is very easy to accidentally push to the wrong change (or perhaps they accidentally removed the change-id footer and got a new one). Regardless, they now have a \"Change-Id:\"-footer that does not match the internal change-id of the destination change. This is where things starts to get really confusing for the users.\n\nBy just ensuring that the \"Change-Id:\"-footer of the new patchset matches the internal Change-Id of the destination change, we can ensure that the user catches their error before everything spirals out of control.\n\nSo far, we have never seen a push to \"refs/changes/\", where the user intended to have a \"Change-Id:\"-footer that does not match the internal Change-Id of the destination change.",
      "parentUuid": "335629fc_22f10f98",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "584cf80d_c0ea8920",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-01-12T08:45:39Z",
      "side": 1,
      "message": "Maybe we should have a config option that disables pushing to refs/changes/?",
      "parentUuid": "8ab315b1_2df22a08",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0771f715_37af4b6e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2018-01-12T08:47:42Z",
      "side": 1,
      "message": "OK.  Just to confirm: is this only going to affect changes pushed to refs/changes/?\n\nI just ask because sometimes I have had cases where I had a commit where I deliberately replaced the change Id line and pushed as a new change to refs/for/branch.  I wouldn\u0027t want to break that user case.",
      "parentUuid": "8ab315b1_2df22a08",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7fbacc1c_5c5a3490",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1059595
      },
      "writtenOn": "2018-01-12T08:54:19Z",
      "side": 1,
      "message": "It won\u0027t break the use case when pushing a new change-id to refs/for/branch since the change-id is the key to find any existing change. It will be treated as a new change.",
      "parentUuid": "0771f715_37af4b6e",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e0b932d_b6df3cdf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1059595
      },
      "writtenOn": "2018-01-12T09:06:52Z",
      "side": 1,
      "message": "\u003e Maybe we should have a config option that disables pushing to\n \u003e refs/changes/?\n\nThis change will also catch if you try to edit the change-id in the inline editor, but I don\u0027t know if we need to protect us from that.\n\nIf we can live with the inline editor being able to edit the change-id, your suggestion might be better.",
      "parentUuid": "584cf80d_c0ea8920",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84ce1d5d_9f31f514",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 15,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-01-12T09:09:37Z",
      "side": 1,
      "message": "I would still do what this change does. It was rather meant as a suggestion what we could do in addition to deal with the situation that Gustaf has explained.",
      "parentUuid": "4e0b932d_b6df3cdf",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 15,
        "endChar": 0
      },
      "revId": "b0d08a30baaf27d687c648da6821537ad7857955",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}