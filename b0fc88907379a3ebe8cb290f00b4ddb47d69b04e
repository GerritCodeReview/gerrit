{
  "comments": [
    {
      "key": {
        "uuid": "e33d313c_3ae85150",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-08-16T05:08:23Z",
      "side": 1,
      "message": "I cannot reproduce the problem. I commented out this line in gerrit.config:\n\n  canonicalWebUrl \u003d http://localhost:8080\n\nBut now, I\u0027m still not entering the piece of code you changed, because if (requestProvider !\u003d null) condition is always false on HttpCanonicalWebUrlProvider.java:47. What am I missing?",
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "118c008e_84020825",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-08-16T05:46:32Z",
      "side": 1,
      "message": "Right, let me open an issue with the steps to reproduce the problem, so that we have full traceability.",
      "parentUuid": "e33d313c_3ae85150",
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cafcfcd_3c7dfa31",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-08-16T07:33:40Z",
      "side": 1,
      "message": "The problem happens when signing-in for the very first time using PolyGerrit.\nThe login URL is: https://gerrit-review.googlesource.com/login/%2Fq%2Fstatus%3Aopen\n\nIn the HttpLoginServlet after the first login, if the user is new, is redirected to the registration page. However, if the canonicalWebUrl in gerrit.config is empty, it gets computed from the incoming HTTP request.\n\nSee: HttpLoginServlet.java:148.\nGoing to reproduce it with a sequence of user-driven operations to trigger the problem.\n\nI\u0027ve experienced the problem when doing the final redirection of OAuth (when used in HTTP mode with the GitHub plugin\u0027s Servlet) and saw the wrong canonical URL computed.",
      "parentUuid": "118c008e_84020825",
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f2fccdb_322302c2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-08-16T10:46:45Z",
      "side": 1,
      "message": "I\u0027ve opened an issue with the steps to reproduce the problem:\nhttps://bugs.chromium.org/p/gerrit/issues/detail?id\u003d7036",
      "parentUuid": "9cafcfcd_3c7dfa31",
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5aa06e7_5aa1bcb4",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/CanonicalWebUrl.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-08-16T05:08:23Z",
      "side": 1,
      "message": "Use java.nio.charset.StandardCharsets.UTF_8.name(), import it statically, and use UTF_8.name(). That\u0027s what we dare doing in other places, where decode() is used.",
      "range": {
        "startLine": 41,
        "startChar": 63,
        "endLine": 41,
        "endChar": 71
      },
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b1304e92_09ebf361",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/CanonicalWebUrl.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-08-16T05:46:32Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d5aa06e7_5aa1bcb4",
      "range": {
        "startLine": 41,
        "startChar": 63,
        "endLine": 41,
        "endChar": 71
      },
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e1a46dea_26bb99a5",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/CanonicalWebUrl.java",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-08-16T10:46:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5aa06e7_5aa1bcb4",
      "range": {
        "startLine": 41,
        "startChar": 63,
        "endLine": 41,
        "endChar": 71
      },
      "revId": "b0fc88907379a3ebe8cb290f00b4ddb47d69b04e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}