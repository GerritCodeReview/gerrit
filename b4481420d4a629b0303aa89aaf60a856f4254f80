{
  "comments": [
    {
      "key": {
        "uuid": "cad4668d_b877f902",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2020-07-14T07:07:10Z",
      "side": 1,
      "message": "This sounds to me like it was only ever a preflight check. Is the eca plugin auto-submitting at the end of the push? Why is it not OK to create a change that the uploader can\u0027t submit (but someone else might)?\n\nThe refactoring happened over 3 years ago, and no one complained until now, so I am trying to understand the use case fully.\n\nChecking \"Submit\" on a ref feels unidiomatic because you can\u0027t submit a ref, you can only submit a change. If we have to we could name it SUBMIT_TO, so that you can check if a user can \"submit to\" a ref.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "b4481420d4a629b0303aa89aaf60a856f4254f80",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ff415cc_3d16106b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-07-14T07:48:25Z",
      "side": 1,
      "message": "The plugin source code is here: [1]. And my wrong migration to permission backend is here: [2].\n\n\u003e Why is it not OK to create a change that the uploader can\u0027t submit (but someone else might)?\n\nHave you noticed the javadoc?\n\n  /**\n   * Can submit changes for this ref.\n   *\n   * \u003cp\u003eThis is the same as {@link ChangePermission#SUBMIT} except that it can be used without\n   * having a change instance. This could be useful when checking for submit permission in a {@link\n   * CommitValidationListener} implementation to perform or skip additional tests.\n   */\n\nThe use case is simple. Two contributors Bob and Alice are uploading a change to project Foo. Bob must sign CLA and include \"Signed-off-by\" otherwise the push will be rejected. Alice must not sign CLA and include \"Signed-off-by\" footer, because she is committer of the project Foo. To determine that Alice is committer and Bob is not a committer of the project Foo, SUBMIT permission is checked. \n\n \u003e The refactoring happened over 3 years ago, and no one complained until now, so I am trying to understand the use case fully.\n\nIt took years to migrate Eclipse Foundation\u0027s Gerrit site from 2.14 release to 3.x: [3].\n\n\u003e If we have to we could name it SUBMIT_TO, so that you can check if a user can \"submit to\" a ref.\n\nI have no problem to rename RefPermission.SUBMIT to RefPermission.SUBMIT_TO.\n\n[1] https://github.com/EclipseFdn/gerrit-eca-plugin\n[2] https://github.com/EclipseFdn/gerrit-eca-plugin/pull/16\n[3] https://bugs.eclipse.org/bugs/show_bug.cgi?id\u003d541221",
      "parentUuid": "cad4668d_b877f902",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "b4481420d4a629b0303aa89aaf60a856f4254f80",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ae67c447_92fc5aa0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2020-07-14T12:50:01Z",
      "side": 1,
      "message": "\u003e To determine that Alice is committer and Bob is not a committer of the project Foo, SUBMIT permission is checked. \n\nSo if I have \"submit\" permission, I am a committer (no CLA) and if not a contributor (needs CLA) and you need this for gating the CLA check. Is there another link between \"committer\" and a permission you could check instead? E.g. are committers project owners? (WRITE_CONFIG is granted).\n\nCould you make a simple group membership check instead?\nif (uploader is member of \"submitter group\") {\n  // don\u0027t check CLA\n} {\n  //check CLA\n}\n\nIn other words I am trying to understand where the ground truth of \"who is a committer\" is stored. Usually it\u0027s group membership, not a permission that distinguishes such users.\n\nHave you considered adding \"committers\" to the autoVerify group of the CLA? This makes the CLA check pass without them having to sign it.\n\n[1] https://github.com/EclipseFdn/gerrit-eca-plugin",
      "parentUuid": "6ff415cc_3d16106b",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "b4481420d4a629b0303aa89aaf60a856f4254f80",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}