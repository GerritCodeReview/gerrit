{
  "pushCert": "certificate version 0.1\npusher Dave Borowitz \u003cdborowitz@google.com\u003e 1498248003 -0400\nnonce AH5c86DobLYpgTfrNYiv4vkFYnG2Bmuk076QPV7xFUs8QKqqOj3BXtLe/lENJGhSbBEbEgu/HGhH\n\n0000000000000000000000000000000000000000 621b55b1e798fc68a3248ce26ea5ec60b7bb405b refs/for/master\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJZTXNDAAoJEF/XxZqaEoiMfDwQAMx1NtYDCmluv/CLFHvAd9DF\nEAmfxSCFjM1zuB/UbvckxxliXEwDHG9yJcDATKzrDgcXT9fwowf0axBuPl1jNZst\nZjit967xERG7AMsTq6DNQGh/rw0BHd+lXtPdfFEdxN8Q8Cqcx6O9tMKlGNKnPyrA\noygq25+oxfVc+FQ4t+O6R3TkCj/yjTwQe/aAhzbkrp6ayjSe3FSob7OYjJR9iZnR\nVKfIyN1xLrHHX/h1yFqbIEusJQXo+Lf+mdru6bmo1hM38MBLxVZLlaf7VqBYcEIi\nMHPq6gx9R70CU1rwjjaFtXJerd+RxpsULCxu0ybAbgXWxuMVAtyKUDwo15AN7R6B\nscWwkA1eemk9xh1WGKl1o+oA5fPgNuT5guHk+voGlfkG2gggLE5D2iW4+gP8jG6K\nam+ys5OE7H4/ieVVfbvOdH77ganjmgihnKi12/YB14JkRSIzszdWgs6Ml1SrIJYv\ndvfuxQ4GNYhD40upufmGcgpHlcIHROYUsitZTg9Ri6ji+vlRhYtuNMeDtlCEIj9X\nfOR66lK6OXL3Fko0JQN+nepnK+Dnx8RwnRwDdcfFSFLkKMpip7Xqaqk+SOT16HYi\ns6iHLuzI2YGwFUTeRLpj7ekEdHrj5Ri9BRgJs1ToIcbwNnBPqDURBhPTz0wR+W+E\nDLkP7MGSrb2J00Aq3c49\n\u003dHiAx\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "37caf433_5af5cc39",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 6
      },
      "lineNbr": 408,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-06-23T20:05:24Z",
      "side": 1,
      "message": "I\u0027m probably missing something here, but wouldn\u0027t this mean a danger of endless loop? Am I missing an emergency exit conditions here? Or what makes your think that if it failed once then it\u0027s going to succeed second or n-ths time?\n\nAt very least we should count the number of attempts (or even make this number configurable?) and fail the migration process once the number of attempts is exceeded.",
      "revId": "b52205ffb0f873fb5dffba9f4c7a2c2c97cb99cb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "84ef6013_4d28c879",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 6
      },
      "lineNbr": 408,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2017-06-23T21:46:32Z",
      "side": 1,
      "message": "I don\u0027t think it\u0027s possible to get in an endless loop in a single (offline) process. setNoteDbPrimary always returns NOTE_DB_UNFUSED if it completes; if it fails, then it throws an exception which kills MigrateToNoteDb.\n\nIt\u0027s true that if you run the program again, there\u0027s a chance it will fail again and stay in the same state, but this is not a runaway infinite loop scenario. I haven\u0027t fully thought through the online process but I am also thinking it will not retry without human intervention. You (the admin) may give up after a few tries, then file a bug and run it again when your bug is fixed. (Of course, this hopefully only happens to early adopters in the RC period, and there are no bugs in 3.0 final :)",
      "parentUuid": "37caf433_5af5cc39",
      "revId": "b52205ffb0f873fb5dffba9f4c7a2c2c97cb99cb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d96fa4d3_f5adfcbe",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 6
      },
      "lineNbr": 408,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-06-24T04:35:09Z",
      "side": 1,
      "message": "\u003e It\u0027s true that if you run the program again, there\u0027s a chance it\n \u003e will fail again and stay in the same state, but this is not a\n \u003e runaway infinite loop scenario. I haven\u0027t fully thought through the\n \u003e online process but I am also thinking it will not retry without\n \u003e human intervention. You (the admin) may give up after a few tries,\n \u003e then file a bug and run it again when your bug is fixed. (Of\n \u003e course, this hopefully only happens to early adopters in the RC\n \u003e period, and there are no bugs in 3.0 final :)\n\nWe can investigate the situation later when it\u0027s clear, how the online process is started and terminated to see if there is a danger of endless loop here. Just mentioning, that libreoffice infra team is very conservative considerung using alpha quality releases of any product. And I can already assure you, that the guys wouldn\u0027t use Gerrit 3.0 and wait until at least 3.3.10 or something ;-)",
      "parentUuid": "84ef6013_4d28c879",
      "revId": "b52205ffb0f873fb5dffba9f4c7a2c2c97cb99cb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e322d82d_01d6a91b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/notedb/rebuild/NoteDbMigrator.java",
        "patchSetId": 6
      },
      "lineNbr": 490,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-06-28T23:54:04Z",
      "side": 1,
      "message": "This block is causing an error in Eclipse:\n\n Cannot infer type argument(s) for \u003cR\u003e map(Function\u003c? super T,? extends R\u003e)",
      "range": {
        "startLine": 474,
        "startChar": 4,
        "endLine": 490,
        "endChar": 31
      },
      "revId": "b52205ffb0f873fb5dffba9f4c7a2c2c97cb99cb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}