{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e68c828b_6e27b735",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "DRY: same comment as for JDK 17 below: extract `build_shared_java11` configuration, to reuse all the above toolchain options between multiple configurations:\n\n1. local build with JDK 11\n2. remote build with JDK11 on Google GCP RBE\n3. remote build with JDK11 on premise BuildBuddy",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 14,
        "endChar": 53
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff121ee3_cd4c11f9",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 28,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "We should carefully choose naming scheme here. Can it be that GCP/RBE is not unique enough? As documented on RBE provider pages, there are number of non commercial and commercial RBE service providers, that of course offer on premise as also hosted/cloud services, and of course have in portfolio the pipelines for Azure/AWS/GCP, so that if we say remote-gcp it could be non unique. OTH, we could spell Google GCP RBE Provider in the comment, to not make configuration name unnecessarily long.",
      "range": {
        "startLine": 28,
        "startChar": 25,
        "endLine": 28,
        "endChar": 32
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5c149c1_a2b97b28",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "remote11",
      "range": {
        "startLine": 29,
        "startChar": 28,
        "endLine": 29,
        "endChar": 37
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c52f2ba4_fac61805",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "I wouldn\u0027t rather rename the default remote config name for now. Same applies on lines 38.40 below. There are different clients that depend on those names. Just to mention two that we know:\n\no Bazel Buildkite CI: [1]\no gerrit RBE checker\n\nAll we do should be non intrusive and backwards compatibel, and not break clients that still rely on this configurations (now and may be also in future).\n\n[1]: https://github.com/bazelbuild/continuous-integration/blob/master/pipelines/gerrit.yml#L32",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 30,
        "endChar": 38
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d247ff0_295927fe",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "Thinking about my previous comment. And trying to suggest a different approach to keep remote configuration to still be Google GCP RBE provider specific, but avoid repeating all this toolchain option on follow-up change for BuildBuddy - provider. All those options are shared between local build (default configuration on line 16-20) and remote build configuration, on line 32-36. So I think the way to go would to extract `build_shared` and `build_shared_java11`, e.g.:\n\n```\nbuild:build_shared --java_language_version\u003d17\nbuild:build_shared --java_runtime_version\u003dremotejdk_17\nbuild:build_shared --tool_java_language_version\u003d17\nbuild:build_shared --tool_java_runtime_version\u003dremotejdk_17\n```\n\nand then re-use them in both local and remote configuration sections, e.g. remove this:\n\n```\n# Builds using remotejdk_17, executes using remotejdk_17 or local_jdk\nbuild --java_language_version\u003d17\nbuild --java_runtime_version\u003dremotejdk_17\nbuild --tool_java_language_version\u003d17\nbuild --tool_java_runtime_version\u003dremotejdk_17\n```\n\nand replace it with:\n\n```\n# Builds using remotejdk_17, executes using remotejdk_17 or local_jdk\nbuild --config\u003dbuild_shared\n```\n\nand replace this:\n\n```\n# Builds and executes using remotejdk_17\nbuild:remote --java_language_version\u003d17\nbuild:remote --java_runtime_version\u003dremotejdk_17\nbuild:remote --tool_java_language_version\u003d17\nbuild:remote --tool_java_runtime_version\u003dremotejdk_17\n```\n\nwith:\n\n```\nbuild:remote --config\u003dbuild_shared\n```\n\nThen we could hoist the `config_gcp` options into default `remote`:\n\n```\nbuild:remote --config\u003dconfig_gcp\n```\n\nAnd to to similarly with BuildBuddy `remote_bb` in the follow-up change:\n\n```\nbuild:remote_bb --config\u003dbuild_shared\nbuild:remote_bb --config\u003dconfig_bb\n```",
      "range": {
        "startLine": 32,
        "startChar": 0,
        "endLine": 37,
        "endChar": 0
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4aefe56_e6958a81",
        "filename": ".bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "Remove this, we should keep the default as-is for now.\n\nAlso we should try hard to avoid this `_default_` part in the configuration to avoid that clients would need to type that long name.\n\nIt should just be `remote`, or `remote_gcp`, or `remote_bb`. See my suggestion above and in `tools/remote-bazelrc` how to achieve this.",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 40,
        "endChar": 44
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6862d772_fe70b0a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T13:13:19Z",
      "side": 1,
      "message": "I tried to address some of my comments in this change: [1]. If you agreed may be you could rebase this series on top of my series?\n\n[1]: https://gerrit-review.googlesource.com/c/gerrit/+/394799",
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6699de6a_fb03e04e",
        "filename": "tools/remote-bazelrc",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-11-25T12:19:44Z",
      "side": 1,
      "message": "We shouldn\u0027t call it `remote_gcp` here and not `remote_bb` (or `remote-bb`, as you did, but we should be consistent with \"-\" v. \"_\" and call different RBE provider service configuation with the same delimiter). The reason is simple: this should be the finale name in the Bazel command invocation:\n\n```\n  $\u003e bazel build --config remote [...] :headless\n  $\u003e bazel build --config remote_gcp [...] :headless\n  $\u003e bazel build --config remote_bb [...] :headless\n```\n\nIn the above command invcations, `remote` and `remote_gcp` are aliases to the same thing. That would allow us to simple swap the default provider, so that `--config\u003dremote` would alias to `remote_bb`.\n\nThat\u0027s why we should use here a different name, my suggestion is short and simple: \n\n```\nbuild:config_gcp [...]\n# and later:\nbuild:config_bb [...]\n```\n\nThen we could hoist the `config_gcp` options from here into default `remote` configuration in `.bazelrc`:\n\n```\nbuild:remote --config\u003dconfig_gcp\n```\n\nAnd to to similarly with BuildBuddy `remote_bb` in the follow-up change:\n\n```\nbuild:remote_bb --config\u003dbuild_shared\nbuild:remote_bb --config\u003dconfig_bb\n```",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 16
      },
      "revId": "b654edf1d1f1e37ebca094b32d9559a89eee7d71",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}