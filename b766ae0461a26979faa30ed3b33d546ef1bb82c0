{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3825974a_c483e227",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-03-09T10:12:42Z",
      "side": 1,
      "message": "that\u0027s still second, not first.\n(i suppose you might be trying to keep the diff small or prevent it from looking funny, but i think such considerations apply only when everything else is equal).\n\nactually, this whole block should read like this:\n\n  if (!isWatcher) {\n    Optional\u003cAccountState\u003e accountState \u003d args.accountCache.get(to);\n    if (accountState.isPresent()\n        \u0026\u0026 accountState.get().generalPreferences().getEmailStrategy()\n              \u003d\u003d EmailStrategy.ATTENTION_SET_ONLY\n        \u0026\u0026 !currentAttentionSet.contains(to)) {\n      return;\n    }\n  }\n\nthat mildly changes the logic, but it\u0027s what was actually there before fd238889b33c.",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c906340d_6b021ab6",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2022-03-09T17:28:50Z",
      "side": 1,
      "message": "Now it is first :). I think I changed it a bit fast and did not look it through carefully enough.",
      "parentUuid": "3825974a_c483e227",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0a91c60_64ab6c7e",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2022-03-09T17:29:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c906340d_6b021ab6",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24c565ac_71af6149",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-03-09T23:42:52Z",
      "side": 1,
      "message": "not sure why you completely ignored the 2nd paragraph, but fair enough.",
      "parentUuid": "c0a91c60_64ab6c7e",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18905075_7ce84339",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2022-03-10T09:10:30Z",
      "side": 1,
      "message": "I did not completely ignored it. I just feel safer with the current code because it does not let through an empty accountState like your code do.",
      "parentUuid": "24c565ac_71af6149",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8041d353_d2301694",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-03-10T13:15:41Z",
      "side": 1,
      "message": "you should have written that without additional prompting.\n\nanyway, as i wrote, that would just restore what the pre-AS code did. it\u0027s very unlikely that since then some code started to depend on that new behavior, and even if it did, that would be arguably a bug.",
      "parentUuid": "18905075_7ce84339",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aad6baab_fd77851e",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-03-11T09:45:18Z",
      "side": 1,
      "message": "to drive the point home even more: the account ultimately ends up in OutgoingEmail.toAddress(), which does exactly the same check. iow, having it here redundantly just makes things slightly less efficient and obvious.",
      "parentUuid": "8041d353_d2301694",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b9d63cd_0933ea90",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2022-03-11T11:40:21Z",
      "side": 1,
      "message": "I agree, it is slightly redundant. But would not the current code be a bit more efficient because we skip some extra calculations when we return when accountState is empty?",
      "parentUuid": "aad6baab_fd77851e",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc03ffbb_e5400b79",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1013267
      },
      "writtenOn": "2022-03-11T12:10:12Z",
      "side": 1,
      "message": "that\u0027s a rare error condition, so most of the time it\u0027s just doing extra work rather than shortcutting.",
      "parentUuid": "0b9d63cd_0933ea90",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3e4a305_40c44db7",
        "filename": "java/com/google/gerrit/server/mail/send/ChangeEmail.java",
        "patchSetId": 7
      },
      "lineNbr": 416,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2022-03-11T13:05:29Z",
      "side": 1,
      "message": "You are probably right that it is more efficient then. I have changed the code.",
      "parentUuid": "fc03ffbb_e5400b79",
      "revId": "b766ae0461a26979faa30ed3b33d546ef1bb82c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}