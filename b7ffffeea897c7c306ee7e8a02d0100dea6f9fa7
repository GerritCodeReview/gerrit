{
  "comments": [
    {
      "key": {
        "uuid": "7d580fef_4469119c",
        "filename": "java/com/google/gerrit/server/restapi/account/AccountsCollection.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-01-24T16:03:22Z",
      "side": 1,
      "message": "if we\u0027re making the message better, why not also mention the visibility.  \n\n \u0027%s\u0027 is not found, ambiguous or invisible to caller\n\n?",
      "range": {
        "startLine": 77,
        "startChar": 50,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "b7ffffeea897c7c306ee7e8a02d0100dea6f9fa7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21887930_766fab97",
        "filename": "java/com/google/gerrit/server/restapi/account/AccountsCollection.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1014502
      },
      "writtenOn": "2018-01-24T17:40:03Z",
      "side": 1,
      "message": "\"doesn\u0027t represent an account\" sounds like a 404. \"invisible to caller\" sounds like a 403. \"ambiguous\" sounds like a 400. Why is this throwing a 500?",
      "parentUuid": "7d580fef_4469119c",
      "range": {
        "startLine": 77,
        "startChar": 50,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "b7ffffeea897c7c306ee7e8a02d0100dea6f9fa7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f829f3ff_2685078d",
        "filename": "java/com/google/gerrit/server/restapi/account/AccountsCollection.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-01-25T09:49:30Z",
      "side": 1,
      "message": "Sigh. Why do I even write commit messages? - I already mentioned why I decided to not use another exception. If my commit message wasn\u0027t clear enough: I already spent too much time on trying to introduce a BadRequestException (which would resolve to a 400) and stopped with that approach when I saw how many files I had to touch and how much further time I would need for this.\n\nBy the way, depending on which REST endpoint is called, we either throw a ResourceNotFoundException (resolving to a 404) or an UnprocessableEntityException (resolving to a 422), not a 500.\n\nRegarding the visibility of accounts: I don\u0027t think we will ever use a dedicated status code for invisible accounts as it would pose a security risk. As Han-Wen suggested, we might possibly mention the general feature of visibility in this error message but I would rather not draw too much attention to it. In addition, we wouldn\u0027t be consistent throughout our REST endpoints and resources anymore. For instance, we also simply state that a group isn\u0027t found if it isn\u0027t visible to the caller. We would need to adjust these error messages, too.\n\nTo be more consistent with our general wording in error messages, I slightly adjusted this error message in the next patch set.\n\nApart from that, I\u0027m not willing to spend more effort on this.",
      "parentUuid": "21887930_766fab97",
      "range": {
        "startLine": 77,
        "startChar": 50,
        "endLine": 77,
        "endChar": 51
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "b7ffffeea897c7c306ee7e8a02d0100dea6f9fa7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c056d94e_c1484c3b",
        "filename": "java/com/google/gerrit/server/restapi/account/AccountsCollection.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-01-25T13:28:47Z",
      "side": 1,
      "message": "Aaron, in general, we don\u0027t distinguish 404 and 403 because it would leak the existence of some resource which is what we want to avoid with the visibility restrictions.\n\nAlice, I fully support your approach here, and please submit this as you see fit.",
      "parentUuid": "f829f3ff_2685078d",
      "range": {
        "startLine": 77,
        "startChar": 50,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "b7ffffeea897c7c306ee7e8a02d0100dea6f9fa7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "53056b29_43250028",
        "filename": "java/com/google/gerrit/server/restapi/account/AccountsCollection.java",
        "patchSetId": 1
      },
      "lineNbr": 77,
      "author": {
        "id": 1014502
      },
      "writtenOn": "2018-01-25T21:09:59Z",
      "side": 1,
      "message": "I did read the commit message. I was not suggesting that you differentiate between the different kinds of 4XX. I was attempting to get at the fact that the error *I* saw was a 500, and this code is still throwing the same kind of exception (albeit with a better message). So it seemed to me that this would still result in 500s, which doesn\u0027t seem like the right status for a message that sounds like something in the 4XX range.\n\nUpon further inspection, I see where the confusion arose: The PG UI prints \"Server Error\" even when the response code is in the 4XX range. I read that message and assumed that it was representing a 5XX. I\u0027ll file another bug against the PG UI to not display \"Server Error\" for http status codes in the 4XX range. I apologize for the misunderstanding that arose from my confusion.",
      "parentUuid": "c056d94e_c1484c3b",
      "range": {
        "startLine": 77,
        "startChar": 50,
        "endLine": 77,
        "endChar": 51
      },
      "revId": "b7ffffeea897c7c306ee7e8a02d0100dea6f9fa7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}