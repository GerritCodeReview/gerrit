{
  "comments": [
    {
      "key": {
        "uuid": "0a26849c_c627e2a3",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 15,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-05-15T16:47:51Z",
      "side": 1,
      "message": "Move this into the gwt_user_agent_permutations function so it isn\u0027t exporting everywhere by default.",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea221089_a5ad7ebe",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T18:41:16Z",
      "side": 1,
      "message": "The reason, i added it here, is not to import it twice. I still think that more cleaner way, would be to use san default value in Buck implementation:\n\n  Runtime.getRuntime().availableProcessors()\n\nand not weird constant 2. That way we wouldn\u0027t need to include that stauuf at all. Here is the answer to my question:\n\n [1] https://github.com/facebook/buck/issues/109#issuecomment-43143991",
      "parentUuid": "0a26849c_c627e2a3",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_44976e67",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 15,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T22:02:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a26849c_c627e2a3",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_c4f8bee8",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T07:07:24Z",
      "side": 1,
      "message": "This is necessary now, because compiler.py was producing ui_agent.zip directly and gwt_binary produces ui_agent.war under subdirectory:\n\n  ./buck-out/gen/gerrit-gwtui/__gwt_binary_ui_safari__/ui_safari.war\n\nAfter this rule we have:\n\n ./buck-out/gen/gerrit-gwtui/ui_safari.zip\n\nAnd gerrit_war() and war () rules assumed to find it there and failed. I think it\u0027s a bug (or at least unexpected) that suffix of GWT binary is war. It should be \".zip\".\n\nNote:\n\n  buck build gerrit\n\nwas working because we have own wrapper target for combined ui_optdbg.zip artifact and it worked. Only single use agent permutation was broken.",
      "range": {
        "startLine": 86,
        "startChar": 4,
        "endLine": 91,
        "endChar": 5
      },
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a3188d1_c727dea3",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-05-15T16:47:51Z",
      "side": 1,
      "message": "We should try not to do this. I think the gerrit_war() or war() rules are broken because they aren\u0027t using $(location) to find the target output.",
      "parentUuid": "ca1f0c44_c4f8bee8",
      "range": {
        "startLine": 86,
        "startChar": 4,
        "endLine": 91,
        "endChar": 5
      },
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_64946a62",
        "filename": "gerrit-gwtui/gwt.defs",
        "patchSetId": 6
      },
      "lineNbr": 91,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T22:02:02Z",
      "side": 1,
      "message": "Well, I had exactly the same idea to refactor/fix war() to call $(location) instead of trying to figure out on its own the file location and making assumption that all artifacts are located under one level directory, what doesn\u0027t hold to be true any more after migrating to gwt_binary() artifact:\n\n  buck-out/gen/gerrit-gwtui/__gwt_binary_ui_safari__/ui_safari.zip\n\nFrom the first glance i thought that it cannot be done, because $(location) is only get expanded for `cmd` var inside genrule(). And currently the parameters were passed in $SRCS. But after your comment, i looked deeper into it and the solution is to move the passing of sources to command als list of $(location) macros invocation. The code is much cleaner now: we don\u0027t need to mess around with suffix of different artifacts any more.\n\nDone",
      "parentUuid": "2a3188d1_c727dea3",
      "range": {
        "startLine": 86,
        "startChar": 4,
        "endLine": 91,
        "endChar": 5
      },
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a3188d1_871de655",
        "filename": "tools/default.defs",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-05-15T16:47:51Z",
      "side": 1,
      "message": "relying on this coming in from another defs file is vague. Add an import into the top of the function instead in both places.",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_a4ad82be",
        "filename": "tools/default.defs",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T18:41:16Z",
      "side": 1,
      "message": "The reason i added this in",
      "parentUuid": "2a3188d1_871de655",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_841de655",
        "filename": "tools/default.defs",
        "patchSetId": 6
      },
      "lineNbr": 138,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T22:02:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a3188d1_871de655",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a3188d1_a722ea94",
        "filename": "tools/gwt-constants.defs",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-05-15T16:47:51Z",
      "side": 1,
      "message": "I asked Buck team to include this flag in Buck itself, see https://github.com/facebook/buck/issues/109",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea221089_85a882af",
        "filename": "tools/gwt-constants.defs",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T18:41:16Z",
      "side": 1,
      "message": "Yup, noticed and will change that.",
      "parentUuid": "2a3188d1_a722ea94",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca1f0c44_a422e294",
        "filename": "tools/gwt-constants.defs",
        "patchSetId": 6
      },
      "lineNbr": 3,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-05-15T22:02:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a3188d1_a722ea94",
      "revId": "b82e369f256b82fa0a20ed23aea49d16b2f71f99",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}