{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1d5e961a_72d1faba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-12-03T06:57:11Z",
      "side": 1,
      "message": "What do you mean exactly? Why it\u0027s needed? Can\u0027t you upgrade to Gerrit 3.9.1 and do offline reindex after the upgrade?\n\nThe reason, we don\u0027t avoid double update of the Lucene in the same release, is because we do guarantee online upgrade of Gerrit site from previous version. And at least in the past we had problems, that only the previous Lucene codec release was included in backwards-codec library.\n\nAlso note, if you do the upgrade you probably also want this, for Gerrit to be compatible with Java 21: [1].\n\n[1]: https://gerrit-review.googlesource.com/c/gerrit/+/392466",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3257b573_90baba8c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1010516
      },
      "writtenOn": "2023-12-03T06:58:35Z",
      "side": 1,
      "message": "I tried, offline reindex fails with the same error message.",
      "parentUuid": "1d5e961a_72d1faba",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc40d71c_e1ed1b43",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-12-03T07:42:15Z",
      "side": 1,
      "message": "What error message? Should index config file be adapted? Just setup vanila 3.9.1 test site and copy index config file to your real gerrit site (make backup first). Now offline reindex should work, right?",
      "parentUuid": "3257b573_90baba8c",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8643e520_3f9aa433",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-12-03T07:50:30Z",
      "side": 1,
      "message": "Apparently the instructions how to perform upgrade from Gerrit v3.9.0 (defective release) is incomplete: [1] and should be amended?\n\n[1]: https://www.gerritcodereview.com/3.9.html#upgrade-from-gerrit-v390-defective-release",
      "parentUuid": "dc40d71c_e1ed1b43",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95e88737_fba8f347",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1010516
      },
      "writtenOn": "2023-12-03T07:52:56Z",
      "side": 1,
      "message": "I pasted the error message in the bug report.\n\n```\nException in thread \"main\" java.lang.IllegalArgumentException: Could not load codec \u0027Lucene95\u0027.  Did you forget to add lucene-backward-codecs.jar?\n        at org.apache.lucene.index.SegmentInfos.readCodec(SegmentInfos.java:449)\n        at org.apache.lucene.index.SegmentInfos.readCommit(SegmentInfos.java:356)\n        at org.apache.lucene.index.SegmentInfos.readCommit(SegmentInfos.java:291)\n        at org.apache.lucene.index.IndexWriter.\u003cinit\u003e(IndexWriter.java:1037)\n        at com.google.gerrit.lucene.AutoCommitWriter.\u003cinit\u003e(AutoCommitWriter.java:35)\n        at com.google.gerrit.lucene.AutoCommitWriter.\u003cinit\u003e(AutoCommitWriter.java:31)\n```\n\nCopying index config from a vanilla site didn\u0027t help. But if I delete the entire `index` directory and run reindex (I actually ran `init --batch`) it looks good.",
      "parentUuid": "dc40d71c_e1ed1b43",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28278280_b0c411eb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-12-03T07:53:22Z",
      "side": 1,
      "message": "Ah, I see you added reference to the issue 314340456 and mentioned there the error message:\n\n   Exception in thread \"main\" java.lang.IllegalArgumentException: Could not load codec \u0027Lucene95\u0027.  Did you forget to add lucene-backward-codecs.jar?\n\nLook",
      "parentUuid": "8643e520_3f9aa433",
      "revId": "ba034951c7f5bb92b122b331d6090ae9be608afa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}