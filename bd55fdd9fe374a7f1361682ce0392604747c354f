{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1cf502ef_fde3bbaf",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-03-16T08:26:30Z",
      "side": 1,
      "message": "Maybe the program should be renamed now?\n\"Local usernames\" \u003d external IDs in scheme Gerrit\nBut now the program also touches non-local usernames (external IDs in scheme Username).",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0f25f2f_3e655ee9",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-03-16T08:26:30Z",
      "side": 1,
      "message": "If the case of the username is changed, users lose access to their user branches that contain the username as part of the refname. This is why Gerrit doesn\u0027t allow to change usernames. This means it is only safe to change usernames if no user branches are used, or if you have can rename user branches somehow.\n\nDue to this, I think it\u0027s not safe to let this program touch usernames unconditionally, but it must be possible to control this via a parameter when invoking the program. Also this should be properly documented.",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2be79e52_05e43105",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-03-16T08:37:09Z",
      "side": 1,
      "message": "Thanks for clarifying this. I thought there had to be a reason that was not already done, but just couldn\u0027t find it. This should definitely be taken care of. I am not sure if giving an option to the user would be a good idea, since if a user did not understand the side effects, this would be detrimental.",
      "parentUuid": "a0f25f2f_3e655ee9",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ad8ddd5_1b2cdcd9",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-03-16T08:41:28Z",
      "side": 1,
      "message": "Well, this is an admin program, so if the option is well documented it should be fine having it.\n\nYou may want to double-check that access to user branches really gets lost. That\u0027s definitely the reason why we disallow changing the username. Not 100% sure what happens if you only change the case of the username.",
      "parentUuid": "2be79e52_05e43105",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "829558b0_8979a901",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2021-03-16T08:49:28Z",
      "side": 1,
      "message": "Ok, I will try that.\nWe could also only allow the conversion for users that only have an external ID of the username scheme, but not one of the gerrit scheme. These would be users created by the SSH command and likely not be human users that would use user branches. Still, even in this case this should be an option.",
      "parentUuid": "1ad8ddd5_1b2cdcd9",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a36a22fd_8660a188",
        "filename": "java/com/google/gerrit/pgm/LocalUsernamesToLowerCase.java",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2021-03-16T09:59:24Z",
      "side": 1,
      "message": "there are some tests regarding resolution of ${username} in RefControlTest\n\nif refs are handled case sensitive depends on how they are stored, loose refs depend on case-sensitivity of the underlying filesystem, packed-refs and RefTable are, I think, case-sensitive.",
      "parentUuid": "829558b0_8979a901",
      "revId": "bd55fdd9fe374a7f1361682ce0392604747c354f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}