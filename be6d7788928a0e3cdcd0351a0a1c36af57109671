{
  "pushCert": "certificate version 0.1\npusher A0D0EF51 1517580212 +0100\nnonce AFD2Vu0cllFee/NZelgXRYO3ka7qu94p/13WaRx7244O9KDzFDX5uYBcVsgF5wLMnxcJqFBsIUFV\n\n0000000000000000000000000000000000000000 c57c134b45a1d72836aca4a030a6c75a86a12347 refs/for/master\n-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEjcOJ9ZBmQPrFqZA3UbX9l6DQ71EFAlp0b7QACgkQUbX9l6DQ\n71G2pAf+MFGkEGU62odKlTuaxbiMmqNSTDurEMZ5Q8VUSlr9cebL3p1+9LYhrhBv\nXBpMk4P0x481gXTe5eAL3C8475+bLP7eiH9fDnHv7G6/eOaOjF/Xq1/uxSXp+Hbb\nxKbV/dDjr2/yCLWOhqfwe6/k25KmWqvnxQikmdFbmlzKCTeqdJfq3jiOvxPLqbP9\nwiF1aLOrcZJFhllSjRX7QYuOi3vrtesTfm5aH+Uqmn+yxrAbT753kqxoFsZBks3M\nQrS1mD7RMsPvOZwiHXTr1vfemR+hHgfOCG0C/t0O//2NRD3rWqScCBLIkfqS3knE\nfxahDH8KTd3gcs2QFaXXDtWcLYFErw\u003d\u003d\n\u003dYFdb\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "a66c3be9_4ed022c6",
        "filename": "java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 174,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-02-02T14:33:00Z",
      "side": 1,
      "message": "This needs to be benchmarked.\n\nI spent several hours benchmarking and optimizing Change.Id.fromRef since this is a tight loop and there are very many refs. I am concerned about the cost of introducing all these small short-lived Optionals in this loop.\n\nIt\u0027s possible this is still ok because there are typically many more change refs than account refs in a repo (other than All-Users), but we need to prove it.\n\nEven if the benchmarks show that this change is ok, I am not crazy about the idea of having Account.Id.fromRef return an Optional and Change.Id not.",
      "revId": "be6d7788928a0e3cdcd0351a0a1c36af57109671",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfab2c90_beec2d2a",
        "filename": "java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 174,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-02-02T14:35:20Z",
      "side": 1,
      "message": "How did you benchmark this?\n\n\u003e I am not crazy about the idea of having Account.Id.fromRef return an Optional and Change.Id not.\n\nOf course if would do the same change for all other fromRef methods if this change gets approved.",
      "parentUuid": "a66c3be9_4ed022c6",
      "revId": "be6d7788928a0e3cdcd0351a0a1c36af57109671",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15083cb4_d5b7ee40",
        "filename": "java/com/google/gerrit/server/git/VisibleRefFilter.java",
        "patchSetId": 3
      },
      "lineNbr": 174,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-02-05T13:25:42Z",
      "side": 1,
      "message": "\u003e How did you benchmark this?\n\nBasically I instrumented ls-remote on a modest-sized repo. https://gerrit-review.googlesource.com/c/gerrit/+/58941 has details.\n\n(That change actually talks about PatchSet.Id.fromRef; this code was changed to use Change.Id.fromRef later in https://gerrit-review.googlesource.com/c/gerrit/+/58946. Change.Id.fromRef was rewritten with similar techniques in https://gerrit-review.googlesource.com/c/gerrit/+/58943.)",
      "parentUuid": "bfab2c90_beec2d2a",
      "revId": "be6d7788928a0e3cdcd0351a0a1c36af57109671",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}