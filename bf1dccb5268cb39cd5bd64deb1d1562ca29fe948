{
  "comments": [
    {
      "key": {
        "uuid": "7e86dd66_d1de0481",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 4
      },
      "lineNbr": 276,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2013-11-16T02:04:22Z",
      "side": 1,
      "message": "This is pretty slow. Doing it per result is going to make searches unbearably slow. One of the high costs is looking up the branch in the RefDatabase and just seeing if its different from the value stored in the change. Often it is, as another change has merged, so now you have to go into the slow path and run the merge test.\n\nWe really need this to be async updated and not blocking the search path.",
      "revId": "bf1dccb5268cb39cd5bd64deb1d1562ca29fe948",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "de7ee924_4c483f77",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 4
      },
      "lineNbr": 276,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-11-18T13:25:17Z",
      "side": 1,
      "message": "I wasn\u0027t aware that already the check whether the mergeability flag needs to be recomputed is that expensive. \n\n \u003e We really need this to be async updated and not blocking \n \u003e the search path.\n I gave this a first try, see [1].\n\n[1] https://gerrit-review.googlesource.com/51840",
      "parentUuid": "7e86dd66_d1de0481",
      "revId": "bf1dccb5268cb39cd5bd64deb1d1562ca29fe948",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3e90e598_2f3fe9cb",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 4
      },
      "lineNbr": 276,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2013-11-18T22:34:21Z",
      "side": 1,
      "message": "If you look at gerrit-review its about 280ms round-trip latency for the /megerable REST API call. My workstation is usually about 60ms away from the servers so its ~220ms to perform the check.\n\nThere may be some overhead related to authentication that is already paid for by the /changes/ query, but its quite low compared to the check itself.",
      "parentUuid": "de7ee924_4c483f77",
      "revId": "bf1dccb5268cb39cd5bd64deb1d1562ca29fe948",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}