{
  "comments": [
    {
      "key": {
        "uuid": "c759f1bd_1dcf1569",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 7,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-12-01T04:18:21Z",
      "side": 1,
      "message": "This PR: [1] was not merged yet and would probably never be merged. So what is the point? Yes we did switched to consuming a non merged PR commits in the past, e.g. rules_closure, but it was only a matter of time and all those PR were merged. And right now, we don\u0027t consume any non-merged commit. So, before diving deeper here, I would like to hear what is the way forward strategy for consuming this non-merged PRs. One option would be to do it conditionally. Not sure, how hard would be to do it, though.\n\n* [1] https://github.com/PolymerElements/paper-styles/pull/164/commits/dd0b13e186b9690d5e74a93f6e51e0835ea60495",
      "range": {
        "startLine": 7,
        "startChar": 23,
        "endLine": 7,
        "endChar": 63
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7df7719_ee87a3ac",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-12-01T04:18:21Z",
      "side": 1,
      "message": "This would mean a performance degradation for gerrit installation sites because loading from https://fonts.googleapis.com is certainly much faster then loading from the local site.\n\nAs Ben pointed out, there is this privacy statement: [2].\n\nI also don\u0027t understand how loading fonts from https://fonts.googleapis.com is a network issue for Wikimedia users.\n\nIf I am trying to open this site: https://gerrit.wikimedia.org/r/q/status:open, I\u0027m seeing this font is downloaded: [3]. Why would a user on local machine, would have access to gerrit.wikimedia.org, but not to fonts.gstatic.com?\n\nSo, to summarize, I would rather keep loading the fonts from https://fonts.googleapis.com.\n\nIt at all, we could think about doing it conditionally, but it seems that Gerrit would need to be re-built to change the how paper-styles fonts are consumed, especially looking at this fix [4], that the actual addition of the local fonts  artifact was missed in this change.\n\n* [2] https://developers.google.com/fonts/faq?hl\u003den#what_does_using_the_google_fonts_api_mean_for_the_privacy_of_my_users\n* [3] Request URL: https://fonts.gstatic.com/s/robotomono/v7/L0x5DF4xlVMF-BfR8bXMIjhLq38.woff2\n* [4] https://gerrit-review.googlesource.com/c/gerrit/+/247133",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a0464a0_299327d3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-12-01T12:52:08Z",
      "side": 1,
      "message": "For your first point I didnâ€™t noitice a performance degradation when testing.\n\nSecondly as Dmitrii Filippov has mentioned here https://gerrit-review.googlesource.com/c/gerrit/+/247133/2/polygerrit-ui/app/rules.bzl#94 we are loading two copies either through font-roboto or font-roboto-local. So we can change that by getting gerrit to use the consumed fonts rather than https://github.com/GerritCodeReview/gerrit/tree/master/lib/fonts. Which means less duplicates.\n\nFor your second point, even though thereâ€™s a privacy statement we still disallow it as far as Iâ€™m aware.\n\nFor point 3, I never said wikimedia had issues downloading the fonts :). it was a user who came onto irc who did.\n\nI would like google to merge those prâ€™s.",
      "parentUuid": "f7df7719_ee87a3ac",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1985ec46_a30dec15",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-12-02T13:09:34Z",
      "side": 1,
      "message": "Quoting the user on why we cannot use an external font site in addition to my reason above:\n\n[13:01:07]  \u003cBlastuR\u003e\tpaladox: ok, cool. My issue is that I run gerrit in an airgapped environment. in fact, all developers are in the airgapped environment. and gerrit just won\u0027t load the pages if the fonts.googleapis.com is in there",
      "parentUuid": "0a0464a0_299327d3",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06b61019_7278a511",
        "filename": "/COMMIT_MSG",
        "patchSetId": 7
      },
      "lineNbr": 10,
      "author": {
        "id": 1092510
      },
      "writtenOn": "2019-12-02T13:19:30Z",
      "side": 1,
      "message": "This is BlastuR from IRC. I\u0027m the user who filed the bug with Paladox originally.\n\nAs paladox quotes above, our issue is that we use Gerrit in an airgrapped environment and the pages will not load if there are references to googleapis.com (or any external site). It just stops mid-way while waiting for googleapis.com to timeout (which will take a very long time!)\n\nThe only way I can make Gerrit 3.1.0 load at the moment is by blocking all access to Googleapis.com in Chrome browser.\n\nI did not realize this would become a performance issue, we are just a small team of about 50 developers.\n\nIf possible, could this be configurable? We would gladly pay the performance penalty if the sites load at all ðŸ˜Š",
      "parentUuid": "1985ec46_a30dec15",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb231133_d5b4cf5c",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2019-11-29T14:16:56Z",
      "side": 1,
      "message": "Hi,\nProbably I am too late, but what is the purpose of this switch?\nGerrit code has its own copy of these fonts:\nhttps://gerrit.googlesource.com/gerrit/+/refs/heads/master/lib/fonts/\n\nWe do not use fonts from font-roboto package:\npolymerSkipLoadingFontRoboto \u003d true here:\nhttps://gerrit.googlesource.com/gerrit/+/refs/heads/master/resources/com/google/gerrit/httpd/raw/PolyGerritIndexHtml.soy#43",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f8523fc_d487a4f6",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2019-11-29T15:03:08Z",
      "side": 1,
      "message": "Ok, polymerSkipLoadingFontRoboto doesn\u0027t work with font-roboto v1.1.0\nBut the fonts from font-roboto-local are missed in the final gerrit.war file. It seems, BUILD must be also updated to include fonts in the final artifact.",
      "parentUuid": "cb231133_d5b4cf5c",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d346d18e_85da2f9d",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-11-29T15:29:49Z",
      "side": 1,
      "message": "Hi, because we use paper styles, it includes font-roboto (which includes a link to use google font site). Some companies disallow third party usage like the Wikimedia Foundation (Confirmed with their  privacy engineer).\n\noh! I think we need to add it to https://github.com/GerritCodeReview/gerrit/blob/master/polygerrit-ui/app/rules.bzl#L93 too.",
      "parentUuid": "6f8523fc_d487a4f6",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15c1b95f_096372da",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-11-29T15:31:49Z",
      "side": 1,
      "message": "Hmm, or maybe not since paper-styles would be built using the dep i would have guessed?",
      "parentUuid": "d346d18e_85da2f9d",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f30b9cbc_1df99d39",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2019-11-29T16:45:18Z",
      "side": 1,
      "message": "You can run\nbazel build gerrit\nand then check the final package - it doesn\u0027t contain font files from font-roboto-local.\n\nSo I think yes, the files must be added to the appropriate place in the output.\n\nAlso, could you please run gerrit and check \"Network\" tab and if there are 404 errors for font files, it would be good to revert this change and submit it again after fixing the build.",
      "parentUuid": "15c1b95f_096372da",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1857d326_c4e1d816",
        "filename": "lib/js/bower_archives.bzl",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-11-29T20:09:29Z",
      "side": 1,
      "message": "Fixed with https://gerrit-review.googlesource.com/c/gerrit/+/247133",
      "parentUuid": "f30b9cbc_1df99d39",
      "range": {
        "startLine": 29,
        "startChar": 16,
        "endLine": 29,
        "endChar": 33
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08738e30_59264c86",
        "filename": "tools/js/bower2bazel.py",
        "patchSetId": 7
      },
      "lineNbr": 80,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-12-01T04:18:21Z",
      "side": 1,
      "message": "Why it is included twice, on L41 above and here?",
      "range": {
        "startLine": 80,
        "startChar": 4,
        "endLine": 80,
        "endChar": 35
      },
      "revId": "c12ed4a869a03f2ca02b76b304a5b5688c997a84",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}