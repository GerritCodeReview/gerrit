{
  "comments": [
    {
      "key": {
        "uuid": "a0b93c4e_694d368f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-06-12T07:51:39Z",
      "side": 1,
      "message": "I have to ask, the implication of this problem to offline reindexing. Given that offline reindexing site-program per design doesn\u0027t load plugins, the current behaviour is symmetric: offline reindexing and online reindexing have the same behaviour.\n\nI know, that to load plugins in offline reindexing program is a lot of work and you need a fix today. Still I would prefer, that we document this discrepancy at some place or even warn, that sites that depend on plugins, that influence reindexing operation shouldn\u0027t do offline reindexing. Ever.",
      "revId": "c22608c8bc7e1ec2d1139347b602173887c52dea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70b59319_9aaab075",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-06-12T08:24:05Z",
      "side": 1,
      "message": "Off-line reindexing is inherently broken with regards to Prolog rules calculation: this has been discussed on the mailing list (see: https://goo.gl/pvVscd). On-line reindex is correct and, yes, is not aligned in terms of business logic compared to the off-line reindex, unfortunately.\n\nThey do different things because of the triggering of different parts of the Gerrit core: on-line uses a fully working Gerrit infrastructure, whilst the off-line uses a reduced set of Guice bindings.\n\nThe issue here is when off-line reindex is triggered at startup: it gets activated *before* the plugins registration when used standalone but *after* when used with an external container (e.g. Tomcat).\n\nWhen triggered *after* Gerrit startup, then everything is normal because all the plugins have been fully loaded.\n\nShall we do a follow-up change on the off-line reindexing? Maybe posting a warning if we recognize that you have plugins installed?",
      "parentUuid": "a0b93c4e_694d368f",
      "revId": "c22608c8bc7e1ec2d1139347b602173887c52dea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eb61f6d0_a2c7a7c6",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Daemon.java",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2017-06-12T07:23:11Z",
      "side": 1,
      "message": "Should the same comment be added in WebAppinitializer?",
      "range": {
        "startLine": 356,
        "startChar": 4,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c22608c8bc7e1ec2d1139347b602173887c52dea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1879ba51_9c90e936",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/Daemon.java",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-06-12T07:25:02Z",
      "side": 1,
      "message": "True, let me check what\u0027s the behavior there.",
      "parentUuid": "eb61f6d0_a2c7a7c6",
      "range": {
        "startLine": 356,
        "startChar": 4,
        "endLine": 360,
        "endChar": 31
      },
      "revId": "c22608c8bc7e1ec2d1139347b602173887c52dea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}