{
  "comments": [
    {
      "key": {
        "uuid": "f51a3555_e8196e13",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-03-24T07:31:23Z",
      "side": 1,
      "message": "@Edwin, @Logan: would you agree with this migration path? (Not sure, how to do it zero-downtime capable, though?).\n\nThe idea is to get rid of draft workflow already now (before Chromium launch) and not need to rebase this change all the time. Once WIP feature is ready, we could consider to adjust this migration path and make it configurable. How is that sounds? (Of course, for that, the draft workflow would need to be removed from PG UI, as indicated in the commit message).\n\nI really don\u0027t like the idea of removal of draft patch sets for regular changes during migration, as we cannot replace it with edits. There can be number of draft patch sets per regular change, but only one edit per change is currently supported. I would clearly prefer publishing of draft patch sets over removal. I think this change already does that, as draft bit is removed in patch set without any repacement.",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c936733_2ab7cc04",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-03-24T07:55:19Z",
      "side": 1,
      "message": "@David if we go this path, how do we differentiate between the \"genuine private changes\" from the ones migrated from the draft workflow?",
      "parentUuid": "f51a3555_e8196e13",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa25ebd7_16922b79",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-03-24T08:32:19Z",
      "side": 1,
      "message": "We can\u0027t, but why should we?",
      "parentUuid": "7c936733_2ab7cc04",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47189906_eb51f590",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-03-24T08:36:05Z",
      "side": 1,
      "message": "We have two options then: just say \"draft changes aren\u0027t supported anymore, get rid of them, full stop\". Then, in this case, we just abandon or remove them upon migration.\n\nOr we may say \"draft changes workflow have now been managed through the WIP concept\" and thus we need a migration path from draft changes to WIP.\n\nDraft and Private are different, let\u0027s now mix them to avoid confusion IMHO.",
      "parentUuid": "aa25ebd7_16922b79",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6352f345_08b4ac18",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-03-24T08:41:22Z",
      "side": 1,
      "message": "We have around 700 draft changes on GerritHub.io, people is actually using the draft workflow and quite a lot. We would need WIP IMHO. Best would having the WIP workflow first, and migrate the draft changes to WIP.",
      "parentUuid": "47189906_eb51f590",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83ec4520_b8793e17",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-03-24T08:49:04Z",
      "side": 1,
      "message": "Ah, I understand why you are asking, you missed the discussion in private change proposal change and you missed my statement above:\n\n  Once WIP feature is ready, we could consider to adjust this migration path\n  and make it configurable.\n\nSo, this proposed migration path above is an intermediate step, that nobody should deploy on a production site, unless she really really wants DRAFT -\u003e PRIVATE changes migration path. For all other sites, they should wait until 2.15 is released.\n\nIn 2.15 final, the plan is to offer changes.draftWorkflowMigrationPath configuration option and allow it to be one of:\n\n* abandon (effectively publish)\n* private (draft changes remain hidden, with the ability to delete the change, when the site enabled that option, or mark as non private, effectively publish)\n* wip (effectively publish the draft changes, but mark them as wip)\n\nNote, that all this applies only to draft changes, not for draft patch set for regular changes. They can\u0027t be mapped to anything, because new concepts doesn\u0027t support private or wip draft patch sets. And there can\u0027t be more than one change edits for changes. So that it\u0027s still open whether we just publish or delete draft patch sets or even make this configurable as well?\n\nTo summarize, what I proposed in my comment above, as an intermediate step, already implement (hard coded) DRAFT -\u003e PRIVATE migration path part in Schema_144, and extend it when wip feature is implemented. At that point we could introduce the config option ad extend Schema 144 to reflect it.",
      "parentUuid": "47189906_eb51f590",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5e0b498_96268596",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-03-24T08:53:10Z",
      "side": 1,
      "message": "I agree. Feel free, to contribute to the wip series implementation. Proposal (already approved) is here, and the wip series partially implemented is here: [2]. ;-)\n\n* [1] https://gerrit-review.googlesource.com/#/c/97245/\n* [2] https://gerrit-review.googlesource.com/#/q/topic:wip-workflow",
      "parentUuid": "6352f345_08b4ac18",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26f856bd_65f1d1c1",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/schema/Schema_144.java",
        "patchSetId": 23
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2017-03-24T09:01:16Z",
      "side": 1,
      "message": "Yes, it\u0027s definitely on my backlog :-) I like the WIP concept a lot. My question on the migration path was: if we are planning to allow Draft to WIP migration BUT we do migrate now all Draft as Private ... how would I be able to recognise the \"Private migrated\" so that I can move them to WIP?\n\nP.S. Please note that GerritHub.io is kept up to date with master, so once the Schema change is merged, we apply it to GerritHub.io *before* the 2.15 release.",
      "parentUuid": "d5e0b498_96268596",
      "range": {
        "startLine": 36,
        "startChar": 6,
        "endLine": 37,
        "endChar": 70
      },
      "revId": "c39e251f815c417a08dff7400ba12bd418cc44ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}