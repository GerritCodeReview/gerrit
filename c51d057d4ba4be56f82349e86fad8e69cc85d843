{
  "comments": [
    {
      "key": {
        "uuid": "AAADkn////o\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/contact/HttpContactStoreConnection.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2012-03-07T00:45:44Z",
      "side": 1,
      "message": "Hm, would it be worth rolling this into a FactoryModule method? E.g. \u003cT\u003e factory(Class\u003cT\u003e, Class\u003c? extends T\u003e)",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADmH////k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/contact/HttpContactStoreConnection.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1002517
      },
      "writtenOn": "2012-03-07T01:24:08Z",
      "side": 1,
      "message": "Are you suggesting we keep the original code from FactoryModule which did reflection to determine the type of the returned value?\n\nI considered doing that, but figured using the FactoryModuleBuilder directly was almost as easy.",
      "parentUuid": "AAADkn////o\u003d",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADqn////k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/contact/HttpContactStoreConnection.java",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2012-03-07T17:34:21Z",
      "side": 1,
      "message": "Not exactly. Right now, if we have:\n\n  class FooFactory {\n    Foo create(...);\n  }\n\nthen factory(FooFactory.class) allows assisted injection in the constructor of Foo, which must be a concrete type.\n\nHere, we have:\n\n  class ContactStoreConnectionFactory {\n    ContactStoreConnection create(...);\n  }\n\nwhere ContactStoreConnection is an *interface*, not a concrete type. This use of FactoryModuleBuilder does two things:\n1. Binds ContactStoreConnection to HttpContactStoreConnection.\n2. Allows assisted injection in the constructor of *Http*ContactStoreConnection.\n\nSo my proposal (which was originally incorrect) is to replace this with:\n\n  factory(ContactStoreConnection.Factory.class, ContactStoreConnection.class, HttpContactStoreConnection.class)\n\nI was wrong about the signature, which would probably be more like:\n\n  \u003cT\u003e factory(Class\u003c?\u003e factoryClass, Class\u003cT\u003e baseType, Class\u003cT\u003e concreteType);\n\nAlthough, now that I\u0027ve written that all out, this doesn\u0027t seem all that much cleaner than just using FactoryModuleBuilder directly.",
      "parentUuid": "AAADmH////k\u003d",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADkn////k\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/PushReplication.java",
        "patchSetId": 1
      },
      "lineNbr": 439,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2012-03-07T00:45:44Z",
      "side": 1,
      "message": "Isn\u0027t this the same as factory(PushOp.Factory.class)?",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADl3////E\u003d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/PushReplication.java",
        "patchSetId": 1
      },
      "lineNbr": 439,
      "author": {
        "id": 1002517
      },
      "writtenOn": "2012-03-07T01:24:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "AAADkn////k\u003d",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADkn////g\u003d",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/project/RefControlTest.java",
        "patchSetId": 1
      },
      "lineNbr": 304,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2012-03-07T00:45:44Z",
      "side": 1,
      "message": "factory(CapabilityControl.Factory.class)?",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAADl3////A\u003d",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/project/RefControlTest.java",
        "patchSetId": 1
      },
      "lineNbr": 304,
      "author": {
        "id": 1002517
      },
      "writtenOn": "2012-03-07T01:24:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "AAADkn////g\u003d",
      "revId": "c51d057d4ba4be56f82349e86fad8e69cc85d843",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}