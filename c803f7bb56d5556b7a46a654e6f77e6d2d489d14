{
  "comments": [
    {
      "key": {
        "uuid": "d0394c56_13a6fa69",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 14
      },
      "lineNbr": 1377,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-09T11:09:12Z",
      "side": 1,
      "message": "This method doesn\u0027t have test.\nFor example, you can extend \"test(\u0027file route\u0027, () \u003d\u003e {\" and call this method.\nIn this test you can stub _redirectOrNavigate method and check args.\n\nThe same for _handleCommentRoute",
      "range": {
        "startLine": 1377,
        "startChar": 2,
        "endLine": 1377,
        "endChar": 18
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "817d4de1_bc392209",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 14
      },
      "lineNbr": 1377,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-09T11:28:54Z",
      "side": 1,
      "message": "This method is doing nothing but passing params it\u0027s getting from url to diff view.\nI already tested that correct params are being created from url and that the diff view is handling those params correctly.\nI think this function doesn\u0027t need to be tested(it\u0027s doing nothing but just passing the params along).",
      "parentUuid": "d0394c56_13a6fa69",
      "range": {
        "startLine": 1377,
        "startChar": 2,
        "endLine": 1377,
        "endChar": 18
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df69a71d_edf06aea",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 14
      },
      "lineNbr": 1377,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-09T13:25:18Z",
      "side": 1,
      "message": "I slightly changed your function:\n_handleFileRoute(ctx) {\n    const params \u003d {\n      project: ctx.params[0],\n      changeNum: ctx.params[2],\n      patchNum: ctx.params[1],\n      path: ctx.params[3],\n      view: GerritNav.View.DIFF,\n      fileLink: true,\n    };\n    this.reporting.setRepoName(params.project);\n    this._redirectOrNavigate(params);\n  }\n\nand all tests passed. You can extend test and check that _handleFileRoute and FILE regexp are matched each other:\n\n        test(\u0027file route\u0027, () \u003d\u003e {\n          const url \u003d \u0027/c/gerrit/+/274190/file/1/\u0027 +\n            \u0027polygerrit-ui/app/elements/core/gr-router/gr-router.js\u0027;\n          const groups \u003d url.match(_testOnly_RoutePattern.FILE);\n          assert.deepEqual(groups.slice(1), [\n            \u0027gerrit\u0027, // project\n            \u0027274190\u0027, // changeNum\n            \u00271\u0027, // patchNum\n            \u0027polygerrit-ui/app/elements/core/gr-router/gr-router.js\u0027, // path\n          ]);\n\n          assertDataToParams({params: groups.slice(1)}, \u0027_handleFileRoute\u0027, {\n            project: \u0027gerrit\u0027,\n            changeNum: \u0027274190\u0027,\n            patchNum: \u00271\u0027,\n            path: \u0027polygerrit-ui/app/elements/core/gr-router/gr-router.js\u0027,\n            fileLink: true,\n            view: GerritNav.View.DIFF,\n          });\n        });\n\nAlso, if in the future the RegExp is changed, the test shows that _handleFileRoute requires an update. Without the last part (assertDataToParams), test doesn\u0027t catch the case when developer updates FILE regexp, but don\u0027t update _handleFileRoute method.",
      "parentUuid": "817d4de1_bc392209",
      "range": {
        "startLine": 1377,
        "startChar": 2,
        "endLine": 1377,
        "endChar": 18
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "682025cd_356f3624",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router.js",
        "patchSetId": 14
      },
      "lineNbr": 1377,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-20T15:11:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df69a71d_edf06aea",
      "range": {
        "startLine": 1377,
        "startChar": 2,
        "endLine": 1377,
        "endChar": 18
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "511bff8b_1d374c4c",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router_test.js",
        "patchSetId": 14
      },
      "lineNbr": 1512,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-09T11:09:12Z",
      "side": 1,
      "message": "This test doesn\u0027t check your code. It tests only specific regular expression.\nThe problem here that I can break regular expression in gr-router and this test doesn\u0027t catch it.\n\nYou can export FILE regexp from gr-router like this:\nexport const _testOnly_RoutePattern \u003d RoutePattern;\n\nthen use __testOnly_RoutePattern.FILE in this test.\n\nThe same for the next test \u0027comment route\u0027",
      "range": {
        "startLine": 1512,
        "startChar": 10,
        "endLine": 1512,
        "endChar": 66
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ced4319d_c838d371",
        "filename": "polygerrit-ui/app/elements/core/gr-router/gr-router_test.js",
        "patchSetId": 14
      },
      "lineNbr": 1512,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-09T11:28:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "511bff8b_1d374c4c",
      "range": {
        "startLine": 1512,
        "startChar": 10,
        "endLine": 1512,
        "endChar": 66
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b2f6f8e_ef0c2073",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 14
      },
      "lineNbr": 860,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2020-07-09T11:09:12Z",
      "side": 1,
      "message": "value.commentLink - can\u0027t find where it is set (only in tests).\nMaybe remove or use commentId instead?",
      "range": {
        "startLine": 860,
        "startChar": 14,
        "endLine": 860,
        "endChar": 31
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf053caf_d65cdbf7",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.js",
        "patchSetId": 14
      },
      "lineNbr": 860,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2020-07-09T11:28:54Z",
      "side": 1,
      "message": "Should be used in _handleCommentRoute\nI added it in the child change but forgot to update the parent.",
      "parentUuid": "6b2f6f8e_ef0c2073",
      "range": {
        "startLine": 860,
        "startChar": 14,
        "endLine": 860,
        "endChar": 31
      },
      "revId": "c803f7bb56d5556b7a46a654e6f77e6d2d489d14",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}