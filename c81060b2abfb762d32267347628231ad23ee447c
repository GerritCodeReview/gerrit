{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "93cc5a28_ca9fa3c6",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-02-03T00:08:32Z",
      "side": 1,
      "message": "Late to the party here, but I have a Googlesource question on this. When I try to copy and run this same query on gerrit-review, I get an error like\n\n Error 400: regular expression queries not supported on googlesource.com\n\nHow come it works in the SR though?",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "740c098a_bccd5937",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-02-03T07:20:58Z",
      "side": 1,
      "message": "The difference is:\n\n- if you use a regular expression to search changes, the query is processed by the index backend which (in our case) doesn\u0027t support regular expressions\n\n- if you use a regular expression as part of a submit requirement it\u0027s Gerrit who checks whether a given change matches that query (no index backend involved) and Gerrit does support regular expressions in queries (FYI I think it\u0027s the same for project watches)",
      "parentUuid": "93cc5a28_ca9fa3c6",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bc96593_482f6af9",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-02-03T09:33:23Z",
      "side": 1,
      "message": "Thanks Edwin!",
      "parentUuid": "740c098a_bccd5937",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d00c11a4_b88ebb77",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-02-03T15:22:22Z",
      "side": 1,
      "message": "Thank you! Is there a way I can use the \u0027rule:\u0027 operator (or another operator) to find changes that have this SR applicable and unsatisfied? If not, is there another way someone could find that info (output in query json maybe?)?",
      "parentUuid": "6bc96593_482f6af9",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cff0b86f_c9354a52",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-02-04T15:37:41Z",
      "side": 1,
      "message": "Unfortunately right now you can\u0027t. The \u0027rule\u0027 operator is used in conjunction with submit rule results (including prolog) which are now removed from gerrit-review.googlesource.com.\n\nWe will need to implement a submit requirement operator like `submitrequirement:library-compliance\u003dUNSATISFIED`. As a workaround you could do a query like: \n`(file:WORKSPACE OR file:tools/deps.bzl OR file:.gitignore) and project:gerrit and status:open`\n\nBut this doesn\u0027t include changes with files in the ^lib/.* directory.\n\nI can implement this operator quickly but it will require an internal index upgrade from our side before it can work. That\u0027s a tedious task that will take some time, but I agree it\u0027s necessary.",
      "parentUuid": "d00c11a4_b88ebb77",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32c9a478_f753af04",
        "filename": "project.config",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-02-04T16:03:15Z",
      "side": 1,
      "message": "\u003e As a workaround you could do a query like: \n\u003e `(file:WORKSPACE OR file:tools/deps.bzl OR file:.gitmodules) and project:gerrit and status:open`\n\u003e \n\u003e But this doesn\u0027t include changes with files in the ^lib/.* directory.\n\nAck. That\u0027s what I had concluded too (fixed your query to use .gitmodules) ðŸ˜Š\n\n\u003e \n\u003e I can implement this operator quickly but it will require an internal index upgrade from our side before it can work. That\u0027s a tedious task that will take some time, but I agree it\u0027s necessary.\n\nThat operator sounds great, but I don\u0027t think there\u0027s a rush. AFAICT, this wasn\u0027t possible for prolog rules previously either, so it\u0027s not a regression. The query API seems to surface equivalent (or better) data in \u0027submit_requirements\u0027 as it did in \u0027requirements\u0027 previously and that seems to have been the only way to know this before.",
      "parentUuid": "cff0b86f_c9354a52",
      "revId": "c81060b2abfb762d32267347628231ad23ee447c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}