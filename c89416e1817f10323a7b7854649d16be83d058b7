{
  "comments": [
    {
      "key": {
        "uuid": "d065072b_08aa37f6",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/SuggestReviewers.java",
        "patchSetId": 21
      },
      "lineNbr": 245,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-09-12T12:45:18Z",
      "side": 1,
      "message": "This is a little crazy simply because the suggest oracle may be called many times in rapid succession during the course of one operation. It would be easy to have a simple Cache\u003cBoolean, List\u003cAccount\u003e\u003e with a short expiration time, say 30s. (The cache will only have a single key, say True, we\u0027re just using Cache for the expiration behavior.)\n\n(Also totally will not work for googlesource.com but we can wait till there\u0027s a proper secondary index for accounts.)",
      "revId": "c89416e1817f10323a7b7854649d16be83d058b7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30dae333_854ac66b",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/SuggestReviewers.java",
        "patchSetId": 21
      },
      "lineNbr": 245,
      "author": {
        "id": 1006454
      },
      "writtenOn": "2014-09-12T14:15:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d065072b_08aa37f6",
      "revId": "c89416e1817f10323a7b7854649d16be83d058b7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30dae333_e282a87a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/SuggestReviewers.java",
        "patchSetId": 21
      },
      "lineNbr": 254,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-09-12T12:45:18Z",
      "side": 1,
      "message": "It\u0027s not clear why the check is against fullNameMatches.size() as opposed to, say, the sum of fullName + email. What do you want the limit to be? Maximum total number of results returned? How is that different from limit?",
      "revId": "c89416e1817f10323a7b7854649d16be83d058b7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d065072b_08835780",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/SuggestReviewers.java",
        "patchSetId": 21
      },
      "lineNbr": 254,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2014-09-12T14:15:51Z",
      "side": 1,
      "message": "The algorithm in the default implementation is:\nTry to get MAX_MATCHES from on fullName\nIf that doesn\u0027t succeed call db again and get email-matches and top off with those.\nI wanted to mimic that behavior but I don\u0027t want to make another iteration of the Accounts, hence I:\nMatch against emails in the same iteration, and if I haven\u0027t gotten MAX_MATCHES from fullname search I topi of from the email-matches.\nIf I compare agains emails and fullnames I could end up with just email matches. In our case looking for Son Wu would fill up on email matches long before mr Wu was hit.\nThe reason why I\u0027m not checking for visibility for all fullname and emailmatches is for performance.",
      "parentUuid": "30dae333_e282a87a",
      "revId": "c89416e1817f10323a7b7854649d16be83d058b7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}