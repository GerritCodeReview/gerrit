{
  "comments": [
    {
      "key": {
        "uuid": "AAABDH///50\u003d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/gitweb/GitWebServlet.java",
        "patchSetId": 1
      },
      "lineNbr": 349,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2011-06-16T21:42:49Z",
      "side": 0,
      "message": "As I recall, the reason we did this was to prevent requests like \"?p\u003dsome/project/i/can/see;a\u003dproject_list\". Below we would grant access to the project, call gitweb, which would promptly generate the project list, telling the user about every project name on this server... some of which the user shouldn\u0027t be able to know about.\n\nI don\u0027t think your new version prevents that anymore.",
      "revId": "ca73b3f860a8ce954005bb7c6b2c33d919af5716",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABDH///3w\u003d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/gitweb/GitWebServlet.java",
        "patchSetId": 1
      },
      "lineNbr": 349,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2011-06-16T22:53:17Z",
      "side": 0,
      "message": "Sounds like a great suggestion for an explanation comment (after restoring). :)  That kind of info sounds very valuable and I suspect hard to deduce.",
      "parentUuid": "AAABDH///50\u003d",
      "revId": "ca73b3f860a8ce954005bb7c6b2c33d919af5716",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABDX///+s\u003d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/gitweb/GitWebServlet.java",
        "patchSetId": 1
      },
      "lineNbr": 349,
      "author": {
        "id": 1006697
      },
      "writtenOn": "2011-06-17T04:05:57Z",
      "side": 0,
      "message": "I believe it is still prevented, because project_list/etc observe export_auth_hook, which gerrit sets up to tell gitweb to only show the one project we just authenticated access to.\n\nSo yes, the user can now construct a url like \"?p\u003dsome/project/i/can/see;a\u003dproject_list\", but it\u0027ll only show them  the single project \"some/project/i/can/see\".\n\nThat also is a very useful property to have in case gitweb and gerrit disagree about which project the URL is asking for, for whatever reason. If gerrit authenticates access to a different project than gitweb eventually decides the user asked for, gitweb will simply deny access.",
      "parentUuid": "AAABDH///3w\u003d",
      "revId": "ca73b3f860a8ce954005bb7c6b2c33d919af5716",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABDX///8E\u003d",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/gitweb/GitWebServlet.java",
        "patchSetId": 1
      },
      "lineNbr": 349,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2011-06-17T14:41:48Z",
      "side": 0,
      "message": "Not true. It depends on the vintage of gitweb.cgi. This code supports versions that predate the export_auth_hook.\n\nIf we are going to remove this code and only support newer versions of gitweb.cgi with export_auth_hook support, we should be doing a feature test on the CGI during server startup to make sure the CGI supports the export_auth_hook feature. If it doesn\u0027t, we wouldn\u0027t want to support gitweb because it might allow access to something that shouldn\u0027t be exported.\n\nI agree that the export_auth_hook is the right way to integrate with current versions of gitweb, and that is why its here, but I don\u0027t think we can trust only that feature yet.",
      "parentUuid": "AAABDX///+s\u003d",
      "revId": "ca73b3f860a8ce954005bb7c6b2c33d919af5716",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}