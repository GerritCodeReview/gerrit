{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a536052d_c627ea56",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2023-06-13T10:12:20Z",
      "side": 1,
      "message": "Thanks a lot for trying to solve this here!",
      "revId": "ca764bb0eb4816dbcf93f0fec6eac1e2ed519990",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2663555c_fd220e2f",
        "filename": "java/com/google/gerrit/server/project/ProjectCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 227,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2023-06-13T10:12:20Z",
      "side": 1,
      "message": "Can this be dropped now?",
      "range": {
        "startLine": 224,
        "startChar": 6,
        "endLine": 227,
        "endChar": 7
      },
      "revId": "ca764bb0eb4816dbcf93f0fec6eac1e2ed519990",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad3eeff1_e3988ee1",
        "filename": "java/com/google/gerrit/server/project/ProjectCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 430,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2023-06-13T10:12:20Z",
      "side": 1,
      "message": "Looking at our internal stacktrace what\u0027s triggering the loading of repo meta is opening the repository. IIUC we invoke reload() each time the missing repository is looked up from the project cache, so we would still load repo meta each time here. So not sure this is solving our problem.",
      "revId": "ca764bb0eb4816dbcf93f0fec6eac1e2ed519990",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82740cee_a6635f35",
        "filename": "java/com/google/gerrit/server/project/ProjectCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 433,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2023-06-13T10:12:20Z",
      "side": 1,
      "message": "If the repository was missing before, oldState may be empty and hence calling get() may fail here.",
      "range": {
        "startLine": 433,
        "startChar": 48,
        "endLine": 433,
        "endChar": 56
      },
      "revId": "ca764bb0eb4816dbcf93f0fec6eac1e2ed519990",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f73c3605_47720f3c",
        "filename": "java/com/google/gerrit/server/project/ProjectCacheImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 437,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2023-06-13T10:12:20Z",
      "side": 1,
      "message": "Should there be a case to prevent calling load if a project is still missing:\n\n```\nif (configRef \u003d\u003d null \u0026\u0026 oldState.isEmpty) {\n  refreshCounter.increment(CACHE_NAME, false);\n  return Futures.immediateFuture(oldState);\n}\n```\n\nOtherwise we would still load RepoMeta on each attempt to load a missing project.",
      "revId": "ca764bb0eb4816dbcf93f0fec6eac1e2ed519990",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}