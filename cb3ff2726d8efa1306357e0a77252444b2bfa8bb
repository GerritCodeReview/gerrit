{
  "comments": [
    {
      "key": {
        "uuid": "ed469cef_3e170955",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T07:58:55Z",
      "side": 1,
      "message": "But this is indended, isn\u0027t it. If a NewLabel is configured with MaxWithBlock on a project then no change should be submittable that does not have the highest voting on this label. If nobody has access rights to vote on that label, well then the change cannot be submitted. I can\u0027t see anything wrong with this.\n\nIf you want to change this, then you should rather allow declaring custom labels in project.config on branch level, which would be a cool feature. But this should then rather be done in master.",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4dea48f0_11490c62",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2013-08-23T08:10:19Z",
      "side": 1,
      "message": "No, I don\u0027t think this is intended.\n\nAs in the configuration example on lines 15-17 the label should only apply to \"test-branch\".  However it also effects \"other-branch\" which it should not.",
      "parentUuid": "ed469cef_3e170955",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd4398e0_dd362bfa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T08:17:49Z",
      "side": 1,
      "message": "But these are access rights that decide who can vote on the label. Removing the access rights for a label doesn\u0027t mean that the label doesn\u0027t apply anymore, does it???",
      "parentUuid": "4dea48f0_11490c62",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4dea48f0_5192f49e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2013-08-23T08:24:33Z",
      "side": 1,
      "message": "The intention is only to stop it from applying on branches where it *should not* apply.",
      "parentUuid": "cd4398e0_dd362bfa",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed469cef_9e409d43",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T08:37:50Z",
      "side": 1,
      "message": "But at the moment there is no possibility to define for a custom label that it should apply only to certain branches. This is a missing feature and should be implemented by supporting branch specific labels in project.config. Trying to add this functionality by interpreting a missing permission as \u0027this label is not relevant\u0027 looks like a weird hack to me.",
      "parentUuid": "4dea48f0_5192f49e",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ddfe055_2ba819ba",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2013-08-23T08:42:00Z",
      "side": 1,
      "message": "OK, now I see what you mean.  I agree.",
      "parentUuid": "ed469cef_9e409d43",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd4398e0_bd455f52",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2013-08-23T08:49:26Z",
      "side": 1,
      "message": "I accept my commit message is bad. I need improve my English level :)\n\nI expect the label to be per-branch basis. I think this of natural understanding. let me provide a case,  e.g.  a given NewLabel is configured with MaxWithBlock and is defined in the project.config of a high level parent project \u0027android\u0027, then apply this label on branch \u0027calendar\u0027.  \n\t[access \"refs/heads/calendar\"]\t \n            label-NewLabel \u003d -1..0 group developer\n\nhere the  NewLabel should be expected to only affect  the changes on \u0027calendar\u0027 of  \u0027android\u0027 and its son projects, \u0027edream-1\u0027, \u0027edream-2\u0027,...\n\nusers working on other branches, like \u0027video\u0027 ,\u0027redio\u0027 should not  be affected by this Label. (see it and be block by it).\n \nwe can find not all labels are needed in whole project scope.  label should not appear where it has not get configured access rights.    \n\nwe are in the progress of upgrading from 2.5 to 2.6, we want this feature in 2.6.2.",
      "parentUuid": "ed469cef_9e409d43",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd4398e0_5d2bfb91",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T08:53:40Z",
      "side": 1,
      "message": "I agree that having a possibility to define a custom label on branch level is a very valuable feature, but as I said I think there should be proper support for defining branch specific labels in project.config.",
      "parentUuid": "cd4398e0_bd455f52",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ddfe055_0ba55de0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2013-08-23T08:56:38Z",
      "side": 1,
      "message": "Which would be a new feature, and unfortunately means we can\u0027t get it in 2.6.x :(",
      "parentUuid": "cd4398e0_5d2bfb91",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed469cef_de5dc523",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T09:00:23Z",
      "side": 1,
      "message": "Yes, but you could cherry-pick it and make your own 2.6.x build ;-)",
      "parentUuid": "8ddfe055_0ba55de0",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd4398e0_1d3573e7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2013-08-23T09:22:21Z",
      "side": 1,
      "message": "\u003ethere should be proper support for defining branch specific labels in project.config.\n\n\n\n Excuse me, do you mean to add some flag to project.config to mark a given label is branch level?\n\n \u003e  I thought there would be a possibility to define a custom label per branch, \n\u003ebut it\u0027s always for the complete project. But then I don\u0027t understand this change at all. \n\n  yes, currently the label is whole project scope by nature.\n if it is branch scope by nature, every thing will become simple.  \n\n\n\n\u003eIf I configure a custom label in project.config it is relevant for all branches and not only for those branches \n\u003ewhere access rights for this custom label have been assigned.\n\n by logic this case exists , however in real life, e.g.  in above case for \u0027video\u0027 ,\u0027redio\u0027  branches where NewLabel  has not been assigned. \nusers working on \u0027video\u0027 ,\u0027redio\u0027  branches will be block , stop there.  \nis this the meaning of relevant,  I do not think you want it.\nat least I cannot find the value if label\u0027s appearance is independent with his access right configuration.\nmaybe I am blind here.",
      "parentUuid": "ed469cef_de5dc523",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed469cef_5e521510",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2013-08-23T09:43:47Z",
      "side": 1,
      "message": "if Label is per-branch basis by nature, \n we need not do any update on project.config\nto mark a give label to be branch specific. \n we can apply it to any branches including all branches\n(project scope) via defining \u0027access\u0027 section in\nproject.config just like we do before.  \n\n the only point here I think is label\u0027s appearance should be according to the\n \u0027access\u0027 section related to this label, the branches scope. \n\n will you please think it again. \n will you please let me know the places if  I am blind here.  \n really appreciate your cores reviewing and discussing on this commit. \n I dislike being lonely:)\n Thanks again!",
      "parentUuid": "cd4398e0_1d3573e7",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed469cef_1e4c8d71",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T09:54:48Z",
      "side": 1,
      "message": "For me defining a label and having permissions to vote on it are two different things. If nobody has permissions to vote on the Code-Review label it doesn\u0027t mean that a change can now be submitted without voting on this label. If I would like to enforce an IP review for all changes in my company I could add a custom label \u0027IP Review\u0027 on the root project and disallow overwriting it in child projects. If to follow your logic as a project owner of a child project I could simply remove permissions to vote on the \u0027IP Review\u0027 label and suddenly it doesn\u0027t apply anymore, but my intension was to enforce it for all changes. If the intension is to enforce the \u0027IP Review\u0027 label only for certain branches, e.g. \u0027refs/heads/rel/*\u0027 then I should be able to define this with the label definition in project.config. I haven\u0027t thought yet about how exactly the syntax for branch specific labels in project.config should be. It would be good to also get the input from Dave B. on this as he was doing the implementation of the project specific custom labels.",
      "parentUuid": "ed469cef_5e521510",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6dc0ec68_da104563",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/RefControl.java",
        "patchSetId": 9
      },
      "lineNbr": 386,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-22T11:43:25Z",
      "side": 1,
      "message": "Does this work to go over the permissions here? What if there is a label for a branch but no permissions have been assigned for this label? Is this label then not returned by this method?",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d4210dc_dfe4db5d",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/RefControl.java",
        "patchSetId": 9
      },
      "lineNbr": 386,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2013-08-23T01:57:00Z",
      "side": 1,
      "message": "thanks reviewing! sorry, I am not sure I understand your question completely about \"What if there is a label for a branch but no permissions have been assigned for this label\"\n\nwill you please provide a case in a style like \n\n [access \"refs/heads/master\"]\n\tlabel-Verified \u003d -1..+1 group Administrators\n\nIf a label is just created and has not been applied to any branch, with this commit this label will not affect any branch.\nthus make the label to be really per-branch basis .",
      "parentUuid": "6dc0ec68_da104563",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed469cef_1e1a4d7e",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/project/RefControl.java",
        "patchSetId": 9
      },
      "lineNbr": 386,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-08-23T07:58:55Z",
      "side": 1,
      "message": "Ok, I see that I had a wrong assumption of how customized labels can be configured in project.config, I thought there would be a possibility to define a custom label per branch, but it\u0027s always for the complete project. But then I don\u0027t understand this change at all. If I configure a custom label in project.config it is relevant for all branches and not only for those branches where access rights for this custom label have been assigned.",
      "parentUuid": "0d4210dc_dfe4db5d",
      "revId": "cb3ff2726d8efa1306357e0a77252444b2bfa8bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}