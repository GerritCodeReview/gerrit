{
  "comments": [
    {
      "key": {
        "uuid": "905e2f2a_aa380fe4",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/index/IndexRewriteImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 140,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-09-04T15:56:16Z",
      "side": 1,
      "message": "Fix the tests.",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 140,
        "endChar": 70
      },
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "905e2f2a_6a7457a7",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-09-04T15:57:39Z",
      "side": 1,
      "message": "Add the limit here.",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "905e2f2a_ca6d83d0",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-05T01:03:02Z",
      "side": 1,
      "message": "Adding:\n\n    if (!query.contains(\"limit:\")) {\n      query +\u003d \" limit:\" + DEFAULT_MAX_QUERY_LIMIT;\n    }\n\ncauses tests to fail.  For example:\n\n FAILURE testIndexPredicates: expected:\u003cindex{p\u003d(file:a file:b limit:500), limit\u003d500}\u003e but was:\u003c(index{p\u003d(file:a file:b), limit\u003d500} limit:500)\u003e",
      "parentUuid": "905e2f2a_6a7457a7",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d03267f0_0cae17b6",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-09-05T01:05:46Z",
      "side": 1,
      "message": "Look at how it\u0027s done in ChangeQueryBuilder. I think you actually want to make a new AndPredicate containing this plus the limit, or something.",
      "parentUuid": "905e2f2a_ca6d83d0",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "905e2f2a_8a678bee",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-05T01:31:28Z",
      "side": 1,
      "message": "Maybe I misunderstood what you meant, but changing it to:\n\n if (!query.contains(\"limit:\")) {\n   return Predicate.and(p, queryBuilder.parse(\"limit:500\"));\n }\n\nresults in the same errors:\n\n FAILURE testIndexPredicates: expected:\u003cindex{p\u003d(file:a file:b limit:500), limit\u003d500}\u003e but was:\u003c(index{p\u003d(file:a file:b), limit\u003d500} limit:500)\u003e",
      "parentUuid": "d03267f0_0cae17b6",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10aebf65_c60c8262",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-09-05T11:01:22Z",
      "side": 1,
      "message": "That\u0027s because this way two different instances are involved:\n\n* IndexedChangeQuery\n* AndSource\n\nand equals cannot work.",
      "parentUuid": "905e2f2a_8a678bee",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "705d3b5f_b90c3f61",
        "filename": "gerrit-server/src/test/java/com/google/gerrit/server/index/IndexRewriteTest.java",
        "patchSetId": 2
      },
      "lineNbr": 215,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-09-06T14:32:55Z",
      "side": 1,
      "message": "The assertEquals cases that fail are already comparing IndexedChangeQuery and Predicate.\n\n assertEquals(query(in), rewrite(in));\n\n`query` returns an IndexedChangeQuery, `rewrite` returns a Predicate.",
      "parentUuid": "10aebf65_c60c8262",
      "revId": "cdf2d8052cf621ec49adbee91cf0e68fad152925",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}