{
  "comments": [
    {
      "key": {
        "uuid": "55a68ed6_bd7e9fa4",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-10-05T12:16:19Z",
      "side": 1,
      "message": "This only solves the issue for the Min\u003d0 case. I could still reproduce the issue with adding a label with +1+2 range, adding a new vote and then voting +1 as that voter. Result: the +1 vote blocks submit.",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "753d529e_4e0f9368",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T14:01:59Z",
      "side": 1,
      "message": "I could not reproduce that. An AnyWithBlock label with only +1 and +2 does not block submit on my side.\nWas the DefaultValue of the label +1 instead of 0?",
      "parentUuid": "55a68ed6_bd7e9fa4",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75d9d26e_6ef62f97",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-10-05T15:13:28Z",
      "side": 1,
      "message": "The default value is/was +1. Gerrit would reject a label with default value 0 when the range is +1+2.\n\nI needed to signout and signin as a different user to see the proper submittability status. Without that, I think,  the local change cache was interfering.\n\nPlease try again both solutions and make sure to have two users and change between them when checking the submitability.",
      "parentUuid": "753d529e_4e0f9368",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "026bfa6a_6ae15702",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T15:25:48Z",
      "side": 1,
      "message": "I tried with the steps you have described here.\nIt is true that the label with +1+2 turns red when an added reviewer votes +1 but I noticed that it is not blocking submit. Have you noticed this as well?",
      "parentUuid": "75d9d26e_6ef62f97",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75d9d26e_2e002710",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-10-05T15:39:49Z",
      "side": 1,
      "message": "Yes, I noticed the red label. It is a bit ugly. Do you want to also fix that? Maybe in a follow up change in order to keep this one small and nice?\n\nI tested again both solutions and could confirm that this patch set still blocks submit when the lowest vote is +1 for a +1+2 range.\n\nThe solution proposed by me works.",
      "parentUuid": "026bfa6a_6ae15702",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "753d529e_0e62eb1f",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T15:55:00Z",
      "side": 1,
      "message": "Yes your suggested solution is the only one working in that case.\n\nI think we could still submit the functionality fix before waiting for red label UI to be fixed in this same change.\n\nFixing the ugliness of UI might take some time depending on its complexity and it could unnecessarily drag the whole fix.",
      "parentUuid": "75d9d26e_2e002710",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "753d529e_2e5fa75c",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 285,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T15:58:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "753d529e_0e62eb1f",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55a68ed6_9d83e3f8",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 287,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-10-05T12:28:54Z",
      "side": 1,
      "message": "hint (non tested): instead of the line 285, try adding a Min \u003c 0 condition above this line:\n\n  any_with_block(Label, Min, reject(Who)) :-\n    Min \u003c 0,\n    check_label_range_permission(Label, Min, ok(Who)),\n    !\n    .",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "753d529e_6e0c4f73",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 287,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T14:01:59Z",
      "side": 1,
      "message": "It works too. I think it is a neater solution.",
      "parentUuid": "55a68ed6_9d83e3f8",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55a68ed6_5d767bcd",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 287,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2015-10-05T15:13:28Z",
      "side": 1,
      "message": "Yes, it also better matches the documentation which tells that only negative values could block.",
      "parentUuid": "753d529e_6e0c4f73",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "753d529e_8e4dfbb7",
        "filename": "gerrit-server/src/main/prolog/gerrit_common.pl",
        "patchSetId": 4
      },
      "lineNbr": 287,
      "author": {
        "id": 1021532
      },
      "writtenOn": "2015-10-05T15:25:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "55a68ed6_5d767bcd",
      "revId": "ce7249b3d384dabcb2147865efb7190727367f3d",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}