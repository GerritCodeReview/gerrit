{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d1086d5f_0e6b5184",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 414,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "new Set() is the same as new Set([])",
      "range": {
        "startLine": 414,
        "startChar": 46,
        "endLine": 414,
        "endChar": 57
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f98f1918_94c28fb7",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 414,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d1086d5f_0e6b5184",
      "range": {
        "startLine": 414,
        "startChar": 46,
        "endLine": 414,
        "endChar": 57
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "faeadbdc_789e9d17",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 424,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "this.subscriptions.push",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68f33b32_b70f8d15",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 424,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "faeadbdc_789e9d17",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35071012_6e869626",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 426,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "What about a reset of this.$.reviewed here (in a tap()) or in paramsChanged()? When you are switching files then this first thing you want to do is clearing the checkbox, right? I would expect a\n\n  this.$.reviewed.checked \u003d false or undefined\n  \nsomewhere as a reset.\n\nMaybe just add a subscription:\n\n  combineLatest(diffPath$, reviewedFiles$).subscribe((path, files) \u003d\u003e {\n    this.$.reviewed.checked \u003d !!path \u0026\u0026 !!files \u0026\u0026 files.has(path);\n  });\n\nThen you can drop the update in line 486.",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "def4849e_26a41423",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 426,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-26T16:52:24Z",
      "side": 1,
      "message": "Update in line 486 cannot be removed because we need some way to mark the file as reviewed when automatic review is on.\n\nIn this case I cannot see how we ensure that the automatic reviewing is only done once.",
      "parentUuid": "35071012_6e869626",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41636595_7c8163d4",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 426,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T21:25:49Z",
      "side": 1,
      "message": "I see this as two separate tasks:\n\n1. Make sure that the checkbox reflects what is in the model. That is solved by what I have suggested above.\n\n2. Set the reviewed status to true when the diff is loaded. That is what you are doing here. It is not the job of `setReviewedStatus` to set the checkbox.",
      "parentUuid": "def4849e_26a41423",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c7643ca_058615f5",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 426,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:57:56Z",
      "side": 1,
      "message": "Understood now. Updated.",
      "parentUuid": "41636595_7c8163d4",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5aa4e3f8_1a25fa8c",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 478,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "add a comment to the method",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7e5d85c_e3f1d08d",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 478,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5aa4e3f8_1a25fa8c",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae9726e6_6fb71064",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 599,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "Is this an optimistic update? Maybe add a comment to say so.",
      "range": {
        "startLine": 598,
        "startChar": 4,
        "endLine": 599,
        "endChar": 41
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3060d1ed_f2c70f57",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-view/gr-diff-view.ts",
        "patchSetId": 26
      },
      "lineNbr": 599,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Removed since reviewedFiles will be updated from the model",
      "parentUuid": "ae9726e6_6fb71064",
      "range": {
        "startLine": 598,
        "startChar": 4,
        "endLine": 599,
        "endChar": 41
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "279baa09_d59c7f92",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 47,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "If you want to put Sets into application state, then can you add tests to deepEqual()?\n\nMaybe just use an array or Record?",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22a15a44_96de3f05",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 47,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:57:56Z",
      "side": 1,
      "message": "Replaced with Array.",
      "parentUuid": "279baa09_d59c7f92",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1ba4be7_0338cc2b",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 109,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "Add `return;`!!!",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9771b8f2_0a3fc6b7",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 109,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f1ba4be7_0338cc2b",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59000cc6_316752f6",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 114,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "Maybe add checks whether an update is needed at all.",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d72efd2_4fbb9af2",
        "filename": "polygerrit-ui/app/services/change/change-model.ts",
        "patchSetId": 26
      },
      "lineNbr": 114,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:17:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "59000cc6_316752f6",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cdeac1e_16ba98cb",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 75,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "I think you want to switchMap the this.restApiService.getReviewedFiles() call here, because otherwise you don\u0027t know then the call comes back and whether the response is still applicable. The user may have switched patch nums while the reviewed files were loading.",
      "range": {
        "startLine": 75,
        "startChar": 52,
        "endLine": 75,
        "endChar": 61
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d118c0b_e68ab345",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 75,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-26T16:52:24Z",
      "side": 1,
      "message": "I don\u0027t understand this.\n\nSwitchMap should return an observable so I don\u0027t understand how this should be constructed?",
      "parentUuid": "6cdeac1e_16ba98cb",
      "range": {
        "startLine": 75,
        "startChar": 52,
        "endLine": 75,
        "endChar": 61
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "38ef3529_a9d4a6f2",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 75,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T21:25:49Z",
      "side": 1,
      "message": "A promise is very much like an observable. You can just do `from(promise)`. This is an example: \n\nhttps://cs.opensource.google/gerrit/gerrit/gerrit/+/master:polygerrit-ui/app/services/change/change-service.ts;l\u003d50;drc\u003da16c51a41448b8dcad39a3ae06bbc1d43257cf01",
      "parentUuid": "3d118c0b_e68ab345",
      "range": {
        "startLine": 75,
        "startChar": 52,
        "endLine": 75,
        "endChar": 61
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41031fe7_e51ad09c",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 75,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:57:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "38ef3529_a9d4a6f2",
      "range": {
        "startLine": 75,
        "startChar": 52,
        "endLine": 75,
        "endChar": 61
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54be4ef5_7e41b284",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 88,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "use loggedIn$ and put into the observable stream above",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 38
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0125c6b4_69c1abfc",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 88,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-12-01T12:21:44Z",
      "side": 1,
      "message": "ping",
      "parentUuid": "54be4ef5_7e41b284",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 38
      },
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6b468c5_a988ec05",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 107,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-11-26T12:08:21Z",
      "side": 1,
      "message": "You have to check whether changeNum and patchNum are still current.",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dce6d39e_6d103bf1",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 107,
      "author": {
        "id": 1083225
      },
      "writtenOn": "2021-11-30T17:57:56Z",
      "side": 1,
      "message": "Is the way to maintain changeNum and patchNum inside the service and then comparing when the updateStateFileReviewed method is called?",
      "parentUuid": "e6b468c5_a988ec05",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a575c12a_c1fa7b4a",
        "filename": "polygerrit-ui/app/services/change/change-service.ts",
        "patchSetId": 26
      },
      "lineNbr": 107,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-12-01T12:21:44Z",
      "side": 1,
      "message": "This is the pattern used elsewhere:\n\nSave changeNum:\nhttps://cs.opensource.google/gerrit/gerrit/gerrit/+/master:polygerrit-ui/app/services/comments/comments-model.ts;l\u003d433;drc\u003d0142248b018108fdb48d02012eef2773d21bdcae\n\nCompare after response comes back:\nhttps://cs.opensource.google/gerrit/gerrit/gerrit/+/master:polygerrit-ui/app/services/comments/comments-model.ts;l\u003d441;drc\u003d0142248b018108fdb48d02012eef2773d21bdcae\n\nNote that once we have one model instance per change this will not be required anymore. But for now this seems essential.",
      "parentUuid": "dce6d39e_6d103bf1",
      "revId": "d442363716c8b306b8887f1bca4ff8834f013a1c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}