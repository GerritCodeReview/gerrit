{
  "comments": [
    {
      "key": {
        "uuid": "09796053_96dbdbf3",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-11-13T12:25:20Z",
      "side": 1,
      "message": "Thanks for the tests. Some tests are missing in my opinion:\n- without empty commit\n- empty commit is default\n- with parent\n- with a specific submit type\n\nCould you please add them?",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "face5d61_23e88eb2",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-11-13T17:02:08Z",
      "side": 1,
      "message": "TBH, I think this is going overboard. These tests are effectively testing https://gerrit-review.googlesource.com/c/gerrit/+/203797/7/java/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImpl.java#47 which is about 10 lines of code, and just copies some data from the Builder into CreateProjectArgs. It\u0027s hard to make this test be anything but a change detector, https://sites.google.com/a/google.com/tater-tott/posts/2014/09/episode_350__change_detector_tests_considered_harmful\n\nthe exhaustive testing is also wasteful, because the code is exercised in the proper *IT.java tests. If something is wrong in this code, it will trigger test failures there.\n\nFinally, some aspects are not specified in the interface so I can make up my mind later about what how they\u0027re supposed to work (eg. defaults), and pinning down the behavior with a test will overspecify the behavior, causing extra work on the tests when I want to change it later on.",
      "parentUuid": "09796053_96dbdbf3",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "19e9f988_51a1a054",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-11-15T14:30:58Z",
      "side": 1,
      "message": "Thanks for the explanations. I understand the concern that we shouldn\u0027t add unnecessary code as well as the desire for brevity in general. On the other hand, I also had my reasons why I asked for the tests. I accept your decision to not add further tests.\n\nOptional part:\nSince your comment contained some hints that I was asking for something unreasonable and just wasting time, let me explain a bit more.\n\nWhen I added the groups test API, I deliberately added Javadoc descriptions with a lot of explanations so that other developers would easily know how to use the API. I also made sure to add proper tests so that other tests using the API can rely on it working correctly (within reasonable bounds). Our current situation without that API is that we have multiple tests which re-check that a specific state was correctly set up. I would really like to avoid that situation with the new test API.\n\nEven though ProjectOperationsImpl is just some lines of code, it relies on other parts of Gerrit and hence can change its behavior unexpectedly. Other integration tests aren\u0027t relevant as the tests for the project test API shouldn\u0027t care about the general behavior of Gerrit or how exactly it is implemented (e.g. What if we added the possibility to delete projects via the test API but didn\u0027t have this possibility in Gerrit in general?). Instead, the tests should be written in a way that the behavior of the project test API in itself is documented.\n\nI agree that each of these integration tests adds additional execution time to our integration tests but I don\u0027t think that we should leave out reasonable tests because of that reason. Gerrit\u0027s tests are our safety belt and ensuring that our tests do what we think they do is also important. If we are concerned about execution time, we should find another solution to speed up our tests.\n\nI also agree that we shouldn\u0027t test defaults too closely. My previous comment probably wasn\u0027t clear in that regard. What I rather meant is that we should ensure that a project which is created without specifying any further parameters is in a reasonable state (e.g. Gerrit changes can be created for it). The tests in GroupOperationsImplTest, which I originally recommended as an example, are implemented following that spirit.",
      "parentUuid": "face5d61_23e88eb2",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "acb3ce31_c138ac41",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-11-16T17:31:14Z",
      "side": 1,
      "message": "thank you for your extensive reply. I must have appeared brusque and annoyed in my comment, so sorry for that.\n\nOn a practical level: I\u0027m still struggling in making the API actually work so we can drop createGroup() (see follow up change), so I think it is too early for polishing something if we\u0027re not sure what it will look like (eg. I backed out createEmptyCommit(bool) but had to put it back in again).\n\nOn a philosophical level: I am not concerned about execution time: these are fast to run anyway. I\u0027m more concerned about the code cost: the tests have to be written, and then maintained. Also, if our tests can pass while our test infrastructure is not doing what we\u0027re thinking, then we have a much more serious problem with our tests.\n\nFinally, personally, I find testing trivial glue code tedious, pointless and demotivating. Given that cleaning up the test infrastructure is tedious as it is already (cf. https://gerrit-review.googlesource.com/c/gerrit/+/204331 which took probably a day), I don\u0027t want to make myself suffer more through it than strictly necessary.",
      "parentUuid": "19e9f988_51a1a054",
      "range": {
        "startLine": 28,
        "startChar": 13,
        "endLine": 28,
        "endChar": 38
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62c001e6_51d382c8",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-11-13T12:25:20Z",
      "side": 1,
      "message": "Here and in other tests: Could be private.",
      "range": {
        "startLine": 30,
        "startChar": 10,
        "endLine": 30,
        "endChar": 19
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7608982_109a727d",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-11-13T17:02:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62c001e6_51d382c8",
      "range": {
        "startLine": 30,
        "startChar": 10,
        "endLine": 30,
        "endChar": 19
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d360e5d5_65a92181",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-11-13T12:25:20Z",
      "side": 1,
      "message": "The test succeeds without this line. As it is not an assertion either, I\u0027ve been wondering if it could be deleted.",
      "range": {
        "startLine": 35,
        "startChar": 4,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe81886b_1b68434f",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2018-11-13T17:02:08Z",
      "side": 1,
      "message": "I have to check if the project exists, right? If it deosn\u0027t exist, this would throw RestApiException.",
      "parentUuid": "d360e5d5_65a92181",
      "range": {
        "startLine": 35,
        "startChar": 4,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5aea49d2_23c797f3",
        "filename": "javatests/com/google/gerrit/acceptance/testsuite/project/ProjectOperationsImplTest.java",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2018-11-15T14:30:58Z",
      "side": 1,
      "message": "Thanks. The comment is helpful. Without it, I would have never guessed that this test doesn\u0027t just check the generated name as the test name suggests but also covers the aspect that the project was successfully created.",
      "parentUuid": "fe81886b_1b68434f",
      "range": {
        "startLine": 35,
        "startChar": 4,
        "endLine": 35,
        "endChar": 37
      },
      "revId": "d53993122368ddb51fb8194a9b967ff5dd0136bf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}