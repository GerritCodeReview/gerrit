{
  "comments": [
    {
      "key": {
        "uuid": "2aac6306_2cdd1335",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-01-08T14:43:15Z",
      "side": 1,
      "message": "So you\u0027ve correctly identified an issue, which is that we don\u0027t currently have a way in notedb to map patch set IDs to commit SHA-1s. That is simply not implemented yet.\n\nThat said, requiring both \"Commit\" and \"Patch-set\" fields on every commit (which IIUC is what this change is proposing) seems like unnecessary repetition. My original plan was to include the \"Commit\" footer only on the commit that created the patch set. But we could just as easily require \"Commit\" everywhere and have \"Patch-set\" only on the original commit. At the end of the day you have to read all the history and then you have a bimap of patch set ID \u003c-\u003e commit SHA-1.\n\nWhat do you think? Does one approach or the other make it easier for git-appraise?",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eaaecbf8_b22b206f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1023137
      },
      "writtenOn": "2016-01-08T16:22:37Z",
      "side": 1,
      "message": "Unless I\u0027m mistaken this implements your original plan.\nWe set the Commit trailer for a new change, and for any new patchset, which should be the minimum to establish a mapping between patchset id and commit, assuming no inline comments have been made.\n\nI think the advantage of your original plan is that it requires less modification where gerrit is concerned, and is also less noisy than including the commit sha everywhere.\n\nFor the tools using the format it doesn\u0027t matter too much which approach we take in my opinion, we just need some way to map between patchset id and commit.\n\nSomething I\u0027ve sadly just noticed is that this RFC isn\u0027t sufficient, since you can create new patchsets via the web interface. If you\u0027re happy with this RFC in principal though, then I will gladly send a patch with that issue addressed.",
      "parentUuid": "2aac6306_2cdd1335",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2aac6306_2c53536a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-01-08T16:24:31Z",
      "side": 1,
      "message": "Glad we\u0027re on the same page, and sorry I didn\u0027t actually read the code :)\n\nGo ahead and implement this. Thanks for the contribution.",
      "parentUuid": "eaaecbf8_b22b206f",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca3667c7_e9e115bc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1023137
      },
      "writtenOn": "2016-01-11T12:49:03Z",
      "side": 1,
      "message": "No worries, I\u0027m glad the RFC matches your original plan. :)\n\nWorking a little more on this, I\u0027ve noticed something that seems inconsistent and thought I should raise it here:\n\ncommit message update to patch set 1 via cli:\n\n    commit 467ad806b7caf92e43759872a0419e1e20769372\n    Author: Richard Ipsum \u003c1000000@gerrit\u003e\n    Date:   Mon Jan 11 12:22:22 2016 +0000\n\n        Update patch set 2\n\n        Uploaded patch set 2: Commit message was updated.\n\n        Patch-set: 2\n\nsubsequent commit message update to patch set 2 via web interface:\n\n    commit 1f05ebe246a23f9b8a8826c27513900301451caf\n    Author: Richard Ipsum \u003c1000000@gerrit\u003e\n    Date:   Mon Jan 11 12:23:53 2016 +0000\n\n        Update patch set 2\n\n        Patch set 3: Commit message was updated.\n\n        Patch-set: 2\n\nWe seem to get different results for the same operation based on whether it\u0027s performed via the web interface or via the command line, in particular I would have expected the Patch-set trailer to be set to \u00273\u0027 in the commit produced by the web interface update, so to be clear I\u0027d have expected,\n\n    commit 1f05ebe246a23f9b8a8826c27513900301451caf\n    Author: Richard Ipsum \u003c1000000@gerrit\u003e\n    Date:   Mon Jan 11 12:23:53 2016 +0000\n\n        Update patch set 3\n\n        Patch set 3: Commit message was updated.\n\n        Patch-set: 3\n\nI have a fix for this, if you agree with me that it\u0027s inconsistent then shall I send the fix as a separate change?",
      "parentUuid": "2aac6306_2c53536a",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0aa79f24_8ba50d73",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-01-11T14:22:45Z",
      "side": 1,
      "message": "Sounds like a bug.",
      "parentUuid": "ca3667c7_e9e115bc",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27349edb_ecad0ba7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1023137
      },
      "writtenOn": "2016-01-11T16:44:13Z",
      "side": 1,
      "message": "Okay cool, I\u0027ve submitted a fix for this: https://gerrit-review.googlesource.com/#/c/73756/",
      "parentUuid": "0aa79f24_8ba50d73",
      "revId": "db8538cd861dabe426c7182d3e42986ab74653ca",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}