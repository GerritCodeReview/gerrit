{
  "comments": [
    {
      "key": {
        "uuid": "742ad9c0_6990255b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 10,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-06-14T15:34:19Z",
      "side": 1,
      "message": "According to Documentation/config-validation.txt, the RefOperationValidationListener is only called for ref creation/deletion operations:\n...\nPlugins implementing the RefOperationValidationListener interface can perform additional validation checks against ref creation/deletion operation before it is applied to the git repository.\n...\n\nAmend the documentation to mention that RefOperationValidationListener will be called for any ref update, including ref creation/deletion?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 55
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "749bb98d_a1ad5e9c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 10,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-15T02:15:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "742ad9c0_6990255b",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 55
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3424e1f2_27865a28",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 13,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-06-14T15:34:19Z",
      "side": 1,
      "message": "Just to be sure I understand, the RefOperationValidationListener should be called before any ref update, including create, delete and non-ff upddates?\n\nIf yes, you missed couple of places that can update a ref. Search for any place in the code that uses GitReferenceUpdated class :\n-com.google.gerrit.httpd.rpc.project.ChangeProjectAccess\n-com.google.gerrit.server.project.CreateProject\n-com.google.gerrit.server.project.DeleteBranches\n-com.google.gerrit.server.project.PutConfig\n-com.google.gerrit.server.project.PutDescription\n-com.google.gerrit.server.project.SetAccess\n....",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 34
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f471691c_c5bcbad0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 13,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-06-15T02:15:46Z",
      "side": 1,
      "message": "Done for DeleteBranches.  I\u0027ve left the others for now; need to confirm which ones we need it for.",
      "parentUuid": "3424e1f2_27865a28",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 34
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f4732992_b58a2028",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 13,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2016-06-15T13:07:23Z",
      "side": 1,
      "message": "IMHO, if we add a way for a plugin to validate a ref update, we should call the validator for all the ref updates, not a subset.\n\nFor any call to GitReferenceUpdatedListener, there should be a call to RefOperationValidationListener before that allowed the plugin to validate the ref update.",
      "parentUuid": "f471691c_c5bcbad0",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 34
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7412d9d9_89571942",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 13,
      "author": {
        "id": 1013722
      },
      "writtenOn": "2016-06-15T14:32:14Z",
      "side": 1,
      "message": "That is my opinion too - will prepare next patchset with it :)",
      "parentUuid": "f4732992_b58a2028",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 34
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7412d9d9_a952dd51",
        "filename": "/COMMIT_MSG",
        "patchSetId": 28
      },
      "lineNbr": 13,
      "author": {
        "id": 1013722
      },
      "writtenOn": "2016-06-15T14:32:14Z",
      "side": 1,
      "message": "That is my opinion too :) will prepare patchset with that - thanks Hugo :)",
      "parentUuid": "f4732992_b58a2028",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 13,
        "endChar": 34
      },
      "revId": "ddd6c9ec30fba9f9b7a3a741b849e53d17655c41",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}