{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e544c7c4_9ec1a70c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-22T21:36:57Z",
      "side": 1,
      "message": "-1 for lack of tests and the new unexplained protobuf dependency/integration",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7ae17a5_faa910f3",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-22T21:36:57Z",
      "side": 1,
      "message": "Is any of this new code covered by tests in this change?",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4739668d_f813e5ac",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-23T09:51:03Z",
      "side": 1,
      "message": "The test coverage in AbstractQuery* tests is comprehensive.\nWe are going to replace FieldDefs with this new class, and all logic will be automatically covered by these tests (see the follow up changes).\n\nI mentioned in the commit message.",
      "parentUuid": "a7ae17a5_faa910f3",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc9974df_6bcdb08c",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-06-23T11:54:19Z",
      "side": 1,
      "message": "+1, this was also discussed here https://gerrit-review.googlesource.com/c/gerrit/+/339336/comments/b63671a8_6fcfc081.\n\nThere are no tests with this change, but all fields as tested in AbstractQuery* as Maria mentioned.",
      "parentUuid": "4739668d_f813e5ac",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4842aa8_8ab33ae8",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-23T16:41:24Z",
      "side": 1,
      "message": "\u003e +1, this was also discussed here https://gerrit-review.googlesource.com/c/gerrit/+/339336/comments/b63671a8_6fcfc081.\n\u003e \n\u003e There are no tests with this change, but all fields as tested in AbstractQuery* as Maria mentioned.\n\nI would assume this class has new functionality not covered by existing tests? Don\u0027t we want to at least confirm we can use it in the way the commit message describes?",
      "parentUuid": "bc9974df_6bcdb08c",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aeb0a6f4_b7d60530",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-24T17:11:13Z",
      "side": 1,
      "message": "This change does not add any new functionality.\nThe functionality is exactly as with the previous fields defs, just the new properties and storage abstraction is added.\n\nThe next changes confirm it can be used in a way we plan.\nI added some tests for the type conversion, please, take a look.\nThank you for thorough review :)",
      "parentUuid": "a4842aa8_8ab33ae8",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31251de0_7d3d5d56",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-27T14:41:13Z",
      "side": 1,
      "message": "Resolving, since I added the test.",
      "parentUuid": "aeb0a6f4_b7d60530",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e3d2c398_88b3a7ae",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-29T04:40:24Z",
      "side": 1,
      "message": "Sorry I didn\u0027t reply for a few days.\n\n\u003e This change does not add any new functionality.\n\u003e The functionality is exactly as with the previous fields defs, just the new properties and storage abstraction is added.\n\nJust to clarify what I was looking for, I thought this new class adds the support for this text from the commit message:\n\n```\n we would like to store the actual field\n data once (in index primary storage), and enable different token\n generation strategies on the same field, referencing the base storage\n from the token indexes\n```\n \nSo I was thinking it would be good to test that we can do that. I don\u0027t think we need exhaustive tests for every data type or anything like that.\n\n\u003e \n\u003e The next changes confirm it can be used in a way we plan.\n\u003e I added some tests for the type conversion, please, take a look.\n\u003e Thank you for thorough review :)\n\nYou\u0027re welcome! I hope the feedback is helpful.",
      "parentUuid": "aeb0a6f4_b7d60530",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "100661a5_08eda3b8",
        "filename": "java/com/google/gerrit/index/IndexedField.java",
        "patchSetId": 17
      },
      "lineNbr": 62,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-29T08:09:49Z",
      "side": 1,
      "message": "Sorry, the primary storage / index division is intended in our index implementation.\nBut we needed to update the interface to accommodate for that. Nothing changes for other index implementations, only API.\n\n\u003e You\u0027re welcome! I hope the feedback is helpful.\n\nSince I have your +1 I will merge this change.\nFeel free to add yourself to the review of the follow-up changes, if you have more comments. Thanks again!",
      "parentUuid": "e3d2c398_88b3a7ae",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91454f67_8bba5c2d",
        "filename": "java/com/google/gerrit/index/SearchOption.java",
        "patchSetId": 17
      },
      "lineNbr": 23,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-22T21:36:57Z",
      "side": 1,
      "message": "nit: why the (seemingly) random blank lines?",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91768e04_5b7bf7bf",
        "filename": "java/com/google/gerrit/index/SearchOption.java",
        "patchSetId": 17
      },
      "lineNbr": 23,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-23T09:51:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91454f67_8bba5c2d",
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b766329e_2f4b6776",
        "filename": "java/com/google/gerrit/index/StoredValue.java",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-22T21:36:57Z",
      "side": 1,
      "message": "The commit message doesn\u0027t mention anything about new integration/reliance on protobuf with fields. Is this part of this change or should it go into a different commit?",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6f2d7fe_736fad5c",
        "filename": "java/com/google/gerrit/index/StoredValue.java",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-23T09:51:03Z",
      "side": 1,
      "message": "Added a paragraph to the commit message.\nWe want to store protos directly in our index implementation.\nI added these methods to this change, since it is one of the features of the new storage abstraction, but it is not used anywhere in this change.\n\nNote: we are not changing anything in Lucene/other index implementations, this is a no-op for existing indexes.\n\nWhen I will be migrating proto fields, I will adopt Lucene/Elastic to write protos as bytes in a separate change.",
      "parentUuid": "b766329e_2f4b6776",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f16df2a0_9b4f213a",
        "filename": "java/com/google/gerrit/index/StoredValue.java",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-06-23T11:54:19Z",
      "side": 1,
      "message": "I also +1 Maria\u0027s comments. This change is just adding protos as a new field type but is not using it anywhere yet.\n\nI\u0027ve also preferred to extract the new asProto() methods in StoredValue and its implementations in their own change, with their own proper commit message for better clarity (https://gerrit-review.googlesource.com/c/gerrit/+/339336/comments/fd71e832_af7a7d7c). @Maria, could you maybe extract those changes in a predecessor change to this one.",
      "parentUuid": "c6f2d7fe_736fad5c",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a77407c_f9ef0385",
        "filename": "java/com/google/gerrit/index/StoredValue.java",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-06-23T16:41:24Z",
      "side": 1,
      "message": "\u003e I also +1 Maria\u0027s comments. This change is just adding protos as a new field type but is not using it anywhere yet.\n\nTo me, adding unused methods is more of a reason for a separate change with its own commit message that describes the intent.\n\n\u003e \n\u003e I\u0027ve also preferred to extract the new asProto() methods in StoredValue and its implementations in their own change, with their own proper commit message for better clarity (https://gerrit-review.googlesource.com/c/gerrit/+/339336/comments/fd71e832_af7a7d7c). @Maria, could you maybe extract those changes in a predecessor change to this one.\n\nI would appreciate that. I don\u0027t know if a predecessor or immediate successor is more appropriate (do these asProto*() methods make sense without this change?).",
      "parentUuid": "f16df2a0_9b4f213a",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d2d7e02a_0a669bfc",
        "filename": "java/com/google/gerrit/index/StoredValue.java",
        "patchSetId": 17
      },
      "lineNbr": 53,
      "author": {
        "id": 1118500
      },
      "writtenOn": "2022-06-24T17:11:13Z",
      "side": 1,
      "message": "I added a follow up change with all proto functionality.\nPlease, take a look.",
      "parentUuid": "2a77407c_f9ef0385",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 53,
        "endChar": 24
      },
      "revId": "df7b9704e19f77b80cbafb15fa70fe05f1b35b27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}