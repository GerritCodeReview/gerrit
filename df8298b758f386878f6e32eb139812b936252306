{
  "comments": [
    {
      "key": {
        "uuid": "b46ffaaa_f4dd7810",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/restapi/RestApiServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-05T14:17:58Z",
      "side": 1,
      "message": "Seems like this will trigger writing even on a HEAD request. Have you checked whether the body is empty when you issue a HEAD?",
      "revId": "df8298b758f386878f6e32eb139812b936252306",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f925eba0_369fd84a",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/restapi/RestApiServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-05T14:39:39Z",
      "side": 1,
      "message": "That\u0027s what I was trying to test with this line:\n\n assertThat(response.hasContent()).isFalse();\n\nbut I\u0027m not sure if that\u0027s actually doing what I expect.\n\nI\u0027ve also tested from the command line with the results as seen here:\n\nhttp://paste.openstack.org/show/550612/\n\nthat\u0027s using curl with the `-IL` option.  The request was getting stuck at the initial 401 redirect when I tried with `-X HEAD`.",
      "parentUuid": "b46ffaaa_f4dd7810",
      "revId": "df8298b758f386878f6e32eb139812b936252306",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f43ed29a_6ee1afc4",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/restapi/RestApiServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2016-08-05T15:03:02Z",
      "side": 1,
      "message": "My concern is that even if it appears to work as written, that might be because the servlet container is truncating the body even when the calling code attempts to write to the response. Then that behavior might be container-dependent, even if it works in tests.",
      "parentUuid": "f925eba0_369fd84a",
      "revId": "df8298b758f386878f6e32eb139812b936252306",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f925eba0_16a4dca0",
        "filename": "gerrit-httpd/src/main/java/com/google/gerrit/httpd/restapi/RestApiServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2016-08-05T15:52:59Z",
      "side": 1,
      "message": "Other than having a separate handler method for HEAD, as I was doing in the previous attempt, I don\u0027t see any other way to solve this.  There doesn\u0027t seem to be any way to get the request method in the GetContent implementation.",
      "parentUuid": "f43ed29a_6ee1afc4",
      "revId": "df8298b758f386878f6e32eb139812b936252306",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}