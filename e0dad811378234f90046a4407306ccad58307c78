{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "56b57ab8_cbcabdc4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2021-03-19T16:35:44Z",
      "side": 1,
      "message": "Wow, looks more reliable now. Thanks for all the improvements.",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b8c81e5_4c805308",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1079742
      },
      "writtenOn": "2021-03-22T09:39:07Z",
      "side": 1,
      "message": "LGTM on colors, thanks for updating.",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "335e85e8_22ab637c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "I haven\u0027t encounter a big memory issues anymore.\n\nIt\u0027s very nice feature, but it needs more polish. I would propose to put it under feature flag. ",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a173362c_63518c54",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "Added a flag.",
      "parentUuid": "335e85e8_22ab637c",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03e70c34_a7cb3f8d",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "WDYT about adding -, _ to token matcher\n\nso when I highlight \u0027token\u0027, \u0027token-highlight\u0027 is not highlighted",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 37
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9033bcc4_854c0fe7",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "Blocking issue: Selecting part of code to comment is almost impossible with token highlighter. I cannot select part of this line with token highlighter on.\n\nThe problematic is to select parts of two different tokens.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 27
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49c552e4_3067e65b",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03e70c34_a7cb3f8d",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 37
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14c3a4ab_67bab00f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 26,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9033bcc4_854c0fe7",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 27
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c6c8c93_33143199",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2021-03-19T16:35:44Z",
      "side": 1,
      "message": "Nit: You have a  number of tweaking params / limits here:\n\nmax chars per line: 500\nmax token length: 100\nmax token count: 10000\nmax occurrences per token: 1000\nmax line number delta highlighted: 100\n\nMight be worth extracting them into constants at top where you also have the delay - this highlights both the limitations to the reader up front, and makes it a bit easier to find the various tweaking nobs for later.",
      "range": {
        "startLine": 89,
        "startChar": 22,
        "endLine": 89,
        "endChar": 25
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9c797572_00fb5d4e",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "Maybe we can fire alert that token highlighter was disabled because long line as we do when we disable highlighting. Users are sometimes wondering why feature is disabled.",
      "range": {
        "startLine": 89,
        "startChar": 27,
        "endLine": 89,
        "endChar": 33
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2637b04b_618779a2",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "I would prefer not to.",
      "parentUuid": "9c797572_00fb5d4e",
      "range": {
        "startLine": 89,
        "startChar": 27,
        "endLine": 89,
        "endChar": 33
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58e0a721_7deb8f25",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 89,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7c6c8c93_33143199",
      "range": {
        "startLine": 89,
        "startChar": 22,
        "endLine": 89,
        "endChar": 25
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a6f11e5_916ba5b1",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 102,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "Shouldn\u0027t be this:\n\n```\nif (token \u003d\u003d\u003d this.currentHighlight) {\n        GrAnnotation.annotateElement(el, index, token.length, TOKEN_HIGHLIGHT);\n} else {\nGrAnnotation.annotateElement(el, index, token.length, TOKEN);\n}\n```\n\nBtw. I never noticed, when testing this change, difference between currentHighlight and other tokens.",
      "range": {
        "startLine": 99,
        "startChar": 6,
        "endLine": 102,
        "endChar": 7
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60b83bf5_31780c9f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 102,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2a6f11e5_916ba5b1",
      "range": {
        "startLine": 99,
        "startChar": 6,
        "endLine": 102,
        "endChar": 7
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e92a07d_81b0a021",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 180,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "This looks broken when you have a diff with common lines. \nif I have file\n```\nthis.\n+300 common lines\nthis.\n```\n\nHighlighting this doesn\u0027t highlight the other this.",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "489b155f_a10f138b",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 180,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "I have added a comment to `currentHighlightLineNumber`. I don\u0027t know know how to fix this. :-/",
      "parentUuid": "6e92a07d_81b0a021",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e4ba4bea_4107b17c",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-builder/token-highlight-layer.ts",
        "patchSetId": 4
      },
      "lineNbr": 184,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2021-03-19T16:35:44Z",
      "side": 1,
      "message": "Optional: If you merge the two maps and then index by side like this:\nprivate tokenToLines \u003d {\n  [Side.LEFT]: new Map\u003cstring, Set\u003cnumber\u003e\u003e(),\n  [Side.RIGHT]: new Map\u003cstring, Set\u003cnumber\u003e\u003e()\n};\n\nyou can then make this method take a `side` parameter and avoid the repetition...",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91717512_b37fa2d9",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-highlight/gr-diff-highlight_test.js",
        "patchSetId": 4
      },
      "lineNbr": 441,
      "author": {
        "id": 1085182
      },
      "writtenOn": "2021-03-22T10:14:48Z",
      "side": 1,
      "message": "TOken Highlighting doesn\u0027t work on this element. It\u0027s probable because there is part of word changed.",
      "range": {
        "startLine": 441,
        "startChar": 33,
        "endLine": 441,
        "endChar": 46
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a97b81fa_419e819b",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff-highlight/gr-diff-highlight_test.js",
        "patchSetId": 4
      },
      "lineNbr": 441,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "What do you mean by \"this element\"?",
      "parentUuid": "91717512_b37fa2d9",
      "range": {
        "startLine": 441,
        "startChar": 33,
        "endLine": 441,
        "endChar": 46
      },
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6558467_97314c1f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff/gr-diff-utils.ts",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1070860
      },
      "writtenOn": "2021-03-19T16:35:44Z",
      "side": 1,
      "message": "I have to say, I liked the previous location better: Different from other utils here, this method is intimately related to the DOM structure in the diff, which is defined in gr-diff-builder, so it feels more encapsulated to have it there. Is the reason that it is annoying to get a hold of the GrDiffBuilder?",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f25d6647_18feb37f",
        "filename": "polygerrit-ui/app/elements/diff/gr-diff/gr-diff-utils.ts",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2021-03-23T08:44:25Z",
      "side": 1,
      "message": "These utility functions are independent of the builder state, so they should definitely not be *inside* the builder object. We could move them back to the *file* gr-diff-builder-element, but for me depending on the diff builder does not feel right when all I want to do is looking up elements in gr-diff. I think these functions are elementary to all sort of gr-diff code, so gr-diff-utils seems like a good place. I would not have moved those utils out of elements/diff/...",
      "parentUuid": "e6558467_97314c1f",
      "revId": "e0dad811378234f90046a4407306ccad58307c78",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}