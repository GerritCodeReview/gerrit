{
  "comments": [
    {
      "key": {
        "uuid": "a69bc48f_cbbff2d7",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-06-09T06:44:18Z",
      "side": 1,
      "message": "This is changing from using Guava to commons-codec. Why don\u0027t we use Java 8\u0027s Base64 facility? It outperforms both implementataions, see: [1].\n\n* [1] https://github.com/apache/druid/pull/6913#issuecomment-457785634",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a174a735_78323b17",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-06-09T06:47:24Z",
      "side": 1,
      "message": "This is reverting back to a known working version, as it was before the change that broke it.\n\nIf you want to try using Java\u0027s base64, that\u0027s fine, please go ahead and upload an alternative change.",
      "parentUuid": "a69bc48f_cbbff2d7",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bfadfd7b_259a3084",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-06-09T06:50:01Z",
      "side": 1,
      "message": "\u003e This is reverting back to a known working version, as it was before the change that broke it.\n\nWhy some other occurences of SSH key material decoding weren\u0027t revert, but not only changes done in this file? What about this: [1].\n\n[1] https://gerrit-review.googlesource.com/c/gerrit/+/231872/11/java/com/google/gerrit/sshd/SshUtil.java",
      "parentUuid": "a174a735_78323b17",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "868b5e2c_3224f82a",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-06-09T06:57:12Z",
      "side": 1,
      "message": "Because this is fixing an issue that was specifically reported here. We don\u0027t know if the other place is broken.",
      "parentUuid": "bfadfd7b_259a3084",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "968307e7_003dae28",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-06-09T07:53:41Z",
      "side": 1,
      "message": "A test would be great. The problem can be easily reproduced with the string that provided in the issue description. But I think it works as expected, and the C:\\Projects\\gerrit\\etc\\peer_keys file is invalid: \" user@host\" suffix part is not a valid base 64 encoded string. Both characters: blank and \"@\" are not allowed. According to gerrit documentation: [1]\n\n  The format is one Base-64 encoded public key per line.\n\n@Orgad, if you remove \" user@host\" suffix from your peer_keys file it would work also without this change?\n\n* [1] https://gerrit-review.googlesource.com/Documentation/config-gerrit.html#_file_code_etc_peer_keys_code",
      "parentUuid": "868b5e2c_3224f82a",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "adcaa3dd_e420fe65",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1010516
      },
      "writtenOn": "2020-06-09T08:01:56Z",
      "side": 1,
      "message": "Yes, removing the suffix solves it.\n\nBut it is useful for tracking the keys.",
      "parentUuid": "968307e7_003dae28",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3412b116_f666f08e",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2020-06-09T08:07:40Z",
      "side": 1,
      "message": "\u003e But it is useful for tracking the keys.\n\nI totally agreed. So the plan would be:\n\n* 1. Add a unit test: PeerKeyParseTest\n* 2. Preserve the Guava decoding, but cut off everything after the blank: \" user@host\" suffix must be cut off.\n* 3. Extend the documentation and mention that suffix with \" user@host\" is supported per peer key line in peer_keys file.",
      "parentUuid": "adcaa3dd_e420fe65",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9785a56a_c04a7eeb",
        "filename": "java/com/google/gerrit/sshd/DatabasePubKeyAuth.java",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2020-06-09T08:19:09Z",
      "side": 1,
      "message": "Sounds good, but I don\u0027t have time to work on it. Can you take over?",
      "parentUuid": "3412b116_f666f08e",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 46
      },
      "revId": "e195dcb079dbee99ad2c8da45aeda4500d4d27fa",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}