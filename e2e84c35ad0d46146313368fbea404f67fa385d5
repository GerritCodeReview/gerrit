{
  "comments": [
    {
      "key": {
        "uuid": "fca95051_a2ae3fc1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-13T23:43:57Z",
      "side": 1,
      "message": "It looks like it also counts the number of unresolved drafts separately. Is that useful info to the user?\n\nI would have expected that it displays the number of unresolved threads total, whether or not they were resolved by a draft.",
      "range": {
        "startLine": 9,
        "startChar": 31,
        "endLine": 9,
        "endChar": 67
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "040c310e_27647de5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-02-14T19:46:44Z",
      "side": 1,
      "message": "You\u0027re right, I overlooked that case. Thanks.",
      "parentUuid": "fca95051_a2ae3fc1",
      "range": {
        "startLine": 9,
        "startChar": 31,
        "endLine": 9,
        "endChar": 67
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0093cde8_fffbb4a8",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-13T23:43:57Z",
      "side": 1,
      "message": "Remove (or add a description).",
      "range": {
        "startLine": 314,
        "startChar": 31,
        "endLine": 314,
        "endChar": 44
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddb76d1d_4709e66d",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 314,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-02-14T19:46:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0093cde8_fffbb4a8",
      "range": {
        "startLine": 314,
        "startChar": 31,
        "endLine": 314,
        "endChar": 44
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfbb4bc5_53ce3601",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-13T23:56:03Z",
      "side": 1,
      "message": "If I understand right, we\u0027re finding the leaves by finding the comments that don\u0027t have another comment referring to them by the parent ID. Is that right? The number of unresolved comments is the number of such leaves that re not marked as unresolved. Is that right?\n\nBrainstorming ways of doing this O(n) without a nested loop: what if we find the leaves by eliminating the comments that are referred to as parents from a map.\n\n  // Create an object where every comment ID\n  // is the key of an unresolved comment.\n  var idMap \u003d comments.reduce(function(acc, comment) (\n    if (comment.unresolved) {\n      acc[comment.id] \u003d true;\n    }\n  ), {});\n\n  // Set false for the comments that are marked as parents.\n  comments.forEach(function(comment) {\n    idMap[comment.in_reply_to] \u003d false;\n  });\n\n  // The unresolved comments are the comments\n  // that still have true.\n  var unresolvedLeaves \u003d Object.keys(idMap).filter(function(key)) {\n    return idMap.hasOwnProperty(key) \u0026\u0026 idMap[key];\n  });\n\n  var numUnresolvedLeaves \u003d unresolvedLeaves.length;\n\nMaybe I\u0027m overthinking this, though. I\u0027m not sure if that would work.",
      "range": {
        "startLine": 317,
        "startChar": 4,
        "endLine": 317,
        "endChar": 28
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11fef3b4_fb80fe4a",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-02-14T19:46:44Z",
      "side": 1,
      "message": "Yeah, I like this better. I didn\u0027t put too much thought into this because I\u0027ve never seen a file with more than, say, ten comments on it for a given patchset, but this approach is a bit more legible too.",
      "parentUuid": "cfbb4bc5_53ce3601",
      "range": {
        "startLine": 317,
        "startChar": 4,
        "endLine": 317,
        "endChar": 28
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fce1f3b5_f3005064",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 317,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-15T17:36:17Z",
      "side": 1,
      "message": "Cool.\n\nOn second look, I think it\u0027s actually O(n log n) because of the binary search of object-key lookup. No matter, though.",
      "parentUuid": "11fef3b4_fb80fe4a",
      "range": {
        "startLine": 317,
        "startChar": 4,
        "endLine": 317,
        "endChar": 28
      },
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf69ad0_c0993cdf",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 327,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-13T23:43:57Z",
      "side": 1,
      "message": "Note that this is potentially an O(n^2) loop.",
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc5e830e_c9ffc656",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 327,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-02-14T19:46:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdf69ad0_c0993cdf",
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4da72f2d_5e5b7be3",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1026519
      },
      "writtenOn": "2017-02-13T23:43:57Z",
      "side": 1,
      "message": "Is it useful to throw an exception here? Is it caught somewhere? Maybe a comment would suffice.",
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e0cccf4_64cbd677",
        "filename": "polygerrit-ui/app/elements/change/gr-file-list/gr-file-list.js",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1029297
      },
      "writtenOn": "2017-02-14T19:46:44Z",
      "side": 1,
      "message": "To be honest, this was code that helped me debug that I couldn\u0027t hit even if I tried, so I think it\u0027s removable.",
      "parentUuid": "4da72f2d_5e5b7be3",
      "revId": "e2e84c35ad0d46146313368fbea404f67fa385d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}