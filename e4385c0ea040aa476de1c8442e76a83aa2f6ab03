{
  "comments": [
    {
      "key": {
        "uuid": "0d75b976_b57ce099",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 12,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-16T20:06:18Z",
      "side": 1,
      "message": "I like this approach.",
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d75b976_d5815c38",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 16,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-16T20:06:18Z",
      "side": 1,
      "message": "Test calls from Eclipse has 3 requirements:\n\n* Multiple unit test files running in different modes\n* Run all tests from one file in different modes\n* Run one method in different modes\n\nWe can solve multiple configuration tests from Eclipse with Suite per configuration by abusing tests as configuration activation:\n\nWe can define a suite per configuration: one for NotesDB backend:\n\n  @RunWith(Suite.class)\n  @Suite.SuiteClasses({\n    NotesDBSystemPropertySetter.class,\n    SubmitByCherryPickIT.class,\n    SubmitByFastForwardIT.class,\n    [...]\n  })\n  public class ChangeSuiteNotesDBSuite {\n    // no op\n  }\n\nand one for ReviewDB backend the same as above, but without first line: NotesDBSystemPropertySetter.class is missing, as ReviewDB is a default configuration:\n\n  @RunWith(Suite.class)\n  @Suite.SuiteClasses({\n    SubmitByCherryPickIT.class,\n    SubmitByFastForwardIT.class,\n    [...]\n  })\n  public class ChangeSuiteReviewDBSuite {\n    // no op\n  }\n\nNow in NotesDBSystemPropertySetter we can do:\n\n  public class NotesDBSystemPropertySetter {\n    @Test\n    public void activateNotesDB() {\n      System.setProperty(\"foo\", \"bar\");\n    }\n  }\n\nIn all tests that are parts of the first suite above the property foo has value bar now. This works, because the suite runner honors the order of test included in the annotation.\n\nWe can solve multiple configuration tests run from Eclipse for the same file similarly: abusing a test method as configuration activation and relying upon new feature in JUnit: fix order of methods execution, e. g.:\n\n  @FixMethodOrder(MethodSorters.NAME_ASCENDING)\n  public class TestFoo {\n\n    @Test\n    //@Ignore\n    public void aaa_activateNotesDB() {\n      System.setProperty(\"foo\", \"bar\");\n    }\n\n    // This test prints bar or baz depends upon execution\n    // of method aaa_activateNotesDB above\n    @Test\n    public void b() {\n      String str \u003d System.getProperty(\"foo\", \"baz\");\n      System.out.println(str);\n    }\n  }\n\nWell, this works too by commenting one line in @Before method too.\n\n\nWe can solve multiple configuration tests from Eclipse for the same method with existing GerritConfig Annotation.",
      "range": {
        "startLine": 14,
        "startChar": 65,
        "endLine": 16,
        "endChar": 12
      },
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd1c8154_83db1e8e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 16,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-16T23:23:39Z",
      "side": 1,
      "message": "I would rather not have to write additional code just to get this working in Eclipse. For now, I have separate run configurations that pass different values of -D, and that\u0027s been sufficient for me. More important is that buck test --all works, since that\u0027s what developers should be using to check the Verified bit anyway.",
      "parentUuid": "0d75b976_d5815c38",
      "range": {
        "startLine": 14,
        "startChar": 65,
        "endLine": 16,
        "endChar": 12
      },
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "92154a31_79db0796",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 16,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-01-17T06:26:37Z",
      "side": 1,
      "message": "\u003e I would rather not have to write additional code just to get this working in Eclipse [...] More important is that buck test --all works, since that\u0027s what developers should be using to check the Verified bit anyway.\n\nTrue for checking with Buck, but developers use Eclipse to debug. We always said, that Buck driven build must be at least as good as Maven was. And of course you was able to click right mouse button on test or method and select \"Debug as Unit Test\" from Eclipse with Maven driven build and all configurations (Parametrizations) was honored.\n\nNotesDB vs. ReviewDB configuration on Buck driven build is not an exception here and both configuration must work from Eclipse to make development process as easy as possible.",
      "parentUuid": "cd1c8154_83db1e8e",
      "range": {
        "startLine": 14,
        "startChar": 65,
        "endLine": 16,
        "endChar": 12
      },
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d58911a_efea011d",
        "filename": "gerrit-acceptance-tests/tests.defs",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2014-01-16T23:23:58Z",
      "side": 1,
      "message": "Consider adding the config name as a label?",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 29,
        "endChar": 10
      },
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b2e7ae93_42e5f246",
        "filename": "gerrit-acceptance-tests/tests.defs",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-01-16T23:36:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4d58911a_efea011d",
      "range": {
        "startLine": 26,
        "startChar": 8,
        "endLine": 29,
        "endChar": 10
      },
      "revId": "e4385c0ea040aa476de1c8442e76a83aa2f6ab03",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}