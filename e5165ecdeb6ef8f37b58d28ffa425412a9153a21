{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1b0642a3_51c89d6b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-05-20T09:49:51Z",
      "side": 1,
      "message": "Fix the documentation then?",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecf0495f_a6ba133a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-05-20T09:52:48Z",
      "side": 1,
      "message": "Is that how we should fix bugs? Just change the expectations instead?\nAre you seriously suggesting that Owners getting implicit delete for all branches is the desired behavior?",
      "parentUuid": "1b0642a3_51c89d6b",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd52e98b_1dddce9b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-05-20T09:59:06Z",
      "side": 1,
      "message": "\u003e Is that how we should fix bugs? \n\nI disagree this is a bug and prefer to keep it as-is. See the commit message in change 50890 for explanation:\n\n  For deleting a branch by pushing to Gerrit it is required to have\n  force push permissions. For convenience project owners are allowed to\n  delete branches through WebUI/REST/SSH without force push permission\n  (because they anyway can assign this permission themselves).\n\nIf you want to prevent project owners to remove branches, disallow it on parent project. Done.",
      "parentUuid": "ecf0495f_a6ba133a",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9a04db0_fa490d8f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-05-20T10:58:19Z",
      "side": 1,
      "message": "My opinion is that the reasoning in the commit message is poor.\nWith that reasoning Project Owners should be allowed to do everything regardless of what is configured.\nIt is more likely that you, as a project owner, only want the permissions you have given yourself to avoid doing things, like deleting branches, by mistake.\n\n\u003e If you want to prevent project owners to remove branches, disallow it on parent project. Done.\nThat\u0027s not really a solution, then Project Owners would need to ask the Owners of the parent project if they want to actually delete a branch on purpose!\nThis is not a change to uphold some company policy, this was brought to our attention by actual project owners who deleted a branch by accident from the UI.\nProject Owners should be able to configure their own permissions, why should Gerrit be opinionated about who should be able to delete branches? This goes against every other rule in the ACL (except for maybe admin permissions but that\u0027s a different story IMO).\n\nIf Project Owners want to prevent themselves from deleting branches by mistake, why shouldn\u0027t Gerrit let them?",
      "parentUuid": "dd52e98b_1dddce9b",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "780d49a3_49ac3607",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-05-20T11:08:55Z",
      "side": 1,
      "message": "What do you feel would be the negative impact if we let this rule work like any other in the ACLs?",
      "parentUuid": "c9a04db0_fa490d8f",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61a53c69_16090039",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-05-20T13:53:05Z",
      "side": 1,
      "message": "I see your point. But this would be a breaking change and should be documented in Breaking Changes section in release notes, in homepage repository.\n\nAlso the new workflow would only work if project owner would remember to remove again the ACL after branch deletion was done. Should this workflow/idiom be explicitly documented/suggested: to only grant permission for a single operation and revoke it, like say for force push?\n\nLet\u0027s say, I\u0027m a change owner and would like to remove a branch after this change is submitted and released: I cannot delete a branch any more. I read breaking changes and understand, that starting from this release I need to explicitly add \"Delete Reference\" permission. Now, I grant me this permission, myself, without asking anyone to grant it for me. After removal of this branch I forgot to revoke this permission. Second time I remove branch by mistake, without gerrit prohibiting me to do it. So that I could screw it up even with this change. So, it\u0027s comparable with the current state of affairs.",
      "parentUuid": "c9a04db0_fa490d8f",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7aa7e484_22217a36",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1071857
      },
      "writtenOn": "2021-05-20T14:13:22Z",
      "side": 1,
      "message": "It\u0027s definitely a potentially breaking change. I agree that the change needs to be documented. \nSince 3.4 is released, it would also mean aiming at a 3.5 release, since we shouldn\u0027t be introducing breaking changes to stable branches.\n\nI am not sure if I agree with your followup argument though.\n\nYes, people can make mistakes, but that\u0027s always been the case.\nThis doesn\u0027t remove that from being a thing, but it does potentially help to prevent it from happening.\n\nYes, if people forget to revert their temporary delete permissions, they will be back at square 0, but at least \"our hands are clean\". They explicitly gave themselves the permissions to screw it up, as opposed to the current state of \"I can screw it up without even being aware I can screw it up\".\n\nA temporary permission system would be pretty cool to safeguard stuff like this. (e.g. Edit Access rules via UI, new Button \"temporary\" Gerrit automatically reverts that change 15 minutes later, or opens a change to revert it and assigns project owners to review/the Attention-Set).\nThat would probably have it\u0027s own problems.",
      "parentUuid": "61a53c69_16090039",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21c9cea7_c9d9edb9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-05-20T14:23:33Z",
      "side": 1,
      "message": "\u003e I see your point. But this would be a breaking change and should be documented in Breaking Changes section in release notes, in homepage repository.\n\nAgreed, this is my opinion also.\n\n\u003e Also the new workflow would only work if project owner would remember to remove again the ACL after branch deletion was done. Should this workflow/idiom be explicitly documented/suggested: to only grant permission for a single operation and revoke it, like say for force push?\n\nI don\u0027t know that it needs to be documented since there\u0027s no extra workflow needed.\n \n\u003e Let\u0027s say, I\u0027m a change owner and would like to remove a branch after this change is submitted and released: I cannot delete a branch any more. I read breaking changes and understand, that starting from this release I need to explicitly add \"Delete Reference\" permission. Now, I grant me this permission, myself, without asking anyone to grant it for me. After removal of this branch I forgot to revoke this permission. Second time I remove branch by mistake, without gerrit prohibiting me to do it. So that I could screw it up even with this change. So, it\u0027s comparable with the current state of affairs.\n\nI don\u0027t know were you\u0027re going with this line of reasoning. As you said: when this change is merged project owners would need to actively give themselves the permission to screw things up as-opposed-to the current state were they have the permission to screw things up by default, which is sort-of the point I\u0027m trying to make as a proponent of this change.\n\nIf an individual Gerrit admin feels that it\u0027s imperative for the project owners of their instance to be able to delete all branches at all times (as before) they can allow delete \"refs/heads/.*\" for \"Project Owners\" in All-Projects. This can be added as a suggestion to the \"breaking change\" notice in the release notes.",
      "parentUuid": "61a53c69_16090039",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "287307e8_5df7d6a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2022-01-05T20:00:10Z",
      "side": 1,
      "message": "\u003e \u003e Let\u0027s say, I\u0027m a change owner and would like to remove a branch after this change is submitted and released: I cannot delete a branch any more. I read breaking changes and understand, that starting from this release I need to explicitly add \"Delete Reference\" permission. Now, I grant me this permission, myself, without asking anyone to grant it for me. After removal of this branch I forgot to revoke this permission. Second time I remove branch by mistake, without gerrit prohibiting me to do it. So that I could screw it up even with this change. So, it\u0027s comparable with the current state of affairs.\n\u003e \n\u003e I don\u0027t know were you\u0027re going with this line of reasoning. As you said: when this change is merged project owners would need to actively give themselves the permission to screw things up as-opposed-to the current state were they have the permission to screw things up by default, which is sort-of the point I\u0027m trying to make as a proponent of this change.\n\nJust to add to this, I think it would be great to have some way to add \"temp perms\" for exactly this use case (\"I need extra perms to do something once, but then I don\u0027t need/want them so that I don\u0027t make mistakes\"). It doesn\u0027t come up every day, but it\u0027s often enough that it would be nice to have Gerrit support it (somehow).",
      "parentUuid": "21c9cea7_c9d9edb9",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db9dfd86_f25a485a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-01-05T20:47:01Z",
      "side": 1,
      "message": "\u003e Just to add to this, I think it would be great to have some way to add \"temp perms\" for exactly this use case [...]\n\n👍\n\nCheck: [1]. We did this dance multiple time:\n\n* specific branch is screwed up\n* Force push permission has been temporary granted\n* Force push has been done\n* Force push permission has been reverted\n\nIdeally, we would grant/issue one single force push ticket (with expiration time in say 60 seconds) for single push operation, without permanently adding and reverting (or forgetting to revert) force push permission:\n\nPer SSH (or REST API):\n\n  $ ssh gerrit-host gerrit issue-force-push-ticket\n  4711\n\n  $ git push -f HEAD:refs/for/master%force_push_ticket\u003d4711\n  \u003cdone\u003e\n\n[1] https://gerrit-review.googlesource.com/q/branch:refs/meta/config+message:revert",
      "parentUuid": "287307e8_5df7d6a9",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58377f6b_8ff7616a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-01-06T09:34:02Z",
      "side": 1,
      "message": "A ticket perm would be awesome, the grant-do-revert cycle is a quite common use-case.\nBut first we would have to make all permissions configurable and not granted by default.",
      "parentUuid": "db9dfd86_f25a485a",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e5e15cf_314d7468",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 11,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2022-01-06T20:01:59Z",
      "side": 1,
      "message": "Ack.",
      "parentUuid": "58377f6b_8ff7616a",
      "range": {
        "startLine": 11,
        "startChar": 8,
        "endLine": 11,
        "endChar": 54
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "514dcf26_664172c8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2021-05-20T09:49:51Z",
      "side": 1,
      "message": "Bug: Issue 13203",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 18
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ce9df0d9_ea7e7ec2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 18,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-06-21T14:34:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "514dcf26_664172c8",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 18
      },
      "revId": "e5165ecdeb6ef8f37b58d28ffa425412a9153a21",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}