{
  "comments": [
    {
      "key": {
        "uuid": "98021650_aceabdd0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "Mostly for bulk requests yes, but also for non-bulk searches. You can notice so by looking for all read uses of \u0027type\u0027 in AbstractElasticIndex.\n\nAlso, would replace the above AbstractElasticIndex: prefix with an Elasticsearch: one, as this change impacts other classes beside that one.",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99fc55e9_8b5816c3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "I think that the non-bulk searches for indexed changes, however, has been properly handled inside the ElasticChangeIndex class. The change type is specified with \"open_changes\" and/or \"closed_changes\" for V2, 5 and \"_doc\" for V6, which are valid index types. Therefore, I think this change does not need to have an impact on non-bulk searches. \n\nPlease let me know if I miss anything :)",
      "parentUuid": "98021650_aceabdd0",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "129d4d80_d40429bf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T19:11:20Z",
      "side": 1,
      "message": "In this change, you are changing the behaviour or setting of the \u0027type\u0027 member in AbstractElasticIndex. That member is used also for non-bulk requests. Also, I think you forgot my second comment paragraph above.",
      "parentUuid": "99fc55e9_8b5816c3",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5466b57_9dcf8664",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T20:12:12Z",
      "side": 1,
      "message": "I still think that changing the \"type\" field of AbstractElasticIndex class does not affect non-bulk searches for indexed changes (the \"type\" fields for indexed accounts and groups were not changed anyway, still \"accounts\" and \"groups\"). The non-bulk searches are only used by the class QuerySource inside ElastiChangeIndex which also has a \"type\" field. This \"type\" field is not the same as the \"type\" field of AbstractElasticIndex. \n\nAnd sorry about missing the your comment. It would be handled in patch set 7.",
      "parentUuid": "129d4d80_d40429bf",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80d5ead7_063b00e3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T20:53:41Z",
      "side": 1,
      "message": "Hello,\n\nI am sorry that I misread your comment. This change modifies the way that \"type\" field is assigned in AbstractElasticIndex class, which is also used for non-bulk searches by ElasticAccountIndex and ElasticGroupIndex. However, this change does not have a real impact on the non-bulk searches for these two classes, because the actual values for the index types are still \"accounts\" and \"groups\" respectively for V2, 5, and \"_doc\" for V6. In the end, this change only affects the bulk calls for indexing and deleting changes.\n\nPlease let me know if I still miss anything, thanks :)",
      "parentUuid": "d5466b57_9dcf8664",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e98bb542_60f452f7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T20:56:41Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "80d5ead7_063b00e3",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 58
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91749481_305d8049",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "Previously, when a bulk call was",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 30
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be7f5f0b_3ed1ecbc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91749481_305d8049",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 30
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9968d7ca_1c5e5618",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "type passed to the request was \"changes\", which",
      "range": {
        "startLine": 10,
        "startChar": 6,
        "endLine": 10,
        "endChar": 61
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0a68225_8140baea",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9968d7ca_1c5e5618",
      "range": {
        "startLine": 10,
        "startChar": 6,
        "endLine": 10,
        "endChar": 61
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "300d0cf4_bf7c8f1f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "Or \"_doc\" now, if using Elasticsearch V6. Only the current V2 and V5 support is using those two former types.",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01483ca7_0f07eccf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "300d0cf4_bf7c8f1f",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "16c9d581_31eb8f4a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "The explanations above only mention the changes index case. Maybe we should add some more about accounts and groups, also part of this change.",
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74c0c4fe_351cb82f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "16c9d581_31eb8f4a",
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "513a34a3_b51e5bcf",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticAccountIndex.java",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "Rather than passing a frequently redundant parameter value as in here, would add another constructor to AbstractElasticIndex. The latter could then be called by this constructor, internally to (or within) AbstractElasticIndex. Both constructors would remain available for classes child to AbstractElasticIndex.",
      "range": {
        "startLine": 83,
        "startChar": 42,
        "endLine": 83,
        "endChar": 60
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6674eb9a_0cdffc5c",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticAccountIndex.java",
        "patchSetId": 4
      },
      "lineNbr": 83,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "513a34a3_b51e5bcf",
      "range": {
        "startLine": 83,
        "startChar": 42,
        "endLine": 83,
        "endChar": 60
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ac9f11b_e327390b",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticChangeIndex.java",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1012732
      },
      "writtenOn": "2018-06-11T17:20:08Z",
      "side": 1,
      "message": "private \u003d\u003e Adding a blank line above as well.",
      "range": {
        "startLine": 101,
        "startChar": 2,
        "endLine": 101,
        "endChar": 8
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7eb96b01_d1b58a1c",
        "filename": "gerrit-elasticsearch/src/main/java/com/google/gerrit/elasticsearch/ElasticChangeIndex.java",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 1060002
      },
      "writtenOn": "2018-06-11T18:35:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ac9f11b_e327390b",
      "range": {
        "startLine": 101,
        "startChar": 2,
        "endLine": 101,
        "endChar": 8
      },
      "revId": "e52b59de4589f63812eb53d2c48e20185395b1c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}