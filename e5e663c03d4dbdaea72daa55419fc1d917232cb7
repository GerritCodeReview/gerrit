{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "54339d81_1a45a19c",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 42,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "assertCalled, assertExecuting, asserBeingCalled, assertCallInProgress, assertInProgress...?\nSince this should describe the state of the method not the CountDownLatch.\nThis name confused me a lot.",
      "range": {
        "startLine": 42,
        "startChar": 16,
        "endLine": 42,
        "endChar": 27
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3ad871a_635f0a99",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 156,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "Same here, hide in method:\n\n```\n    public void execute(Runnable runnable) throws Exception {\n      int sizeBefore \u003d workQueue.getTasks().size();\n      executor.execute(runnable);\n      assertQueueSize(sizeBefore + 1);\n    }\n```",
      "range": {
        "startLine": 156,
        "startChar": 4,
        "endLine": 156,
        "endChar": 31
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd17d72d_b221bdd7",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 157,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "nit: personal preference but I usually hide calls like this in a helper method to make the tests more readable and closer to plain text:\n\n    public void assertQueueSize(int size) {\n      assertThat(workQueue.getTasks().size()).isEqualTo(size);\n    }",
      "range": {
        "startLine": 157,
        "startChar": 4,
        "endLine": 157,
        "endChar": 57
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7629b81_4b87e9c7",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 169,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "I believe these asserts only tests you test-classes.",
      "range": {
        "startLine": 168,
        "startChar": 0,
        "endLine": 169,
        "endChar": 37
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58e1301e_0f52ede0",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 178,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "For comparison, with my suggestions applied this test-method would read:\n\n```\n    execute(runnable);\n    \n    // #onStart is called as task is run\n    listener.onStart.assertCalled();\n    \n    // #run is called after #onStart completes\n    runnable.run.assertUncalled();\n    listener.onStart.complete();\n    runnable.run.assertCalled();\n    \n    // #onStop is called after #run completes\n    listener.onStop.assertUncalled();\n    runnable.run.complete();\n    listener.onStop.assertCalled();\n    \n    // task is completed after #onStop is completed\n    assertQueueSize(1);\n    listener.onStop.complete();\n    assertQueueIsEmpty();\n```",
      "range": {
        "startLine": 155,
        "startChar": 0,
        "endLine": 178,
        "endChar": 3
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33723148_57124c27",
        "filename": "javatests/com/google/gerrit/acceptance/server/util/TaskListenerIT.java",
        "patchSetId": 13
      },
      "lineNbr": 215,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2022-05-19T08:43:30Z",
      "side": 1,
      "message": "assertQueueIsEmpty()",
      "range": {
        "startLine": 215,
        "startChar": 15,
        "endLine": 215,
        "endChar": 53
      },
      "revId": "e5e663c03d4dbdaea72daa55419fc1d917232cb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}