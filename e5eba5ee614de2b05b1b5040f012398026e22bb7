{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "58950350_aabebd19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-07T12:40:51Z",
      "side": 1,
      "message": "dmitrii is on leave for a couple of weeks. Patrick can find you a new reviewer.",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f2dd2b22_82191e49",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-08T11:36:03Z",
      "side": 1,
      "message": "I forgot to bring this up in the backend team meeting, but I think Joerg knows this code",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5aeb23c8_4dc54363",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2022-03-08T11:57:12Z",
      "side": 1,
      "message": "Joerg is a great person to help on this one. Joerg, do you mind taking a look?",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a0e64be9_c601368b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "Sorry for the many comments, basically this LGTM except for a few nits and the question of what data should be included in the event.\n\nI\u0027ll be out today and back on the 17th.",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29cc697c_a26b2964",
        "filename": "java/com/google/gerrit/extensions/events/AttentionSetListener.java",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "Why not take a ChangeEvent directly?",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d89d771_f5dfa909",
        "filename": "java/com/google/gerrit/extensions/events/AttentionSetListener.java",
        "patchSetId": 10
      },
      "lineNbr": 22,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Ack; now that the AttentionSetUpdate is being included, this isn\u0027t simply a ChangeEvent anymore.",
      "parentUuid": "29cc697c_a26b2964",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01557dd9_655e910b",
        "filename": "java/com/google/gerrit/extensions/events/AttentionSetListener.java",
        "patchSetId": 10
      },
      "lineNbr": 24,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "Could you add Javadoc here?",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00f222fa_8b2c55e0",
        "filename": "java/com/google/gerrit/extensions/events/AttentionSetListener.java",
        "patchSetId": 10
      },
      "lineNbr": 24,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01557dd9_655e910b",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c568795_d5b6ca93",
        "filename": "java/com/google/gerrit/server/change/AddToAttentionSetOp.java",
        "patchSetId": 10
      },
      "lineNbr": 109,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-08T11:36:03Z",
      "side": 1,
      "message": "shouldn\u0027t this pass attentionUserId to the event? How will the listener determine what happened otherwise?",
      "range": {
        "startLine": 109,
        "startChar": 24,
        "endLine": 109,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46a48d20_4be2c498",
        "filename": "java/com/google/gerrit/server/change/AddToAttentionSetOp.java",
        "patchSetId": 10
      },
      "lineNbr": 109,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-09T01:07:18Z",
      "side": 1,
      "message": "The default ChangeEvent has ChangeInfo, which already has an attentionSet() method to provide the current status of the attention set.\n\nI see that some events[1] extend the base event, but others[2] don\u0027t. The current attention set seemed enough, but it would be nice if it gave extra data on who exactly was added/deleted. Would AccountInfo[3] or AttentionSetUpdate[4] be a better way to represent someone like that?\n\n[1] https://gerrit.googlesource.com/gerrit/+/refs/changes/39/331239/10/java/com/google/gerrit/extensions/events/ChangeAbandonedListener.java\n[2] https://gerrit.googlesource.com/gerrit/+/refs/changes/39/331239/10/java/com/google/gerrit/extensions/events/ChangeDeletedListener.java\n[3] https://gerrit.googlesource.com/gerrit/+/refs/changes/39/331239/10/java/com/google/gerrit/extensions/common/AccountInfo.java\n[4] https://gerrit.googlesource.com/gerrit/+/refs/changes/39/331239/10/java/com/google/gerrit/entities/AttentionSetUpdate.java",
      "parentUuid": "4c568795_d5b6ca93",
      "range": {
        "startLine": 109,
        "startChar": 24,
        "endLine": 109,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59cdbef3_bc093cc2",
        "filename": "java/com/google/gerrit/server/change/AddToAttentionSetOp.java",
        "patchSetId": 10
      },
      "lineNbr": 109,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "I think the common caveat here is that across the network notifications may race, so if you embed the info in them you may get e.g. a sequence of \"added, removed\" which suggests the end state \"removed\" when in fact it was vice versa. To avoid this the notification can be considered to be only a hint that the current status should be requested from the authoritative source.\n\nThat being said, I\u0027m not sure about your use case, maybe this is not a relevant problem, in which case AttentionSetUpdate would seem useful to include. Can you say something about the context in the change description?",
      "parentUuid": "46a48d20_4be2c498",
      "range": {
        "startLine": 109,
        "startChar": 24,
        "endLine": 109,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5764cb6f_46e4294a",
        "filename": "java/com/google/gerrit/server/change/AddToAttentionSetOp.java",
        "patchSetId": 10
      },
      "lineNbr": 109,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "The use case I\u0027m developing for is a notification service plugin that passes AttentionSet changes to another API. Having a \"diff\" for who was added or removed would be very useful, even if there\u0027s a chance they come in out-of-order.\n\nI can\u0027t simply include an \"AttentionSetUpdate\"; doing so would cause a circular dependency between `//java/com/google/gerrit/entities:entities` and `//java/com/google/gerrit/extensions:api`. So I had to define my own interface that contained both the user being added/removed and whether or not they were added (or removed).\n\nIs two sets too much? While it\u0027s clear that an \"AttentionSetUpdate\" object contains only one user being added or removed, it\u0027s not clear that the API should be constrained to that.",
      "parentUuid": "59cdbef3_bc093cc2",
      "range": {
        "startLine": 109,
        "startChar": 24,
        "endLine": 109,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5cdf99e_80fd801c",
        "filename": "java/com/google/gerrit/server/change/AddToAttentionSetOp.java",
        "patchSetId": 10
      },
      "lineNbr": 109,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-16T11:08:02Z",
      "side": 1,
      "message": "IIUC, you want to send out an RPC for each user only if they are added to the attentionset for a change. That requires you to know the diff in A/S. HEnce, my suggestion to add this data to the event.",
      "parentUuid": "59cdbef3_bc093cc2",
      "range": {
        "startLine": 109,
        "startChar": 24,
        "endLine": 109,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b75b5fc_08a147e2",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 31,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "Can we have the name reflect that this helps with firing an event? The class name suggests that this object represents the change, or is in fact itself the event.",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc202440_13abef25",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 31,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Sure, but then this class doesn\u0027t follow the pattern of the similar classes around it. What do you think of this?",
      "parentUuid": "4b75b5fc_08a147e2",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fec28a53_f3712bc7",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "Since this is part of the public API, could you add Javadoc?",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ebecfa3_f4fa07b5",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fec28a53_f3712bc7",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c99ca251_261166a6",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 51,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "This wording seems a bit misleading in the case where the listener is called (so the event is fired) but throws an exception.",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0dc630a7_6caa8395",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 51,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c99ca251_261166a6",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f4f39bf_f9bdcd71",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1083042
      },
      "writtenOn": "2022-03-09T10:07:45Z",
      "side": 1,
      "message": "This class hierarchy seems confusing to me. Why not just use a ChangeEvent and remove this class and the homonymous one in AttentionSetListener? I realize there is precedent for this, but it does seem unnecessarily complex.",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ffc1b6f_0616d3ed",
        "filename": "java/com/google/gerrit/server/extensions/events/AttentionSetChanged.java",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6f4f39bf_f9bdcd71",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83625077_b8659e3f",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 10
      },
      "lineNbr": 1042,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-08T11:36:03Z",
      "side": 1,
      "message": "here",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d0b3d00e_1eef680c",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 10
      },
      "lineNbr": 1042,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "83625077_b8659e3f",
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0183b09c_a335260c",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 10
      },
      "lineNbr": 4762,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2022-03-08T11:36:03Z",
      "side": 1,
      "message": "With this, we only could do one module, I think. Is it possible to follow the pattern of the listener in l.4792 (See above)?",
      "range": {
        "startLine": 4762,
        "startChar": 16,
        "endLine": 4762,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9361bfae_62d3c243",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 10
      },
      "lineNbr": 4762,
      "author": {
        "id": 1145775
      },
      "writtenOn": "2022-03-14T23:22:33Z",
      "side": 1,
      "message": "Ah, that explains that pattern! Done.",
      "parentUuid": "0183b09c_a335260c",
      "range": {
        "startLine": 4762,
        "startChar": 16,
        "endLine": 4762,
        "endChar": 28
      },
      "revId": "e5eba5ee614de2b05b1b5040f012398026e22bb7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}