{
  "comments": [
    {
      "key": {
        "uuid": "4b627e30_772b6374",
        "filename": "java/com/google/gerrit/server/group/db/Groups.java",
        "patchSetId": 7
      },
      "lineNbr": 136,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "Opening a stream is unnecessary. Lists also have forEach() method.",
      "range": {
        "startLine": 136,
        "startChar": 14,
        "endLine": 136,
        "endChar": 23
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24b881f5_ee1e55ab",
        "filename": "java/com/google/gerrit/server/group/db/Groups.java",
        "patchSetId": 7
      },
      "lineNbr": 136,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "In my opinion, all of this code should be in GroupsNoteDbConsistencyChecker in a method called something like ensureConsistentWithGroupNameNotes(). We could also think about passing in the InternalGroup instance instead of the name and the UUID on their own.",
      "range": {
        "startLine": 133,
        "startChar": 6,
        "endLine": 136,
        "endChar": 87
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0fe9be10_1c818dad",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 231,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2017-11-29T15:26:28Z",
      "side": 1,
      "message": "nit: ImmutableList.of( ) is shorter?",
      "range": {
        "startLine": 231,
        "startChar": 15,
        "endLine": 231,
        "endChar": 40
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b779308d_8323dc1e",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 231,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2017-11-29T15:33:17Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0fe9be10_1c818dad",
      "range": {
        "startLine": 231,
        "startChar": 15,
        "endLine": 231,
        "endChar": 40
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6424aef3_7327083a",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 231,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "It\u0027s not just that ImmutableList#of is shorter. We typically use ImmutableList#of if possible instead of Collections#singletonList. I personally have tried to avoid the latter one for new code if Guava is on the classpath.",
      "parentUuid": "b779308d_8323dc1e",
      "range": {
        "startLine": 231,
        "startChar": 15,
        "endLine": 231,
        "endChar": 40
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d2b8969_146b8935",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 232,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "This code should be part of GroupNameNotes#loadOneGroupReference. It should simply return an empty Optional. We don\u0027t really need to explicitly care about the case when the reference doesn\u0027t exist at all. Knowing that the group name isn\u0027t in the list of all names is enough. (If people see such an inconsistency in the logs, it\u0027s probably best to run the full consistency check. The log entries should only inform people that something is off.)",
      "range": {
        "startLine": 229,
        "startChar": 6,
        "endLine": 232,
        "endChar": 7
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08ffd74c_0f60a3fc",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 248,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "In which case did you decide to log a warning and in which case an error? I don\u0027t understand the logic when each of them is logged right now.",
      "range": {
        "startLine": 248,
        "startChar": 12,
        "endLine": 248,
        "endChar": 19
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43b2fbe6_4b132ef7",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 258,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2017-11-29T15:26:28Z",
      "side": 1,
      "message": "I think you should propagate IOException.",
      "range": {
        "startLine": 258,
        "startChar": 13,
        "endLine": 258,
        "endChar": 24
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c95b7c9_5ef84f04",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 258,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2017-11-29T15:33:17Z",
      "side": 1,
      "message": "Why? I think our consistency checker should not bother other code. It should just do some silent log.",
      "parentUuid": "43b2fbe6_4b132ef7",
      "range": {
        "startLine": 258,
        "startChar": 13,
        "endLine": 258,
        "endChar": 24
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db3b7dbd_b5ef518f",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 258,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2017-11-29T16:05:01Z",
      "side": 1,
      "message": "If there is an I/O problem many other things are likely to also fail, so it doesn\u0027t hurt to propagate it. I don\u0027t think it can classify as a consistency problem, though.\n\nI suspect the callers are doing I/O too, so they likely also throw IOException.",
      "parentUuid": "0c95b7c9_5ef84f04",
      "range": {
        "startLine": 258,
        "startChar": 13,
        "endLine": 258,
        "endChar": 24
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46e6cf65_0f17ba6f",
        "filename": "java/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyChecker.java",
        "patchSetId": 7
      },
      "lineNbr": 258,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "I agree with Han-Wen.",
      "parentUuid": "db3b7dbd_b5ef518f",
      "range": {
        "startLine": 258,
        "startChar": 13,
        "endLine": 258,
        "endChar": 24
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2638a994_611f2884",
        "filename": "javatests/com/google/gerrit/acceptance/api/group/GroupsConsistencyIT.java",
        "patchSetId": 7
      },
      "lineNbr": 276,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2017-11-29T15:26:28Z",
      "side": 1,
      "message": "inline this",
      "range": {
        "startLine": 276,
        "startChar": 15,
        "endLine": 276,
        "endChar": 30
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38a2d837_b23a0786",
        "filename": "javatests/com/google/gerrit/acceptance/api/group/GroupsConsistencyIT.java",
        "patchSetId": 7
      },
      "lineNbr": 276,
      "author": {
        "id": 1031898
      },
      "writtenOn": "2017-11-29T15:33:17Z",
      "side": 1,
      "message": "In fact, this is intended. So that I don\u0027t need to modify lots of tests and just add three more parameters {\"repoManager, allUsers, serverIdent.get()\"}",
      "parentUuid": "2638a994_611f2884",
      "range": {
        "startLine": 276,
        "startChar": 15,
        "endLine": 276,
        "endChar": 30
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "207e7f49_394f14ca",
        "filename": "javatests/com/google/gerrit/acceptance/api/group/GroupsConsistencyIT.java",
        "patchSetId": 7
      },
      "lineNbr": 276,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2017-11-29T16:05:01Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "38a2d837_b23a0786",
      "range": {
        "startLine": 276,
        "startChar": 15,
        "endLine": 276,
        "endChar": 30
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "710fbcd9_5635ee30",
        "filename": "javatests/com/google/gerrit/server/group/db/GroupsNoteDbConsistencyCheckerTest.java",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1030912
      },
      "writtenOn": "2017-12-06T16:24:27Z",
      "side": 1,
      "message": "Please take a look at the recent \u0027Testing on the Toilet\u0027 episode 503 and adjust this class accordingly.",
      "range": {
        "startLine": 29,
        "startChar": 13,
        "endLine": 29,
        "endChar": 47
      },
      "revId": "e8286e3a28cbe614bc0b6b3a3bac3d53888c7190",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}