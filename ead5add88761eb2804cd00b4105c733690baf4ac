{
  "comments": [
    {
      "key": {
        "uuid": "AAAGzn////o\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2012-06-20T23:13:50Z",
      "side": 1,
      "message": "username may be blank, perhaps use some form of getEmailName()?",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG2X////s\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2012-06-21T08:02:20Z",
      "side": 1,
      "message": "Hmm, right, username might not be set. Actually I stole this piece of formatting the user from com.google.gerrit.sshd.BaseCommand line 331 to 336. Do you think we also have a problem there?",
      "parentUuid": "AAAGzn////o\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG1H///0E\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2012-06-22T16:18:55Z",
      "side": 1,
      "message": "sshd.BaseCommand, no. The only place users can perform Git operations and not have a username is my environment (aka gerrit-review)... and we don\u0027t run sshd.BaseCommand there as we have no SSH server.\n\nPerhaps:\n\n  Objects.firstNonNull(\n    currentUser.getUserName(),\n    currentUser.getAccount().getPreferredEmail());",
      "parentUuid": "AAAG2X////s\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG33////o\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2012-06-22T17:05:17Z",
      "side": 1,
      "message": "Ok, but this class here also inherits from BaseCommand. Means if we throw the Failure below in line 157, BaseCommand will write the log entry, and for this log entry the username is just formatted as above. Is this Receive command not used on gerrit-review?\n\nDone.",
      "parentUuid": "AAAG1H///0E\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG1H///zc\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2012-06-22T17:06:36Z",
      "side": 1,
      "message": "Oh, right. We don\u0027t use this class. I was thinking this was ReceiveCommits (which we do use).\n\nHere I think you can just assume we have a username. Which means that patch set 2 is reasonable.",
      "parentUuid": "AAAG33////o\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG33////U\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2012-06-22T17:16:21Z",
      "side": 1,
      "message": "Ok, I\u0027ve restored patch set 2.\n\nIf this is not used when pushing over http, does this mean we have to handle and log the object too large error also in another place?",
      "parentUuid": "AAAG1H///zc\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG1H///zM\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2012-06-22T17:20:24Z",
      "side": 1,
      "message": "Yes. Over HTTP this is handled up in JGit. I think. GitOverHttpServlet is the glue here in Gerrit, with ReceivePackServlet doing most of the processing in JGit.\n\nWith no stderr stream you need to get errors to the client packaged into the progress stream, which is buried inside of the ReceivePack instance it wraps. Its probably a bit more work than this simple change.",
      "parentUuid": "AAAG33////U\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAG+X////w\u003d",
        "filename": "gerrit-sshd/src/main/java/com/google/gerrit/sshd/commands/Receive.java",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2012-06-25T13:23:51Z",
      "side": 1,
      "message": "I\u0027ve spent some time on this but I didn\u0027t find a solution to write a log entry in case of TooLargeObjectInPackException :-(",
      "parentUuid": "AAAG1H///zM\u003d",
      "revId": "ead5add88761eb2804cd00b4105c733690baf4ac",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}