{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c954eede_5e196702",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-09-16T07:19:56Z",
      "side": 1,
      "message": "Note: I didn\u0027t review the new tests yet.",
      "revId": "ebb7ae7b2facae85b19533eaaa48358137fa3fd9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c1a6965_96085876",
        "filename": "java/com/google/gerrit/server/update/BatchUpdate.java",
        "patchSetId": 14
      },
      "lineNbr": 126,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-09-16T07:19:56Z",
      "side": 1,
      "message": "Is this correct?\n\nBatchUpdate.module() is installed in GerritGlobalModule, but then in addition we have\n\n```\nbind(AttentionSetObserver.class);\n```\n  \nin GerritGlobalModule too.\n\nCould we instead bind a DISABLED version of AttentionSetObserver in BatchProgramModule, similar to how we bind DISABLED for RevisionCreated [1]?\n\n[1] https://gerrit.googlesource.com/gerrit/+/refs/heads/master/java/com/google/gerrit/pgm/util/BatchProgramModule.java#217",
      "revId": "ebb7ae7b2facae85b19533eaaa48358137fa3fd9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b98ecea3_5d29c37e",
        "filename": "java/com/google/gerrit/server/update/BatchUpdate.java",
        "patchSetId": 14
      },
      "lineNbr": 126,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2022-09-16T08:02:46Z",
      "side": 1,
      "message": "\u003e Is this correct?\n\nYes, this is correct.\n\nOptionalBinder means that this dependency is optional; OptionalBinder doesn\u0027t bind actual implementation. I.e. if there is no binding for AttentionSetObserver, then Guice injects Null or Optional.empty.\nWithout OptionalBinder Guice fails if bind(AttentionSetObserver.class) is not provided (happens with BatchProgramModule).\n\n\u003e Could we instead bind a DISABLED version of AttentionSetObserver in BatchProgramModule, similar to how we bind DISABLED for RevisionCreated [1]?\n\nThanks, I didn\u0027t know that we use this pattern DISABLED - I will update to use it.\n\nDon\u0027t you mind if I do it in a separate change, after submitting this one? This requires some refactoring/introducing interface. This is non-functional change and we can start testing the plugin without waiting for it.",
      "parentUuid": "7c1a6965_96085876",
      "revId": "ebb7ae7b2facae85b19533eaaa48358137fa3fd9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18da0c15_fa0eda01",
        "filename": "java/com/google/gerrit/server/update/BatchUpdate.java",
        "patchSetId": 14
      },
      "lineNbr": 126,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-09-16T08:18:05Z",
      "side": 1,
      "message": "\u003e Yes, this is correct.\n\nGood to know and thanks for explaining!\n\n\u003e Don\u0027t you mind if I do it in a separate change, after submitting this one?\n\nYes, I think then it\u0027s fine to submit this one, and look into changing this as a follow-up. If this also works I think I would still do this to be consistent with what we have now (but I would be also fine if we come to the conclusion it\u0027s better to keep as it is now).\n\nI\u0027ll have a look at the new tests now, and approve if they look fine.",
      "parentUuid": "b98ecea3_5d29c37e",
      "revId": "ebb7ae7b2facae85b19533eaaa48358137fa3fd9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}