{
  "pushCert": "certificate version 0.1\npusher A0D0EF51 1516783682 +0100\nnonce AGjzz3/Tn5S1vGQVjOoXAJhG+h+ql8AUjZxCUvmw3LdeVAHy8aZe0hO/NFFLTV5Nww33UgyV6oPX\n\n0000000000000000000000000000000000000000 ee50223f23cf9c8a0a96269a52836fa57abd19ae refs/for/master\n-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEjcOJ9ZBmQPrFqZA3UbX9l6DQ71EFAlpoSEIACgkQUbX9l6DQ\n71GeXAf/b1irPDljmG47lTfyZlMMqhl/Bkc02OHYlLkERWDYrdZxlKnyhVDRkuTU\niLg+Nw8TCFsGcsvjW17IfqNbBf7hZBNZWpf7WIBsSXO2SXGEXAoWDQJB8EWYr9Wi\nGGHSVqQrZliI8DblpMcj5ei99DDg2xEEPCwvPDev2//2aYLYtA1Ht67HybxMKP20\niSM+1eJQTN1l8c2t96PuY+3ACLYWyIAnbuvOz1MHxr9BimiVN6nwBrJlmNMxS1Xm\nDEV6+ENO7v2koDO57cKNNpqAEf2W/9a0CVONF/5qrK9tY9nTgIbOKK6OmE3IW920\npk4zDZqvxoVQs42BwFNMxPOAb3xEBQ\u003d\u003d\n\u003ddYql\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "c658450b_95bf0212",
        "filename": "java/com/google/gerrit/server/account/AccountsUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 580,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2018-01-24T15:47:11Z",
      "side": 1,
      "message": "I don\u0027t understand this comment. In what way is updateCaches(getUpdatedAccounts) \"excluding updated accounts\"?",
      "range": {
        "startLine": 580,
        "startChar": 7,
        "endLine": 580,
        "endChar": 31
      },
      "revId": "ee50223f23cf9c8a0a96269a52836fa57abd19ae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "636a0081_59d7f76d",
        "filename": "java/com/google/gerrit/server/account/AccountsUpdate.java",
        "patchSetId": 1
      },
      "lineNbr": 580,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2018-01-25T12:15:37Z",
      "side": 1,
      "message": "For modified external IDs ExternalIdNotes#updateCaches evicts the corresponding accounts from the account cache which triggers a reindex of those accounts. If in the same transaction any of these accounts is otherwise modified so that its user branch changes in addition to the external IDs, then this account is reindexed twice. The second reindex happens due to the ref updated event for the user branch which is received by ReindexAfterRefUpdate. So to avoid the double reindexing we tell ExternalIdNotes#updateCaches to skip/ignore/exclude the updated accounts when doing the cache eviction because ReindexAfterRefUpdate already takes care to reindex them.\n\nHope with \"skip\" it\u0027s clearer now?",
      "parentUuid": "c658450b_95bf0212",
      "range": {
        "startLine": 580,
        "startChar": 7,
        "endLine": 580,
        "endChar": 31
      },
      "revId": "ee50223f23cf9c8a0a96269a52836fa57abd19ae",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}