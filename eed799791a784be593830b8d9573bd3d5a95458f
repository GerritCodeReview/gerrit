{
  "comments": [
    {
      "key": {
        "uuid": "59077bcb_f7e12040",
        "filename": "Documentation/rest-api-changes.txt",
        "patchSetId": 3
      },
      "lineNbr": 2794,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T13:45:54Z",
      "side": 1,
      "message": "Unrelated to this change",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59905b99_4fecad33",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/change/ReplyBox.java",
        "patchSetId": 3
      },
      "lineNbr": 344,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-09T22:26:18Z",
      "side": 1,
      "message": "I must be missing something because the call \u0027lv.info.defaultValue()\u0027 doesn\u0027t work.",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "391c871e_96dc2c8a",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/change/ReplyBox.java",
        "patchSetId": 3
      },
      "lineNbr": 344,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T13:45:54Z",
      "side": 1,
      "message": "Not sure, it looks like what you have is correct. Is the correct value being returned in the JSON from the server?",
      "parentUuid": "59905b99_4fecad33",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "391c871e_16e93c23",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/change/ReplyBox.java",
        "patchSetId": 3
      },
      "lineNbr": 344,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-10T17:47:22Z",
      "side": 1,
      "message": "It\u0027s \u0027default_value\u0027 in the json.  I was expecting it to be \u0027defaultValue\u0027 instead.  I\u0027m not sure what sets it to that because there is no reference to \u0027default_value\u0027 in the code.",
      "parentUuid": "391c871e_96dc2c8a",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9158ff4_14e93423",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/change/ReplyBox.java",
        "patchSetId": 3
      },
      "lineNbr": 344,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T20:58:22Z",
      "side": 1,
      "message": "This is a result of the Gson FieldNamingPolicy we use.",
      "parentUuid": "391c871e_16e93c23",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "391c871e_76f6b002",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/changes/ChangeInfo.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-10T17:47:22Z",
      "side": 1,
      "message": "needs to be \u0027this.default_value\u0027 instead since that\u0027s what\u0027s in the json",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "798b5f70_70e95022",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 3
      },
      "lineNbr": 640,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-09T22:26:18Z",
      "side": 1,
      "message": "this seems like the right place to set the defaultValue but not real sure.",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59077bcb_d7e69c55",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeJson.java",
        "patchSetId": 3
      },
      "lineNbr": 640,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T13:45:54Z",
      "side": 1,
      "message": "Yes, this looks right.",
      "parentUuid": "798b5f70_70e95022",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "798b5f70_10f6c401",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ProjectConfig.java",
        "patchSetId": 3
      },
      "lineNbr": 674,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-09T22:26:18Z",
      "side": 1,
      "message": "Reply to: What happens when the default value is outside the range permitted for a user, e.g. default is -2 but the user can only vote [-1, +1]?\n\nUser cannot set a default value outside of the range.   The push to set the value is aborted and setting is not saved.",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "391c871e_b6d7a866",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ProjectConfig.java",
        "patchSetId": 3
      },
      "lineNbr": 674,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T13:45:54Z",
      "side": 1,
      "message": "Well, not exactly, the behavior of passing a vote outside the permitted range to PostReview depends on the value of strict_labels:\n\nhttps://gerrit-review.googlesource.com/Documentation/rest-api-changes.html#review-input\n\nBut I was actually asking about what the behavior should be wrt the radio buttons, since the whole point of having a default value is to preselect the radio button.\n\nIn my example, there would only be three radio buttons, none of which match the configured default value for the label. Which, if any, of these should be preselected?",
      "parentUuid": "798b5f70_10f6c401",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59077bcb_17e93423",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ProjectConfig.java",
        "patchSetId": 3
      },
      "lineNbr": 674,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-10T17:47:22Z",
      "side": 1,
      "message": "ahh ok.  So I see 3 options:\nA. ignore default and set it to 0\nB. don\u0027t set any defaults and let user pick.\nC. set the default to the next closest value that\u0027s within the allowable range for that user.\n\nSince my use case for this feature is to enforce workflow I think option C makes the most sense.",
      "parentUuid": "391c871e_b6d7a866",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19198330_d5e69c55",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ProjectConfig.java",
        "patchSetId": 3
      },
      "lineNbr": 674,
      "author": {
        "id": 1010008
      },
      "writtenOn": "2014-04-10T20:58:22Z",
      "side": 1,
      "message": "Agreed, (C) seems reasonable.\n\nThere is still the question of how to communicate the default value to the client.\n\nYou could do the squashing on the server side, i.e. return defaultValue differently to different users depending on their permissions. (In this case take a look at LabelNormalizer, that\u0027s where we squash labels.) This is similar to how we vary the value of permitted_labels.\n\nOTOH, since we\u0027re already sending permitted_labels to the client, it would also be reasonable to send the same defaultValue to all users, and have the client-side code do the squashing. (In this case you would not want to reuse LabelNormalizer.)",
      "parentUuid": "59077bcb_17e93423",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9158ff4_148db46a",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/git/ProjectConfig.java",
        "patchSetId": 3
      },
      "lineNbr": 674,
      "author": {
        "id": 1012623
      },
      "writtenOn": "2014-04-11T21:47:36Z",
      "side": 1,
      "message": "I wasn\u0027t sure how to do it on the server side so i only normalized it for the Reply box.  Also I think it would be preferable _not_ to do on the server side because I think the REST api should return the default value that is set in the project config, not the normalized one that you would get in the Reply box.  In another words i think we should normalize only for the Reply box.",
      "parentUuid": "19198330_d5e69c55",
      "revId": "eed799791a784be593830b8d9573bd3d5a95458f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}