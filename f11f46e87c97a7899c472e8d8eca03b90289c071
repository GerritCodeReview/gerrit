{
  "comments": [
    {
      "key": {
        "uuid": "MfCbq9gI",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2012-12-04T17:10:32Z",
      "side": 1,
      "message": "The commit message should include a description of the bug. The bug contains a nice explanation of the problem here being \"test.git.git\" turning into \"test.git\" in the Changes table, even though the project name is really \"test\".",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "Mpb0B3xA",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-05T10:18:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "MfCbq9gI",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfEZiktE",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2012-12-04T11:10:01Z",
      "side": 1,
      "message": "Change \"if\" to \"while\" to strip all \".git\" off the end of the project name.",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfKZYpiQ",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-04T13:18:03Z",
      "side": 1,
      "message": "we cannot guess user always input  \"xxx.git.git\", \nhe also can input \u0027\u0027nam.e.git\" \nso the best way to check the project name valid or not is checking it by projectCache.",
      "parentUuid": "MfEZiktE",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfCZtlsI",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2012-12-04T11:10:01Z",
      "side": 1,
      "message": "If we\u0027ve stripped all the trailing \".git\" off the name, we can use projectCache.get() to find out if the project exists.\n\n    ProjectControl control \u003d null;\n    try {\n      final Project.NameKey nameKey \u003d new Project.NameKey(projectName);\n      if (projectCache.get(nameKey) !\u003d null) {\n        control \u003d projectControlFactory.validateFor(nameKey, ProjectControl.OWNER | ProjectControl.VISIBLE);\n      }\n    } catch (NoSuchProjectException e) {\n    }\n\n    if (control \u003d\u003d null) {\n      throw new CmdLineException(owner, \"\u0027\" + token + \"\u0027: not a Gerrit project\");\n    }",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfMZVous",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-04T13:18:03Z",
      "side": 1,
      "message": "I will check the logic of \u0027projectCache.get(nameKey)\u0027 which would be a good idea if it can work.\n\n however I still prefer to keep the project name checking related code  to be separately. that would be clear,as \nboth \"projectname.git\" and projectname\" can work on \"control \u003d projectControlFactory.validateFor(nameKey, ProjectControl.OWNER | ProjectControl.VIS\nIBLE);\"",
      "parentUuid": "MfCZtlsI",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfGamrhU",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-04T15:13:15Z",
      "side": 1,
      "message": "double check the logic of \u0027(projectCache.get(nameKey) !\u003d null)\u0027 and test.\n\nthe result is it cannot work. so I will prepare new patchset.",
      "parentUuid": "MfMZVous",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfKanxgw",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 74,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-04T15:16:36Z",
      "side": 1,
      "message": "(typo . sorry)\n\n...\n\nso I will NOT prepare new patchset.",
      "parentUuid": "MfGamrhU",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MfOaI3nk",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1001240
      },
      "writtenOn": "2012-12-04T17:08:56Z",
      "side": 1,
      "message": "This loop is not necessary. First we should not be looping through all of the projects when we know exactly what name we were asked for. Second, validateFor looks for the project in the cache and throws NoSuchProjectException if it is not found. So David\u0027s suggestion to look in the cache isn\u0027t necessary, and this loop should also not be necessary.",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MoeHyZiw",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2012-12-05T00:40:07Z",
      "side": 1,
      "message": "\u003e validateFor looks for the project in the cache and throws NoSuchProjectException if it is not found\n\nIn the case of this particular issue though, if the user has pushed to \"project.git.git\" the check at line 55 will cause it to be be changed to \"project.git\" which is then found by validateFor, so no exception is thrown.",
      "parentUuid": "MfOaI3nk",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "MpZ38IwA",
        "filename": "gerrit-server/src/main/java/com/google/gerrit/server/args4j/ProjectControlHandler.java",
        "patchSetId": 4
      },
      "lineNbr": 75,
      "author": {
        "id": 1010015
      },
      "writtenOn": "2012-12-05T10:18:41Z",
      "side": 1,
      "message": "David\u0027s feedback is right . that is why the Issue 1699 is reported by user\n\nabout how to carry out, basically Shawn\u0027s idea is right , we should add this check logic in the ProjectControl.java to make it having common sense. and it should not\n be done  by projectCache.all() which has not good performance and is a bit trivial. \n\nI prepare a new patchset today. I think it it dry and better now.",
      "parentUuid": "MoeHyZiw",
      "revId": "f11f46e87c97a7899c472e8d8eca03b90289c071",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}