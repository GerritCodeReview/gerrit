{
  "comments": [
    {
      "key": {
        "uuid": "5da70c5b_dfff5059",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 295,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Can you wrap this in a _getPreferences() method? That would make it consistent with:\n\n_getLoggedIn()\n_getServerConfig()\n_getProjectConfig()",
      "range": {
        "startLine": 295,
        "startChar": 6,
        "endLine": 295,
        "endChar": 37
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b854afaf_6f887cc8",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 295,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-18T15:25:01Z",
      "side": 1,
      "message": "Thanks, done.",
      "parentUuid": "5da70c5b_dfff5059",
      "range": {
        "startLine": 295,
        "startChar": 6,
        "endLine": 295,
        "endChar": 37
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7edcdc7f_710b47f6",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Why? reload calls getChangeDetail, which in turns sets _change, which has _changeChanged as an observer.",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c195f6f4_0246ae6b",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-18T15:25:01Z",
      "side": 1,
      "message": "When i was testing this change, this was required.\n\nI needed to do this both in _changeChanged and _paramsChanged. I cannot say with 100% certain but it\u0027s because _changeChanged is loaded on the refresh (not hard refresh) unlike _paramsChanged hence why this is needed in two places to set _patchRange.basePatchNum.\n\nBut i also reused this function as it a made this change look cleaner and b made sure to not duplicate anything even if that function is doing additional stuff.",
      "parentUuid": "7edcdc7f_710b47f6",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e641481_c083ebbb",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-21T13:15:45Z",
      "side": 1,
      "message": "I am sorry, but I must insist here. I am coming from a legacy system where we also had a lot of \"let\u0027s call another update...() method and see if that helps\". That can make such components harder and harder to understand. Can you try without this call once more and see if it works? And if not, can you try to understand why this reasoning does not hold: \"reload calls getChangeDetail, which in turns sets _change, which has _changeChanged as an observer.\"",
      "parentUuid": "c195f6f4_0246ae6b",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58e74c88_393d1af5",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-21T14:02:37Z",
      "side": 1,
      "message": "testing locally again (without this) revealed that _changeChanged is not called after a minor refresh ie like this:\n\nSee this vid https://imgur.com/a/kMljB4A",
      "parentUuid": "5e641481_c083ebbb",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68a7b0e8_2574475a",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-21T14:34:03Z",
      "side": 1,
      "message": "Ok, there is a difference in whether you click \"reload\" or you re-type the URL, is that correct? Can you try to get to the bottom of this, maybe by just adding console.log() statements all over the place or setting breakpoints?",
      "parentUuid": "58e74c88_393d1af5",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f4ecc58_54ef3c56",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-21T14:36:36Z",
      "side": 1,
      "message": "I found the cause this._prefs is returning undefined on a soft reload.",
      "parentUuid": "58e74c88_393d1af5",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a37de6c_16251a29",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-21T14:45:37Z",
      "side": 1,
      "message": "Then you probably want to move the pref loading into the reload method (and make the promise part of the allDataPromises), more similar to how _getProjectConfig() is dealt with.",
      "parentUuid": "1f4ecc58_54ef3c56",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f91e0fc1_21da5da0",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-21T14:56:45Z",
      "side": 1,
      "message": "Tested that just now, that didn\u0027t work either on a hard refresh or a soft refresh.",
      "parentUuid": "1a37de6c_16251a29",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afffa9e3_387c5a11",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 683,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-21T15:45:34Z",
      "side": 1,
      "message": "I\u0027ve figured out how to do it, thanks, done!",
      "parentUuid": "f91e0fc1_21da5da0",
      "range": {
        "startLine": 682,
        "startChar": 10,
        "endLine": 683,
        "endChar": 34
      },
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f1885d8f_7a180c20",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 812,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Move this logic into the _getParent() method.",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62978a2e_a04cc8ec",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 827,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Rename _getParent() to _getBasePatchNum().\n\nAdd a comment to the method.",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5be1cbe3_9eefdcdb",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 827,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-18T15:25:01Z",
      "side": 1,
      "message": "Thanks, done.",
      "parentUuid": "62978a2e_a04cc8ec",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a152031_3b37edba",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 831,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Instead of nested ifs guard clauses might be nicer to read, i.e. inverse the logic:\n\nif (patchRange.basePatchNum !\u003d\u003d \u0027PARENT\u0027) return patchRange.basePatchNum;",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef4014c9_eb05805a",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 831,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-18T15:25:01Z",
      "side": 1,
      "message": "Thanks, done.",
      "parentUuid": "6a152031_3b37edba",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a940f6eb_a8cb8b37",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 843,
      "author": {
        "id": 1013302
      },
      "writtenOn": "2019-02-18T09:28:12Z",
      "side": 1,
      "message": "Can you point me to where this magic number comes from and how it is used?",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f062750_962a8af4",
        "filename": "polygerrit-ui/app/elements/change/gr-change-view/gr-change-view.js",
        "patchSetId": 13
      },
      "lineNbr": 843,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-02-18T15:25:01Z",
      "side": 1,
      "message": "I doin\u0027t know where in core, but if you go to a merge change like https://gerrit-review.googlesource.com/c/gerrit/+/214707 then select `Parent 1 which takes you to https://gerrit-review.googlesource.com/c/gerrit/+/214707/-1..1 (the -1 is the first parent) secondly it\u0027s also in the preference name \u0027FIRST_PARENT\u0027 :)",
      "parentUuid": "a940f6eb_a8cb8b37",
      "revId": "f2f2689f580d37e8d60b66ff5148c94b2b23a1ff",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}