{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "47d2f9e9_c1497a15",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-06T09:43:59Z",
      "side": 1,
      "message": "Can you please document the new config parameter in config-project-config.txt?",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f20b943_7f7e004c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-06T17:17:39Z",
      "side": 1,
      "message": "I prefer to add it later when the syntax of the language that we will use is well defined, because the docs should include examples of such blocking/applicability/override conditions.\n\nAlso with this change, the submit requirements are unused; they\u0027ll just be stored in NoteDb but they don\u0027t have an effect on submittability of changes, so mentioning them with the project config might be confusing.",
      "parentUuid": "47d2f9e9_c1497a15",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07dee85f_d805efdf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-06T17:19:00Z",
      "side": 1,
      "message": "I\u0027m also OK to add them with this change anyway. We would probably need to re-iterate over them later to add/refine the examples.\n\nPlease LMK your opinion.",
      "parentUuid": "8f20b943_7f7e004c",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "309e4250_6d64800f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T07:36:26Z",
      "side": 1,
      "message": "\u003e I prefer to add it later when the syntax of the language that we will\n\u003e use is well defined, because the docs should include examples of such \n\u003e blocking/applicability/override conditions.\n\nI was exactly looking for the examples because it makes the review easier :)\nBy looking at the examples I would be able to judge quickly if this format looks good and then I could make sure that the code matches the documented intention.\nBut I\u0027m fine if you want to add docs only later.\n\n\u003e Also with this change, the submit requirements are unused; they\u0027ll just\n\u003e be stored in NoteDb but they don\u0027t have an effect on submittability of\n\u003e changes, so mentioning them with the project config might be confusing.\n\nMakes sense, maybe you could include this reasoning into the commit message, telling there why the new config settings are not documented yet and that the documentation will be added later?\n\n\u003e I\u0027m also OK to add them with this change anyway. We would probably need\n\u003e to re-iterate over them later to add/refine the examples.\n\nIf that\u0027s the case, I would rather argue that we should have the documentation first to be sure we are implementing the right thing (for the iterations changing documentation should be less work than changing the implementation).",
      "parentUuid": "07dee85f_d805efdf",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4441e3c7_a33116b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done. I updated the commit message.",
      "parentUuid": "309e4250_6d64800f",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7e87339_3a381abf",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "better \"this\"?",
      "range": {
        "startLine": 25,
        "startChar": 26,
        "endLine": 25,
        "endChar": 27
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eaf495d0_5687d0c3",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e7e87339_3a381abf",
      "range": {
        "startLine": 25,
        "startChar": 26,
        "endLine": 25,
        "endChar": 27
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "906f7fcb_4083af20",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e7e87339_3a381abf",
      "range": {
        "startLine": 25,
        "startChar": 26,
        "endLine": 25,
        "endChar": 27
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12543b89_f2f80ab5",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Here and for the other expressions below, would it be better to return the parsed predicate tree (or a dedicated class representing a SR condition), instead of a string? Otherwise all callers would need to do the parsing on their own.",
      "range": {
        "startLine": 36,
        "startChar": 18,
        "endLine": 36,
        "endChar": 24
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12405031_9be0ccef",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "mmm, thanks for bringing this point into discussion. That\u0027s a better idea. Parsing the predicate tree would also allow us to perform syntax validation. Though that would require settling down on the language construct, defining its grammar similarly to QueryParser, etc... so we can postpone until then.\n\nSuggestion: \nWe could extract the expression Strings into a separate class, i.e. \"SubmitRequirementExpression\" representing the parsed expression as a tree. For now this class will only contain the query String. Later on, we can enrich this class by also storing its internal representation of the predicate tree. The future enrichment should not affect the de/serialization of this class.\n\nFollow-up:\nMy proposed \"SubmitRequirementExpression\" would be very similar to the existing \"Predicate\" class. Actually we want to reuse many existing predicates for submit requirements so both should be unified somehow. I could also use composition to solve this: Create a new SubmitRequirementExpression and store a Predicate internally.",
      "parentUuid": "12543b89_f2f80ab5",
      "range": {
        "startLine": 36,
        "startChar": 18,
        "endLine": 36,
        "endChar": 24
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39b09b12_adf3f2bc",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Should this method rather return an Optional, and returning Option#empty() means that there is no blocking condition?",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 33
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4401129_26d7b5c4",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "better: \"any change\"",
      "range": {
        "startLine": 43,
        "startChar": 75,
        "endLine": 43,
        "endChar": 86
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9004a2d_c1b920fa",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "I converted the other two expressions to optional. Thinking of blocking expressions again, I think it should be non-empty (non-null) because if blocking conditions are not available, then the requirement is meaningless and should be defined then.\n\nDone.",
      "parentUuid": "39b09b12_adf3f2bc",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 33
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "356d655d_7a9acf43",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "I modified blockingExpression not to allow empties/nulls. Explanation in the other comment same line.",
      "parentUuid": "f4401129_26d7b5c4",
      "range": {
        "startLine": 43,
        "startChar": 75,
        "endLine": 43,
        "endChar": 86
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39948c90_a1e8e647",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Unclear what this means. Doesn\u0027t it rather override the blocking condition?",
      "range": {
        "startLine": 48,
        "startChar": 38,
        "endLine": 48,
        "endChar": 62
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f452803_2b45a827",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "I rephrased the javadoc here and made the explanation more clear.\n\nDone.",
      "parentUuid": "39948c90_a1e8e647",
      "range": {
        "startLine": 48,
        "startChar": 38,
        "endLine": 48,
        "endChar": 62
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc2a9900_89662035",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "better \"overridable\"?",
      "range": {
        "startLine": 52,
        "startChar": 62,
        "endLine": 52,
        "endChar": 72
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e112c1c7_383c5ee6",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Yes. Done.",
      "parentUuid": "cc2a9900_89662035",
      "range": {
        "startLine": 52,
        "startChar": 62,
        "endLine": 52,
        "endChar": 72
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "921b4acf_23c2daa6",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Same as for the blockingExpression, should we rather return an Optional here?",
      "range": {
        "startLine": 54,
        "startChar": 18,
        "endLine": 54,
        "endChar": 24
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6aba09ee_5fac5415",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "921b4acf_23c2daa6",
      "range": {
        "startLine": 54,
        "startChar": 18,
        "endLine": 54,
        "endChar": 24
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5ce5545_e884682a",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "better: \"{@link SubmitRequirement} definition\"?",
      "range": {
        "startLine": 57,
        "startChar": 37,
        "endLine": 57,
        "endChar": 62
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a3acc3d3_0bc469b1",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f5ce5545_e884682a",
      "range": {
        "startLine": 57,
        "startChar": 37,
        "endLine": 57,
        "endChar": 62
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b8008e5_b40cce79",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "I wonder if we can find a name that can be clearly distinguished from \"overrideExpression\" to avoid confusion?",
      "range": {
        "startLine": 59,
        "startChar": 26,
        "endLine": 59,
        "endChar": 37
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4bf81dde_9666b82b",
        "filename": "java/com/google/gerrit/entities/SubmitRequirement.java",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Agree. \"canInherit\".\n\nDone.",
      "parentUuid": "4b8008e5_b40cce79",
      "range": {
        "startLine": 59,
        "startChar": 26,
        "endLine": 59,
        "endChar": 37
      },
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a02262c_8c5a63f5",
        "filename": "java/com/google/gerrit/server/project/ProjectConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 1319,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Should there be a saveSubmitRequirementSections(rc) call here?",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a5f6b4f6_e437a1c2",
        "filename": "java/com/google/gerrit/server/project/ProjectConfig.java",
        "patchSetId": 1
      },
      "lineNbr": 1319,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4a02262c_8c5a63f5",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f06baf3_e0e98caf",
        "filename": "javatests/com/google/gerrit/server/project/ProjectConfigTest.java",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-04-07T08:05:27Z",
      "side": 1,
      "message": "Maybe also test that:\n- the case of submit requirement names is preserved (that the name not converted to lower-case)\n- the behaviour when 2 submit requirements have names that only differ by capitalisation\n- an empty submit requirement (no fields set) is handled correctly",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47ccfd78_3d3b915a",
        "filename": "javatests/com/google/gerrit/server/project/ProjectConfigTest.java",
        "patchSetId": 1
      },
      "lineNbr": 204,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2021-04-08T17:41:31Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "8f06baf3_e0e98caf",
      "revId": "f2f47134164d050ebc463e5ed75fea81a296a2a7",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}