{
  "comments": [
    {
      "key": {
        "uuid": "443a3eaa_ed2765d5",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-12-15T08:26:54Z",
      "side": 1,
      "message": "This is only preventing the problem from the UI.  If the /type or /content REST API endpoint is called on the commit message file from the command line, or some other program, the 404 will still occur.",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8458b61b_4f006d28",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-12-15T08:59:18Z",
      "side": 1,
      "message": "/type: true, we should do both: prevent to do server roundtrip here (done already in latest patch set) for known MIME content type (text/plain) but still return text/plain in endpoint (still TODO). Will do it later today, unless someone else is faster.\n\n/content: works fine here, line 94 below, for both normal file and commit message. What is the URL for failing /content in your case?",
      "parentUuid": "443a3eaa_ed2765d5",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "443a3eaa_2d0a4d43",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-12-15T09:14:11Z",
      "side": 1,
      "message": "\u003e return text/plain in endpoint\n\nDone with https://gerrit-review.googlesource.com/#/c/62420\n\n\u003e What is the URL for failing /content in your case?\n\nIt\u0027s working fine in the UI.  I get 404 from:\n\n /changes/246/revisions/3d7a8ac7e8c17bc817dfddf14f5f721ca840d429/files/%2FCOMMIT_MSG/content\n\nvia curl.",
      "parentUuid": "8458b61b_4f006d28",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8458b61b_cf229dc8",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-12-15T09:38:35Z",
      "side": 1,
      "message": "Yes, the endpoint you are trying to use wasn\u0027t implemented yet, unfortunately. And even if it would work that way, the client would need to be adjusted. But we should fix this, of course. I will fix it later, unless someone else would do that faster ;-). So the hack that is used for now is, that the same request is returning the content of commit message in both cases: wether change edit for particular change exists or not (in which case it is retrieved from normal revision):\n\n  GET /changes/link:#change-id[\\{change-id\\}]/edit:message\n\nSee the discussion and TODO in this review: [1].\n\n* [1] https://gerrit-review.googlesource.com/#/c/61112/3/gerrit-server/src/main/java/com/google/gerrit/server/change/ChangeEdits.java",
      "parentUuid": "443a3eaa_2d0a4d43",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "443a3eaa_0d34b1fa",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-12-15T09:50:58Z",
      "side": 1,
      "message": "\u003e  the endpoint you are trying to use wasn\u0027t implemented yet, unfortunately.\n\nIt works as expected for a regular file on the change, returning a base64 encoded string.",
      "parentUuid": "8458b61b_cf229dc8",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "643d829e_2e032737",
        "filename": "gerrit-gwtui/src/main/java/com/google/gerrit/client/editor/EditScreen.java",
        "patchSetId": 19
      },
      "lineNbr": 84,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-12-15T10:06:25Z",
      "side": 1,
      "message": "Can you fix/extend it to return commit message content as well? Just add an if and return base64 encoded commit message:\n\n  changeUtil.getMessage(rsrc.getChange())\n\nsomething that existing endpoint in ChangeEdits is doing (without handling edit case, of course):\n\n  if (Patch.COMMIT_MSG.equals(path)) {\n    return BinaryResult.create(changeUtil.getMessage(rsrc.getChange())).base64();\n  }\n\nAs follow up commit we would need to extend the client to use this endpoints for notmal revisions instead of change edit endpoint and amend GET edit:message endpoint to throw 404 when no edit exist (as suggested by Shawn and Edwin), instead of returning the content of commit message from regular revision commit.",
      "parentUuid": "443a3eaa_0d34b1fa",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 84,
        "endChar": 12
      },
      "revId": "f4d693b5a217e0d6a773de26768cc70b4955daa9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}