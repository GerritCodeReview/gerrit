{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "68a473f1_b05ac531",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-03T00:13:01Z",
      "side": 1,
      "message": "It feels wrong to be passing it the rebaseAsUser this way, and this change makes that worse I think. How hard would it be to clean this up?",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d81deac_08a5d402",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-03T18:36:48Z",
      "side": 1,
      "message": "It won\u0027t be a trivial refactor mainly because when `onBehalfOfUploader` is `True`, a new `RevisionResource` is created with the original patch-set uploader impersonating as the current user. A refactor will probably involve adding an `impersonateUser` to `ChangeResource`.",
      "parentUuid": "68a473f1_b05ac531",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3001d376_bc647d9b",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-04T04:20:14Z",
      "side": 1,
      "message": "Is there a reason you can\u0027t just pass in impersonateUser as a extra parameter?",
      "parentUuid": "7d81deac_08a5d402",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71b37075_584e06b2",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-04T17:51:14Z",
      "side": 1,
      "message": "I can. It won\u0027t really be a cleanup though as we\u0027d be duplicating information we have. Let me push a patch-set.",
      "parentUuid": "3001d376_bc647d9b",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe420a7a_d0415681",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-04T17:56:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "71b37075_584e06b2",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "924a2d1d_109a49a2",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-05T04:34:14Z",
      "side": 1,
      "message": "Can you explain to me where the duplication is?",
      "parentUuid": "fe420a7a_d0415681",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f414f7aa_4d8f4124",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-05T04:40:13Z",
      "side": 1,
      "message": "By duplication I meant, the `rebaseAsUser` is also in the `RevisionResource`",
      "parentUuid": "924a2d1d_109a49a2",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "246dedea_e406269b",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-05T14:43:11Z",
      "side": 1,
      "message": "\u003e By duplication I meant, the `rebaseAsUser` is also in the `RevisionResource`\n\nOK, help me out here, why does your refactor not fix that?",
      "parentUuid": "f414f7aa_4d8f4124",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf32fd28_24fdd6ed",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-05T16:49:42Z",
      "side": 1,
      "message": "I didn\u0027t change `RebaseUtil.onBehalfOf` which still creates a new `RevisionResource` with on-behalf-of user and that `RevisionResource` is used to create a `BatchUpdate` as well. The `rebaseAsUser` I created is merely used for checks concerning committer email.",
      "parentUuid": "246dedea_e406269b",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "187b52d6_52651f75",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 564,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-05T19:21:43Z",
      "side": 1,
      "message": "Can you fix that too?",
      "parentUuid": "bf32fd28_24fdd6ed",
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8adcd1ec_d1ae4023",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 591,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2023-10-03T00:10:38Z",
      "side": 1,
      "message": "Is it permitted to expose account ids?",
      "range": {
        "startLine": 591,
        "startChar": 46,
        "endLine": 591,
        "endChar": 48
      },
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80346083_163908f6",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 591,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-03T18:36:48Z",
      "side": 1,
      "message": "I don\u0027t see ACLs restricting users from viewing account-ids of others. That said, I don\u0027t have to log the account-id. I can update it as below to address your concern:\n\n\n\"Cannot rebase using committer email \u0027%s\u0027. It can only be done using the primary email or the committer email of the uploader\"",
      "parentUuid": "8adcd1ec_d1ae4023",
      "range": {
        "startLine": 591,
        "startChar": 46,
        "endLine": 591,
        "endChar": 48
      },
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e557179_7481892b",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 591,
      "author": {
        "id": 1012457
      },
      "writtenOn": "2023-10-04T17:56:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "80346083_163908f6",
      "range": {
        "startLine": 591,
        "startChar": 46,
        "endLine": 591,
        "endChar": 48
      },
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68f37709_fb0bf930",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 605,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-10-03T10:51:19Z",
      "side": 1,
      "message": "This can be null?",
      "range": {
        "startLine": 605,
        "startChar": 14,
        "endLine": 605,
        "endChar": 34
      },
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8976ac64_7cdb5032",
        "filename": "java/com/google/gerrit/server/change/RebaseUtil.java",
        "patchSetId": 9
      },
      "lineNbr": 605,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-10-03T10:58:27Z",
      "side": 1,
      "message": "By bad, the if condition ends at 608, Ignore this comment.",
      "parentUuid": "68f37709_fb0bf930",
      "range": {
        "startLine": 605,
        "startChar": 14,
        "endLine": 605,
        "endChar": 34
      },
      "revId": "fb711465121f9b19303938d59457e608c2f9dbdc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}