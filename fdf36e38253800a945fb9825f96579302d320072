{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "85d92d27_cf5a3424",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2022-01-14T09:50:49Z",
      "side": 1,
      "message": "Youssef, could you please take a look on my comment https://gerrit-review.googlesource.com/c/gerrit/+/328019/comment/96be6eeb_edd58cb6/ ?",
      "revId": "fdf36e38253800a945fb9825f96579302d320072",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96be6eeb_edd58cb6",
        "filename": "java/com/google/gerrit/server/project/SubmitRequirementsUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1085901
      },
      "writtenOn": "2022-01-14T09:50:49Z",
      "side": 1,
      "message": "IIUC the javadoc and the code correctly, the legacyResult overwrites projectConfigResult if their values are different. I.e. result.put can add duplicated key to the builder, which is not allowed (https://guava.dev/releases/19.0/api/docs/com/google/common/collect/ImmutableMap.Builder.html#build()).\n\nYoussef, WDYT about this change?\nIf the put in this line can replace existing keys - could you please add a test for this situation?",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 16
      },
      "revId": "fdf36e38253800a945fb9825f96579302d320072",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "656428bb_bd9dbc80",
        "filename": "java/com/google/gerrit/server/project/SubmitRequirementsUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2022-01-14T10:06:47Z",
      "side": 1,
      "message": "Yes, it might or might not replace the entry depending if both entries are exact or not, for example they can differ if they have same name but different submittabilityExpression, etc...\n\nIn case they are exact, this line will replace the projectConfigEntry.\n\nAlso one more thing to note: submit requirements for legacy submit records are implicitly created by the gerrit server logic. See [1], [2].\n\n[1] https://gerrit.googlesource.com/gerrit/+/ddab7e65bc27adc8b4b303190a37a63b7b3cbd6a/java/com/google/gerrit/server/project/SubmitRequirementsAdapter.java#118\n\n[2] https://gerrit.googlesource.com/gerrit/+/ddab7e65bc27adc8b4b303190a37a63b7b3cbd6a/java/com/google/gerrit/server/project/SubmitRequirementsAdapter.java#140",
      "parentUuid": "96be6eeb_edd58cb6",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 16
      },
      "revId": "fdf36e38253800a945fb9825f96579302d320072",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44cf64f1_03371761",
        "filename": "java/com/google/gerrit/server/project/SubmitRequirementsUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 119,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2022-01-14T13:18:10Z",
      "side": 1,
      "message": "Good catch! I\u0027ve reverted this part of the change.\nI agree it would be good having a test to cover this (which would have failed for this change).",
      "parentUuid": "656428bb_bd9dbc80",
      "range": {
        "startLine": 119,
        "startChar": 6,
        "endLine": 119,
        "endChar": 16
      },
      "revId": "fdf36e38253800a945fb9825f96579302d320072",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}