{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "dea944c7_660444b2",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1693,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T14:46:20Z",
      "side": 1,
      "message": "This scenario should have a more meaningful name IMHO.\nWhat about shouldUpdateETagWhenChangeIndexingGetsDelayed ?",
      "range": {
        "startLine": 1693,
        "startChar": 14,
        "endLine": 1693,
        "endChar": 48
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7d17da87_cc29ccc0",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1693,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Sounds great, I was following the naming convention for other tests in this file which is quite enigmatic",
      "parentUuid": "dea944c7_660444b2",
      "range": {
        "startLine": 1693,
        "startChar": 14,
        "endLine": 1693,
        "endChar": 48
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46f51039_624e8179",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1693,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2022-12-12T23:07:43Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7d17da87_cc29ccc0",
      "range": {
        "startLine": 1693,
        "startChar": 14,
        "endLine": 1693,
        "endChar": 48
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2b25f83d_1d3fdbc6",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1701,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T07:34:23Z",
      "side": 1,
      "message": "Why are you disabling change index writes?",
      "range": {
        "startLine": 1701,
        "startChar": 4,
        "endLine": 1701,
        "endChar": 28
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43bc12da_59cafce8",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1701,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T14:24:32Z",
      "side": 1,
      "message": "Explanation below",
      "parentUuid": "2b25f83d_1d3fdbc6",
      "range": {
        "startLine": 1701,
        "startChar": 4,
        "endLine": 1701,
        "endChar": 28
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a8bccbe_af078a64",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1701,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T14:46:20Z",
      "side": 1,
      "message": "Understood, shall we add a comment for the reader that you are willing to simulate a stale index scenario?",
      "parentUuid": "43bc12da_59cafce8",
      "range": {
        "startLine": 1701,
        "startChar": 4,
        "endLine": 1701,
        "endChar": 28
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68119f75_fb312a4f",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1701,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Sure,will do",
      "parentUuid": "3a8bccbe_af078a64",
      "range": {
        "startLine": 1701,
        "startChar": 4,
        "endLine": 1701,
        "endChar": 28
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4e358e41_620e042d",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1701,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2022-12-12T23:07:43Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "68119f75_fb312a4f",
      "range": {
        "startLine": 1701,
        "startChar": 4,
        "endLine": 1701,
        "endChar": 28
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db21f961_4286a283",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T07:34:23Z",
      "side": 1,
      "message": "Are you basically disabling the reindex of the change and causing a stale index scenario?",
      "range": {
        "startLine": 1706,
        "startChar": 6,
        "endLine": 1706,
        "endChar": 29
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64f3f80e_a8f007f5",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T14:24:32Z",
      "side": 1,
      "message": "Yes, as I described in different comment issue is related to the situation when index is not up to date with the repository. I don\u0027t know how to simulate this situation without disabling the re-index. Basically I\u0027m not indexing one change so I can do it later manually and check if etag will be different because of \u0027last updated on\u0027 field from index changed.",
      "parentUuid": "db21f961_4286a283",
      "range": {
        "startLine": 1706,
        "startChar": 6,
        "endLine": 1706,
        "endChar": 29
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "086efdac_adb53813",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1706,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "64f3f80e_a8f007f5",
      "range": {
        "startLine": 1706,
        "startChar": 6,
        "endLine": 1706,
        "endChar": 29
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "605f4bf1_5271ede8",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1712,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T07:34:23Z",
      "side": 1,
      "message": "Looks like you are trying to cause problems intentionally here, rather than testing a real-life e2e scenario.",
      "range": {
        "startLine": 1711,
        "startChar": 4,
        "endLine": 1712,
        "endChar": 72
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73cb6a84_059cd81e",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1712,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T14:24:32Z",
      "side": 1,
      "message": "Explanation above, I\u0027m not sure how to reproduce it without making index stale on purpose",
      "parentUuid": "605f4bf1_5271ede8",
      "range": {
        "startLine": 1711,
        "startChar": 4,
        "endLine": 1712,
        "endChar": 72
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcb1f078_a9476ccf",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1712,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T14:46:20Z",
      "side": 1,
      "message": "The two assertions are basically checking that the index is stable, correct?\n(timestamp of the index is not the same as the timestamp of the change)",
      "parentUuid": "73cb6a84_059cd81e",
      "range": {
        "startLine": 1711,
        "startChar": 4,
        "endLine": 1712,
        "endChar": 72
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5958fd7d_79b275c0",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1712,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Yes",
      "parentUuid": "fcb1f078_a9476ccf",
      "range": {
        "startLine": 1711,
        "startChar": 4,
        "endLine": 1712,
        "endChar": 72
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "096e6f6c_70e3446f",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1716,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T07:34:23Z",
      "side": 1,
      "message": "I actually would assert the opposite: because you have forced the problem to appear, you should assert that ETag is the same.",
      "range": {
        "startLine": 1716,
        "startChar": 4,
        "endLine": 1716,
        "endChar": 59
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b933c414_b3eb4657",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1716,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T14:24:32Z",
      "side": 1,
      "message": "We have approved the change, indexing is disabled but repository is updated so ETag should change from the initial one but it should change because of the rsrc.getETag not because of the \u0027last updated on\u0027 field from the index. That\u0027s why I\u0027m checking if assertThat(newTs).isEqualTo(initialTs);",
      "parentUuid": "096e6f6c_70e3446f",
      "range": {
        "startLine": 1716,
        "startChar": 4,
        "endLine": 1716,
        "endChar": 59
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69e031e1_4063bf53",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1716,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T14:46:20Z",
      "side": 1,
      "message": "Gotcha, basically the reindexing did not happen so just some \"parts\" of the change are up-to-date but not others (e.g. submit record).",
      "parentUuid": "b933c414_b3eb4657",
      "range": {
        "startLine": 1716,
        "startChar": 4,
        "endLine": 1716,
        "endChar": 59
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d31dcde6_025a9c48",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1716,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Correct, all fields which are coming from index are not up to date rest is fine",
      "parentUuid": "69e031e1_4063bf53",
      "range": {
        "startLine": 1716,
        "startChar": 4,
        "endLine": 1716,
        "endChar": 59
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9d6df5fc_33839749",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1746,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T07:34:23Z",
      "side": 1,
      "message": "You are basically asserting that the ETag should change again, but actually, it changed already at L1716, right?",
      "range": {
        "startLine": 1746,
        "startChar": 4,
        "endLine": 1746,
        "endChar": 71
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dce1a53a_94b35054",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1746,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T14:24:32Z",
      "side": 1,
      "message": "Yes but it should be different again from the one at L1716 because of re-indexing. Now \u0027last updated on\u0027 field from index should be up to date so ETag will be finally correct. That\u0027s why in the next line I\u0027m checking if the rsrc.getETag is the same as in line 1716 and the change is caused because of the index update",
      "parentUuid": "9d6df5fc_33839749",
      "range": {
        "startLine": 1746,
        "startChar": 4,
        "endLine": 1746,
        "endChar": 71
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8261396_46eac2dc",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1746,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-07T14:46:20Z",
      "side": 1,
      "message": "Gotcha. I see now the whole point of the test. However, it should be made more readable for other people also, otherwise it may break in the future and other people may not get the sense of it straight away.\n\nIt is a real breakage IMHO because the submit status can change without any modification to the change data at all (e.g. advancing the target branch).\n\nCan you reproduce it also in that way?\n(push a change but DO NOT disable reindexing. Then push a commit to the target branch and check that the ETag would change).",
      "parentUuid": "dce1a53a_94b35054",
      "range": {
        "startLine": 1746,
        "startChar": 4,
        "endLine": 1746,
        "endChar": 71
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fc5af68_7de39a1d",
        "filename": "javatests/com/google/gerrit/acceptance/api/change/ChangeIT.java",
        "patchSetId": 6
      },
      "lineNbr": 1746,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-08-07T15:15:45Z",
      "side": 1,
      "message": "Sure, let me try to create new test for this scenario",
      "parentUuid": "f8261396_46eac2dc",
      "range": {
        "startLine": 1746,
        "startChar": 4,
        "endLine": 1746,
        "endChar": 71
      },
      "revId": "fe40da43b1a0e41691369f726e2eb1c95566a1fc",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}