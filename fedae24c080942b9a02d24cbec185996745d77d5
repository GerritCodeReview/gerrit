{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a4833393_3e55517b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 16
      },
      "lineNbr": 7,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-06-29T22:12:14Z",
      "side": 1,
      "message": "Two thoughts:\n\n1) Since you\u0027re trying to fix behavior introduced in a specific change (change I2f5a6aad3), it would be good to mention that change early in this message.\n\n2) Looking more at change I2f5a6aad3, I guess this subject should be something like `Optionally do not paginate internal change index queries` to be clear that the scope of the change is only intended to be internal change index queries.",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abf8f872_c2a79141",
        "filename": "/COMMIT_MSG",
        "patchSetId": 16
      },
      "lineNbr": 7,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T22:54:01Z",
      "side": 1,
      "message": "\u003e Two thoughts:\n\u003e \n\u003e 1) Since you\u0027re trying to fix behavior introduced in a specific change (change I2f5a6aad3), it would be good to mention that change early in this message.\n\n+1\n\n\u003e 2) Looking more at change I2f5a6aad3, I guess this subject should be something like `Optionally do not paginate internal change index queries` to be clear that the scope of the change is only intended to be internal change index queries.\n\nI thought the same, but then looking at I2f5a6aad3 it does something different than what is mention in its commit message. Rather than focusing on internal change index queries _only_ it refactors the way the initial page size is calculated for *any type* of queries, internal or not.\n\nBottom line: this change is addressing any change query, internal or not.",
      "parentUuid": "a4833393_3e55517b",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e78e7794_b7dede4c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 16
      },
      "lineNbr": 7,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-06-29T23:17:26Z",
      "side": 1,
      "message": "\u003e \u003e 2) Looking more at change I2f5a6aad3, I guess this subject should be something like `Optionally do not paginate internal change index queries` to be clear that the scope of the change is only intended to be internal change index queries.\n\u003e \n\u003e I thought the same, but then looking at I2f5a6aad3 it does something different than what is mention in its commit message. Rather than focusing on internal change index queries _only_ it refactors the way the initial page size is calculated for *any type* of queries, internal or not.\n\nRefactors, yes. Changes functional behavior, no (or at least that was the intent). There were already paginated index queries long before I2f5a6aad3 (just check the history of the `Paginated` interface).\n\n\u003e \n\u003e Bottom line: this change is addressing any change query, internal or not.\n\nIf it is, I think you could be affecting a lot more behavior than what I2f5a6aad3 did.",
      "parentUuid": "abf8f872_c2a79141",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18b6c5ed_cbeea969",
        "filename": "/COMMIT_MSG",
        "patchSetId": 16
      },
      "lineNbr": 7,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:39:26Z",
      "side": 1,
      "message": "\u003e \u003e \u003e 2) Looking more at change I2f5a6aad3, I guess this subject should be something like `Optionally do not paginate internal change index queries` to be clear that the scope of the change is only intended to be internal change index queries.\n\u003e \u003e \n\u003e \u003e I thought the same, but then looking at I2f5a6aad3 it does something different than what is mention in its commit message. Rather than focusing on internal change index queries _only_ it refactors the way the initial page size is calculated for *any type* of queries, internal or not.\n\u003e \n\u003e Refactors, yes. Changes functional behavior, no (or at least that was the intent). There were already paginated index queries long before I2f5a6aad3 (just check the history of the `Paginated` interface).\n\u003e \n\u003e \u003e \n\u003e \u003e Bottom line: this change is addressing any change query, internal or not.\n\u003e \n\u003e If it is, I think you could be affecting a lot more behavior than what I2f5a6aad3 did.\n\nI believe that statement is correct: hence the headline should stay _Add configuration to disable indexes pagination_ and possibly not mentioning I2f5a6aad3 is correct.",
      "parentUuid": "e78e7794_b7dede4c",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6089e5d0_67709384",
        "filename": "/COMMIT_MSG",
        "patchSetId": 16
      },
      "lineNbr": 34,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-06-29T22:12:14Z",
      "side": 1,
      "message": "Do the tests in this issue still fail if you set `PaginationType\u003d\u003dSEARCH_AFTER`? We had planned to change that to be the default on master before 3.8 was released, but it looks like we haven\u0027t done that yet.",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c4906484_615ff4ec",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "I have verified that when a user has restricted permissions and index.paginationType \u003d NONE, the PaginatingSource would continue to do pagination, which is not what is documented.\n\nHence the fix isn\u0027t complete yet.",
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "062fa204_2d6fa235",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3249,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-06-29T22:12:14Z",
      "side": 1,
      "message": "Is there anything specific to `change` index queries in the pagination itself?",
      "range": {
        "startLine": 3249,
        "startChar": 42,
        "endLine": 3249,
        "endChar": 48
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c7b4b78_56bd2b74",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3249,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T22:54:01Z",
      "side": 1,
      "message": "I believe all the code implemented is for the change queries: I do not see any other place where the pagination is enabled.\nAlso, the tests are only checking pagination on changes. Do you have any pointer where the pagination is applied to the other queries?\n\nLastly, the `--no-limit` is an option valid only for change queries, hence that\u0027s the only place where pagination code will be used.\n\nI agree with you that the pagination code is in the common code, but is skipped for all other queries.",
      "parentUuid": "062fa204_2d6fa235",
      "range": {
        "startLine": 3249,
        "startChar": 42,
        "endLine": 3249,
        "endChar": 48
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "122e2159_2e8b2e86",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3249,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "parentUuid": "0c7b4b78_56bd2b74",
      "range": {
        "startLine": 3249,
        "startChar": 42,
        "endLine": 3249,
        "endChar": 48
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66d8b13e_bd4c2f01",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3254,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 3254,
        "startChar": 0,
        "endLine": 3254,
        "endChar": 9
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b55377c_0cb2a698",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3260,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 3260,
        "startChar": 0,
        "endLine": 3260,
        "endChar": 9
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6df6048_fe2ee7a9",
        "filename": "Documentation/config-gerrit.txt",
        "patchSetId": 16
      },
      "lineNbr": 3269,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 3269,
        "startChar": 0,
        "endLine": 3269,
        "endChar": 9
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bfc962e_5c488a3d",
        "filename": "java/com/google/gerrit/index/PaginationType.java",
        "patchSetId": 16
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 19,
        "startChar": 5,
        "endLine": 19,
        "endChar": 14
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c2babc4_d4386a47",
        "filename": "java/com/google/gerrit/index/PaginationType.java",
        "patchSetId": 16
      },
      "lineNbr": 25,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 25,
        "startChar": 5,
        "endLine": 25,
        "endChar": 14
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb9f7391_70e9dec3",
        "filename": "java/com/google/gerrit/index/PaginationType.java",
        "patchSetId": 16
      },
      "lineNbr": 34,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T23:37:08Z",
      "side": 1,
      "message": "`unlimited` to be removed: pagination takes place also for the user-limited ones, where user\u0027s permissions are reducing the granularity of the results.",
      "range": {
        "startLine": 34,
        "startChar": 5,
        "endLine": 34,
        "endChar": 14
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9080091_aec9765e",
        "filename": "java/com/google/gerrit/server/query/change/ChangeQueryProcessor.java",
        "patchSetId": 16
      },
      "lineNbr": 171,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-06-29T22:12:14Z",
      "side": 1,
      "message": "This is not the same as what the behavior was prior to change I2f5a6aad. Specifically, the `isNoLimit` code wasn\u0027t there before: https://gerrit-review.googlesource.com/c/gerrit/+/345634/9/java/com/google/gerrit/index/query/QueryProcessor.java#388",
      "range": {
        "startLine": 171,
        "startChar": 10,
        "endLine": 171,
        "endChar": 41
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e492d98_34a15f90",
        "filename": "java/com/google/gerrit/server/query/change/ChangeQueryProcessor.java",
        "patchSetId": 16
      },
      "lineNbr": 171,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-06-29T22:54:01Z",
      "side": 1,
      "message": "This change is for disabling pagination for both internal and external queries, hence the initial page size *is* the effective limit for both of them.\n\nAlso the validation tests are passing, demonstrating that this is working as expected.",
      "parentUuid": "b9080091_aec9765e",
      "range": {
        "startLine": 171,
        "startChar": 10,
        "endLine": 171,
        "endChar": 41
      },
      "revId": "fedae24c080942b9a02d24cbec185996745d77d5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}