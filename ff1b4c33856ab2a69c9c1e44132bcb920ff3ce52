{
  "comments": [
    {
      "key": {
        "uuid": "03174a8c_656326a2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2013-12-02T07:44:03Z",
      "side": 1,
      "message": "Editing the commit message from the UI seems to change the line ending of the final line in the commit message.\n\n(I fixed this once before; I wonder if that got reverted somehow)",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_a146ded9",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "No PostInitStep.",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_617bf60a",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 37,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83d09a10_a146ded9",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_820b9ab2",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "no instanceof",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_8180fa98",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3cbde64_820b9ab2",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_620696af",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 175,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "no cast.",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_02106ad4",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/InitPlugins.java",
        "patchSetId": 2
      },
      "lineNbr": 175,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3cbde64_620696af",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_02e22ab8",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "You don\u0027t need this interface.\nInterface Inheritance is wrong approach to achieve what you want. And it doesn\u0027t scale. Imagine you would need other differentiation  for pre and post init actions like Site, Database, Index, Plugins you would need to create dozen new interfaces. In addition you need to cast to differentiate between initStep and PostStep.\n\nRight abstraction level here is to introduce new method(s) in IniStep class: \npostSiteInitRun() and add empty implementation to all classes that implement that interface. Or create a BaseInitStep and add empty method postSiteInitRun() to this class and derive all classes from it.\n\nNote: in Java 8 you would be able to add a default method in InitStep interface exactly in this case, without need to touch implementation classes:\n\n public interface InitStep {\n    default void postSiteInitRun() {}\n }",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_21980e1b",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T11:32:47Z",
      "side": 1,
      "message": "Yes, I agree that it would be cleaner to just add another method in InitStep. But since we are not using Java 8 yet, this would mean to break all existing implementations. I can easy adapt all InitSteps in core, but I\u0027m concerned about the plugins. I wonder if it\u0027s really worth breaking this?",
      "parentUuid": "a3cbde64_02e22ab8",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_a2189e00",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T12:56:32Z",
      "side": 1,
      "message": "If the only alternative to have these ugly casts and loose clean code and extensibility: we would take the same approach once we are on Java 8, then certainly yes.\n\nThe benefit from from breaking InitStep and adding new method to it you would more then obviously indicate to the plugin authors that we\u0027ve added new feature: ability to have site initialization actions. Without the breakage nobody is going to notice it ;-)\n\nBTW: the buildbot plugin was broken in every major Gerrit release until now, and has to be adjusted. Not to mention to be adjusted for all these new and shiny features. With Java 8 we would break less.",
      "parentUuid": "83d09a10_21980e1b",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_224aceea",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Ok, then I\u0027m adding this method to InitStep.",
      "parentUuid": "a3cbde64_a2189e00",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_c143e2c8",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "Wrong name: we create Site, Database, Index, Plugins, for all of them you may want to differentiate pre and post methods:\n\n* postSiteInitRun()\n* postDatabaseInitRun()\n* postSecondarayIndexInitRun()\n* postPluginInitRun()\n* ...",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_a2efbe99",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/PostInitStep.java",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T11:32:47Z",
      "side": 1,
      "message": "\u003e postSiteInitRun()\n \u003e postDatabaseInitRun()\n \u003e postSecondarayIndexInitRun()\n \u003e postPluginInitRun()\n\nThis is just overkill and I don\u0027t think that we need this. I\u0027m even not sure we can easily differentiate between these steps. First all init steps are executed then the site is created. Some things need to be done after the site was created, but what\u0027s the use of having hooks for steps within the site initialization?",
      "parentUuid": "83d09a10_c143e2c8",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_22fc8e5b",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/SitePathInitializer.java",
        "patchSetId": 2
      },
      "lineNbr": 114,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "remove the entire if.",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_424fd2f9",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/SitePathInitializer.java",
        "patchSetId": 2
      },
      "lineNbr": 114,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3cbde64_22fc8e5b",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a3cbde64_42019294",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/SitePathInitializer.java",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2013-12-02T10:13:10Z",
      "side": 1,
      "message": "no cast",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83d09a10_a1741e1a",
        "filename": "gerrit-pgm/src/main/java/com/google/gerrit/pgm/init/SitePathInitializer.java",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2013-12-02T14:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a3cbde64_42019294",
      "revId": "ff1b4c33856ab2a69c9c1e44132bcb920ff3ce52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}