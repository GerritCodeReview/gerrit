QUERY_BUILDER = [
  'src/main/java/com/google/gerrit/lucene/QueryBuilder.java',
]

java_library(
  name = 'query_builder',
  srcs = QUERY_BUILDER,
  deps = [
    '//gerrit-antlr:query_exception',
    '//gerrit-reviewdb:server',
    '//gerrit-server:server',
    '//lib:gwtorm',
    '//lib:guava',
    '//lib/lucene:lucene-core-and-backward-codecs',
  ],
  visibility = ['PUBLIC'],
)

java_library(
  name = 'lucene',
  srcs = glob(['src/main/java/**/*.java'], excludes = QUERY_BUILDER),
  deps = [
    ':query_builder',
    '//gerrit-antlr:query_exception',
    '//gerrit-common:annotations',
    '//gerrit-common:server',
    '//gerrit-extension-api:api',
    '//gerrit-reviewdb:server',
    '//gerrit-server:server',
    '//lib:guava',
    '//lib:gwtorm',
    '//lib/guice:guice',
    '//lib/guice:guice-assistedinject',
    '//lib/jgit/org.eclipse.jgit:jgit',
    '//lib/log:api',
    '//lib/lucene:lucene-analyzers-common',
    '//lib/lucene:lucene-core-and-backward-codecs',
    '//lib/lucene:lucene-misc',
  ],
  visibility = ['PUBLIC'],
)
