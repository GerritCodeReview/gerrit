include_defs('//lib/maven.defs')

VERSION = '1.4'
REPO = MAVEN_LOCAL

maven_jar(
  name = 'runtime',
  id = 'com.googlecode.prolog-cafe:prolog-runtime:' + VERSION,
  sha1 = None,
  license = 'prologcafe',
  repository = REPO,
)

maven_jar(
  name = 'compiler',
  id = 'com.googlecode.prolog-cafe:prolog-compiler:' + VERSION,
  sha1 = None,
  license = 'prologcafe',
  repository = REPO,
  deps = [
    ':io',
    ':runtime',
  ],
)

maven_jar(
  name = 'io',
  id = 'com.googlecode.prolog-cafe:prolog-io:' + VERSION,
  sha1 = None,
  license = 'prologcafe',
  repository = REPO,
  deps = [':runtime'],
  visibility = [],
)

maven_jar(
  name = 'cafeteria',
  id = 'com.googlecode.prolog-cafe:prolog-cafeteria:' + VERSION,
  sha1 = None,
  license = 'prologcafe',
  repository = REPO,
  attach_source = False,
  deps = [
    ':io',
    ':runtime',
  ],
  visibility = ['//gerrit-pgm:'],
)

java_binary(
  name = 'compiler_bin',
  main_class = 'BuckPrologCompiler',
  deps = [':compiler_lib'],
  visibility = ['PUBLIC'],
)

java_library(
  name = 'compiler_lib',
  srcs = ['java/BuckPrologCompiler.java'],
  deps = [
    ':compiler',
    ':runtime',
  ],
  visibility = ['//tools/eclipse:classpath'],
)
