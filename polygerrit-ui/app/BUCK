include_defs('//lib/js.defs')

ENTRY = 'elements/gr-app.html'

# TODO(davdo): zip_file almost does what we want,
# but it doesn't support prefix directory, so we need
# to layout this manually for now
genrule(
  name = 'polygerrit_ui',
  cmd = ';'.join([
    'cd $TMP',
    'mkdir -p $TMP/polygerrit_ui',
    'cp $(location :polygerrit) $TMP/polygerrit_ui',
    'zip -qr $OUT .',
  ]),
  out = 'polygerrit_ui.zip',
  visibility = ['PUBLIC'],
)

vulcanize(
  name = 'polygerrit',
  app = ENTRY,
  srcs = [
     ENTRY,
    'elements/gr-change-list.html',
    'elements/gr-change-list-item.html',
    'elements/gr-change-list-view.html',
    'elements/gr-change-view.html',
    'elements/gr-date-formatter.html',
    'elements/gr-diff-view.html',
    'elements/gr-file-list.html',
    'elements/gr-message.html',
    'elements/gr-messages-list.html',
    'elements/gr-search-bar.html',
    'favicon.ico',
    'index.html',
    'robots.txt',
    'scripts/app.js',
    'scripts/changes.js',
    'scripts/util.js',
    'styles/main.css',
  ],
)

