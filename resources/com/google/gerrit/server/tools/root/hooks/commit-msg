#!/bin/sh

set -eu

# /dev/urandom would be better, but it has to work on Mac too.
random=$((whoami ; hostname ; date) | sha1sum | awk '{print $1;}' )

# interpret-trailers returns 1 if the header is already there?
git interpret-trailers --in-place --if-missing --trailer "Change-Id: I$random" $1 || true
