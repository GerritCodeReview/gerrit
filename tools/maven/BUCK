include_defs('//VERSION')
include_defs('//tools/maven/package.defs')

TYPE = 'snapshot' if GERRIT_VERSION.endswith('-SNAPSHOT') else 'release'

maven_package(
  repository = 'gerrit-api-repository',
  url = 'gs://gerrit-api/%s' % TYPE,
  version = GERRIT_VERSION,
  jar = {
    'gerrit-extension-api': '//:extension-api',
    'gerrit-plugin-api': '//:plugin-api',
    'gerrit-plugin-gwtui': '//:plugin-gwtui',
  },
  src = {
    'gerrit-extension-api': '//:extension-api-src',
    'gerrit-plugin-api': '//:plugin-api-src',
    'gerrit-plugin-gwtui': '//:plugin-gwtui-src',
  },
)

python_binary(
  name = 'mvn',
  main = 'mvn.py',
  deps = ['//tools:util'],
)
