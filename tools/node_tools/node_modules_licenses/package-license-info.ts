// Copyright (C) 2020 The Android Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import {LicenseName, LicenseTypeName, PackageName, FilePath} from "./base-types";

export interface LicenseType {
  name: LicenseTypeName;
  allowed: boolean;
}

export type LicenseInfo = SharedFileLicenseInfo | PackageFileLicenseInfo;

interface LicenseInfoBase {
  name: LicenseName;
  type: LicenseType;
}

export interface SharedFileLicenseInfo extends LicenseInfoBase {
  sharedLicenseFile: string;
}

export interface PackageFileLicenseInfo extends LicenseInfoBase {
  packageLicenseFile: string;
}

export function isSharedFileLicenseInfo(licenseInfo: LicenseInfo): licenseInfo is SharedFileLicenseInfo {
  return (licenseInfo as SharedFileLicenseInfo).sharedLicenseFile !== undefined;
}

export function isPackageFileLicenseInfo(licenseInfo: LicenseInfo): licenseInfo is PackageFileLicenseInfo {
  return (licenseInfo as PackageFileLicenseInfo).packageLicenseFile !== undefined;
}

export type FilesFilter = (fileName: FilePath) => boolean;

export interface PackageInfo {
  name: PackageName;
  license: LicenseInfo;
  versions?: string[];
  filesFilter?: FilesFilter;
}


